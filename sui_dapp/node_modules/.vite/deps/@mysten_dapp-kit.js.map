{
  "version": 3,
  "sources": ["../../use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js", "../../use-sync-external-store/shim/with-selector.js", "../../cssesc/cssesc.js", "../../picocolors/picocolors.browser.js", "../../deepmerge/dist/cjs.js", "../../clsx/dist/clsx.mjs", "vanilla-extract-css-ns:src/components/styling/StyleMarker.css.ts.vanilla.css?source=OndoZXJlKCopIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtYm9keSk7CiAgZm9udC1mYW1pbHk6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udEZhbWlseSk7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ub3JtYWwpOwogIGZvbnQtc3R5bGU6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udFN0eWxlKTsKICBmb250LXdlaWdodDogdmFyKC0tZGFwcC1raXQtZm9udFdlaWdodHMtbm9ybWFsKTsKICBsaW5lLWhlaWdodDogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1saW5lSGVpZ2h0KTsKICBsZXR0ZXItc3BhY2luZzogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1sZXR0ZXJTcGFjaW5nKTsKfQo6d2hlcmUoYnV0dG9uKSB7CiAgYXBwZWFyYW5jZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7CiAgY29sb3I6IGluaGVyaXQ7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOwp9Cjp3aGVyZShhKSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGNvbG9yOiBpbmhlcml0OwogIG91dGxpbmU6IG5vbmU7Cn0KOndoZXJlKG9sLCB1bCkgewogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7Cn0KOndoZXJlKGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYpIHsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7CiAgbWFyZ2luOiAwOwp9", "../../@mysten/dapp-kit/src/components/styling/StyleMarker.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/ConnectModal.tsx", "../../@mysten/dapp-kit/src/constants/walletDefaults.ts", "../../@mysten/dapp-kit/src/utils/stateStorage.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useConnectWallet.ts", "../../@mysten/dapp-kit/src/constants/walletMutationKeys.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useWalletStore.ts", "../../@mysten/dapp-kit/src/contexts/walletContext.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useWallets.ts", "../../@mysten/dapp-kit/src/utils/walletUtils.ts", "../../@mysten/dapp-kit/src/components/icons/BackIcon.tsx", "../../@mysten/dapp-kit/src/components/icons/CloseIcon.tsx", "../../@mysten/dapp-kit/src/components/styling/StyleMarker.tsx", "../../@mysten/dapp-kit/src/constants/styleDataAttribute.ts", "../../@mysten/dapp-kit/src/components/ui/Heading.tsx", "../../@mysten/dapp-kit/src/components/ui/Heading.css.ts", "../../@mysten/dapp-kit/src/components/ui/IconButton.tsx", "../../@mysten/dapp-kit/src/components/ui/IconButton.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/ConnectModal.css.ts", "../../@mysten/dapp-kit/src/components/ui/Button.tsx", "../../@mysten/dapp-kit/src/components/ui/Button.css.ts", "../../@mysten/dapp-kit/src/components/ui/Text.tsx", "../../@mysten/dapp-kit/src/components/ui/Text.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/views/ConnectionStatus.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/views/ConnectionStatus.tsx", "../../@mysten/dapp-kit/src/components/connect-modal/InfoSection.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/InfoSection.tsx", "../../@mysten/dapp-kit/src/components/connect-modal/views/GettingStarted.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/views/GettingStarted.tsx", "../../@mysten/dapp-kit/src/components/connect-modal/views/WhatIsAWallet.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/views/WhatIsAWallet.tsx", "../../@mysten/dapp-kit/src/components/icons/SuiIcon.tsx", "../../@mysten/dapp-kit/src/components/connect-modal/wallet-list/WalletList.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/wallet-list/WalletListItem.tsx", "../../@mysten/dapp-kit/src/components/connect-modal/wallet-list/WalletListItem.css.ts", "../../@mysten/dapp-kit/src/components/connect-modal/wallet-list/WalletList.tsx", "../../@mysten/dapp-kit/src/hooks/wallet/useCurrentAccount.ts", "../../@mysten/dapp-kit/src/components/AccountDropdownMenu.tsx", "../../@mysten/dapp-kit/src/hooks/useSuiClientQuery.ts", "../../@mysten/dapp-kit/src/hooks/useSuiClient.ts", "../../@mysten/dapp-kit/src/components/SuiClientProvider.tsx", "../../@mysten/dapp-kit/src/hooks/useResolveSuiNSNames.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useAccounts.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useDisconnectWallet.ts", "../../@mysten/dapp-kit/src/errors/walletErrors.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useCurrentWallet.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useSwitchAccount.ts", "../../@mysten/dapp-kit/src/components/AccountDropdownMenu.css.ts", "../../@mysten/dapp-kit/src/components/icons/CheckIcon.tsx", "../../@mysten/dapp-kit/src/components/icons/ChevronIcon.tsx", "../../@mysten/dapp-kit/src/components/ConnectButton.tsx", "../../@mysten/dapp-kit/src/components/WalletProvider.tsx", "../../@mysten/dapp-kit/src/hooks/wallet/useAutoConnectWallet.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useSlushWallet.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useUnsafeBurnerWallet.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useWalletPropertiesChanged.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useWalletsChanged.ts", "../../@mysten/dapp-kit/src/themes/lightTheme.ts", "../../@mysten/dapp-kit/src/walletStore.ts", "../../@mysten/dapp-kit/src/components/styling/InjectedThemeStyles.tsx", "../../@mysten/dapp-kit/src/themes/themeContract.ts", "../../@mysten/dapp-kit/src/hooks/networkConfig.ts", "../../@mysten/dapp-kit/src/hooks/useSuiClientInfiniteQuery.ts", "../../@mysten/dapp-kit/src/hooks/useSuiClientMutation.ts", "../../@mysten/dapp-kit/src/hooks/useSuiClientQueries.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useSignAndExecuteTransaction.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useReportTransactionEffects.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useSignPersonalMessage.ts", "../../@mysten/dapp-kit/src/hooks/wallet/useSignTransaction.ts", "../../@wallet-standard/app/src/wallets.ts", "../../@wallet-standard/errors/src/codes.ts", "../../@wallet-standard/errors/src/messages.ts", "../../@wallet-standard/errors/src/message-formatter.ts", "../../@wallet-standard/features/src/connect.ts", "../../@wallet-standard/features/src/events.ts", "../../@wallet-standard/wallet/src/util.ts", "../../@mysten/wallet-standard/src/wallet.ts", "../../@mysten/wallet-standard/src/detect.ts", "../../@mysten/wallet-standard/src/chains.ts", "../../mitt/src/index.ts", "../../@mysten/window-wallet-core/src/web-wallet-channel/requests.ts", "../../jose/dist/webapi/lib/buffer_utils.js", "../../jose/dist/webapi/lib/base64.js", "../../jose/dist/webapi/util/base64url.js", "../../jose/dist/webapi/util/errors.js", "../../jose/dist/webapi/lib/is_object.js", "../../jose/dist/webapi/lib/private_symbols.js", "../../jose/dist/webapi/lib/jwt_claims_set.js", "../../jose/dist/webapi/jwks/remote.js", "../../jose/dist/webapi/util/decode_jwt.js", "../../@mysten/window-wallet-core/src/jwt-session/index.ts", "../../@mysten/window-wallet-core/src/web-wallet-channel/wallet-post-message-channel.ts", "../../@mysten/window-wallet-core/src/web-wallet-channel/responses.ts", "../../@mysten/window-wallet-core/src/web-wallet-channel/utils.ts", "../../@mysten/window-wallet-core/src/web-wallet-channel/dapp-post-message-channel.ts", "../../@mysten/slush-wallet/src/wallet/index.ts", "../../zustand/esm/vanilla.mjs", "../../zustand/esm/index.mjs", "../../@radix-ui/react-slot/src/slot.tsx", "../../@vanilla-extract/recipes/dist/createRuntimeFn-62c9670f.esm.js", "../../@noble/hashes/src/sha2.ts", "../../@noble/curves/src/utils.ts", "../../@noble/curves/src/abstract/modular.ts", "../../@noble/curves/src/abstract/curve.ts", "../../@noble/curves/src/abstract/edwards.ts", "../../@noble/curves/src/abstract/hash-to-curve.ts", "../../@noble/curves/src/abstract/montgomery.ts", "../../@noble/curves/src/ed25519.ts", "../../@mysten/sui/src/cryptography/intent.ts", "../../@mysten/sui/src/cryptography/signature-scheme.ts", "../../@noble/hashes/src/hmac.ts", "../../@noble/curves/src/abstract/weierstrass.ts", "../../@noble/curves/src/_shortw_utils.ts", "../../@noble/curves/src/nist.ts", "../../@noble/curves/src/p256.ts", "../../@noble/hashes/src/sha256.ts", "../../@mysten/sui/src/cryptography/publickey.ts", "../../@mysten/sui/src/keypairs/passkey/publickey.ts", "../../@mysten/sui/src/graphql/generated/queries.ts", "../../@mysten/sui/src/graphql/core.ts", "../../@mysten/sui/src/graphql/client.ts", "../../@mysten/sui/src/zklogin/jwt-decode.ts", "../../@mysten/sui/src/zklogin/poseidon.ts", "../../@mysten/sui/src/zklogin/utils.ts", "../../@mysten/sui/src/zklogin/bcs.ts", "../../@mysten/sui/src/zklogin/publickey.ts", "../../@mysten/sui/src/cryptography/signature.ts", "../../@mysten/sui/src/cryptography/keypair.ts", "../../@noble/hashes/src/pbkdf2.ts", "../../@scure/bip39/esm/index.js", "../../@mysten/sui/src/cryptography/mnemonics.ts", "../../@noble/hashes/src/sha512.ts", "../../@mysten/sui/src/keypairs/ed25519/ed25519-hd-key.ts", "../../@mysten/sui/src/keypairs/ed25519/publickey.ts", "../../@mysten/sui/src/keypairs/ed25519/keypair.ts", "../../zustand/esm/middleware.mjs", "../../@vanilla-extract/private/dist/vanilla-extract-private.esm.js", "../../@vanilla-extract/dynamic/dist/vanilla-extract-dynamic.esm.js", "../../@vanilla-extract/css/injectStyles/dist/vanilla-extract-css-injectStyles.browser.esm.js", "../../@vanilla-extract/css/dist/transformCss-830a230d.browser.esm.js", "../../modern-ahocorasick/dist/index.js", "../../@vanilla-extract/css/adapter/dist/vanilla-extract-css-adapter.browser.esm.js", "../../@vanilla-extract/css/dist/taggedTemplateLiteral-8e47dbd7.browser.esm.js", "../../css-what/lib/es/types.js", "../../css-what/lib/es/parse.js", "../../css-what/lib/es/stringify.js", "../../dedent/dist/dedent.mjs", "../../media-query-parser/node_modules/tslib/tslib.es6.js", "../../media-query-parser/compiled/parse/lexicalAnalysis.js", "../../media-query-parser/compiled/parse/simplifyAST.js", "../../media-query-parser/compiled/parse/syntacticAnalysis.js", "../../lru-cache/src/index.ts", "../../@vanilla-extract/css/dist/vanilla-extract-css.browser.esm.js"],
  "sourcesContent": ["/**\r\n * @license React\r\n * use-sync-external-store-shim/with-selector.development.js\r\n *\r\n * Copyright (c) Meta Platforms, Inc. and affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\n\"use strict\";\r\n\"production\" !== process.env.NODE_ENV &&\r\n  (function () {\r\n    function is(x, y) {\r\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\r\n    }\r\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\r\n      \"function\" ===\r\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\r\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\r\n    var React = require(\"react\"),\r\n      shim = require(\"use-sync-external-store/shim\"),\r\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\r\n      useSyncExternalStore = shim.useSyncExternalStore,\r\n      useRef = React.useRef,\r\n      useEffect = React.useEffect,\r\n      useMemo = React.useMemo,\r\n      useDebugValue = React.useDebugValue;\r\n    exports.useSyncExternalStoreWithSelector = function (\r\n      subscribe,\r\n      getSnapshot,\r\n      getServerSnapshot,\r\n      selector,\r\n      isEqual\r\n    ) {\r\n      var instRef = useRef(null);\r\n      if (null === instRef.current) {\r\n        var inst = { hasValue: !1, value: null };\r\n        instRef.current = inst;\r\n      } else inst = instRef.current;\r\n      instRef = useMemo(\r\n        function () {\r\n          function memoizedSelector(nextSnapshot) {\r\n            if (!hasMemo) {\r\n              hasMemo = !0;\r\n              memoizedSnapshot = nextSnapshot;\r\n              nextSnapshot = selector(nextSnapshot);\r\n              if (void 0 !== isEqual && inst.hasValue) {\r\n                var currentSelection = inst.value;\r\n                if (isEqual(currentSelection, nextSnapshot))\r\n                  return (memoizedSelection = currentSelection);\r\n              }\r\n              return (memoizedSelection = nextSnapshot);\r\n            }\r\n            currentSelection = memoizedSelection;\r\n            if (objectIs(memoizedSnapshot, nextSnapshot))\r\n              return currentSelection;\r\n            var nextSelection = selector(nextSnapshot);\r\n            if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\r\n              return (memoizedSnapshot = nextSnapshot), currentSelection;\r\n            memoizedSnapshot = nextSnapshot;\r\n            return (memoizedSelection = nextSelection);\r\n          }\r\n          var hasMemo = !1,\r\n            memoizedSnapshot,\r\n            memoizedSelection,\r\n            maybeGetServerSnapshot =\r\n              void 0 === getServerSnapshot ? null : getServerSnapshot;\r\n          return [\r\n            function () {\r\n              return memoizedSelector(getSnapshot());\r\n            },\r\n            null === maybeGetServerSnapshot\r\n              ? void 0\r\n              : function () {\r\n                  return memoizedSelector(maybeGetServerSnapshot());\r\n                }\r\n          ];\r\n        },\r\n        [getSnapshot, getServerSnapshot, selector, isEqual]\r\n      );\r\n      var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\r\n      useEffect(\r\n        function () {\r\n          inst.hasValue = !0;\r\n          inst.value = value;\r\n        },\r\n        [value]\r\n      );\r\n      useDebugValue(value);\r\n      return value;\r\n    };\r\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\r\n      \"function\" ===\r\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\r\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\r\n  })();\r\n", "'use strict';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\r\n} else {\r\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\r\n}\r\n", "/*! https://mths.be/cssesc v3.0.0 by @mathias */\r\n'use strict';\r\n\r\nvar object = {};\r\nvar hasOwnProperty = object.hasOwnProperty;\r\nvar merge = function merge(options, defaults) {\r\n\tif (!options) {\r\n\t\treturn defaults;\r\n\t}\r\n\tvar result = {};\r\n\tfor (var key in defaults) {\r\n\t\t// `if (defaults.hasOwnProperty(key) { … }` is not needed here, since\r\n\t\t// only recognized option names are used.\r\n\t\tresult[key] = hasOwnProperty.call(options, key) ? options[key] : defaults[key];\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nvar regexAnySingleEscape = /[ -,\\.\\/:-@\\[-\\^`\\{-~]/;\r\nvar regexSingleEscape = /[ -,\\.\\/:-@\\[\\]\\^`\\{-~]/;\r\nvar regexAlwaysEscape = /['\"\\\\]/;\r\nvar regexExcessiveSpaces = /(^|\\\\+)?(\\\\[A-F0-9]{1,6})\\x20(?![a-fA-F0-9\\x20])/g;\r\n\r\n// https://mathiasbynens.be/notes/css-escapes#css\r\nvar cssesc = function cssesc(string, options) {\r\n\toptions = merge(options, cssesc.options);\r\n\tif (options.quotes != 'single' && options.quotes != 'double') {\r\n\t\toptions.quotes = 'single';\r\n\t}\r\n\tvar quote = options.quotes == 'double' ? '\"' : '\\'';\r\n\tvar isIdentifier = options.isIdentifier;\r\n\r\n\tvar firstChar = string.charAt(0);\r\n\tvar output = '';\r\n\tvar counter = 0;\r\n\tvar length = string.length;\r\n\twhile (counter < length) {\r\n\t\tvar character = string.charAt(counter++);\r\n\t\tvar codePoint = character.charCodeAt();\r\n\t\tvar value = void 0;\r\n\t\t// If it’s not a printable ASCII character…\r\n\t\tif (codePoint < 0x20 || codePoint > 0x7E) {\r\n\t\t\tif (codePoint >= 0xD800 && codePoint <= 0xDBFF && counter < length) {\r\n\t\t\t\t// It’s a high surrogate, and there is a next character.\r\n\t\t\t\tvar extra = string.charCodeAt(counter++);\r\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) {\r\n\t\t\t\t\t// next character is low surrogate\r\n\t\t\t\t\tcodePoint = ((codePoint & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// It’s an unmatched surrogate; only append this code unit, in case\r\n\t\t\t\t\t// the next code unit is the high surrogate of a surrogate pair.\r\n\t\t\t\t\tcounter--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvalue = '\\\\' + codePoint.toString(16).toUpperCase() + ' ';\r\n\t\t} else {\r\n\t\t\tif (options.escapeEverything) {\r\n\t\t\t\tif (regexAnySingleEscape.test(character)) {\r\n\t\t\t\t\tvalue = '\\\\' + character;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = '\\\\' + codePoint.toString(16).toUpperCase() + ' ';\r\n\t\t\t\t}\r\n\t\t\t} else if (/[\\t\\n\\f\\r\\x0B]/.test(character)) {\r\n\t\t\t\tvalue = '\\\\' + codePoint.toString(16).toUpperCase() + ' ';\r\n\t\t\t} else if (character == '\\\\' || !isIdentifier && (character == '\"' && quote == character || character == '\\'' && quote == character) || isIdentifier && regexSingleEscape.test(character)) {\r\n\t\t\t\tvalue = '\\\\' + character;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = character;\r\n\t\t\t}\r\n\t\t}\r\n\t\toutput += value;\r\n\t}\r\n\r\n\tif (isIdentifier) {\r\n\t\tif (/^-[-\\d]/.test(output)) {\r\n\t\t\toutput = '\\\\-' + output.slice(1);\r\n\t\t} else if (/\\d/.test(firstChar)) {\r\n\t\t\toutput = '\\\\3' + firstChar + ' ' + output.slice(1);\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove spaces after `\\HEX` escapes that are not followed by a hex digit,\r\n\t// since they’re redundant. Note that this is only possible if the escape\r\n\t// sequence isn’t preceded by an odd number of backslashes.\r\n\toutput = output.replace(regexExcessiveSpaces, function ($0, $1, $2) {\r\n\t\tif ($1 && $1.length % 2) {\r\n\t\t\t// It’s not safe to remove the space, so don’t.\r\n\t\t\treturn $0;\r\n\t\t}\r\n\t\t// Strip the space.\r\n\t\treturn ($1 || '') + $2;\r\n\t});\r\n\r\n\tif (!isIdentifier && options.wrap) {\r\n\t\treturn quote + output + quote;\r\n\t}\r\n\treturn output;\r\n};\r\n\r\n// Expose default options (so they can be overridden globally).\r\ncssesc.options = {\r\n\t'escapeEverything': false,\r\n\t'isIdentifier': false,\r\n\t'quotes': 'single',\r\n\t'wrap': false\r\n};\r\n\r\ncssesc.version = '3.0.0';\r\n\r\nmodule.exports = cssesc;\r\n", "var x=String;\r\nvar create=function() {return {isColorSupported:false,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x,blackBright:x,redBright:x,greenBright:x,yellowBright:x,blueBright:x,magentaBright:x,cyanBright:x,whiteBright:x,bgBlackBright:x,bgRedBright:x,bgGreenBright:x,bgYellowBright:x,bgBlueBright:x,bgMagentaBright:x,bgCyanBright:x,bgWhiteBright:x}};\r\nmodule.exports=create();\r\nmodule.exports.createColors = create;\r\n", "'use strict';\r\n\r\nvar isMergeableObject = function isMergeableObject(value) {\r\n\treturn isNonNullObject(value)\r\n\t\t&& !isSpecial(value)\r\n};\r\n\r\nfunction isNonNullObject(value) {\r\n\treturn !!value && typeof value === 'object'\r\n}\r\n\r\nfunction isSpecial(value) {\r\n\tvar stringValue = Object.prototype.toString.call(value);\r\n\r\n\treturn stringValue === '[object RegExp]'\r\n\t\t|| stringValue === '[object Date]'\r\n\t\t|| isReactElement(value)\r\n}\r\n\r\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\r\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\r\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\r\n\r\nfunction isReactElement(value) {\r\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\r\n}\r\n\r\nfunction emptyTarget(val) {\r\n\treturn Array.isArray(val) ? [] : {}\r\n}\r\n\r\nfunction cloneUnlessOtherwiseSpecified(value, options) {\r\n\treturn (options.clone !== false && options.isMergeableObject(value))\r\n\t\t? deepmerge(emptyTarget(value), value, options)\r\n\t\t: value\r\n}\r\n\r\nfunction defaultArrayMerge(target, source, options) {\r\n\treturn target.concat(source).map(function(element) {\r\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\r\n\t})\r\n}\r\n\r\nfunction getMergeFunction(key, options) {\r\n\tif (!options.customMerge) {\r\n\t\treturn deepmerge\r\n\t}\r\n\tvar customMerge = options.customMerge(key);\r\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\r\n}\r\n\r\nfunction getEnumerableOwnPropertySymbols(target) {\r\n\treturn Object.getOwnPropertySymbols\r\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\r\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\r\n\t\t})\r\n\t\t: []\r\n}\r\n\r\nfunction getKeys(target) {\r\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\r\n}\r\n\r\nfunction propertyIsOnObject(object, property) {\r\n\ttry {\r\n\t\treturn property in object\r\n\t} catch(_) {\r\n\t\treturn false\r\n\t}\r\n}\r\n\r\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\r\nfunction propertyIsUnsafe(target, key) {\r\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\r\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\r\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\r\n}\r\n\r\nfunction mergeObject(target, source, options) {\r\n\tvar destination = {};\r\n\tif (options.isMergeableObject(target)) {\r\n\t\tgetKeys(target).forEach(function(key) {\r\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\r\n\t\t});\r\n\t}\r\n\tgetKeys(source).forEach(function(key) {\r\n\t\tif (propertyIsUnsafe(target, key)) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\r\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\r\n\t\t} else {\r\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\r\n\t\t}\r\n\t});\r\n\treturn destination\r\n}\r\n\r\nfunction deepmerge(target, source, options) {\r\n\toptions = options || {};\r\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\r\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\r\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\r\n\t// implementations can use it. The caller may not replace it.\r\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\r\n\r\n\tvar sourceIsArray = Array.isArray(source);\r\n\tvar targetIsArray = Array.isArray(target);\r\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\r\n\r\n\tif (!sourceAndTargetTypesMatch) {\r\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\r\n\t} else if (sourceIsArray) {\r\n\t\treturn options.arrayMerge(target, source, options)\r\n\t} else {\r\n\t\treturn mergeObject(target, source, options)\r\n\t}\r\n}\r\n\r\ndeepmerge.all = function deepmergeAll(array, options) {\r\n\tif (!Array.isArray(array)) {\r\n\t\tthrow new Error('first argument should be an array')\r\n\t}\r\n\r\n\treturn array.reduce(function(prev, next) {\r\n\t\treturn deepmerge(prev, next, options)\r\n\t}, {})\r\n};\r\n\r\nvar deepmerge_1 = deepmerge;\r\n\r\nmodule.exports = deepmerge_1;\r\n", "function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;", "[data-dapp-kit]:where(*), [data-dapp-kit] :where(*) {\n  box-sizing: border-box;\n  color: var(--dapp-kit-colors-body);\n  font-family: var(--dapp-kit-typography-fontFamily);\n  font-size: var(--dapp-kit-fontWeights-normal);\n  font-style: var(--dapp-kit-typography-fontStyle);\n  font-weight: var(--dapp-kit-fontWeights-normal);\n  line-height: var(--dapp-kit-typography-lineHeight);\n  letter-spacing: var(--dapp-kit-typography-letterSpacing);\n}\n[data-dapp-kit]:where(button), [data-dapp-kit] :where(button) {\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  background-color: transparent;\n  font-size: inherit;\n  font-family: inherit;\n  line-height: inherit;\n  letter-spacing: inherit;\n  color: inherit;\n  border: 0;\n  padding: 0;\n  margin: 0;\n}\n[data-dapp-kit]:where(a), [data-dapp-kit] :where(a) {\n  text-decoration: none;\n  color: inherit;\n  outline: none;\n}\n[data-dapp-kit]:where(ol, ul), [data-dapp-kit] :where(ol, ul) {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n[data-dapp-kit]:where(h1, h2, h3, h4, h5, h6), [data-dapp-kit] :where(h1, h2, h3, h4, h5, h6) {\n  font-size: inherit;\n  font-weight: inherit;\n  margin: 0;\n}", "import 'src/components/styling/StyleMarker.css.ts.vanilla.css?source=OndoZXJlKCopIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtYm9keSk7CiAgZm9udC1mYW1pbHk6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udEZhbWlseSk7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ub3JtYWwpOwogIGZvbnQtc3R5bGU6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udFN0eWxlKTsKICBmb250LXdlaWdodDogdmFyKC0tZGFwcC1raXQtZm9udFdlaWdodHMtbm9ybWFsKTsKICBsaW5lLWhlaWdodDogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1saW5lSGVpZ2h0KTsKICBsZXR0ZXItc3BhY2luZzogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1sZXR0ZXJTcGFjaW5nKTsKfQo6d2hlcmUoYnV0dG9uKSB7CiAgYXBwZWFyYW5jZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7CiAgY29sb3I6IGluaGVyaXQ7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOwp9Cjp3aGVyZShhKSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGNvbG9yOiBpbmhlcml0OwogIG91dGxpbmU6IG5vbmU7Cn0KOndoZXJlKG9sLCB1bCkgewogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7Cn0KOndoZXJlKGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYpIHsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7CiAgbWFyZ2luOiAwOwp9';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport * as Dialog from '@radix-ui/react-dialog';\nimport clsx from 'clsx';\nimport { useState } from 'react';\nimport type { ReactNode } from 'react';\n\nimport { DEFAULT_WALLET_FILTER } from '../../constants/walletDefaults.js';\nimport { useConnectWallet } from '../../hooks/wallet/useConnectWallet.js';\nimport { useWallets } from '../../hooks/wallet/useWallets.js';\nimport { getWalletUniqueIdentifier } from '../../utils/walletUtils.js';\nimport { BackIcon } from '../icons/BackIcon.js';\nimport { CloseIcon } from '../icons/CloseIcon.js';\nimport { StyleMarker } from '../styling/StyleMarker.js';\nimport { Heading } from '../ui/Heading.js';\nimport { IconButton } from '../ui/IconButton.js';\nimport * as styles from './ConnectModal.css.js';\nimport { ConnectionStatus } from './views/ConnectionStatus.js';\nimport { GettingStarted } from './views/GettingStarted.js';\nimport { WhatIsAWallet } from './views/WhatIsAWallet.js';\nimport { WalletList } from './wallet-list/WalletList.js';\n\ntype ConnectModalView = 'getting-started' | 'what-is-a-wallet' | 'connection-status';\n\ntype ControlledModalProps = {\n\t/** The controlled open state of the dialog. */\n\topen: boolean;\n\n\t/** Event handler called when the open state of the dialog changes. */\n\tonOpenChange: (open: boolean) => void;\n\n\tdefaultOpen?: never;\n};\n\ntype UncontrolledModalProps = {\n\topen?: never;\n\n\tonOpenChange?: never;\n\n\t/** The open state of the dialog when it is initially rendered. Use when you do not need to control its open state. */\n\tdefaultOpen?: boolean;\n};\n\ntype ConnectModalProps = {\n\t/** The trigger button that opens the dialog. */\n\ttrigger: NonNullable<ReactNode>;\n\n\t/** Filter the wallets shown in the modal. */\n\twalletFilter?: (wallet: WalletWithRequiredFeatures) => boolean;\n} & (ControlledModalProps | UncontrolledModalProps);\n\nexport function ConnectModal({\n\ttrigger,\n\topen,\n\tdefaultOpen,\n\tonOpenChange,\n\twalletFilter = DEFAULT_WALLET_FILTER,\n}: ConnectModalProps) {\n\tconst [isModalOpen, setModalOpen] = useState(open ?? defaultOpen);\n\tconst [currentView, setCurrentView] = useState<ConnectModalView>();\n\tconst [selectedWallet, setSelectedWallet] = useState<WalletWithRequiredFeatures>();\n\n\tconst wallets = useWallets().filter(walletFilter);\n\tconst { mutate, isError } = useConnectWallet();\n\n\tconst resetSelection = () => {\n\t\tsetSelectedWallet(undefined);\n\t\tsetCurrentView(undefined);\n\t};\n\n\tconst handleOpenChange = (open: boolean) => {\n\t\tif (!open) {\n\t\t\tresetSelection();\n\t\t}\n\t\tsetModalOpen(open);\n\t\tonOpenChange?.(open);\n\t};\n\n\tconst connectWallet = (wallet: WalletWithRequiredFeatures) => {\n\t\tsetCurrentView('connection-status');\n\t\tmutate(\n\t\t\t{ wallet },\n\t\t\t{\n\t\t\t\tonSuccess: () => handleOpenChange(false),\n\t\t\t},\n\t\t);\n\t};\n\n\tlet modalContent: ReactNode | undefined;\n\tswitch (currentView) {\n\t\tcase 'what-is-a-wallet':\n\t\t\tmodalContent = <WhatIsAWallet />;\n\t\t\tbreak;\n\t\tcase 'getting-started':\n\t\t\tmodalContent = <GettingStarted />;\n\t\t\tbreak;\n\t\tcase 'connection-status':\n\t\t\tmodalContent = (\n\t\t\t\t<ConnectionStatus\n\t\t\t\t\tselectedWallet={selectedWallet!}\n\t\t\t\t\thadConnectionError={isError}\n\t\t\t\t\tonRetryConnection={connectWallet}\n\t\t\t\t/>\n\t\t\t);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmodalContent = <WhatIsAWallet />;\n\t}\n\n\treturn (\n\t\t<Dialog.Root open={open ?? isModalOpen} onOpenChange={handleOpenChange}>\n\t\t\t<Dialog.Trigger asChild>{trigger}</Dialog.Trigger>\n\t\t\t<Dialog.Portal>\n\t\t\t\t<StyleMarker>\n\t\t\t\t\t<Dialog.Overlay className={styles.overlay}>\n\t\t\t\t\t\t<Dialog.Content className={styles.content} aria-describedby={undefined}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(styles.walletListContainer, {\n\t\t\t\t\t\t\t\t\t[styles.walletListContainerWithViewSelected]: !!currentView,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className={styles.walletListContent}>\n\t\t\t\t\t\t\t\t\t<Dialog.Title className={styles.title} asChild>\n\t\t\t\t\t\t\t\t\t\t<Heading as=\"h2\">Connect a Wallet</Heading>\n\t\t\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t\t\t<WalletList\n\t\t\t\t\t\t\t\t\t\twallets={wallets}\n\t\t\t\t\t\t\t\t\t\tselectedWalletName={getWalletUniqueIdentifier(selectedWallet)}\n\t\t\t\t\t\t\t\t\t\tonPlaceholderClick={() => setCurrentView('getting-started')}\n\t\t\t\t\t\t\t\t\t\tonSelect={(wallet) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tgetWalletUniqueIdentifier(selectedWallet) !==\n\t\t\t\t\t\t\t\t\t\t\t\tgetWalletUniqueIdentifier(wallet)\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedWallet(wallet);\n\t\t\t\t\t\t\t\t\t\t\t\tconnectWallet(wallet);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={styles.whatIsAWalletButton}\n\t\t\t\t\t\t\t\t\tonClick={() => setCurrentView('what-is-a-wallet')}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tWhat is a Wallet?\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(styles.viewContainer, {\n\t\t\t\t\t\t\t\t\t[styles.selectedViewContainer]: !!currentView,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className={styles.backButtonContainer}>\n\t\t\t\t\t\t\t\t\t<IconButton type=\"button\" aria-label=\"Back\" onClick={() => resetSelection()}>\n\t\t\t\t\t\t\t\t\t\t<BackIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{modalContent}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Dialog.Close className={styles.closeButtonContainer} asChild>\n\t\t\t\t\t\t\t\t<IconButton type=\"button\" aria-label=\"Close\">\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Dialog.Close>\n\t\t\t\t\t\t</Dialog.Content>\n\t\t\t\t\t</Dialog.Overlay>\n\t\t\t\t</StyleMarker>\n\t\t\t</Dialog.Portal>\n\t\t</Dialog.Root>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiWalletFeatures, WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport { SLUSH_WALLET_NAME } from '@mysten/slush-wallet';\n\nimport { createInMemoryStore } from '../utils/stateStorage.js';\n\nexport const SUI_WALLET_NAME = 'Sui Wallet';\n\nexport const DEFAULT_STORAGE =\n\ttypeof window !== 'undefined' && window.localStorage ? localStorage : createInMemoryStore();\n\nexport const DEFAULT_STORAGE_KEY = 'sui-dapp-kit:wallet-connection-info';\n\nconst SIGN_FEATURES = [\n\t'sui:signTransaction',\n\t'sui:signTransactionBlock',\n] satisfies (keyof SuiWalletFeatures)[];\n\nexport const DEFAULT_WALLET_FILTER = (wallet: WalletWithRequiredFeatures) =>\n\tSIGN_FEATURES.some((feature) => wallet.features[feature]);\n\nexport const DEFAULT_PREFERRED_WALLETS = [SUI_WALLET_NAME, SLUSH_WALLET_NAME];\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { StateStorage } from 'zustand/middleware';\n\nexport function createInMemoryStore(): StateStorage {\n\tconst store = new Map();\n\treturn {\n\t\tgetItem(key: string) {\n\t\t\treturn store.get(key);\n\t\t},\n\t\tsetItem(key: string, value: string) {\n\t\t\tstore.set(key, value);\n\t\t},\n\t\tremoveItem(key: string) {\n\t\t\tstore.delete(key);\n\t\t},\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type {\n\tStandardConnectInput,\n\tStandardConnectOutput,\n\tWalletAccount,\n\tWalletWithRequiredFeatures,\n} from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport { useWalletStore } from './useWalletStore.js';\n\ntype ConnectWalletArgs = {\n\t/** The wallet to connect to. */\n\twallet: WalletWithRequiredFeatures;\n\n\t/** An optional account address to connect to. Defaults to the first authorized account. */\n\taccountAddress?: string;\n} & StandardConnectInput;\n\ntype ConnectWalletResult = StandardConnectOutput;\n\ntype UseConnectWalletMutationOptions = Omit<\n\tUseMutationOptions<ConnectWalletResult, Error, ConnectWalletArgs, unknown>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for establishing a connection to a specific wallet.\n */\nexport function useConnectWallet({\n\tmutationKey,\n\t...mutationOptions\n}: UseConnectWalletMutationOptions = {}): UseMutationResult<\n\tConnectWalletResult,\n\tError,\n\tConnectWalletArgs,\n\tunknown\n> {\n\tconst setWalletConnected = useWalletStore((state) => state.setWalletConnected);\n\tconst setConnectionStatus = useWalletStore((state) => state.setConnectionStatus);\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.connectWallet(mutationKey),\n\t\tmutationFn: async ({ wallet, accountAddress, ...connectArgs }) => {\n\t\t\ttry {\n\t\t\t\tsetConnectionStatus('connecting');\n\n\t\t\t\tconst connectResult = await wallet.features['standard:connect'].connect(connectArgs);\n\t\t\t\tlet supportedIntents = connectResult.supportedIntents;\n\t\t\t\tif (!supportedIntents && wallet.features['sui:getCapabilities']) {\n\t\t\t\t\tsupportedIntents =\n\t\t\t\t\t\t(await wallet.features['sui:getCapabilities'].getCapabilities()).supportedIntents ?? [];\n\t\t\t\t}\n\t\t\t\tconst connectedSuiAccounts = connectResult.accounts.filter((account) =>\n\t\t\t\t\taccount.chains.some((chain) => chain.split(':')[0] === 'sui'),\n\t\t\t\t);\n\t\t\t\tconst selectedAccount = getSelectedAccount(connectedSuiAccounts, accountAddress);\n\n\t\t\t\tsetWalletConnected(wallet, connectedSuiAccounts, selectedAccount, supportedIntents);\n\n\t\t\t\treturn { accounts: connectedSuiAccounts };\n\t\t\t} catch (error) {\n\t\t\t\tsetConnectionStatus('disconnected');\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n\nfunction getSelectedAccount(connectedAccounts: readonly WalletAccount[], accountAddress?: string) {\n\tif (connectedAccounts.length === 0) {\n\t\treturn null;\n\t}\n\n\tif (accountAddress) {\n\t\tconst selectedAccount = connectedAccounts.find((account) => account.address === accountAddress);\n\t\treturn selectedAccount ?? connectedAccounts[0];\n\t}\n\n\treturn connectedAccounts[0];\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { MutationKey } from '@tanstack/react-query';\n\nexport const walletMutationKeys = {\n\tall: { baseScope: 'wallet' },\n\tconnectWallet: formMutationKeyFn('connect-wallet'),\n\tautoconnectWallet: formMutationKeyFn('autoconnect-wallet'),\n\tdisconnectWallet: formMutationKeyFn('disconnect-wallet'),\n\tsignPersonalMessage: formMutationKeyFn('sign-personal-message'),\n\tsignTransaction: formMutationKeyFn('sign-transaction'),\n\tsignAndExecuteTransaction: formMutationKeyFn('sign-and-execute-transaction'),\n\tswitchAccount: formMutationKeyFn('switch-account'),\n\treportTransactionEffects: formMutationKeyFn('report-transaction-effects'),\n};\n\nfunction formMutationKeyFn(baseEntity: string) {\n\treturn function mutationKeyFn(additionalKeys: MutationKey = []) {\n\t\treturn [{ ...walletMutationKeys.all, baseEntity }, ...additionalKeys];\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useContext } from 'react';\nimport { useStore } from 'zustand';\n\nimport { WalletContext } from '../../contexts/walletContext.js';\nimport type { StoreState } from '../../walletStore.js';\n\nexport function useWalletStore<T>(selector: (state: StoreState) => T): T {\n\tconst store = useContext(WalletContext);\n\tif (!store) {\n\t\tthrow new Error(\n\t\t\t'Could not find WalletContext. Ensure that you have set up the WalletProvider.',\n\t\t);\n\t}\n\treturn useStore(store, selector);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createContext } from 'react';\n\nimport type { WalletStore } from '../walletStore.js';\n\nexport const WalletContext = createContext<WalletStore | null>(null);\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Retrieves a list of registered wallets available to the dApp sorted by preference.\n */\nexport function useWallets() {\n\treturn useWalletStore((state) => state.wallets);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type {\n\tMinimallyRequiredFeatures,\n\tWallet,\n\tWalletWithFeatures,\n\tWalletWithRequiredFeatures,\n} from '@mysten/wallet-standard';\nimport { getWallets, isWalletWithRequiredFeatureSet } from '@mysten/wallet-standard';\n\nexport function getRegisteredWallets<AdditionalFeatures extends Wallet['features']>(\n\tpreferredWallets: string[],\n\twalletFilter?: (wallet: WalletWithRequiredFeatures) => boolean,\n) {\n\tconst walletsApi = getWallets();\n\tconst wallets = walletsApi.get();\n\n\tconst suiWallets = wallets.filter(\n\t\t(wallet): wallet is WalletWithFeatures<MinimallyRequiredFeatures & AdditionalFeatures> =>\n\t\t\tisWalletWithRequiredFeatureSet(wallet) && (!walletFilter || walletFilter(wallet)),\n\t);\n\n\treturn [\n\t\t// Preferred wallets, in order:\n\t\t...(preferredWallets\n\t\t\t.map((name) => suiWallets.find((wallet) => wallet.name === name))\n\t\t\t.filter(Boolean) as WalletWithFeatures<MinimallyRequiredFeatures & AdditionalFeatures>[]),\n\n\t\t// Wallets in default order:\n\t\t...suiWallets.filter((wallet) => !preferredWallets.includes(wallet.name)),\n\t];\n}\n\nexport function getWalletUniqueIdentifier(wallet?: Wallet) {\n\treturn wallet?.id ?? wallet?.name;\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ComponentProps } from 'react';\n\n// FIXME: Replace this with a 10x10 icon to match the CheckIcon, or alternatively make the CheckIcon bigger\n// Right now, the icons don't align on mobile :(\nexport function BackIcon(props: ComponentProps<'svg'>) {\n\treturn (\n\t\t<svg width={24} height={24} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M7.57 12.262c0 .341.13.629.403.895l5.175 5.059c.204.205.45.307.751.307.609 0 1.101-.485 1.101-1.087 0-.293-.123-.574-.349-.8L10.14 12.27l4.511-4.375A1.13 1.13 0 0 0 15 7.087C15 6.485 14.508 6 13.9 6c-.295 0-.54.103-.752.308l-5.175 5.058c-.28.28-.404.56-.404.896Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ComponentProps } from 'react';\n\nexport function CloseIcon(props: ComponentProps<'svg'>) {\n\treturn (\n\t\t<svg width={10} height={10} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M9.708.292a.999.999 0 0 0-1.413 0l-3.289 3.29L1.717.291A.999.999 0 0 0 .305 1.705l3.289 3.289-3.29 3.289a.999.999 0 1 0 1.413 1.412l3.29-3.289 3.288 3.29a.999.999 0 0 0 1.413-1.413l-3.29-3.29 3.29-3.288a.999.999 0 0 0 0-1.413Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Slot } from '@radix-ui/react-slot';\nimport type { ComponentPropsWithoutRef, ElementRef, ReactNode } from 'react';\nimport { forwardRef } from 'react';\n\nimport { styleDataAttribute } from '../../constants/styleDataAttribute.js';\n\nimport './StyleMarker.css.js';\n\ntype StyleMarker = {\n\tchildren: ReactNode;\n};\n\nexport const StyleMarker = forwardRef<\n\tElementRef<typeof Slot>,\n\tComponentPropsWithoutRef<typeof Slot>\n>(({ children, ...props }, forwardedRef) => (\n\t<Slot ref={forwardedRef} {...props} {...styleDataAttribute}>\n\t\t{children}\n\t</Slot>\n));\nStyleMarker.displayName = 'StyleMarker';\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport const styleDataAttributeName = 'data-dapp-kit';\n\nexport const styleDataAttributeSelector = `[${styleDataAttributeName}]`;\n\nexport const styleDataAttribute = { [styleDataAttributeName]: '' };\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Slot } from '@radix-ui/react-slot';\nimport clsx from 'clsx';\nimport { forwardRef } from 'react';\n\nimport { headingVariants } from './Heading.css.js';\nimport type { HeadingVariants } from './Heading.css.js';\n\ntype HeadingAsChildProps = {\n\tasChild?: boolean;\n\tas?: never;\n};\n\ntype HeadingAsProps = {\n\tas?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\tasChild?: never;\n};\n\ntype HeadingProps = (HeadingAsChildProps | HeadingAsProps) &\n\tReact.HTMLAttributes<HTMLHeadingElement> &\n\tHeadingVariants;\n\nconst Heading = forwardRef<HTMLHeadingElement, HeadingProps>(\n\t(\n\t\t{\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\tasChild = false,\n\t\t\tas: Tag = 'h1',\n\t\t\tsize,\n\t\t\tweight,\n\t\t\ttruncate,\n\t\t\t...headingProps\n\t\t},\n\t\tforwardedRef,\n\t) => {\n\t\treturn (\n\t\t\t<Slot\n\t\t\t\t{...headingProps}\n\t\t\t\tref={forwardedRef}\n\t\t\t\tclassName={clsx(headingVariants({ size, weight, truncate }), className)}\n\t\t\t>\n\t\t\t\t{asChild ? children : <Tag>{children}</Tag>}\n\t\t\t</Slot>\n\t\t);\n\t},\n);\nHeading.displayName = 'Heading';\n\nexport { Heading };\n", "import 'src/components/ui/Heading.css.ts.vanilla.css?source=LkhlYWRpbmdfaGVhZGluZ1ZhcmlhbnRzX3NpemVfc21fXzFhYTgzNWsxIHsKICBmb250LXNpemU6IHZhcigtLWRhcHAta2l0LWZvbnRTaXplcy1zbWFsbCk7Cn0KLkhlYWRpbmdfaGVhZGluZ1ZhcmlhbnRzX3NpemVfbWRfXzFhYTgzNWsyIHsKICBmb250LXNpemU6IHZhcigtLWRhcHAta2l0LWZvbnRTaXplcy1tZWRpdW0pOwp9Ci5IZWFkaW5nX2hlYWRpbmdWYXJpYW50c19zaXplX2xnX18xYWE4MzVrMyB7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250U2l6ZXMtbGFyZ2UpOwp9Ci5IZWFkaW5nX2hlYWRpbmdWYXJpYW50c19zaXplX3hsX18xYWE4MzVrNCB7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250U2l6ZXMteGxhcmdlKTsKfQouSGVhZGluZ19oZWFkaW5nVmFyaWFudHNfd2VpZ2h0X25vcm1hbF9fMWFhODM1azUgewogIGZvbnQtd2VpZ2h0OiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ub3JtYWwpOwp9Ci5IZWFkaW5nX2hlYWRpbmdWYXJpYW50c193ZWlnaHRfYm9sZF9fMWFhODM1azYgewogIGZvbnQtd2VpZ2h0OiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ib2xkKTsKfQouSGVhZGluZ19oZWFkaW5nVmFyaWFudHNfdHJ1bmNhdGVfdHJ1ZV9fMWFhODM1azcgewogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQ==';\nimport { createRuntimeFn as _7a468 } from '@vanilla-extract/recipes/createRuntimeFn';\nexport var headingVariants = _7a468({defaultClassName:'Heading__1aa835k0',variantClassNames:{size:{sm:'Heading_headingVariants_size_sm__1aa835k1',md:'Heading_headingVariants_size_md__1aa835k2',lg:'Heading_headingVariants_size_lg__1aa835k3',xl:'Heading_headingVariants_size_xl__1aa835k4'},weight:{normal:'Heading_headingVariants_weight_normal__1aa835k5',bold:'Heading_headingVariants_weight_bold__1aa835k6'},truncate:{true:'Heading_headingVariants_truncate_true__1aa835k7'}},defaultVariants:{size:'lg',weight:'bold'},compoundVariants:[]});", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Slot } from '@radix-ui/react-slot';\nimport clsx from 'clsx';\nimport type { ButtonHTMLAttributes } from 'react';\nimport { forwardRef } from 'react';\n\nimport * as styles from './IconButton.css.js';\n\ntype IconButtonProps = {\n\tasChild?: boolean;\n\t'aria-label': string;\n} & ButtonHTMLAttributes<HTMLButtonElement>;\n\nconst IconButton = forwardRef<HTMLButtonElement, IconButtonProps>(\n\t({ className, asChild = false, ...props }, forwardedRef) => {\n\t\tconst Comp = asChild ? Slot : 'button';\n\t\treturn <Comp {...props} className={clsx(styles.container, className)} ref={forwardedRef} />;\n\t},\n);\nIconButton.displayName = 'Button';\n\nexport { IconButton };\n", "import 'src/components/ui/IconButton.css.ts.vanilla.css?source=Lkljb25CdXR0b25fY29udGFpbmVyX19zNm43YnEwIHsKICBib3JkZXItcmFkaXVzOiA5OTk5cHg7CiAgcGFkZGluZzogOHB4OwogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtaWNvbkJ1dHRvbik7CiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFwcC1raXQtYmFja2dyb3VuZENvbG9ycy1pY29uQnV0dG9uKTsKfQouSWNvbkJ1dHRvbl9jb250YWluZXJfX3M2bjdicTA6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcHAta2l0LWJhY2tncm91bmRDb2xvcnMtaWNvbkJ1dHRvbkhvdmVyKTsKfQ==';\nexport var container = 'IconButton_container__s6n7bq0';", "import 'src/components/connect-modal/ConnectModal.css.ts.vanilla.css?source=#H4sIAAAAAAAAA61UTW8aMRC98yt8iUSkOlrSkJDNpS2nSq1aKVJzjMx6dteN117Zs0BS8d8rfwAh6wAS4QB4vPNm5s17ezHVSkGBPzVn8lHPwUj2/PhYvUxebjPyb0DIjBVPldGd4rTQUpuczJkZUspZ29IngXT7wNTdW9o4rF8B6vwuQnCjW1oKiZBAkF0qrdVWoNAqJ6VYAnchoSxgTjL3/4UKxWGZk9v1526wGlzsDIQCJcRxRn6clnEuVEUllJiTSbvsJxVaISiMaZensPDbiIaZyII2HAw1jIvO9vJdWNClZKYC/3i6TBHAZ5q/y9FMI+omJ6NrNxwhYdL1yYiqfnXkwraSPeeklOAD7pdyYaAIsIWWXaPczd/OoiifaaQnJ7ZlBdAZ4ALAP+HkU0q9yEktOA+xRihaQyg6zua1j7HlJjYZb2MLwbHOyU2WpdayqBl+t18fmJSA3zpEreKKPp+yonsotOLrJUV5rAl628NcwGKqFTKhwMTqV776hkilFewgXWbtltnKOHpGfWQLEgoE/idRYbxbIazqLYCbLrDyNv06CH+jFDazWnbou0TdbjsMSrlMsl9IbSGNf3MIP6m93nr9Xn8Ii9Md/01Sw+/T6S7PhFTMjXgVWuht5WRj75/jNU+36UkO++rYWY9o5UFg7SR2H+UWW2MpDa8GXxrgghFbGABFmOJk6Py89un1pF2e+8zDL9D+FEYv7vxFhBtl2VkIeNGM16egys0RDVO21KbJw1/JEIZ0nJ19Iu7bu3jVa+nQyyNh4D7I++5PrLWffsihR/Ww3yYf9BY8VLav6j3r9RczZoV1Noy225Fu9ipiayPUU4wd1cdeSScXs/oP5e4DaPYIAAA=';\nexport var backButtonContainer = 'ConnectModal_backButtonContainer__gz8z96';\nexport var closeButtonContainer = 'ConnectModal_closeButtonContainer__gz8z97';\nexport var content = 'ConnectModal_content__gz8z92';\nexport var overlay = 'ConnectModal_overlay__gz8z90';\nexport var selectedViewContainer = 'ConnectModal_selectedViewContainer__gz8z95';\nexport var title = 'ConnectModal_title__gz8z91';\nexport var viewContainer = 'ConnectModal_viewContainer__gz8z94';\nexport var walletListContainer = 'ConnectModal_walletListContainer__gz8z99';\nexport var walletListContainerWithViewSelected = 'ConnectModal_walletListContainerWithViewSelected__gz8z9a';\nexport var walletListContent = 'ConnectModal_walletListContent__gz8z98';\nexport var whatIsAWalletButton = 'ConnectModal_whatIsAWalletButton__gz8z93';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Slot } from '@radix-ui/react-slot';\nimport clsx from 'clsx';\nimport type { ButtonHTMLAttributes } from 'react';\nimport { forwardRef } from 'react';\n\nimport { buttonVariants } from './Button.css.js';\nimport type { ButtonVariants } from './Button.css.js';\n\ntype ButtonProps = {\n\tasChild?: boolean;\n} & ButtonHTMLAttributes<HTMLButtonElement> &\n\tButtonVariants;\n\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\n\t({ className, variant, size, asChild = false, ...props }, forwardedRef) => {\n\t\tconst Comp = asChild ? Slot : 'button';\n\t\treturn (\n\t\t\t<Comp\n\t\t\t\t{...props}\n\t\t\t\tclassName={clsx(buttonVariants({ variant, size }), className)}\n\t\t\t\tref={forwardedRef}\n\t\t\t/>\n\t\t);\n\t},\n);\nButton.displayName = 'Button';\n\nexport { Button };\n", "import 'src/components/ui/Button.css.ts.vanilla.css?source=#H4sIAAAAAAAAA62TwVLCMBCG732KPcohDEV0mPSmF59Aj520Ce1KmsQkhVaHd3fS0gGsIoyemtl/d79/N+n0ofZeqzTrPs/MIlPepWkTu2X8NoOPCICjM5K1FFBJVIKspGiSCIBJLBRBLypHIRfKCxvCr7XzuGpJrpUXyh9LK6082QosSk9hw+wNIZwZQ9boSdBeOsmRSnCsq0kS7aLpeYOUo2OZFLxzqg3L0bcUZtO7M8Wb/pAaixWz7dAs7npkLF8XVteKk1xLbUdGDwmPQXdk36ZnTcKc3xfmP6VnuiGuZFxvRzV9eFx09Wy01Bth/2PCp9DoEgu69uG9DBbmPVxbLizZIvclhdg0ySHofCsFBacl8qPwDyY7cW9wj7r0Cr6mXz3Kn7Z5Qv91mw7fRVrxAX17vEXLONZuRAxhPPxEAIZxjqqgsDQNxPdh6ed5shh4i4t5ktlCnOICCuYL00AS7T4BZ4uE22sEAAA=';\nimport { createRuntimeFn as _7a468 } from '@vanilla-extract/recipes/createRuntimeFn';\nexport var buttonVariants = _7a468({defaultClassName:'Button_buttonVariants__x1s81q0',variantClassNames:{variant:{primary:'Button_buttonVariants_variant_primary__x1s81q1',outline:'Button_buttonVariants_variant_outline__x1s81q2'},size:{md:'Button_buttonVariants_size_md__x1s81q3',lg:'Button_buttonVariants_size_lg__x1s81q4'}},defaultVariants:{variant:'primary',size:'md'},compoundVariants:[]});", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Slot } from '@radix-ui/react-slot';\nimport clsx from 'clsx';\nimport { forwardRef } from 'react';\n\nimport { textVariants } from './Text.css.js';\nimport type { TextVariants } from './Text.css.js';\n\ntype TextAsChildProps = {\n\tasChild?: boolean;\n\tas?: never;\n};\n\ntype TextDivProps = { as: 'div'; asChild?: never };\n\ntype TextProps = (TextAsChildProps | TextDivProps) &\n\tReact.HTMLAttributes<HTMLDivElement> &\n\tTextVariants;\n\nconst Text = forwardRef<HTMLDivElement, TextProps>(\n\t(\n\t\t{\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\tasChild = false,\n\t\t\tas: Tag = 'div',\n\t\t\tsize,\n\t\t\tweight,\n\t\t\tcolor,\n\t\t\tmono,\n\t\t\t...textProps\n\t\t},\n\t\tforwardedRef,\n\t) => {\n\t\treturn (\n\t\t\t<Slot\n\t\t\t\t{...textProps}\n\t\t\t\tref={forwardedRef}\n\t\t\t\tclassName={clsx(textVariants({ size, weight, color, mono }), className)}\n\t\t\t>\n\t\t\t\t{asChild ? children : <Tag>{children}</Tag>}\n\t\t\t</Slot>\n\t\t);\n\t},\n);\nText.displayName = 'Text';\n\nexport { Text };\n", "import 'src/components/ui/Text.css.ts.vanilla.css?source=LlRleHRfdGV4dFZhcmlhbnRzX3NpemVfc21fXzJidjF1cjEgewogIGZvbnQtc2l6ZTogdmFyKC0tZGFwcC1raXQtZm9udFNpemVzLXNtYWxsKTsKfQouVGV4dF90ZXh0VmFyaWFudHNfd2VpZ2h0X25vcm1hbF9fMmJ2MXVyMiB7CiAgZm9udC13ZWlnaHQ6IHZhcigtLWRhcHAta2l0LWZvbnRXZWlnaHRzLW5vcm1hbCk7Cn0KLlRleHRfdGV4dFZhcmlhbnRzX3dlaWdodF9tZWRpdW1fXzJidjF1cjMgewogIGZvbnQtd2VpZ2h0OiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1tZWRpdW0pOwp9Ci5UZXh0X3RleHRWYXJpYW50c193ZWlnaHRfYm9sZF9fMmJ2MXVyNCB7CiAgZm9udC13ZWlnaHQ6IHZhcigtLWRhcHAta2l0LWZvbnRXZWlnaHRzLWJvbGQpOwp9Ci5UZXh0X3RleHRWYXJpYW50c19jb2xvcl9tdXRlZF9fMmJ2MXVyNSB7CiAgY29sb3I6IHZhcigtLWRhcHAta2l0LWNvbG9ycy1ib2R5TXV0ZWQpOwp9Ci5UZXh0X3RleHRWYXJpYW50c19jb2xvcl9kYW5nZXJfXzJidjF1cjYgewogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtYm9keURhbmdlcik7Cn0KLlRleHRfdGV4dFZhcmlhbnRzX21vbm9fdHJ1ZV9fMmJ2MXVyNyB7CiAgZm9udC1mYW1pbHk6IHVpLW1vbm9zcGFjZSwgU0ZNb25vLVJlZ3VsYXIsIE1lbmxvLCBNb25hY28sIENvbnNvbGFzLCAiTGliZXJhdGlvbiBNb25vIiwgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOwp9';\nimport { createRuntimeFn as _7a468 } from '@vanilla-extract/recipes/createRuntimeFn';\nexport var textVariants = _7a468({defaultClassName:'Text__2bv1ur0',variantClassNames:{size:{sm:'Text_textVariants_size_sm__2bv1ur1'},weight:{normal:'Text_textVariants_weight_normal__2bv1ur2',medium:'Text_textVariants_weight_medium__2bv1ur3',bold:'Text_textVariants_weight_bold__2bv1ur4'},color:{muted:'Text_textVariants_color_muted__2bv1ur5',danger:'Text_textVariants_color_danger__2bv1ur6'},mono:{true:'Text_textVariants_mono_true__2bv1ur7'}},defaultVariants:{size:'sm',weight:'normal'},compoundVariants:[]});", "import 'src/components/connect-modal/views/ConnectionStatus.css.ts.vanilla.css?source=LkNvbm5lY3Rpb25TdGF0dXNfY29udGFpbmVyX19uY2ttMmQwIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICB3aWR0aDogMTAwJTsKfQouQ29ubmVjdGlvblN0YXR1c193YWxsZXRJY29uX19uY2ttMmQxIHsKICBvYmplY3QtZml0OiBjb3ZlcjsKICB3aWR0aDogNzJweDsKICBoZWlnaHQ6IDcycHg7CiAgYm9yZGVyLXJhZGl1czogdmFyKC0tZGFwcC1raXQtcmFkaWktbGFyZ2UpOwp9Ci5Db25uZWN0aW9uU3RhdHVzX3RpdGxlX19uY2ttMmQyIHsKICBtYXJnaW4tdG9wOiAxMnB4Owp9Ci5Db25uZWN0aW9uU3RhdHVzX2Nvbm5lY3Rpb25TdGF0dXNfX25ja20yZDMgewogIG1hcmdpbi10b3A6IDRweDsKfQouQ29ubmVjdGlvblN0YXR1c19yZXRyeUJ1dHRvbkNvbnRhaW5lcl9fbmNrbTJkNCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMjBweDsKICByaWdodDogMjBweDsKfQ==';\nexport var connectionStatus = 'ConnectionStatus_connectionStatus__nckm2d3';\nexport var container = 'ConnectionStatus_container__nckm2d0';\nexport var retryButtonContainer = 'ConnectionStatus_retryButtonContainer__nckm2d4';\nexport var title = 'ConnectionStatus_title__nckm2d2';\nexport var walletIcon = 'ConnectionStatus_walletIcon__nckm2d1';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithRequiredFeatures } from '@mysten/wallet-standard';\n\nimport { Button } from '../../ui/Button.js';\nimport { Heading } from '../../ui/Heading.js';\nimport { Text } from '../../ui/Text.js';\nimport * as styles from './ConnectionStatus.css.js';\n\ntype ConnectionStatusProps = {\n\tselectedWallet: WalletWithRequiredFeatures;\n\thadConnectionError: boolean;\n\tonRetryConnection: (selectedWallet: WalletWithRequiredFeatures) => void;\n};\n\nexport function ConnectionStatus({\n\tselectedWallet,\n\thadConnectionError,\n\tonRetryConnection,\n}: ConnectionStatusProps) {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t{selectedWallet.icon && (\n\t\t\t\t<img\n\t\t\t\t\tclassName={styles.walletIcon}\n\t\t\t\t\tsrc={selectedWallet.icon}\n\t\t\t\t\talt={`${selectedWallet.name} logo`}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<div className={styles.title}>\n\t\t\t\t<Heading as=\"h2\" size=\"xl\">\n\t\t\t\t\tOpening {selectedWallet.name}\n\t\t\t\t</Heading>\n\t\t\t</div>\n\t\t\t<div className={styles.connectionStatus}>\n\t\t\t\t{hadConnectionError ? (\n\t\t\t\t\t<Text color=\"danger\">Connection failed</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text color=\"muted\">Confirm connection in the wallet...</Text>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hadConnectionError ? (\n\t\t\t\t<div className={styles.retryButtonContainer}>\n\t\t\t\t\t<Button type=\"button\" variant=\"outline\" onClick={() => onRetryConnection(selectedWallet)}>\n\t\t\t\t\t\tRetry Connection\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n", "import 'src/components/connect-modal/InfoSection.css.ts.vanilla.css?source=LkluZm9TZWN0aW9uX2NvbnRhaW5lcl9fMXd0aW9pNzAgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDRweDsKfQ==';\nexport var container = 'InfoSection_container__1wtioi70';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Heading } from '../ui/Heading.js';\nimport { Text } from '../ui/Text.js';\nimport * as styles from './InfoSection.css.js';\n\ntype InfoSectionProps = {\n\ttitle: string;\n\tchildren: string;\n};\n\nexport function InfoSection({ title, children }: InfoSectionProps) {\n\treturn (\n\t\t<section className={styles.container}>\n\t\t\t<Heading as=\"h3\" size=\"sm\" weight=\"normal\">\n\t\t\t\t{title}\n\t\t\t</Heading>\n\t\t\t<Text weight=\"medium\" color=\"muted\">\n\t\t\t\t{children}\n\t\t\t</Text>\n\t\t</section>\n\t);\n}\n", "import 'src/components/connect-modal/views/GettingStarted.css.ts.vanilla.css?source=LkdldHRpbmdTdGFydGVkX2NvbnRhaW5lcl9fMWZwMDdlMTAgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9Ci5HZXR0aW5nU3RhcnRlZF9jb250ZW50X18xZnAwN2UxMSB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGZsZXgtZ3JvdzogMTsKICBnYXA6IDIwcHg7CiAgcGFkZGluZzogNDBweDsKfQouR2V0dGluZ1N0YXJ0ZWRfaW5zdGFsbEJ1dHRvbkNvbnRhaW5lcl9fMWZwMDdlMTIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDIwcHg7CiAgcmlnaHQ6IDIwcHg7Cn0=';\nexport var container = 'GettingStarted_container__1fp07e10';\nexport var content = 'GettingStarted_content__1fp07e11';\nexport var installButtonContainer = 'GettingStarted_installButtonContainer__1fp07e12';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Button } from '../../ui/Button.js';\nimport { Heading } from '../../ui/Heading.js';\nimport { InfoSection } from '../InfoSection.js';\nimport * as styles from './GettingStarted.css.js';\n\nexport function GettingStarted() {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Heading as=\"h2\">Get Started with Sui</Heading>\n\t\t\t<div className={styles.content}>\n\t\t\t\t<InfoSection title=\"Install the Sui Wallet Extension\">\n\t\t\t\t\tWe recommend pinning Sui Wallet to your taskbar for quicker access.\n\t\t\t\t</InfoSection>\n\t\t\t\t<InfoSection title=\"Create or Import a Wallet\">\n\t\t\t\t\tBe sure to back up your wallet using a secure method. Never share your secret phrase with\n\t\t\t\t\tanyone.\n\t\t\t\t</InfoSection>\n\t\t\t\t<InfoSection title=\"Refresh Your Browser\">\n\t\t\t\t\tOnce you set up your wallet, refresh this window browser to load up the extension.\n\t\t\t\t</InfoSection>\n\t\t\t\t<div className={styles.installButtonContainer}>\n\t\t\t\t\t<Button variant=\"outline\" asChild>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tInstall Wallet Extension\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "import 'src/components/connect-modal/views/WhatIsAWallet.css.ts.vanilla.css?source=LldoYXRJc0FXYWxsZXRfY29udGFpbmVyX18xa3Rwa3E5MCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLldoYXRJc0FXYWxsZXRfY29udGVudF9fMWt0cGtxOTEgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBmbGV4LWdyb3c6IDE7CiAgZ2FwOiAyMHB4OwogIHBhZGRpbmc6IDQwcHg7Cn0=';\nexport var container = 'WhatIsAWallet_container__1ktpkq90';\nexport var content = 'WhatIsAWallet_content__1ktpkq91';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Heading } from '../../ui/Heading.js';\nimport { InfoSection } from '../InfoSection.js';\nimport * as styles from './WhatIsAWallet.css.js';\n\nexport function WhatIsAWallet() {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Heading as=\"h2\">What is a Wallet</Heading>\n\t\t\t<div className={styles.content}>\n\t\t\t\t<InfoSection title=\"Easy Login\">\n\t\t\t\t\tNo need to create new accounts and passwords for every website. Just connect your wallet\n\t\t\t\t\tand get going.\n\t\t\t\t</InfoSection>\n\t\t\t\t<InfoSection title=\"Store your Digital Assets\">\n\t\t\t\t\tSend, receive, store, and display your digital assets like NFTs & coins.\n\t\t\t\t</InfoSection>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ComponentProps } from 'react';\n\nexport function SuiIcon(props: ComponentProps<'svg'>) {\n\treturn (\n\t\t<svg width={28} height={28} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<rect width={28} height={28} rx={6} fill=\"#6FBCF0\" />\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M7.942 20.527A6.875 6.875 0 0 0 13.957 24c2.51 0 4.759-1.298 6.015-3.473a6.875 6.875 0 0 0 0-6.945l-5.29-9.164a.837.837 0 0 0-1.45 0l-5.29 9.164a6.875 6.875 0 0 0 0 6.945Zm4.524-11.75 1.128-1.953a.418.418 0 0 1 .725 0l4.34 7.516a5.365 5.365 0 0 1 .449 4.442 4.675 4.675 0 0 0-.223-.73c-.599-1.512-1.954-2.68-4.029-3.47-1.426-.54-2.336-1.336-2.706-2.364-.476-1.326.021-2.77.316-3.44Zm-1.923 3.332L9.255 14.34a5.373 5.373 0 0 0 0 5.43 5.373 5.373 0 0 0 4.702 2.714 5.38 5.38 0 0 0 3.472-1.247c.125-.314.51-1.462.034-2.646-.44-1.093-1.5-1.965-3.15-2.594-1.864-.707-3.076-1.811-3.6-3.28a4.601 4.601 0 0 1-.17-.608Z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n", "import 'src/components/connect-modal/wallet-list/WalletList.css.ts.vanilla.css?source=LldhbGxldExpc3RfY29udGFpbmVyX18xdjJzNmN6MCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGdhcDogNHB4Owp9';\nexport var container = 'WalletList_container__1v2s6cz0';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { clsx } from 'clsx';\nimport type { ReactNode } from 'react';\n\nimport { Heading } from '../../ui/Heading.js';\nimport * as styles from './WalletListItem.css.js';\n\ntype WalletListItemProps = {\n\tname: string;\n\ticon: ReactNode;\n\tisSelected?: boolean;\n\tonClick: () => void;\n};\n\nexport function WalletListItem({ name, icon, onClick, isSelected = false }: WalletListItemProps) {\n\treturn (\n\t\t<li className={styles.container}>\n\t\t\t<button\n\t\t\t\tclassName={clsx(styles.walletItem, { [styles.selectedWalletItem]: isSelected })}\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t{icon && typeof icon === 'string' ? (\n\t\t\t\t\t<img className={styles.walletIcon} src={icon} alt={`${name} logo`} />\n\t\t\t\t) : (\n\t\t\t\t\ticon\n\t\t\t\t)}\n\t\t\t\t<Heading size=\"md\" truncate asChild>\n\t\t\t\t\t<div>{name}</div>\n\t\t\t\t</Heading>\n\t\t\t</button>\n\t\t</li>\n\t);\n}\n", "import 'src/components/connect-modal/wallet-list/WalletListItem.css.ts.vanilla.css?source=LldhbGxldExpc3RJdGVtX2NvbnRhaW5lcl9fMWRxcXRxczAgewogIGRpc3BsYXk6IGZsZXg7Cn0KLldhbGxldExpc3RJdGVtX3dhbGxldEl0ZW1fXzFkcXF0cXMxIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZmxleC1ncm93OiAxOwogIHBhZGRpbmc6IDhweDsKICBnYXA6IDhweDsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1kYXBwLWtpdC1yYWRpaS1sYXJnZSk7Cn0KLldhbGxldExpc3RJdGVtX3dhbGxldEl0ZW1fXzFkcXF0cXMxOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXBwLWtpdC1iYWNrZ3JvdW5kQ29sb3JzLXdhbGxldEl0ZW1Ib3Zlcik7Cn0KLldhbGxldExpc3RJdGVtX3NlbGVjdGVkV2FsbGV0SXRlbV9fMWRxcXRxczIgewogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcHAta2l0LWJhY2tncm91bmRDb2xvcnMtd2FsbGV0SXRlbVNlbGVjdGVkKTsKICBib3gtc2hhZG93OiAwcHggMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9Ci5XYWxsZXRMaXN0SXRlbV93YWxsZXRJY29uX18xZHFxdHFzMyB7CiAgd2lkdGg6IDI4cHg7CiAgaGVpZ2h0OiAyOHB4OwogIGZsZXgtc2hyaW5rOiAwOwogIG9iamVjdC1maXQ6IGNvdmVyOwogIGJvcmRlci1yYWRpdXM6IHZhcigtLWRhcHAta2l0LXJhZGlpLXNtYWxsKTsKfQ==';\nexport var container = 'WalletListItem_container__1dqqtqs0';\nexport var selectedWalletItem = 'WalletListItem_selectedWalletItem__1dqqtqs2';\nexport var walletIcon = 'WalletListItem_walletIcon__1dqqtqs3';\nexport var walletItem = 'WalletListItem_walletItem__1dqqtqs1';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithRequiredFeatures } from '@mysten/wallet-standard';\n\nimport { getWalletUniqueIdentifier } from '../../../utils/walletUtils.js';\nimport { SuiIcon } from '../../icons/SuiIcon.js';\nimport * as styles from './WalletList.css.js';\nimport { WalletListItem } from './WalletListItem.js';\n\ntype WalletListProps = {\n\tselectedWalletName?: string;\n\tonPlaceholderClick: () => void;\n\tonSelect: (wallet: WalletWithRequiredFeatures) => void;\n\twallets: WalletWithRequiredFeatures[];\n};\n\nexport function WalletList({\n\tselectedWalletName,\n\tonPlaceholderClick,\n\tonSelect,\n\twallets,\n}: WalletListProps) {\n\treturn (\n\t\t<ul className={styles.container}>\n\t\t\t{wallets.length > 0 ? (\n\t\t\t\twallets.map((wallet) => (\n\t\t\t\t\t<WalletListItem\n\t\t\t\t\t\tkey={getWalletUniqueIdentifier(wallet)}\n\t\t\t\t\t\tname={wallet.name}\n\t\t\t\t\t\ticon={wallet.icon}\n\t\t\t\t\t\tisSelected={getWalletUniqueIdentifier(wallet) === selectedWalletName}\n\t\t\t\t\t\tonClick={() => onSelect(wallet)}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t) : (\n\t\t\t\t<WalletListItem\n\t\t\t\t\tname=\"Sui Wallet\"\n\t\t\t\t\ticon={<SuiIcon />}\n\t\t\t\t\tonClick={onPlaceholderClick}\n\t\t\t\t\tisSelected\n\t\t\t\t/>\n\t\t\t)}\n\t\t</ul>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletAccount } from '@mysten/wallet-standard';\n\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Retrieves the wallet account that is currently selected, if one exists.\n */\nexport function useCurrentAccount(): WalletAccount | null {\n\treturn useWalletStore((state) => state.currentAccount);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { formatAddress } from '@mysten/sui/utils';\nimport type { WalletAccount } from '@mysten/wallet-standard';\nimport * as DropdownMenu from '@radix-ui/react-dropdown-menu';\nimport clsx from 'clsx';\n\nimport { useResolveSuiNSName } from '../hooks/useResolveSuiNSNames.js';\nimport { useAccounts } from '../hooks/wallet/useAccounts.js';\nimport { useDisconnectWallet } from '../hooks/wallet/useDisconnectWallet.js';\nimport { useSwitchAccount } from '../hooks/wallet/useSwitchAccount.js';\nimport * as styles from './AccountDropdownMenu.css.js';\nimport { CheckIcon } from './icons/CheckIcon.js';\nimport { ChevronIcon } from './icons/ChevronIcon.js';\nimport { StyleMarker } from './styling/StyleMarker.js';\nimport { Button } from './ui/Button.js';\nimport { Text } from './ui/Text.js';\n\ntype AccountDropdownMenuProps = {\n\tcurrentAccount: WalletAccount;\n};\n\nexport function AccountDropdownMenu({ currentAccount }: AccountDropdownMenuProps) {\n\tconst { mutate: disconnectWallet } = useDisconnectWallet();\n\n\tconst { data: domain } = useResolveSuiNSName(\n\t\tcurrentAccount.label ? null : currentAccount.address,\n\t);\n\tconst accounts = useAccounts();\n\n\treturn (\n\t\t<DropdownMenu.Root modal={false}>\n\t\t\t<StyleMarker>\n\t\t\t\t<DropdownMenu.Trigger asChild>\n\t\t\t\t\t<Button size=\"lg\" className={styles.connectedAccount}>\n\t\t\t\t\t\t<Text mono weight=\"bold\">\n\t\t\t\t\t\t\t{currentAccount.label ?? domain ?? formatAddress(currentAccount.address)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<ChevronIcon />\n\t\t\t\t\t</Button>\n\t\t\t\t</DropdownMenu.Trigger>\n\t\t\t</StyleMarker>\n\t\t\t<DropdownMenu.Portal>\n\t\t\t\t<StyleMarker className={styles.menuContainer}>\n\t\t\t\t\t<DropdownMenu.Content className={styles.menuContent}>\n\t\t\t\t\t\t{accounts.map((account) => (\n\t\t\t\t\t\t\t<AccountDropdownMenuItem\n\t\t\t\t\t\t\t\tkey={account.address}\n\t\t\t\t\t\t\t\taccount={account}\n\t\t\t\t\t\t\t\tactive={currentAccount.address === account.address}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<DropdownMenu.Separator className={styles.separator} />\n\t\t\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\t\t\tclassName={clsx(styles.menuItem)}\n\t\t\t\t\t\t\tonSelect={() => disconnectWallet()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDisconnect\n\t\t\t\t\t\t</DropdownMenu.Item>\n\t\t\t\t\t</DropdownMenu.Content>\n\t\t\t\t</StyleMarker>\n\t\t\t</DropdownMenu.Portal>\n\t\t</DropdownMenu.Root>\n\t);\n}\n\nexport function AccountDropdownMenuItem({\n\taccount,\n\tactive,\n}: {\n\taccount: WalletAccount;\n\tactive?: boolean;\n}) {\n\tconst { mutate: switchAccount } = useSwitchAccount();\n\tconst { data: domain } = useResolveSuiNSName(account.label ? null : account.address);\n\n\treturn (\n\t\t<DropdownMenu.Item\n\t\t\tclassName={clsx(styles.menuItem, styles.switchAccountMenuItem)}\n\t\t\tonSelect={() => switchAccount({ account })}\n\t\t>\n\t\t\t<Text mono>{account.label ?? domain ?? formatAddress(account.address)}</Text>\n\t\t\t{active ? <CheckIcon /> : null}\n\t\t</DropdownMenu.Item>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiClient } from '@mysten/sui/client';\nimport type {\n\tUndefinedInitialDataOptions,\n\tUseQueryOptions,\n\tUseQueryResult,\n} from '@tanstack/react-query';\nimport { queryOptions, useQuery, useSuspenseQuery } from '@tanstack/react-query';\nimport { useMemo } from 'react';\n\nimport type { PartialBy } from '../types/utilityTypes.js';\nimport { useSuiClientContext } from './useSuiClient.js';\n\nexport type SuiRpcMethodName = {\n\t[K in keyof SuiClient]: SuiClient[K] extends ((input: any) => Promise<any>) | (() => Promise<any>)\n\t\t? K\n\t\t: never;\n}[keyof SuiClient];\n\nexport type SuiRpcMethods = {\n\t[K in SuiRpcMethodName]: SuiClient[K] extends (input: infer P) => Promise<infer R>\n\t\t? {\n\t\t\t\tname: K;\n\t\t\t\tresult: R;\n\t\t\t\tparams: P;\n\t\t\t}\n\t\t: SuiClient[K] extends () => Promise<infer R>\n\t\t\t? {\n\t\t\t\t\tname: K;\n\t\t\t\t\tresult: R;\n\t\t\t\t\tparams: undefined | object;\n\t\t\t\t}\n\t\t\t: never;\n};\n\nexport type UseSuiClientQueryOptions<T extends keyof SuiRpcMethods, TData> = PartialBy<\n\tOmit<UseQueryOptions<SuiRpcMethods[T]['result'], Error, TData, unknown[]>, 'queryFn'>,\n\t'queryKey'\n>;\n\nexport type GetSuiClientQueryOptions<T extends keyof SuiRpcMethods> = {\n\tclient: SuiClient;\n\tnetwork: string;\n\tmethod: T;\n\toptions?: PartialBy<\n\t\tOmit<UndefinedInitialDataOptions<SuiRpcMethods[T]['result']>, 'queryFn'>,\n\t\t'queryKey'\n\t>;\n} & (undefined extends SuiRpcMethods[T]['params']\n\t? { params?: SuiRpcMethods[T]['params'] }\n\t: { params: SuiRpcMethods[T]['params'] });\n\nexport function getSuiClientQuery<T extends keyof SuiRpcMethods>({\n\tclient,\n\tnetwork,\n\tmethod,\n\tparams,\n\toptions,\n}: GetSuiClientQueryOptions<T>) {\n\treturn queryOptions<SuiRpcMethods[T]['result']>({\n\t\t...options,\n\t\tqueryKey: [network, method, params],\n\t\tqueryFn: async () => {\n\t\t\treturn await client[method](params as never);\n\t\t},\n\t});\n}\n\nexport function useSuiClientQuery<\n\tT extends keyof SuiRpcMethods,\n\tTData = SuiRpcMethods[T]['result'],\n>(\n\t...args: undefined extends SuiRpcMethods[T]['params']\n\t\t? [method: T, params?: SuiRpcMethods[T]['params'], options?: UseSuiClientQueryOptions<T, TData>]\n\t\t: [method: T, params: SuiRpcMethods[T]['params'], options?: UseSuiClientQueryOptions<T, TData>]\n): UseQueryResult<TData, Error> {\n\tconst [method, params, { queryKey = [], ...options } = {}] = args as [\n\t\tmethod: T,\n\t\tparams?: SuiRpcMethods[T]['params'],\n\t\toptions?: UseSuiClientQueryOptions<T, TData>,\n\t];\n\n\tconst suiContext = useSuiClientContext();\n\n\treturn useQuery({\n\t\t...options,\n\t\tqueryKey: [suiContext.network, method, params, ...queryKey],\n\t\tqueryFn: async () => {\n\t\t\treturn await suiContext.client[method](params as never);\n\t\t},\n\t});\n}\n\nexport function useSuiClientSuspenseQuery<\n\tT extends keyof SuiRpcMethods,\n\tTData = SuiRpcMethods[T]['result'],\n>(\n\t...args: undefined extends SuiRpcMethods[T]['params']\n\t\t? [method: T, params?: SuiRpcMethods[T]['params'], options?: UndefinedInitialDataOptions<TData>]\n\t\t: [method: T, params: SuiRpcMethods[T]['params'], options?: UndefinedInitialDataOptions<TData>]\n) {\n\tconst [method, params, options = {}] = args as [\n\t\tmethod: T,\n\t\tparams?: SuiRpcMethods[T]['params'],\n\t\toptions?: UndefinedInitialDataOptions<TData>,\n\t];\n\n\tconst suiContext = useSuiClientContext();\n\n\tconst query = useMemo(() => {\n\t\treturn getSuiClientQuery<T>({\n\t\t\tclient: suiContext.client,\n\t\t\tnetwork: suiContext.network,\n\t\t\tmethod,\n\t\t\tparams,\n\t\t\toptions,\n\t\t});\n\t}, [suiContext.client, suiContext.network, method, params, options]);\n\n\treturn useSuspenseQuery(query);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiClient } from '@mysten/sui/client';\nimport { useContext } from 'react';\n\nimport { SuiClientContext } from '../components/SuiClientProvider.js';\n\nexport function useSuiClientContext() {\n\tconst suiClient = useContext(SuiClientContext);\n\n\tif (!suiClient) {\n\t\tthrow new Error(\n\t\t\t'Could not find SuiClientContext. Ensure that you have set up the SuiClientProvider',\n\t\t);\n\t}\n\n\treturn suiClient;\n}\n\nexport function useSuiClient(): SuiClient {\n\treturn useSuiClientContext().client;\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { getFullnodeUrl, isSuiClient, SuiClient } from '@mysten/sui/client';\nimport type { SuiClientOptions } from '@mysten/sui/client';\nimport { createContext, useMemo, useState } from 'react';\n\nimport type { NetworkConfig } from '../hooks/networkConfig.js';\n\ntype NetworkConfigs<T extends NetworkConfig | SuiClient = NetworkConfig | SuiClient> = Record<\n\tstring,\n\tT\n>;\n\nexport interface SuiClientProviderContext {\n\tclient: SuiClient;\n\tnetworks: NetworkConfigs;\n\tnetwork: string;\n\tconfig: NetworkConfig | null;\n\tselectNetwork: (network: string) => void;\n}\n\nexport const SuiClientContext = createContext<SuiClientProviderContext | null>(null);\n\nexport type SuiClientProviderProps<T extends NetworkConfigs> = {\n\tcreateClient?: (name: keyof T, config: T[keyof T]) => SuiClient;\n\tchildren: React.ReactNode;\n\tnetworks?: T;\n\tonNetworkChange?: (network: keyof T & string) => void;\n} & (\n\t| {\n\t\t\tdefaultNetwork?: keyof T & string;\n\t\t\tnetwork?: never;\n\t  }\n\t| {\n\t\t\tdefaultNetwork?: never;\n\t\t\tnetwork?: keyof T & string;\n\t  }\n);\n\nconst DEFAULT_NETWORKS = {\n\tlocalnet: { url: getFullnodeUrl('localnet') },\n};\n\nconst DEFAULT_CREATE_CLIENT = function createClient(\n\t_name: string,\n\tconfig: NetworkConfig | SuiClient,\n) {\n\tif (isSuiClient(config)) {\n\t\treturn config;\n\t}\n\n\treturn new SuiClient(config);\n};\n\nexport function SuiClientProvider<T extends NetworkConfigs>(props: SuiClientProviderProps<T>) {\n\tconst { onNetworkChange, network, children } = props;\n\tconst networks = (props.networks ?? DEFAULT_NETWORKS) as T;\n\tconst createClient =\n\t\t(props.createClient as typeof DEFAULT_CREATE_CLIENT) ?? DEFAULT_CREATE_CLIENT;\n\n\tconst [selectedNetwork, setSelectedNetwork] = useState<keyof T & string>(\n\t\tprops.network ?? props.defaultNetwork ?? (Object.keys(networks)[0] as keyof T & string),\n\t);\n\n\tconst currentNetwork = props.network ?? selectedNetwork;\n\n\tconst client = useMemo(() => {\n\t\treturn createClient(currentNetwork, networks[currentNetwork]);\n\t}, [createClient, currentNetwork, networks]);\n\n\tconst ctx = useMemo((): SuiClientProviderContext => {\n\t\treturn {\n\t\t\tclient,\n\t\t\tnetworks,\n\t\t\tnetwork: currentNetwork,\n\t\t\tconfig:\n\t\t\t\tnetworks[currentNetwork] instanceof SuiClient\n\t\t\t\t\t? null\n\t\t\t\t\t: (networks[currentNetwork] as SuiClientOptions),\n\t\t\tselectNetwork: (newNetwork) => {\n\t\t\t\tif (currentNetwork === newNetwork) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!network && newNetwork !== selectedNetwork) {\n\t\t\t\t\tsetSelectedNetwork(newNetwork);\n\t\t\t\t}\n\n\t\t\t\tonNetworkChange?.(newNetwork);\n\t\t\t},\n\t\t};\n\t}, [client, networks, selectedNetwork, currentNetwork, network, onNetworkChange]);\n\n\treturn <SuiClientContext.Provider value={ctx}>{children}</SuiClientContext.Provider>;\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ResolvedNameServiceNames } from '@mysten/sui/client';\nimport type { UseQueryOptions, UseQueryResult } from '@tanstack/react-query';\n\nimport { useSuiClientQuery } from './useSuiClientQuery.js';\n\nexport function useResolveSuiNSName(\n\taddress?: string | null,\n\toptions?: Omit<\n\t\tUseQueryOptions<ResolvedNameServiceNames, Error, string | null, unknown[]>,\n\t\t'queryFn' | 'queryKey' | 'select'\n\t>,\n): UseQueryResult<string | null, Error> {\n\treturn useSuiClientQuery(\n\t\t'resolveNameServiceNames',\n\t\t{\n\t\t\taddress: address!,\n\t\t\tlimit: 1,\n\t\t},\n\t\t{\n\t\t\t...options,\n\t\t\trefetchOnWindowFocus: false,\n\t\t\tretry: false,\n\t\t\tselect: (data) => (data.data.length > 0 ? data.data[0] : null),\n\t\t\tenabled: !!address && options?.enabled !== false,\n\t\t},\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletAccount } from '@mysten/wallet-standard';\n\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Retrieves a list of connected accounts authorized by the dApp.\n */\nexport function useAccounts(): readonly WalletAccount[] {\n\treturn useWalletStore((state) => state.accounts);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport { WalletNotConnectedError } from '../../errors/walletErrors.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useWalletStore } from './useWalletStore.js';\n\ntype UseDisconnectWalletError = WalletNotConnectedError | Error;\n\ntype UseDisconnectWalletMutationOptions = Omit<\n\tUseMutationOptions<void, UseDisconnectWalletError, void, unknown>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for disconnecting from an active wallet connection, if currently connected.\n */\nexport function useDisconnectWallet({\n\tmutationKey,\n\t...mutationOptions\n}: UseDisconnectWalletMutationOptions = {}): UseMutationResult<\n\tvoid,\n\tUseDisconnectWalletError,\n\tvoid\n> {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst setWalletDisconnected = useWalletStore((state) => state.setWalletDisconnected);\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.disconnectWallet(mutationKey),\n\t\tmutationFn: async () => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Wallets aren't required to implement the disconnect feature, so we'll\n\t\t\t\t// optionally call the disconnect feature if it exists and reset the UI\n\t\t\t\t// state on the frontend at a minimum.\n\t\t\t\tawait currentWallet.features['standard:disconnect']?.disconnect();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to disconnect the application from the current wallet.', error);\n\t\t\t}\n\n\t\t\tsetWalletDisconnected();\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * An error that is instantiated when someone attempts to perform an action that requires an active wallet connection.\n */\nexport class WalletNotConnectedError extends Error {}\n\n/**\n * An error that is instantiated when someone attempts to perform an action that requires a selected wallet account.\n * This is more of an edge case stemming from the fact that wallets don't technically require you to authorize any\n * accounts when connecting a wallet.\n */\nexport class WalletNoAccountSelectedError extends Error {}\n\n/**\n * An error that is instantiated when someone attempts to perform an action that isn't supported by a wallet.\n */\nexport class WalletFeatureNotSupportedError extends Error {}\n\n/**\n * An error that is instantiated when a wallet account can't be found for a specific wallet.\n */\nexport class WalletAccountNotFoundError extends Error {}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Retrieves the wallet that is currently connected to the dApp, if one exists.\n */\nexport function useCurrentWallet() {\n\tconst currentWallet = useWalletStore((state) => state.currentWallet);\n\tconst connectionStatus = useWalletStore((state) => state.connectionStatus);\n\tconst supportedIntents = useWalletStore((state) => state.supportedIntents);\n\n\tswitch (connectionStatus) {\n\t\tcase 'connecting':\n\t\t\treturn {\n\t\t\t\tconnectionStatus,\n\t\t\t\tcurrentWallet: null,\n\t\t\t\tisDisconnected: false,\n\t\t\t\tisConnecting: true,\n\t\t\t\tisConnected: false,\n\t\t\t\tsupportedIntents: [],\n\t\t\t} as const;\n\t\tcase 'disconnected':\n\t\t\treturn {\n\t\t\t\tconnectionStatus,\n\t\t\t\tcurrentWallet: null,\n\t\t\t\tisDisconnected: true,\n\t\t\t\tisConnecting: false,\n\t\t\t\tisConnected: false,\n\t\t\t\tsupportedIntents: [],\n\t\t\t} as const;\n\t\tcase 'connected': {\n\t\t\treturn {\n\t\t\t\tconnectionStatus,\n\t\t\t\tcurrentWallet: currentWallet!,\n\t\t\t\tisDisconnected: false,\n\t\t\t\tisConnecting: false,\n\t\t\t\tisConnected: true,\n\t\t\t\tsupportedIntents,\n\t\t\t} as const;\n\t\t}\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletAccount } from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport { WalletAccountNotFoundError, WalletNotConnectedError } from '../../errors/walletErrors.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useWalletStore } from './useWalletStore.js';\n\ntype SwitchAccountArgs = {\n\taccount: WalletAccount;\n};\n\ntype SwitchAccountResult = void;\n\ntype UseSwitchAccountError = WalletNotConnectedError | WalletAccountNotFoundError | Error;\n\ntype UseSwitchAccountMutationOptions = Omit<\n\tUseMutationOptions<SwitchAccountResult, UseSwitchAccountError, SwitchAccountArgs, unknown>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for switching to a specific wallet account.\n */\nexport function useSwitchAccount({\n\tmutationKey,\n\t...mutationOptions\n}: UseSwitchAccountMutationOptions = {}): UseMutationResult<\n\tSwitchAccountResult,\n\tUseSwitchAccountError,\n\tSwitchAccountArgs\n> {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst setAccountSwitched = useWalletStore((state) => state.setAccountSwitched);\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.switchAccount(mutationKey),\n\t\tmutationFn: async ({ account }) => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\tconst accountToSelect = currentWallet.accounts.find(\n\t\t\t\t(walletAccount) => walletAccount.address === account.address,\n\t\t\t);\n\t\t\tif (!accountToSelect) {\n\t\t\t\tthrow new WalletAccountNotFoundError(\n\t\t\t\t\t`No account with address ${account.address} is connected to ${currentWallet.name}.`,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tsetAccountSwitched(accountToSelect);\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "import 'src/components/AccountDropdownMenu.css.ts.vanilla.css?source=#H4sIAAAAAAAAA6VTTW8TMRC951fMkR5cJaFIxT1BuXDoiSNC0dSe7g7xjo09bhIQ/x2tm22qtqFU+GLpzdeb5+fTD87FKvopx+TjRq5I6spFEXJKfh9crTzfLn+EOfyaAXSYLJyn7cXs9+z0ufKBpF5GUWShPNUuWu1Pw+Jpa+H9dF7sQof5y9bDc0kBdxZuAm0vZtBu4zmTU45iwcVQBxkjG/baW1icz1PLHHBreuKuVwvL+T2YOxajMVk4u4MSes/S7dd8uDLAdcyessnouRYLt5jfGOMxJbNmbTCbgLmjk5aNbt3lWMUbF0PMTwoOCZdjvBj/QISTv6rzWWmYpHnbpHnMuxbKplAgpxYkCo1grBpY6AA8ERQDd2JYaSgWHIlSfu3m/0r7q0dF03PXh/FZyH9ri7xetpR5wLz7WFWjHCdQNqyu30euHrE5e95f32tRvtkZd+dGCyWhI3NNuiGSo4IdY0AJM2q8/xnv2tTJlot08HTpM8vawvz/nfRlmjpK8wcGoA4K9QMAAA==';\nexport var connectedAccount = 'AccountDropdownMenu_connectedAccount__div2ql0';\nexport var menuContainer = 'AccountDropdownMenu_menuContainer__div2ql1';\nexport var menuContent = 'AccountDropdownMenu_menuContent__div2ql2';\nexport var menuItem = 'AccountDropdownMenu_menuItem__div2ql3';\nexport var separator = 'AccountDropdownMenu_separator__div2ql5';\nexport var switchAccountMenuItem = 'AccountDropdownMenu_switchAccountMenuItem__div2ql4';", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ComponentProps } from 'react';\n\nexport function CheckIcon(props: ComponentProps<'svg'>) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"m11.726 5.048-4.73 5.156-1.722-1.879a.72.72 0 0 0-.529-.23.722.722 0 0 0-.525.24.858.858 0 0 0-.22.573.86.86 0 0 0 .211.576l2.255 2.458c.14.153.332.24.53.24.2 0 .391-.087.532-.24l5.261-5.735A.86.86 0 0 0 13 5.63a.858.858 0 0 0-.22-.572.722.722 0 0 0-.525-.24.72.72 0 0 0-.529.23Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ComponentProps } from 'react';\n\nexport function ChevronIcon(props: ComponentProps<'svg'>) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n\t\t\t<path\n\t\t\t\tstroke=\"#A0B6C3\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\tstrokeWidth={1.5}\n\t\t\t\td=\"m4 6 4 4 4-4\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport type { ButtonHTMLAttributes, ReactNode } from 'react';\n\nimport { useCurrentAccount } from '../hooks/wallet/useCurrentAccount.js';\nimport { AccountDropdownMenu } from './AccountDropdownMenu.js';\nimport { ConnectModal } from './connect-modal/ConnectModal.js';\nimport { StyleMarker } from './styling/StyleMarker.js';\nimport { Button } from './ui/Button.js';\n\ntype ConnectButtonProps = {\n\tconnectText?: ReactNode;\n\t/** Filter the wallets shown in the connect modal */\n\twalletFilter?: (wallet: WalletWithRequiredFeatures) => boolean;\n} & ButtonHTMLAttributes<HTMLButtonElement>;\n\nexport function ConnectButton({\n\tconnectText = 'Connect Wallet',\n\twalletFilter,\n\t...buttonProps\n}: ConnectButtonProps) {\n\tconst currentAccount = useCurrentAccount();\n\treturn currentAccount ? (\n\t\t<AccountDropdownMenu currentAccount={currentAccount} />\n\t) : (\n\t\t<ConnectModal\n\t\t\twalletFilter={walletFilter}\n\t\t\ttrigger={\n\t\t\t\t<StyleMarker>\n\t\t\t\t\t<Button {...buttonProps}>{connectText}</Button>\n\t\t\t\t</StyleMarker>\n\t\t\t}\n\t\t/>\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithFeatures, WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport type { ReactNode } from 'react';\nimport { useRef } from 'react';\nimport type { StateStorage } from 'zustand/middleware';\n\nimport {\n\tDEFAULT_PREFERRED_WALLETS,\n\tDEFAULT_STORAGE,\n\tDEFAULT_STORAGE_KEY,\n\tDEFAULT_WALLET_FILTER,\n} from '../constants/walletDefaults.js';\nimport { WalletContext } from '../contexts/walletContext.js';\nimport { useAutoConnectWallet } from '../hooks/wallet/useAutoConnectWallet.js';\nimport type { SlushWalletConfig } from '../hooks/wallet/useSlushWallet.js';\nimport { useSlushWallet } from '../hooks/wallet/useSlushWallet.js';\nimport { useUnsafeBurnerWallet } from '../hooks/wallet/useUnsafeBurnerWallet.js';\nimport { useWalletPropertiesChanged } from '../hooks/wallet/useWalletPropertiesChanged.js';\nimport { useWalletsChanged } from '../hooks/wallet/useWalletsChanged.js';\nimport { lightTheme } from '../themes/lightTheme.js';\nimport type { Theme } from '../themes/themeContract.js';\nimport { createInMemoryStore } from '../utils/stateStorage.js';\nimport { getRegisteredWallets } from '../utils/walletUtils.js';\nimport { createWalletStore } from '../walletStore.js';\nimport { InjectedThemeStyles } from './styling/InjectedThemeStyles.js';\n\nexport type WalletProviderProps = {\n\t/** A list of wallets that are sorted to the top of the wallet list, if they are available to connect to. By default, wallets are sorted by the order they are loaded in. */\n\tpreferredWallets?: string[];\n\n\t/** A filter function to select wallets that support features required for the dApp to function. This filters the list of wallets presented to users when selecting a wallet to connect from, ensuring that only wallets that meet the dApps requirements can connect. */\n\twalletFilter?: (wallet: WalletWithRequiredFeatures) => boolean;\n\n\t/** Enables the development-only unsafe burner wallet, which can be useful for testing. */\n\tenableUnsafeBurner?: boolean;\n\n\t/** Enables automatically reconnecting to the most recently used wallet account upon mounting. */\n\tautoConnect?: boolean;\n\n\t/** Enables the Slush wallet */\n\tslushWallet?: SlushWalletConfig;\n\n\t/** Configures how the most recently connected to wallet account is stored. Set to `null` to disable persisting state entirely. Defaults to using localStorage if it is available. */\n\tstorage?: StateStorage | null;\n\n\t/** The key to use to store the most recently connected wallet account. */\n\tstorageKey?: string;\n\n\t/** The theme to use for styling UI components. Defaults to using the light theme. */\n\ttheme?: Theme | null;\n\n\tchildren: ReactNode;\n};\n\nexport type { WalletWithFeatures };\n\nexport function WalletProvider({\n\tpreferredWallets = DEFAULT_PREFERRED_WALLETS,\n\twalletFilter = DEFAULT_WALLET_FILTER,\n\tstorage = DEFAULT_STORAGE,\n\tstorageKey = DEFAULT_STORAGE_KEY,\n\tenableUnsafeBurner = false,\n\tautoConnect = false,\n\tslushWallet,\n\ttheme = lightTheme,\n\tchildren,\n}: WalletProviderProps) {\n\tconst storeRef = useRef(\n\t\tcreateWalletStore({\n\t\t\tautoConnectEnabled: autoConnect,\n\t\t\twallets: getRegisteredWallets(preferredWallets, walletFilter),\n\t\t\tstorage: storage || createInMemoryStore(),\n\t\t\tstorageKey,\n\t\t}),\n\t);\n\n\treturn (\n\t\t<WalletContext.Provider value={storeRef.current}>\n\t\t\t<WalletConnectionManager\n\t\t\t\tpreferredWallets={preferredWallets}\n\t\t\t\twalletFilter={walletFilter}\n\t\t\t\tenableUnsafeBurner={enableUnsafeBurner}\n\t\t\t\tslushWallet={slushWallet}\n\t\t\t>\n\t\t\t\t{/* TODO: We ideally don't want to inject styles if people aren't using the UI components */}\n\t\t\t\t{theme ? <InjectedThemeStyles theme={theme} /> : null}\n\t\t\t\t{children}\n\t\t\t</WalletConnectionManager>\n\t\t</WalletContext.Provider>\n\t);\n}\n\ntype WalletConnectionManagerProps = Pick<\n\tWalletProviderProps,\n\t'preferredWallets' | 'walletFilter' | 'enableUnsafeBurner' | 'slushWallet' | 'children'\n>;\n\nfunction WalletConnectionManager({\n\tpreferredWallets = DEFAULT_PREFERRED_WALLETS,\n\twalletFilter = DEFAULT_WALLET_FILTER,\n\tenableUnsafeBurner = false,\n\tslushWallet,\n\tchildren,\n}: WalletConnectionManagerProps) {\n\tuseWalletsChanged(preferredWallets, walletFilter);\n\tuseWalletPropertiesChanged();\n\tuseSlushWallet(slushWallet);\n\tuseUnsafeBurnerWallet(enableUnsafeBurner);\n\tuseAutoConnectWallet();\n\n\treturn children;\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useQuery } from '@tanstack/react-query';\nimport { useLayoutEffect, useState } from 'react';\n\nimport { getWalletUniqueIdentifier } from '../../utils/walletUtils.js';\nimport { useConnectWallet } from './useConnectWallet.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useWallets } from './useWallets.js';\nimport { useWalletStore } from './useWalletStore.js';\n\nexport function useAutoConnectWallet(): 'disabled' | 'idle' | 'attempted' {\n\tconst { mutateAsync: connectWallet } = useConnectWallet();\n\tconst autoConnectEnabled = useWalletStore((state) => state.autoConnectEnabled);\n\tconst lastConnectedWalletName = useWalletStore((state) => state.lastConnectedWalletName);\n\tconst lastConnectedAccountAddress = useWalletStore((state) => state.lastConnectedAccountAddress);\n\tconst wallets = useWallets();\n\tconst { isConnected } = useCurrentWallet();\n\n\tconst [clientOnly, setClientOnly] = useState(false);\n\tuseLayoutEffect(() => {\n\t\tsetClientOnly(true);\n\t}, []);\n\n\tconst { data, isError } = useQuery({\n\t\tqueryKey: [\n\t\t\t'@mysten/dapp-kit',\n\t\t\t'autoconnect',\n\t\t\t{\n\t\t\t\tisConnected,\n\t\t\t\tautoConnectEnabled,\n\t\t\t\tlastConnectedWalletName,\n\t\t\t\tlastConnectedAccountAddress,\n\t\t\t\twalletCount: wallets.length,\n\t\t\t},\n\t\t],\n\t\tqueryFn: async () => {\n\t\t\tif (!autoConnectEnabled) {\n\t\t\t\treturn 'disabled';\n\t\t\t}\n\n\t\t\tif (!lastConnectedWalletName || !lastConnectedAccountAddress || isConnected) {\n\t\t\t\treturn 'attempted';\n\t\t\t}\n\n\t\t\tconst wallet = wallets.find(\n\t\t\t\t(wallet) => getWalletUniqueIdentifier(wallet) === lastConnectedWalletName,\n\t\t\t);\n\t\t\tif (wallet) {\n\t\t\t\tawait connectWallet({\n\t\t\t\t\twallet,\n\t\t\t\t\taccountAddress: lastConnectedAccountAddress,\n\t\t\t\t\tsilent: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn 'attempted';\n\t\t},\n\t\tenabled: autoConnectEnabled,\n\t\tpersister: undefined,\n\t\tgcTime: 0,\n\t\tstaleTime: 0,\n\t\tnetworkMode: 'always',\n\t\tretry: false,\n\t\tretryOnMount: false,\n\t\trefetchInterval: false,\n\t\trefetchIntervalInBackground: false,\n\t\trefetchOnMount: false,\n\t\trefetchOnReconnect: false,\n\t\trefetchOnWindowFocus: false,\n\t});\n\n\tif (!autoConnectEnabled) {\n\t\treturn 'disabled';\n\t}\n\n\t// We always initialize with \"idle\" so that in SSR environments, we guarantee that the initial render states always agree:\n\tif (!clientOnly) {\n\t\treturn 'idle';\n\t}\n\n\tif (isConnected) {\n\t\treturn 'attempted';\n\t}\n\n\tif (!lastConnectedWalletName) {\n\t\treturn 'attempted';\n\t}\n\n\treturn isError ? 'attempted' : (data ?? 'idle');\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { registerSlushWallet } from '@mysten/slush-wallet';\nimport { useLayoutEffect } from 'react';\n\nexport interface SlushWalletConfig {\n\tname: string;\n\torigin?: string;\n}\n\nexport function useSlushWallet(config?: SlushWalletConfig) {\n\tuseLayoutEffect(() => {\n\t\tif (!config?.name) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cleanup: (() => void) | undefined;\n\t\tlet isMounted = true;\n\n\t\ttry {\n\t\t\tconst result = registerSlushWallet(config.name, {\n\t\t\t\torigin: config.origin,\n\t\t\t});\n\n\t\t\tif (isMounted && result) {\n\t\t\t\tcleanup = result.unregister;\n\t\t\t} else if (result) {\n\t\t\t\tresult.unregister();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to register Slush wallet:', error);\n\t\t}\n\n\t\treturn () => {\n\t\t\tisMounted = false;\n\t\t\tif (cleanup) cleanup();\n\t\t};\n\t}, [config?.name, config?.origin]);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiClient } from '@mysten/sui/client';\nimport { Ed25519Keypair } from '@mysten/sui/keypairs/ed25519';\nimport { Transaction } from '@mysten/sui/transactions';\nimport { toBase64 } from '@mysten/sui/utils';\nimport type {\n\tStandardConnectFeature,\n\tStandardConnectMethod,\n\tStandardEventsFeature,\n\tStandardEventsOnMethod,\n\tSuiFeatures,\n\tSuiSignAndExecuteTransactionBlockMethod,\n\tSuiSignAndExecuteTransactionMethod,\n\tSuiSignPersonalMessageMethod,\n\tSuiSignTransactionBlockMethod,\n\tSuiSignTransactionMethod,\n\tWallet,\n} from '@mysten/wallet-standard';\nimport { getWallets, ReadonlyWalletAccount, SUI_CHAINS } from '@mysten/wallet-standard';\nimport { useEffect } from 'react';\n\nimport { useSuiClient } from '../useSuiClient.js';\n\nconst WALLET_NAME = 'Unsafe Burner Wallet';\n\nexport function useUnsafeBurnerWallet(enabled: boolean) {\n\tconst suiClient = useSuiClient();\n\n\tuseEffect(() => {\n\t\tif (!enabled) {\n\t\t\treturn;\n\t\t}\n\t\tconst unregister = registerUnsafeBurnerWallet(suiClient);\n\t\treturn unregister;\n\t}, [enabled, suiClient]);\n}\n\nfunction registerUnsafeBurnerWallet(suiClient: SuiClient) {\n\tconst walletsApi = getWallets();\n\tconst registeredWallets = walletsApi.get();\n\n\tif (registeredWallets.find((wallet) => wallet.name === WALLET_NAME)) {\n\t\tconsole.warn(\n\t\t\t'registerUnsafeBurnerWallet: Unsafe Burner Wallet already registered, skipping duplicate registration.',\n\t\t);\n\t\treturn;\n\t}\n\n\tconsole.warn(\n\t\t'Your application is currently using the unsafe burner wallet. Make sure that this wallet is disabled in production.',\n\t);\n\n\tconst keypair = new Ed25519Keypair();\n\tconst account = new ReadonlyWalletAccount({\n\t\taddress: keypair.getPublicKey().toSuiAddress(),\n\t\tpublicKey: keypair.getPublicKey().toSuiBytes(),\n\t\tchains: ['sui:unknown'],\n\t\tfeatures: [\n\t\t\t'sui:signAndExecuteTransactionBlock',\n\t\t\t'sui:signTransactionBlock',\n\t\t\t'sui:signTransaction',\n\t\t\t'sui:signAndExecuteTransaction',\n\t\t],\n\t});\n\n\tclass UnsafeBurnerWallet implements Wallet {\n\t\tget version() {\n\t\t\treturn '1.0.0' as const;\n\t\t}\n\n\t\tget name() {\n\t\t\treturn WALLET_NAME;\n\t\t}\n\n\t\tget icon() {\n\t\t\treturn 'data:image/png;base64,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' as const;\n\t\t}\n\n\t\t// Return the Sui chains that your wallet supports.\n\t\tget chains() {\n\t\t\treturn SUI_CHAINS;\n\t\t}\n\n\t\tget accounts() {\n\t\t\treturn [account];\n\t\t}\n\n\t\tget features(): StandardConnectFeature & StandardEventsFeature & SuiFeatures {\n\t\t\treturn {\n\t\t\t\t'standard:connect': {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tconnect: this.#connect,\n\t\t\t\t},\n\t\t\t\t'standard:events': {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\ton: this.#on,\n\t\t\t\t},\n\t\t\t\t'sui:signPersonalMessage': {\n\t\t\t\t\tversion: '1.1.0',\n\t\t\t\t\tsignPersonalMessage: this.#signPersonalMessage,\n\t\t\t\t},\n\t\t\t\t'sui:signTransactionBlock': {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tsignTransactionBlock: this.#signTransactionBlock,\n\t\t\t\t},\n\t\t\t\t'sui:signAndExecuteTransactionBlock': {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tsignAndExecuteTransactionBlock: this.#signAndExecuteTransactionBlock,\n\t\t\t\t},\n\t\t\t\t'sui:signTransaction': {\n\t\t\t\t\tversion: '2.0.0',\n\t\t\t\t\tsignTransaction: this.#signTransaction,\n\t\t\t\t},\n\t\t\t\t'sui:signAndExecuteTransaction': {\n\t\t\t\t\tversion: '2.0.0',\n\t\t\t\t\tsignAndExecuteTransaction: this.#signAndExecuteTransaction,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\t#on: StandardEventsOnMethod = () => {\n\t\t\treturn () => {};\n\t\t};\n\n\t\t#connect: StandardConnectMethod = async () => {\n\t\t\treturn { accounts: this.accounts };\n\t\t};\n\n\t\t#signPersonalMessage: SuiSignPersonalMessageMethod = async (messageInput) => {\n\t\t\tconst { bytes, signature } = await keypair.signPersonalMessage(messageInput.message);\n\t\t\treturn { bytes, signature };\n\t\t};\n\n\t\t#signTransactionBlock: SuiSignTransactionBlockMethod = async (transactionInput) => {\n\t\t\tconst { bytes, signature } = await transactionInput.transactionBlock.sign({\n\t\t\t\tclient: suiClient,\n\t\t\t\tsigner: keypair,\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\ttransactionBlockBytes: bytes,\n\t\t\t\tsignature: signature,\n\t\t\t};\n\t\t};\n\n\t\t#signTransaction: SuiSignTransactionMethod = async (transactionInput) => {\n\t\t\tconst { bytes, signature } = await Transaction.from(\n\t\t\t\tawait transactionInput.transaction.toJSON(),\n\t\t\t).sign({\n\t\t\t\tclient: suiClient,\n\t\t\t\tsigner: keypair,\n\t\t\t});\n\n\t\t\ttransactionInput.signal?.throwIfAborted();\n\n\t\t\treturn {\n\t\t\t\tbytes,\n\t\t\t\tsignature: signature,\n\t\t\t};\n\t\t};\n\n\t\t#signAndExecuteTransactionBlock: SuiSignAndExecuteTransactionBlockMethod = async (\n\t\t\ttransactionInput,\n\t\t) => {\n\t\t\tconst { bytes, signature } = await transactionInput.transactionBlock.sign({\n\t\t\t\tclient: suiClient,\n\t\t\t\tsigner: keypair,\n\t\t\t});\n\n\t\t\treturn suiClient.executeTransactionBlock({\n\t\t\t\tsignature,\n\t\t\t\ttransactionBlock: bytes,\n\t\t\t\toptions: transactionInput.options,\n\t\t\t});\n\t\t};\n\n\t\t#signAndExecuteTransaction: SuiSignAndExecuteTransactionMethod = async (transactionInput) => {\n\t\t\tconst { bytes, signature } = await Transaction.from(\n\t\t\t\tawait transactionInput.transaction.toJSON(),\n\t\t\t).sign({\n\t\t\t\tclient: suiClient,\n\t\t\t\tsigner: keypair,\n\t\t\t});\n\n\t\t\ttransactionInput.signal?.throwIfAborted();\n\n\t\t\tconst { rawEffects, digest } = await suiClient.executeTransactionBlock({\n\t\t\t\tsignature,\n\t\t\t\ttransactionBlock: bytes,\n\t\t\t\toptions: {\n\t\t\t\t\tshowRawEffects: true,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tbytes,\n\t\t\t\tsignature,\n\t\t\t\tdigest,\n\t\t\t\teffects: toBase64(new Uint8Array(rawEffects!)),\n\t\t\t};\n\t\t};\n\t}\n\n\treturn walletsApi.register(new UnsafeBurnerWallet());\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect } from 'react';\n\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Internal hook for easily handling various changes in properties for a wallet.\n */\nexport function useWalletPropertiesChanged() {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst updateWalletAccounts = useWalletStore((state) => state.updateWalletAccounts);\n\n\tuseEffect(() => {\n\t\tconst unsubscribeFromEvents = currentWallet?.features['standard:events'].on(\n\t\t\t'change',\n\t\t\t({ accounts }) => {\n\t\t\t\t// TODO: We should handle features changing that might make the list of wallets\n\t\t\t\t// or even the current wallet incompatible with the dApp.\n\t\t\t\tif (accounts) {\n\t\t\t\t\tupdateWalletAccounts(accounts);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t\treturn unsubscribeFromEvents;\n\t}, [currentWallet?.features, updateWalletAccounts]);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport { getWallets } from '@mysten/wallet-standard';\nimport { useEffect } from 'react';\n\nimport { getRegisteredWallets } from '../../utils/walletUtils.js';\nimport { useWalletStore } from './useWalletStore.js';\n\n/**\n * Internal hook for easily handling the addition and removal of new wallets.\n */\nexport function useWalletsChanged(\n\tpreferredWallets: string[],\n\twalletFilter?: (wallet: WalletWithRequiredFeatures) => boolean,\n) {\n\tconst setWalletRegistered = useWalletStore((state) => state.setWalletRegistered);\n\tconst setWalletUnregistered = useWalletStore((state) => state.setWalletUnregistered);\n\n\tuseEffect(() => {\n\t\tconst walletsApi = getWallets();\n\t\tsetWalletRegistered(getRegisteredWallets(preferredWallets, walletFilter));\n\n\t\tconst unsubscribeFromRegister = walletsApi.on('register', () => {\n\t\t\tsetWalletRegistered(getRegisteredWallets(preferredWallets, walletFilter));\n\t\t});\n\n\t\tconst unsubscribeFromUnregister = walletsApi.on('unregister', (unregisteredWallet) => {\n\t\t\tsetWalletUnregistered(\n\t\t\t\tgetRegisteredWallets(preferredWallets, walletFilter),\n\t\t\t\tunregisteredWallet,\n\t\t\t);\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribeFromRegister();\n\t\t\tunsubscribeFromUnregister();\n\t\t};\n\t}, [preferredWallets, walletFilter, setWalletRegistered, setWalletUnregistered]);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { ThemeVars } from './themeContract.js';\n\nexport const lightTheme: ThemeVars = {\n\tblurs: {\n\t\tmodalOverlay: 'blur(0)',\n\t},\n\tbackgroundColors: {\n\t\tprimaryButton: '#F6F7F9',\n\t\tprimaryButtonHover: '#F0F2F5',\n\t\toutlineButtonHover: '#F4F4F5',\n\t\tmodalOverlay: 'rgba(24 36 53 / 20%)',\n\t\tmodalPrimary: 'white',\n\t\tmodalSecondary: '#F7F8F8',\n\t\ticonButton: 'transparent',\n\t\ticonButtonHover: '#F0F1F2',\n\t\tdropdownMenu: '#FFFFFF',\n\t\tdropdownMenuSeparator: '#F3F6F8',\n\t\twalletItemSelected: 'white',\n\t\twalletItemHover: '#3C424226',\n\t},\n\tborderColors: {\n\t\toutlineButton: '#E4E4E7',\n\t},\n\tcolors: {\n\t\tprimaryButton: '#373737',\n\t\toutlineButton: '#373737',\n\t\ticonButton: '#000000',\n\t\tbody: '#182435',\n\t\tbodyMuted: '#767A81',\n\t\tbodyDanger: '#FF794B',\n\t},\n\tradii: {\n\t\tsmall: '6px',\n\t\tmedium: '8px',\n\t\tlarge: '12px',\n\t\txlarge: '16px',\n\t},\n\tshadows: {\n\t\tprimaryButton: '0px 4px 12px rgba(0, 0, 0, 0.1)',\n\t\twalletItemSelected: '0px 2px 6px rgba(0, 0, 0, 0.05)',\n\t},\n\tfontWeights: {\n\t\tnormal: '400',\n\t\tmedium: '500',\n\t\tbold: '600',\n\t},\n\tfontSizes: {\n\t\tsmall: '14px',\n\t\tmedium: '16px',\n\t\tlarge: '18px',\n\t\txlarge: '20px',\n\t},\n\ttypography: {\n\t\tfontFamily:\n\t\t\t'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"',\n\t\tfontStyle: 'normal',\n\t\tlineHeight: '1.3',\n\t\tletterSpacing: '1',\n\t},\n};\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { Wallet, WalletAccount, WalletWithRequiredFeatures } from '@mysten/wallet-standard';\nimport { createStore } from 'zustand';\nimport type { StateStorage } from 'zustand/middleware';\nimport { createJSONStorage, persist } from 'zustand/middleware';\n\nimport { getWalletUniqueIdentifier } from './utils/walletUtils.js';\n\ntype WalletConnectionStatus = 'disconnected' | 'connecting' | 'connected';\n\nexport type WalletActions = {\n\tsetAccountSwitched: (selectedAccount: WalletAccount) => void;\n\tsetConnectionStatus: (connectionStatus: WalletConnectionStatus) => void;\n\tsetWalletConnected: (\n\t\twallet: WalletWithRequiredFeatures,\n\t\tconnectedAccounts: readonly WalletAccount[],\n\t\tselectedAccount: WalletAccount | null,\n\t\tsupportedIntents?: string[],\n\t) => void;\n\tupdateWalletAccounts: (accounts: readonly WalletAccount[]) => void;\n\tsetWalletDisconnected: () => void;\n\tsetWalletRegistered: (updatedWallets: WalletWithRequiredFeatures[]) => void;\n\tsetWalletUnregistered: (\n\t\tupdatedWallets: WalletWithRequiredFeatures[],\n\t\tunregisteredWallet: Wallet,\n\t) => void;\n};\n\nexport type WalletStore = ReturnType<typeof createWalletStore>;\n\nexport type StoreState = {\n\tautoConnectEnabled: boolean;\n\twallets: WalletWithRequiredFeatures[];\n\taccounts: readonly WalletAccount[];\n\tcurrentWallet: WalletWithRequiredFeatures | null;\n\tcurrentAccount: WalletAccount | null;\n\tlastConnectedAccountAddress: string | null;\n\tlastConnectedWalletName: string | null;\n\tconnectionStatus: WalletConnectionStatus;\n\tsupportedIntents: string[];\n} & WalletActions;\n\ntype WalletConfiguration = {\n\tautoConnectEnabled: boolean;\n\twallets: WalletWithRequiredFeatures[];\n\tstorage: StateStorage;\n\tstorageKey: string;\n};\n\nexport function createWalletStore({\n\twallets,\n\tstorage,\n\tstorageKey,\n\tautoConnectEnabled,\n}: WalletConfiguration) {\n\treturn createStore<StoreState>()(\n\t\tpersist(\n\t\t\t(set, get) => ({\n\t\t\t\tautoConnectEnabled,\n\t\t\t\twallets,\n\t\t\t\taccounts: [] as WalletAccount[],\n\t\t\t\tcurrentWallet: null,\n\t\t\t\tcurrentAccount: null,\n\t\t\t\tlastConnectedAccountAddress: null,\n\t\t\t\tlastConnectedWalletName: null,\n\t\t\t\tconnectionStatus: 'disconnected',\n\t\t\t\tsupportedIntents: [],\n\t\t\t\tsetConnectionStatus(connectionStatus) {\n\t\t\t\t\tset(() => ({\n\t\t\t\t\t\tconnectionStatus,\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\tsetWalletConnected(wallet, connectedAccounts, selectedAccount, supportedIntents = []) {\n\t\t\t\t\tset(() => ({\n\t\t\t\t\t\taccounts: connectedAccounts,\n\t\t\t\t\t\tcurrentWallet: wallet,\n\t\t\t\t\t\tcurrentAccount: selectedAccount,\n\t\t\t\t\t\tlastConnectedWalletName: getWalletUniqueIdentifier(wallet),\n\t\t\t\t\t\tlastConnectedAccountAddress: selectedAccount?.address,\n\t\t\t\t\t\tconnectionStatus: 'connected',\n\t\t\t\t\t\tsupportedIntents,\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\tsetWalletDisconnected() {\n\t\t\t\t\tset(() => ({\n\t\t\t\t\t\taccounts: [],\n\t\t\t\t\t\tcurrentWallet: null,\n\t\t\t\t\t\tcurrentAccount: null,\n\t\t\t\t\t\tlastConnectedWalletName: null,\n\t\t\t\t\t\tlastConnectedAccountAddress: null,\n\t\t\t\t\t\tconnectionStatus: 'disconnected',\n\t\t\t\t\t\tsupportedIntents: [],\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\tsetAccountSwitched(selectedAccount) {\n\t\t\t\t\tset(() => ({\n\t\t\t\t\t\tcurrentAccount: selectedAccount,\n\t\t\t\t\t\tlastConnectedAccountAddress: selectedAccount.address,\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\tsetWalletRegistered(updatedWallets) {\n\t\t\t\t\tset(() => ({ wallets: updatedWallets }));\n\t\t\t\t},\n\t\t\t\tsetWalletUnregistered(updatedWallets, unregisteredWallet) {\n\t\t\t\t\tif (unregisteredWallet === get().currentWallet) {\n\t\t\t\t\t\tset(() => ({\n\t\t\t\t\t\t\twallets: updatedWallets,\n\t\t\t\t\t\t\taccounts: [],\n\t\t\t\t\t\t\tcurrentWallet: null,\n\t\t\t\t\t\t\tcurrentAccount: null,\n\t\t\t\t\t\t\tlastConnectedWalletName: null,\n\t\t\t\t\t\t\tlastConnectedAccountAddress: null,\n\t\t\t\t\t\t\tconnectionStatus: 'disconnected',\n\t\t\t\t\t\t\tsupportedIntents: [],\n\t\t\t\t\t\t}));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tset(() => ({ wallets: updatedWallets }));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tupdateWalletAccounts(accounts) {\n\t\t\t\t\tconst currentAccount = get().currentAccount;\n\n\t\t\t\t\tset(() => ({\n\t\t\t\t\t\taccounts,\n\t\t\t\t\t\tcurrentAccount:\n\t\t\t\t\t\t\t(currentAccount &&\n\t\t\t\t\t\t\t\taccounts.find(({ address }) => address === currentAccount.address)) ||\n\t\t\t\t\t\t\taccounts[0],\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t}),\n\t\t\t{\n\t\t\t\tname: storageKey,\n\t\t\t\tstorage: createJSONStorage(() => storage),\n\t\t\t\tpartialize: ({ lastConnectedWalletName, lastConnectedAccountAddress }) => ({\n\t\t\t\t\tlastConnectedWalletName,\n\t\t\t\t\tlastConnectedAccountAddress,\n\t\t\t\t}),\n\t\t\t},\n\t\t),\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { assignInlineVars } from '@vanilla-extract/dynamic';\n\nimport { styleDataAttributeSelector } from '../../constants/styleDataAttribute.js';\nimport { themeVars } from '../../themes/themeContract.js';\nimport type { DynamicTheme, Theme, ThemeVars } from '../../themes/themeContract.js';\n\ntype InjectedThemeStylesProps = {\n\ttheme: Theme;\n};\n\nexport function InjectedThemeStyles({ theme }: InjectedThemeStylesProps) {\n\tconst themeStyles = Array.isArray(theme)\n\t\t? getDynamicThemeStyles(theme)\n\t\t: getStaticThemeStyles(theme);\n\n\treturn (\n\t\t<style\n\t\t\t// @ts-expect-error The precedence prop hasn't made it to the stable release of React, but we\n\t\t\t// don't want this to break in frameworks like Next which use the latest canary build.\n\t\t\tprecedence=\"default\"\n\t\t\thref=\"mysten-dapp-kit-theme\"\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: themeStyles,\n\t\t\t}}\n\t\t/>\n\t);\n}\n\nfunction getDynamicThemeStyles(themes: DynamicTheme[]) {\n\treturn themes\n\t\t.map(({ mediaQuery, selector, variables }) => {\n\t\t\tconst themeStyles = getStaticThemeStyles(variables);\n\t\t\tconst themeStylesWithSelectorPrefix = selector ? `${selector} ${themeStyles}` : themeStyles;\n\n\t\t\treturn mediaQuery\n\t\t\t\t? `@media ${mediaQuery}{${themeStylesWithSelectorPrefix}}`\n\t\t\t\t: themeStylesWithSelectorPrefix;\n\t\t})\n\t\t.join(' ');\n}\n\nfunction getStaticThemeStyles(theme: ThemeVars) {\n\treturn `${styleDataAttributeSelector} {${cssStringFromTheme(theme)}}`;\n}\n\nfunction cssStringFromTheme(theme: ThemeVars) {\n\treturn Object.entries(assignInlineVars(themeVars, theme))\n\t\t.map(([key, value]) => `${key}:${value};`)\n\t\t.join('');\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createGlobalThemeContract } from '@vanilla-extract/css';\n\nconst themeContractValues = {\n\tblurs: {\n\t\tmodalOverlay: '',\n\t},\n\tbackgroundColors: {\n\t\tprimaryButton: '',\n\t\tprimaryButtonHover: '',\n\t\toutlineButtonHover: '',\n\t\twalletItemHover: '',\n\t\twalletItemSelected: '',\n\t\tmodalOverlay: '',\n\t\tmodalPrimary: '',\n\t\tmodalSecondary: '',\n\t\ticonButton: '',\n\t\ticonButtonHover: '',\n\t\tdropdownMenu: '',\n\t\tdropdownMenuSeparator: '',\n\t},\n\tborderColors: {\n\t\toutlineButton: '',\n\t},\n\tcolors: {\n\t\tprimaryButton: '',\n\t\toutlineButton: '',\n\t\tbody: '',\n\t\tbodyMuted: '',\n\t\tbodyDanger: '',\n\t\ticonButton: '',\n\t},\n\tradii: {\n\t\tsmall: '',\n\t\tmedium: '',\n\t\tlarge: '',\n\t\txlarge: '',\n\t},\n\tshadows: {\n\t\tprimaryButton: '',\n\t\twalletItemSelected: '',\n\t},\n\tfontWeights: {\n\t\tnormal: '',\n\t\tmedium: '',\n\t\tbold: '',\n\t},\n\tfontSizes: {\n\t\tsmall: '',\n\t\tmedium: '',\n\t\tlarge: '',\n\t\txlarge: '',\n\t},\n\ttypography: {\n\t\tfontFamily: '',\n\t\tfontStyle: '',\n\t\tlineHeight: '',\n\t\tletterSpacing: '',\n\t},\n};\n\nexport type ThemeVars = typeof themeContractValues;\n\n/**\n * A custom theme that is enabled when various conditions are\n */\nexport type DynamicTheme = {\n\t/**\n\t * An optional media query required for the given theme to be enabled. This is useful\n\t * when you want the theme of your application to automatically switch depending on\n\t * a media feature.\n\t *\n\t * @example '(prefers-color-scheme: dark)'\n\t */\n\tmediaQuery?: string;\n\n\t/**\n\t * An optional CSS selector required for the given theme to be enabled. This is useful\n\t * when you have a manual theme switcher on your application that sets a top-level\n\t * class name or data-attribute to control the current theme.\n\t *\n\t * @example '.data-dark'\n\t */\n\tselector?: string;\n\n\t/** The theme definitions that will be set when the selector and mediaQuery criteria are matched. */\n\tvariables: ThemeVars;\n};\n\nexport type Theme = ThemeVars | DynamicTheme[];\n\nexport const themeVars = createGlobalThemeContract(\n\tthemeContractValues,\n\t(_, path) => `dapp-kit-${path.join('-')}`,\n);\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiClientOptions } from '@mysten/sui/client';\n\nimport { useSuiClientContext } from './useSuiClient.js';\n\nexport type NetworkConfig<T extends object = object> = SuiClientOptions & {\n\tvariables?: T;\n};\n\nexport function createNetworkConfig<\n\tconst T extends Record<string, Config>,\n\tConfig extends NetworkConfig<Variables> = T[keyof T],\n\tVariables extends object = NonNullable<Config['variables']>,\n>(networkConfig: T) {\n\tfunction useNetworkConfig(): Config {\n\t\tconst { config } = useSuiClientContext();\n\n\t\tif (!config) {\n\t\t\tthrow new Error('No network config found');\n\t\t}\n\n\t\treturn config as T[keyof T];\n\t}\n\n\tfunction useNetworkVariables(): Variables {\n\t\tconst { variables } = useNetworkConfig();\n\n\t\treturn (variables ?? {}) as Variables;\n\t}\n\n\tfunction useNetworkVariable<K extends keyof Variables>(name: K): Variables[K] {\n\t\tconst variables = useNetworkVariables();\n\n\t\treturn variables[name];\n\t}\n\n\treturn {\n\t\tnetworkConfig,\n\t\tuseNetworkConfig,\n\t\tuseNetworkVariables,\n\t\tuseNetworkVariable,\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { SuiClient } from '@mysten/sui/client';\nimport type {\n\tInfiniteData,\n\tUseInfiniteQueryOptions,\n\tUseInfiniteQueryResult,\n} from '@tanstack/react-query';\nimport { useInfiniteQuery } from '@tanstack/react-query';\n\nimport type { PartialBy } from '../types/utilityTypes.js';\nimport { useSuiClientContext } from './useSuiClient.js';\n\ninterface PaginatedResult {\n\tdata?: unknown;\n\tnextCursor?: unknown;\n\thasNextPage: boolean;\n}\n\nexport type SuiRpcPaginatedMethodName = {\n\t[K in keyof SuiClient]: SuiClient[K] extends (input: any) => Promise<PaginatedResult> ? K : never;\n}[keyof SuiClient];\n\nexport type SuiRpcPaginatedMethods = {\n\t[K in SuiRpcPaginatedMethodName]: SuiClient[K] extends (\n\t\tinput: infer Params,\n\t) => Promise<\n\t\tinfer Result extends { hasNextPage?: boolean | null; nextCursor?: infer Cursor | null }\n\t>\n\t\t? {\n\t\t\t\tname: K;\n\t\t\t\tresult: Result;\n\t\t\t\tparams: Params;\n\t\t\t\tcursor: Cursor;\n\t\t\t}\n\t\t: never;\n};\n\nexport type UseSuiClientInfiniteQueryOptions<\n\tT extends keyof SuiRpcPaginatedMethods,\n\tTData,\n> = PartialBy<\n\tOmit<\n\t\tUseInfiniteQueryOptions<SuiRpcPaginatedMethods[T]['result'], Error, TData, unknown[]>,\n\t\t'queryFn' | 'initialPageParam' | 'getNextPageParam'\n\t>,\n\t'queryKey'\n>;\n\nexport function useSuiClientInfiniteQuery<\n\tT extends keyof SuiRpcPaginatedMethods,\n\tTData = InfiniteData<SuiRpcPaginatedMethods[T]['result']>,\n>(\n\tmethod: T,\n\tparams: SuiRpcPaginatedMethods[T]['params'],\n\t{\n\t\tqueryKey = [],\n\t\tenabled = !!params,\n\t\t...options\n\t}: UseSuiClientInfiniteQueryOptions<T, TData> = {},\n): UseInfiniteQueryResult<TData, Error> {\n\tconst suiContext = useSuiClientContext();\n\n\treturn useInfiniteQuery({\n\t\t...options,\n\t\tinitialPageParam: null,\n\t\tqueryKey: [suiContext.network, method, params, ...queryKey],\n\t\tenabled,\n\t\tqueryFn: ({ pageParam }) =>\n\t\t\tsuiContext.client[method]({\n\t\t\t\t// oxlint-disable-next-line no-useless-fallback-in-spread\n\t\t\t\t...(params ?? {}),\n\t\t\t\tcursor: pageParam,\n\t\t\t} as never),\n\t\tgetNextPageParam: (lastPage) => (lastPage.hasNextPage ? (lastPage.nextCursor ?? null) : null),\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { useSuiClientContext } from './useSuiClient.js';\nimport type { SuiRpcMethods } from './useSuiClientQuery.js';\n\nexport type UseSuiClientMutationOptions<T extends keyof SuiRpcMethods> = Omit<\n\tUseMutationOptions<SuiRpcMethods[T]['result'], Error, SuiRpcMethods[T]['params'], unknown[]>,\n\t'mutationFn'\n>;\n\nexport function useSuiClientMutation<T extends keyof SuiRpcMethods>(\n\tmethod: T,\n\toptions: UseSuiClientMutationOptions<T> = {},\n): UseMutationResult<SuiRpcMethods[T]['result'], Error, SuiRpcMethods[T]['params'], unknown[]> {\n\tconst suiContext = useSuiClientContext();\n\n\treturn useMutation({\n\t\t...options,\n\t\tmutationFn: async (params) => {\n\t\t\treturn await suiContext.client[method](params as never);\n\t\t},\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQueries } from '@tanstack/react-query';\n\nimport { useSuiClientContext } from './useSuiClient.js';\nimport type { SuiRpcMethods, UseSuiClientQueryOptions } from './useSuiClientQuery.js';\n\ntype SuiClientQueryOptions = SuiRpcMethods[keyof SuiRpcMethods] extends infer Method\n\t? Method extends {\n\t\t\tname: infer M extends keyof SuiRpcMethods;\n\t\t\tparams?: infer P;\n\t\t}\n\t\t? undefined extends P\n\t\t\t? {\n\t\t\t\t\tmethod: M;\n\t\t\t\t\tparams?: P;\n\t\t\t\t\toptions?: UseSuiClientQueryOptions<M, unknown>;\n\t\t\t\t}\n\t\t\t: {\n\t\t\t\t\tmethod: M;\n\t\t\t\t\tparams: P;\n\t\t\t\t\toptions?: UseSuiClientQueryOptions<M, unknown>;\n\t\t\t\t}\n\t\t: never\n\t: never;\n\nexport type UseSuiClientQueriesResults<Args extends readonly SuiClientQueryOptions[]> = {\n\t-readonly [K in keyof Args]: Args[K] extends {\n\t\tmethod: infer M extends keyof SuiRpcMethods;\n\t\treadonly options?:\n\t\t\t| {\n\t\t\t\t\tselect?: (...args: any[]) => infer R;\n\t\t\t  }\n\t\t\t| object;\n\t}\n\t\t? UseQueryResult<unknown extends R ? SuiRpcMethods[M]['result'] : R>\n\t\t: never;\n};\n\nexport function useSuiClientQueries<\n\tconst Queries extends readonly SuiClientQueryOptions[],\n\tResults = UseSuiClientQueriesResults<Queries>,\n>({\n\tqueries,\n\tcombine,\n}: {\n\tqueries: Queries;\n\tcombine?: (results: UseSuiClientQueriesResults<Queries>) => Results;\n}): Results {\n\tconst suiContext = useSuiClientContext();\n\n\treturn useQueries({\n\t\tcombine: combine as never,\n\t\tqueries: queries.map((query) => {\n\t\t\tconst { method, params, options: { queryKey = [], ...restOptions } = {} } = query;\n\n\t\t\treturn {\n\t\t\t\t...restOptions,\n\t\t\t\tqueryKey: [suiContext.network, method, params, ...queryKey],\n\t\t\t\tqueryFn: async () => {\n\t\t\t\t\treturn await suiContext.client[method](params as never);\n\t\t\t\t},\n\t\t\t};\n\t\t}) as [],\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { Transaction } from '@mysten/sui/transactions';\nimport { toBase64 } from '@mysten/sui/utils';\nimport type {\n\tSuiSignAndExecuteTransactionInput,\n\tSuiSignAndExecuteTransactionOutput,\n} from '@mysten/wallet-standard';\nimport { signTransaction } from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport {\n\tWalletFeatureNotSupportedError,\n\tWalletNoAccountSelectedError,\n\tWalletNotConnectedError,\n} from '../../errors/walletErrors.js';\nimport type { PartialBy } from '../../types/utilityTypes.js';\nimport { useSuiClientContext } from '../useSuiClient.js';\nimport { useCurrentAccount } from './useCurrentAccount.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useReportTransactionEffects } from './useReportTransactionEffects.js';\n\ntype UseSignAndExecuteTransactionArgs = PartialBy<\n\tOmit<SuiSignAndExecuteTransactionInput, 'transaction'>,\n\t'account' | 'chain'\n> & {\n\ttransaction: Transaction | string;\n};\n\ntype UseSignAndExecuteTransactionResult = SuiSignAndExecuteTransactionOutput;\n\ntype UseSignAndExecuteTransactionError =\n\t| WalletFeatureNotSupportedError\n\t| WalletNoAccountSelectedError\n\t| WalletNotConnectedError\n\t| Error;\n\ntype ExecuteTransactionResult =\n\t| {\n\t\t\tdigest: string;\n\t\t\trawEffects?: number[];\n\t  }\n\t| {\n\t\t\teffects?: {\n\t\t\t\tbcs?: string;\n\t\t\t};\n\t  };\n\ntype UseSignAndExecuteTransactionMutationOptions<Result extends ExecuteTransactionResult> = Omit<\n\tUseMutationOptions<\n\t\tResult,\n\t\tUseSignAndExecuteTransactionError,\n\t\tUseSignAndExecuteTransactionArgs,\n\t\tunknown\n\t>,\n\t'mutationFn'\n> & {\n\texecute?: ({ bytes, signature }: { bytes: string; signature: string }) => Promise<Result>;\n};\n\n/**\n * Mutation hook for prompting the user to sign and execute a transaction.\n */\nexport function useSignAndExecuteTransaction<\n\tResult extends ExecuteTransactionResult = UseSignAndExecuteTransactionResult,\n>({\n\tmutationKey,\n\texecute,\n\t...mutationOptions\n}: UseSignAndExecuteTransactionMutationOptions<Result> = {}): UseMutationResult<\n\tResult,\n\tUseSignAndExecuteTransactionError,\n\tUseSignAndExecuteTransactionArgs\n> {\n\tconst { currentWallet, supportedIntents } = useCurrentWallet();\n\tconst currentAccount = useCurrentAccount();\n\tconst { client, network } = useSuiClientContext();\n\tconst { mutate: reportTransactionEffects } = useReportTransactionEffects();\n\n\tconst executeTransaction: ({\n\t\tbytes,\n\t\tsignature,\n\t}: {\n\t\tbytes: string;\n\t\tsignature: string;\n\t}) => Promise<ExecuteTransactionResult> =\n\t\texecute ??\n\t\t(async ({ bytes, signature }) => {\n\t\t\tconst { digest, rawEffects } = await client.executeTransactionBlock({\n\t\t\t\ttransactionBlock: bytes,\n\t\t\t\tsignature,\n\t\t\t\toptions: {\n\t\t\t\t\tshowRawEffects: true,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tdigest,\n\t\t\t\trawEffects,\n\t\t\t\teffects: toBase64(new Uint8Array(rawEffects!)),\n\t\t\t\tbytes,\n\t\t\t\tsignature,\n\t\t\t};\n\t\t});\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.signAndExecuteTransaction(mutationKey),\n\t\tmutationFn: async ({ transaction, ...signTransactionArgs }): Promise<Result> => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\tconst signerAccount = signTransactionArgs.account ?? currentAccount;\n\t\t\tif (!signerAccount) {\n\t\t\t\tthrow new WalletNoAccountSelectedError(\n\t\t\t\t\t'No wallet account is selected to sign the transaction with.',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!currentWallet.features['sui:signTransaction'] &&\n\t\t\t\t!currentWallet.features['sui:signTransactionBlock']\n\t\t\t) {\n\t\t\t\tthrow new WalletFeatureNotSupportedError(\n\t\t\t\t\t\"This wallet doesn't support the `signTransaction` feature.\",\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof transaction !== 'string' && 'setSenderIfNotSet' in transaction) {\n\t\t\t\ttransaction.setSenderIfNotSet(signerAccount.address);\n\t\t\t}\n\n\t\t\tconst chain = signTransactionArgs.chain ?? `sui:${network}`;\n\t\t\tconst { signature, bytes } = await signTransaction(currentWallet, {\n\t\t\t\t...signTransactionArgs,\n\t\t\t\ttransaction: {\n\t\t\t\t\tasync toJSON() {\n\t\t\t\t\t\treturn typeof transaction === 'string'\n\t\t\t\t\t\t\t? transaction\n\t\t\t\t\t\t\t: await transaction.toJSON({\n\t\t\t\t\t\t\t\t\tsupportedIntents,\n\t\t\t\t\t\t\t\t\tclient,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taccount: signerAccount,\n\t\t\t\tchain,\n\t\t\t});\n\n\t\t\tconst result = await executeTransaction({ bytes, signature });\n\n\t\t\tlet effects: string;\n\n\t\t\tif ('effects' in result && result.effects?.bcs) {\n\t\t\t\teffects = result.effects.bcs;\n\t\t\t} else if ('rawEffects' in result) {\n\t\t\t\teffects = toBase64(new Uint8Array(result.rawEffects!));\n\t\t\t} else {\n\t\t\t\tthrow new Error('Could not parse effects from transaction result.');\n\t\t\t}\n\n\t\t\treportTransactionEffects({ effects, account: signerAccount, chain });\n\n\t\t\treturn result as Result;\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { toBase64 } from '@mysten/sui/utils';\nimport type { SuiReportTransactionEffectsInput } from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport type { WalletFeatureNotSupportedError } from '../../errors/walletErrors.js';\nimport {\n\tWalletNoAccountSelectedError,\n\tWalletNotConnectedError,\n} from '../../errors/walletErrors.js';\nimport type { PartialBy } from '../../types/utilityTypes.js';\nimport { useCurrentAccount } from './useCurrentAccount.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\n\ntype UseReportTransactionEffectsArgs = Omit<\n\tPartialBy<SuiReportTransactionEffectsInput, 'account' | 'chain'>,\n\t'effects'\n> & {\n\teffects: string | number[];\n};\n\ntype UseReportTransactionEffectsError =\n\t| WalletFeatureNotSupportedError\n\t| WalletNoAccountSelectedError\n\t| WalletNotConnectedError\n\t| Error;\n\ntype UseReportTransactionEffectsMutationOptions = Omit<\n\tUseMutationOptions<\n\t\tvoid,\n\t\tUseReportTransactionEffectsError,\n\t\tUseReportTransactionEffectsArgs,\n\t\tunknown\n\t>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for prompting the user to sign a message.\n */\nexport function useReportTransactionEffects({\n\tmutationKey,\n\t...mutationOptions\n}: UseReportTransactionEffectsMutationOptions = {}): UseMutationResult<\n\tvoid,\n\tUseReportTransactionEffectsError,\n\tUseReportTransactionEffectsArgs\n> {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst currentAccount = useCurrentAccount();\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.reportTransactionEffects(mutationKey),\n\t\tmutationFn: async ({ effects, chain = currentWallet?.chains[0], account = currentAccount }) => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\tif (!account) {\n\t\t\t\tthrow new WalletNoAccountSelectedError(\n\t\t\t\t\t'No wallet account is selected to report transaction effects for',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst reportTransactionEffectsFeature =\n\t\t\t\tcurrentWallet.features['sui:reportTransactionEffects'];\n\n\t\t\tif (reportTransactionEffectsFeature) {\n\t\t\t\treturn await reportTransactionEffectsFeature.reportTransactionEffects({\n\t\t\t\t\teffects: Array.isArray(effects) ? toBase64(new Uint8Array(effects)) : effects,\n\t\t\t\t\taccount,\n\t\t\t\t\tchain: chain ?? currentWallet?.chains[0],\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type {\n\tSuiSignPersonalMessageInput,\n\tSuiSignPersonalMessageOutput,\n} from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport {\n\tWalletFeatureNotSupportedError,\n\tWalletNoAccountSelectedError,\n\tWalletNotConnectedError,\n} from '../..//errors/walletErrors.js';\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport type { PartialBy } from '../../types/utilityTypes.js';\nimport { useSuiClientContext } from '../useSuiClient.js';\nimport { useCurrentAccount } from './useCurrentAccount.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\n\ntype UseSignPersonalMessageArgs = PartialBy<SuiSignPersonalMessageInput, 'account' | 'chain'>;\n\ntype UseSignPersonalMessageResult = SuiSignPersonalMessageOutput;\n\ntype UseSignPersonalMessageError =\n\t| WalletFeatureNotSupportedError\n\t| WalletNoAccountSelectedError\n\t| WalletNotConnectedError\n\t| Error;\n\ntype UseSignPersonalMessageMutationOptions = Omit<\n\tUseMutationOptions<\n\t\tUseSignPersonalMessageResult,\n\t\tUseSignPersonalMessageError,\n\t\tUseSignPersonalMessageArgs,\n\t\tunknown\n\t>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for prompting the user to sign a message.\n */\nexport function useSignPersonalMessage({\n\tmutationKey,\n\t...mutationOptions\n}: UseSignPersonalMessageMutationOptions = {}): UseMutationResult<\n\tUseSignPersonalMessageResult,\n\tUseSignPersonalMessageError,\n\tUseSignPersonalMessageArgs\n> {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst currentAccount = useCurrentAccount();\n\tconst { network } = useSuiClientContext();\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.signPersonalMessage(mutationKey),\n\t\tmutationFn: async (signPersonalMessageArgs) => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\tconst signerAccount = signPersonalMessageArgs.account ?? currentAccount;\n\t\t\tif (!signerAccount) {\n\t\t\t\tthrow new WalletNoAccountSelectedError(\n\t\t\t\t\t'No wallet account is selected to sign the personal message with.',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst signPersonalMessageFeature = currentWallet.features['sui:signPersonalMessage'];\n\t\t\tif (signPersonalMessageFeature) {\n\t\t\t\treturn await signPersonalMessageFeature.signPersonalMessage({\n\t\t\t\t\t...signPersonalMessageArgs,\n\t\t\t\t\taccount: signerAccount,\n\t\t\t\t\tchain: signPersonalMessageArgs.chain ?? `sui:${network}`,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// TODO: Remove this once we officially discontinue sui:signMessage in the wallet standard\n\t\t\tconst signMessageFeature = currentWallet.features['sui:signMessage'];\n\t\t\tif (signMessageFeature) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"This wallet doesn't support the `signPersonalMessage` feature... falling back to `signMessage`.\",\n\t\t\t\t);\n\n\t\t\t\tconst { messageBytes, signature } = await signMessageFeature.signMessage({\n\t\t\t\t\t...signPersonalMessageArgs,\n\t\t\t\t\taccount: signerAccount,\n\t\t\t\t});\n\t\t\t\treturn { bytes: messageBytes, signature };\n\t\t\t}\n\n\t\t\tthrow new WalletFeatureNotSupportedError(\n\t\t\t\t\"This wallet doesn't support the `signPersonalMessage` feature.\",\n\t\t\t);\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { Transaction } from '@mysten/sui/transactions';\nimport { signTransaction } from '@mysten/wallet-standard';\nimport type { SignedTransaction, SuiSignTransactionInput } from '@mysten/wallet-standard';\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { walletMutationKeys } from '../../constants/walletMutationKeys.js';\nimport {\n\tWalletFeatureNotSupportedError,\n\tWalletNoAccountSelectedError,\n\tWalletNotConnectedError,\n} from '../../errors/walletErrors.js';\nimport type { PartialBy } from '../../types/utilityTypes.js';\nimport { useSuiClientContext } from '../useSuiClient.js';\nimport { useCurrentAccount } from './useCurrentAccount.js';\nimport { useCurrentWallet } from './useCurrentWallet.js';\nimport { useReportTransactionEffects } from './useReportTransactionEffects.js';\n\ntype UseSignTransactionArgs = PartialBy<\n\tOmit<SuiSignTransactionInput, 'transaction'>,\n\t'account' | 'chain'\n> & {\n\ttransaction: Transaction | string;\n};\n\ninterface UseSignTransactionResult extends SignedTransaction {\n\treportTransactionEffects: (effects: string) => void;\n}\n\ntype UseSignTransactionError =\n\t| WalletFeatureNotSupportedError\n\t| WalletNoAccountSelectedError\n\t| WalletNotConnectedError\n\t| Error;\n\ntype UseSignTransactionMutationOptions = Omit<\n\tUseMutationOptions<\n\t\tUseSignTransactionResult,\n\t\tUseSignTransactionError,\n\t\tUseSignTransactionArgs,\n\t\tunknown\n\t>,\n\t'mutationFn'\n>;\n\n/**\n * Mutation hook for prompting the user to sign a transaction.\n */\nexport function useSignTransaction({\n\tmutationKey,\n\t...mutationOptions\n}: UseSignTransactionMutationOptions = {}): UseMutationResult<\n\tUseSignTransactionResult,\n\tUseSignTransactionError,\n\tUseSignTransactionArgs\n> {\n\tconst { currentWallet } = useCurrentWallet();\n\tconst currentAccount = useCurrentAccount();\n\tconst { client, network } = useSuiClientContext();\n\n\tconst { mutate: reportTransactionEffects } = useReportTransactionEffects();\n\n\treturn useMutation({\n\t\tmutationKey: walletMutationKeys.signTransaction(mutationKey),\n\t\tmutationFn: async ({ transaction, ...signTransactionArgs }) => {\n\t\t\tif (!currentWallet) {\n\t\t\t\tthrow new WalletNotConnectedError('No wallet is connected.');\n\t\t\t}\n\n\t\t\tconst signerAccount = signTransactionArgs.account ?? currentAccount;\n\t\t\tif (!signerAccount) {\n\t\t\t\tthrow new WalletNoAccountSelectedError(\n\t\t\t\t\t'No wallet account is selected to sign the transaction with.',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!currentWallet.features['sui:signTransaction'] &&\n\t\t\t\t!currentWallet.features['sui:signTransactionBlock']\n\t\t\t) {\n\t\t\t\tthrow new WalletFeatureNotSupportedError(\n\t\t\t\t\t\"This wallet doesn't support the `signTransaction` feature.\",\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof transaction !== 'string' && 'setSenderIfNotSet' in transaction) {\n\t\t\t\ttransaction.setSenderIfNotSet(signerAccount.address);\n\t\t\t}\n\n\t\t\tconst chain = signTransactionArgs.chain ?? `sui:${network}`;\n\t\t\tconst { bytes, signature } = await signTransaction(currentWallet, {\n\t\t\t\t...signTransactionArgs,\n\t\t\t\ttransaction: {\n\t\t\t\t\ttoJSON: async () => {\n\t\t\t\t\t\treturn typeof transaction === 'string'\n\t\t\t\t\t\t\t? transaction\n\t\t\t\t\t\t\t: await transaction.toJSON({\n\t\t\t\t\t\t\t\t\tsupportedIntents: [],\n\t\t\t\t\t\t\t\t\tclient,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taccount: signerAccount,\n\t\t\t\tchain,\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tbytes,\n\t\t\t\tsignature,\n\t\t\t\treportTransactionEffects: (effects) => {\n\t\t\t\t\treportTransactionEffects({\n\t\t\t\t\t\teffects,\n\t\t\t\t\t\taccount: signerAccount,\n\t\t\t\t\t\tchain,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...mutationOptions,\n\t});\n}\n", "import type {\r\n    DEPRECATED_WalletsCallback,\r\n    DEPRECATED_WalletsWindow,\r\n    Wallet,\r\n    WalletEventsWindow,\r\n    WindowAppReadyEvent,\r\n    WindowAppReadyEventAPI,\r\n} from '@wallet-standard/base';\r\n\r\nlet wallets: Wallets | undefined = undefined;\r\nconst registeredWalletsSet = new Set<Wallet>();\r\nfunction addRegisteredWallet(wallet: Wallet) {\r\n    cachedWalletsArray = undefined;\r\n    registeredWalletsSet.add(wallet);\r\n}\r\nfunction removeRegisteredWallet(wallet: Wallet) {\r\n    cachedWalletsArray = undefined;\r\n    registeredWalletsSet.delete(wallet);\r\n}\r\nconst listeners: { [E in WalletsEventNames]?: WalletsEventsListeners[E][] } = {};\r\n\r\n/**\r\n * Get an API for {@link Wallets.get | getting}, {@link Wallets.on | listening for}, and\r\n * {@link Wallets.register | registering} {@link \"@wallet-standard/base\".Wallet | Wallets}.\r\n *\r\n * When called for the first time --\r\n *\r\n * This dispatches a {@link \"@wallet-standard/base\".WindowAppReadyEvent} to notify each Wallet that the app is ready\r\n * to register it.\r\n *\r\n * This also adds a listener for {@link \"@wallet-standard/base\".WindowRegisterWalletEvent} to listen for a notification\r\n * from each Wallet that the Wallet is ready to be registered by the app.\r\n *\r\n * This combination of event dispatch and listener guarantees that each Wallet will be registered synchronously as soon\r\n * as the app is ready whether the app loads before or after each Wallet.\r\n *\r\n * @return API for getting, listening for, and registering Wallets.\r\n *\r\n * @group App\r\n */\r\nexport function getWallets(): Wallets {\r\n    if (wallets) return wallets;\r\n    wallets = Object.freeze({ register, get, on });\r\n    if (typeof window === 'undefined') return wallets;\r\n\r\n    const api = Object.freeze({ register });\r\n    try {\r\n        (window as WalletEventsWindow).addEventListener('wallet-standard:register-wallet', ({ detail: callback }) =>\r\n            callback(api)\r\n        );\r\n    } catch (error) {\r\n        console.error('wallet-standard:register-wallet event listener could not be added\\n', error);\r\n    }\r\n    try {\r\n        (window as WalletEventsWindow).dispatchEvent(new AppReadyEvent(api));\r\n    } catch (error) {\r\n        console.error('wallet-standard:app-ready event could not be dispatched\\n', error);\r\n    }\r\n\r\n    return wallets;\r\n}\r\n\r\n/**\r\n * API for {@link Wallets.get | getting}, {@link Wallets.on | listening for}, and\r\n * {@link Wallets.register | registering} {@link \"@wallet-standard/base\".Wallet | Wallets}.\r\n *\r\n * @group App\r\n */\r\nexport interface Wallets {\r\n    /**\r\n     * Get all Wallets that have been registered.\r\n     *\r\n     * @return Registered Wallets.\r\n     */\r\n    get(): readonly Wallet[];\r\n\r\n    /**\r\n     * Add an event listener and subscribe to events for Wallets that are\r\n     * {@link WalletsEventsListeners.register | registered} and\r\n     * {@link WalletsEventsListeners.unregister | unregistered}.\r\n     *\r\n     * @param event    Event type to listen for. {@link WalletsEventsListeners.register | `register`} and\r\n     * {@link WalletsEventsListeners.unregister | `unregister`} are the only event types.\r\n     * @param listener Function that will be called when an event of the type is emitted.\r\n     *\r\n     * @return\r\n     * `off` function which may be called to remove the event listener and unsubscribe from events.\r\n     *\r\n     * As with all event listeners, be careful to avoid memory leaks.\r\n     */\r\n    on<E extends WalletsEventNames>(event: E, listener: WalletsEventsListeners[E]): () => void;\r\n\r\n    /**\r\n     * Register Wallets. This can be used to programmatically wrap non-standard wallets as Standard Wallets.\r\n     *\r\n     * Apps generally do not need to, and should not, call this.\r\n     *\r\n     * @param wallets Wallets to register.\r\n     *\r\n     * @return\r\n     * `unregister` function which may be called to programmatically unregister the registered Wallets.\r\n     *\r\n     * Apps generally do not need to, and should not, call this.\r\n     */\r\n    register(...wallets: Wallet[]): () => void;\r\n}\r\n\r\n/**\r\n * Types of event listeners of the {@link Wallets} API.\r\n *\r\n * @group App\r\n */\r\nexport interface WalletsEventsListeners {\r\n    /**\r\n     * Emitted when Wallets are registered.\r\n     *\r\n     * @param wallets Wallets that were registered.\r\n     */\r\n    register(...wallets: Wallet[]): void;\r\n\r\n    /**\r\n     * Emitted when Wallets are unregistered.\r\n     *\r\n     * @param wallets Wallets that were unregistered.\r\n     */\r\n    unregister(...wallets: Wallet[]): void;\r\n}\r\n\r\n/**\r\n * Names of {@link WalletsEventsListeners} that can be listened for.\r\n *\r\n * @group App\r\n */\r\nexport type WalletsEventNames = keyof WalletsEventsListeners;\r\n\r\n/**\r\n * @deprecated Use {@link WalletsEventsListeners} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type WalletsEvents = WalletsEventsListeners;\r\n\r\nfunction register(...wallets: Wallet[]): () => void {\r\n    // Filter out wallets that have already been registered.\r\n    // This prevents the same wallet from being registered twice, but it also prevents wallets from being\r\n    // unregistered by reusing a reference to the wallet to obtain the unregister function for it.\r\n    wallets = wallets.filter((wallet) => !registeredWalletsSet.has(wallet));\r\n    // If there are no new wallets to register, just return a no-op unregister function.\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    if (!wallets.length) return () => {};\r\n\r\n    wallets.forEach((wallet) => addRegisteredWallet(wallet));\r\n    listeners['register']?.forEach((listener) => guard(() => listener(...wallets)));\r\n    // Return a function that unregisters the registered wallets.\r\n    return function unregister(): void {\r\n        wallets.forEach((wallet) => removeRegisteredWallet(wallet));\r\n        listeners['unregister']?.forEach((listener) => guard(() => listener(...wallets)));\r\n    };\r\n}\r\n\r\nlet cachedWalletsArray: readonly Wallet[] | undefined;\r\nfunction get(): readonly Wallet[] {\r\n    if (!cachedWalletsArray) {\r\n        cachedWalletsArray = [...registeredWalletsSet];\r\n    }\r\n    return cachedWalletsArray;\r\n}\r\n\r\nfunction on<E extends WalletsEventNames>(event: E, listener: WalletsEventsListeners[E]): () => void {\r\n    listeners[event]?.push(listener) || (listeners[event] = [listener]);\r\n    // Return a function that removes the event listener.\r\n    return function off(): void {\r\n        listeners[event] = listeners[event]?.filter((existingListener) => listener !== existingListener);\r\n    };\r\n}\r\n\r\nfunction guard(callback: () => void) {\r\n    try {\r\n        callback();\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\nclass AppReadyEvent extends Event implements WindowAppReadyEvent {\r\n    readonly #detail: WindowAppReadyEventAPI;\r\n\r\n    get detail() {\r\n        return this.#detail;\r\n    }\r\n\r\n    get type() {\r\n        return 'wallet-standard:app-ready' as const;\r\n    }\r\n\r\n    constructor(api: WindowAppReadyEventAPI) {\r\n        super('wallet-standard:app-ready', {\r\n            bubbles: false,\r\n            cancelable: false,\r\n            composed: false,\r\n        });\r\n        this.#detail = api;\r\n    }\r\n\r\n    /** @deprecated */\r\n    preventDefault(): never {\r\n        throw new Error('preventDefault cannot be called');\r\n    }\r\n\r\n    /** @deprecated */\r\n    stopImmediatePropagation(): never {\r\n        throw new Error('stopImmediatePropagation cannot be called');\r\n    }\r\n\r\n    /** @deprecated */\r\n    stopPropagation(): never {\r\n        throw new Error('stopPropagation cannot be called');\r\n    }\r\n}\r\n\r\n/**\r\n * @deprecated Use {@link getWallets} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport function DEPRECATED_getWallets(): Wallets {\r\n    if (wallets) return wallets;\r\n    wallets = getWallets();\r\n    if (typeof window === 'undefined') return wallets;\r\n\r\n    const callbacks = (window as DEPRECATED_WalletsWindow).navigator.wallets || [];\r\n    if (!Array.isArray(callbacks)) {\r\n        console.error('window.navigator.wallets is not an array');\r\n        return wallets;\r\n    }\r\n\r\n    const { register } = wallets;\r\n    const push = (...callbacks: DEPRECATED_WalletsCallback[]): void =>\r\n        callbacks.forEach((callback) => guard(() => callback({ register })));\r\n    try {\r\n        Object.defineProperty((window as DEPRECATED_WalletsWindow).navigator, 'wallets', {\r\n            value: Object.freeze({ push }),\r\n        });\r\n    } catch (error) {\r\n        console.error('window.navigator.wallets could not be set');\r\n        return wallets;\r\n    }\r\n\r\n    push(...callbacks);\r\n    return wallets;\r\n}\r\n", "/**\r\n * To add a new error, follow the instructions at\r\n * https://github.com/wallet-standard/wallet-standard/tree/master/packages/core/errors/#adding-a-new-error\r\n *\r\n * WARNING:\r\n *   - Don't remove error codes\r\n *   - Don't change or reorder error codes.\r\n *\r\n * Good naming conventions:\r\n *   - Prefixing common errors — e.g. under the same package — can be a good way to namespace them. E.g. All codec-related errors start with `WALLET_STANDARD_ERROR__ACCOUNT__`.\r\n *   - Use consistent names — e.g. choose `PDA` or `PROGRAM_DERIVED_ADDRESS` and stick with it. Ensure your names are consistent with existing error codes. The decision might have been made for you.\r\n *   - Recommended prefixes and suffixes:\r\n *     - `MALFORMED_`: Some input was not constructed properly. E.g. `MALFORMED_BASE58_ENCODED_ADDRESS`.\r\n *     - `INVALID_`: Some input is invalid (other than because it was MALFORMED). E.g. `INVALID_NUMBER_OF_BYTES`.\r\n *     - `EXPECTED_`: Some input was different than expected, no need to specify the \"GOT\" part unless necessary. E.g. `EXPECTED_DECODED_ACCOUNT`.\r\n *     - `_CANNOT_`: Some operation cannot be performed or some input cannot be used due to some condition. E.g. `CANNOT_DECODE_EMPTY_BYTE_ARRAY` or `PDA_CANNOT_END_WITH_PDA_MARKER`.\r\n *     - `_MUST_BE_`: Some condition must be true. E.g. `NONCE_TRANSACTION_FIRST_INSTRUCTION_MUST_BE_ADVANCE_NONCE`.\r\n *     - `_FAILED_TO_`: Tried to perform some operation and failed. E.g. `FAILED_TO_DECODE_ACCOUNT`.\r\n *     - `_NOT_FOUND`: Some operation lead to not finding something. E.g. `ACCOUNT_NOT_FOUND`.\r\n *     - `_OUT_OF_RANGE`: Some value is out of range. E.g. `ENUM_DISCRIMINATOR_OUT_OF_RANGE`.\r\n *     - `_EXCEEDED`: Some limit was exceeded. E.g. `PDA_MAX_SEED_LENGTH_EXCEEDED`.\r\n *     - `_MISMATCH`: Some elements do not match. E.g. `ENCODER_DECODER_FIXED_SIZE_MISMATCH`.\r\n *     - `_MISSING`: Some required input is missing. E.g. `TRANSACTION_FEE_PAYER_MISSING`.\r\n *     - `_UNIMPLEMENTED`: Some required component is not available in the environment. E.g. `SUBTLE_CRYPTO_VERIFY_FUNCTION_UNIMPLEMENTED`.\r\n */\r\n\r\n// Registry-related errors.\r\n// Reserve error codes in the range [3834000-3834999].\r\nexport const WALLET_STANDARD_ERROR__REGISTRY__WALLET_NOT_FOUND = 3834000 as const;\r\nexport const WALLET_STANDARD_ERROR__REGISTRY__WALLET_ACCOUNT_NOT_FOUND = 3834001 as const;\r\n\r\n// User-related errors.\r\n// Reserve error codes in the range [4001000-4001999].\r\nexport const WALLET_STANDARD_ERROR__USER__REQUEST_REJECTED = 4001000 as const;\r\n\r\n// Feature-related errors.\r\n// Reserve error codes in the range [6160000-6160999].\r\nexport const WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_CHAIN_UNSUPPORTED = 6160000 as const;\r\nexport const WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_FEATURE_UNIMPLEMENTED = 6160001 as const;\r\nexport const WALLET_STANDARD_ERROR__FEATURES__WALLET_FEATURE_UNIMPLEMENTED = 6160002 as const;\r\n\r\n/**\r\n * A union of every Wallet Standard error code\r\n *\r\n * You might be wondering why this is not a TypeScript enum or const enum.\r\n *\r\n * One of the goals of this library is to enable people to use some or none of it without having to\r\n * bundle all of it.\r\n *\r\n * If we made the set of error codes an enum then anyone who imported it (even if to only use a\r\n * single error code) would be forced to bundle every code and its label.\r\n *\r\n * Const enums appear to solve this problem by letting the compiler inline only the codes that are\r\n * actually used. Unfortunately exporting ambient (const) enums from a library like\r\n * `@wallet-standard/errors` is not safe, for a variety of reasons covered here:\r\n * https://stackoverflow.com/a/28818850\r\n */\r\nexport type WalletStandardErrorCode =\r\n    | typeof WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_CHAIN_UNSUPPORTED\r\n    | typeof WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_FEATURE_UNIMPLEMENTED\r\n    | typeof WALLET_STANDARD_ERROR__FEATURES__WALLET_FEATURE_UNIMPLEMENTED\r\n    | typeof WALLET_STANDARD_ERROR__REGISTRY__WALLET_ACCOUNT_NOT_FOUND\r\n    | typeof WALLET_STANDARD_ERROR__REGISTRY__WALLET_NOT_FOUND\r\n    | typeof WALLET_STANDARD_ERROR__USER__REQUEST_REJECTED;\r\n", "import type { WalletStandardErrorCode } from './codes.js';\r\nimport {\r\n    WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_CHAIN_UNSUPPORTED,\r\n    WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_FEATURE_UNIMPLEMENTED,\r\n    WALLET_STANDARD_ERROR__FEATURES__WALLET_FEATURE_UNIMPLEMENTED,\r\n    WALLET_STANDARD_ERROR__REGISTRY__WALLET_ACCOUNT_NOT_FOUND,\r\n    WALLET_STANDARD_ERROR__REGISTRY__WALLET_NOT_FOUND,\r\n    WALLET_STANDARD_ERROR__USER__REQUEST_REJECTED,\r\n} from './codes.js';\r\n\r\n/**\r\n * To add a new error, follow the instructions at\r\n * https://github.com/wallet-standard/wallet-standard/tree/master/packages/core/errors#adding-a-new-error\r\n *\r\n * WARNING:\r\n *   - Don't change the meaning of an error message.\r\n */\r\nexport const WalletStandardErrorMessages: Readonly<{\r\n    // This type makes this data structure exhaustive with respect to `WalletStandardErrorCode`.\r\n    // TypeScript will fail to build this project if add an error code without a message.\r\n    [P in WalletStandardErrorCode]: string;\r\n}> = {\r\n    [WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_CHAIN_UNSUPPORTED]:\r\n        'The wallet account $address does not support the chain `$chain`',\r\n    [WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_FEATURE_UNIMPLEMENTED]:\r\n        'The wallet account $address does not support the `$featureName` feature',\r\n    [WALLET_STANDARD_ERROR__FEATURES__WALLET_FEATURE_UNIMPLEMENTED]:\r\n        \"The wallet '$walletName' does not support the `$featureName` feature\",\r\n    [WALLET_STANDARD_ERROR__REGISTRY__WALLET_ACCOUNT_NOT_FOUND]:\r\n        \"No account with address $address could be found in the '$walletName' wallet\",\r\n    [WALLET_STANDARD_ERROR__REGISTRY__WALLET_NOT_FOUND]:\r\n        'No underlying Wallet Standard wallet could be found for this handle. This can happen if ' +\r\n        'the wallet associated with the handle has been unregistered.',\r\n    [WALLET_STANDARD_ERROR__USER__REQUEST_REJECTED]: 'The user rejected the request',\r\n};\r\n", "import type { WalletStandardErrorCode } from './codes.js';\r\nimport { encodeContextObject } from './context.js';\r\nimport { WalletStandardErrorMessages } from './messages.js';\r\n\r\nconst enum StateType {\r\n    EscapeSequence,\r\n    Text,\r\n    Variable,\r\n}\r\ntype State = Readonly<{\r\n    [START_INDEX]: number;\r\n    [TYPE]: StateType;\r\n}>;\r\nconst START_INDEX = 'i';\r\nconst TYPE = 't';\r\n\r\nexport function getHumanReadableErrorMessage<TErrorCode extends WalletStandardErrorCode>(\r\n    code: TErrorCode,\r\n    context: object = {}\r\n): string {\r\n    const messageFormatString = WalletStandardErrorMessages[code];\r\n    if (messageFormatString.length === 0) {\r\n        return '';\r\n    }\r\n    let state: State;\r\n    function commitStateUpTo(endIndex?: number) {\r\n        if (state[TYPE] === StateType.Variable) {\r\n            const variableName = messageFormatString.slice(state[START_INDEX] + 1, endIndex);\r\n            fragments.push(\r\n                variableName in context ? `${context[variableName as keyof typeof context]}` : `$${variableName}`\r\n            );\r\n        } else if (state[TYPE] === StateType.Text) {\r\n            fragments.push(messageFormatString.slice(state[START_INDEX], endIndex));\r\n        }\r\n    }\r\n    const fragments: string[] = [];\r\n    messageFormatString.split('').forEach((char, ii) => {\r\n        if (ii === 0) {\r\n            state = {\r\n                [START_INDEX]: 0,\r\n                [TYPE]:\r\n                    messageFormatString[0] === '\\\\'\r\n                        ? StateType.EscapeSequence\r\n                        : messageFormatString[0] === '$'\r\n                          ? StateType.Variable\r\n                          : StateType.Text,\r\n            };\r\n            return;\r\n        }\r\n        let nextState;\r\n        switch (state[TYPE]) {\r\n            case StateType.EscapeSequence:\r\n                nextState = { [START_INDEX]: ii, [TYPE]: StateType.Text };\r\n                break;\r\n            case StateType.Text:\r\n                if (char === '\\\\') {\r\n                    nextState = { [START_INDEX]: ii, [TYPE]: StateType.EscapeSequence };\r\n                } else if (char === '$') {\r\n                    nextState = { [START_INDEX]: ii, [TYPE]: StateType.Variable };\r\n                }\r\n                break;\r\n            case StateType.Variable:\r\n                if (char === '\\\\') {\r\n                    nextState = { [START_INDEX]: ii, [TYPE]: StateType.EscapeSequence };\r\n                } else if (char === '$') {\r\n                    nextState = { [START_INDEX]: ii, [TYPE]: StateType.Variable };\r\n                } else if (!char.match(/\\w/)) {\r\n                    nextState = { [START_INDEX]: ii, [TYPE]: StateType.Text };\r\n                }\r\n                break;\r\n        }\r\n        if (nextState) {\r\n            if (state !== nextState) {\r\n                commitStateUpTo(ii);\r\n            }\r\n            state = nextState;\r\n        }\r\n    });\r\n    commitStateUpTo();\r\n    return fragments.join('');\r\n}\r\n\r\nexport function getErrorMessage<TErrorCode extends WalletStandardErrorCode>(\r\n    code: TErrorCode,\r\n    context: object = {}\r\n): string {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n        return getHumanReadableErrorMessage(code, context);\r\n    } else {\r\n        let decodingAdviceMessage = `Wallet Standard error #${code}; Decode this error by running \\`npx @wallet-standard/errors decode -- ${code}`;\r\n        if (Object.keys(context).length) {\r\n            /**\r\n             * DANGER: Be sure that the shell command is escaped in such a way that makes it\r\n             *         impossible for someone to craft malicious context values that would result in\r\n             *         an exploit against anyone who bindly copy/pastes it into their terminal.\r\n             */\r\n            decodingAdviceMessage += ` '${encodeContextObject(context)}'`;\r\n        }\r\n        return `${decodingAdviceMessage}\\``;\r\n    }\r\n}\r\n", "import type { WalletAccount } from '@wallet-standard/base';\r\n\r\n/** Name of the feature. */\r\nexport const StandardConnect = 'standard:connect';\r\n/**\r\n * @deprecated Use {@link StandardConnect} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport const Connect = StandardConnect;\r\n\r\n/**\r\n * `standard:connect` is a {@link \"@wallet-standard/base\".Wallet.features | feature} that may be implemented by a\r\n * {@link \"@wallet-standard/base\".Wallet} to allow the app to obtain authorization to use\r\n * {@link \"@wallet-standard/base\".Wallet.accounts}.\r\n *\r\n * @group Connect\r\n */\r\nexport type StandardConnectFeature = {\r\n    /** Name of the feature. */\r\n    readonly [StandardConnect]: {\r\n        /** Version of the feature implemented by the Wallet. */\r\n        readonly version: StandardConnectVersion;\r\n        /** Method to call to use the feature. */\r\n        readonly connect: StandardConnectMethod;\r\n    };\r\n};\r\n/**\r\n * @deprecated Use {@link StandardConnectFeature} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type ConnectFeature = StandardConnectFeature;\r\n\r\n/**\r\n * Version of the {@link StandardConnectFeature} implemented by a {@link \"@wallet-standard/base\".Wallet}.\r\n *\r\n * @group Connect\r\n */\r\nexport type StandardConnectVersion = '1.0.0';\r\n/**\r\n * @deprecated Use {@link StandardConnectVersion} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type ConnectVersion = StandardConnectVersion;\r\n\r\n/**\r\n * Method to call to use the {@link StandardConnectFeature}.\r\n *\r\n * @group Connect\r\n */\r\nexport type StandardConnectMethod = (input?: StandardConnectInput) => Promise<StandardConnectOutput>;\r\n/**\r\n * @deprecated Use {@link StandardConnectMethod} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type ConnectMethod = StandardConnectMethod;\r\n\r\n/**\r\n * Input for the {@link StandardConnectMethod}.\r\n *\r\n * @group Connect\r\n */\r\nexport interface StandardConnectInput {\r\n    /**\r\n     * By default, using the {@link StandardConnectFeature} should prompt the user to request authorization to accounts.\r\n     * Set the `silent` flag to `true` to request accounts that have already been authorized without prompting.\r\n     *\r\n     * This flag may or may not be used by the Wallet and the app should not depend on it being used.\r\n     * If this flag is used by the Wallet, the Wallet should not prompt the user, and should return only the accounts\r\n     * that the app is authorized to use.\r\n     */\r\n    readonly silent?: boolean;\r\n}\r\n/**\r\n * @deprecated Use {@link StandardConnectInput} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type ConnectInput = StandardConnectInput;\r\n\r\n/**\r\n * Output of the {@link StandardConnectMethod}.\r\n *\r\n * @group Connect\r\n */\r\nexport interface StandardConnectOutput {\r\n    /** List of accounts in the {@link \"@wallet-standard/base\".Wallet} that the app has been authorized to use. */\r\n    readonly accounts: readonly WalletAccount[];\r\n}\r\n/**\r\n * @deprecated Use {@link StandardConnectOutput} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type ConnectOutput = StandardConnectOutput;\r\n", "import type { Wallet } from '@wallet-standard/base';\r\n\r\n/** Name of the feature. */\r\nexport const StandardEvents = 'standard:events';\r\n/**\r\n * @deprecated Use {@link StandardEvents} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport const Events = StandardEvents;\r\n\r\n/**\r\n * `standard:events` is a {@link \"@wallet-standard/base\".Wallet.features | feature} that may be implemented by a\r\n * {@link \"@wallet-standard/base\".Wallet} to allow the app to add an event listener and subscribe to events emitted by\r\n * the Wallet when properties of the Wallet {@link StandardEventsListeners.change}.\r\n *\r\n * @group Events\r\n */\r\nexport type StandardEventsFeature = {\r\n    /** Name of the feature. */\r\n    readonly [StandardEvents]: {\r\n        /** Version of the feature implemented by the {@link \"@wallet-standard/base\".Wallet}. */\r\n        readonly version: StandardEventsVersion;\r\n        /** Method to call to use the feature. */\r\n        readonly on: StandardEventsOnMethod;\r\n    };\r\n};\r\n/**\r\n * @deprecated Use {@link StandardEventsFeature} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsFeature = StandardEventsFeature;\r\n\r\n/**\r\n * Version of the {@link StandardEventsFeature} implemented by a {@link \"@wallet-standard/base\".Wallet}.\r\n *\r\n * @group Events\r\n */\r\nexport type StandardEventsVersion = '1.0.0';\r\n/**\r\n * @deprecated Use {@link StandardEventsVersion} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsVersion = StandardEventsVersion;\r\n\r\n/**\r\n * Method to call to use the {@link StandardEventsFeature}.\r\n *\r\n * @param event    Event type to listen for. {@link StandardEventsListeners.change | `change`} is the only event type.\r\n * @param listener Function that will be called when an event of the type is emitted.\r\n *\r\n * @return\r\n * `off` function which may be called to remove the event listener and unsubscribe from events.\r\n *\r\n * As with all event listeners, be careful to avoid memory leaks.\r\n *\r\n * @group Events\r\n */\r\nexport type StandardEventsOnMethod = <E extends StandardEventsNames>(\r\n    event: E,\r\n    listener: StandardEventsListeners[E]\r\n) => () => void;\r\n/**\r\n * @deprecated Use {@link StandardEventsOnMethod} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsOnMethod = StandardEventsOnMethod;\r\n\r\n/**\r\n * Types of event listeners of the {@link StandardEventsFeature}.\r\n *\r\n * @group Events\r\n */\r\nexport interface StandardEventsListeners {\r\n    /**\r\n     * Listener that will be called when {@link StandardEventsChangeProperties | properties} of the\r\n     * {@link \"@wallet-standard/base\".Wallet} have changed.\r\n     *\r\n     * @param properties Properties that changed with their **new** values.\r\n     */\r\n    change(properties: StandardEventsChangeProperties): void;\r\n}\r\n/**\r\n * @deprecated Use {@link StandardEventsListeners} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsListeners = StandardEventsListeners;\r\n\r\n/**\r\n * Names of {@link StandardEventsListeners} that can be listened for.\r\n *\r\n * @group Events\r\n */\r\nexport type StandardEventsNames = keyof StandardEventsListeners;\r\n/**\r\n * @deprecated Use {@link StandardEventsNames} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsNames = StandardEventsNames;\r\n\r\n/**\r\n * Properties of a {@link \"@wallet-standard/base\".Wallet} that {@link StandardEventsListeners.change | changed} with their\r\n * **new** values.\r\n *\r\n * @group Events\r\n */\r\nexport interface StandardEventsChangeProperties {\r\n    /**\r\n     * {@link \"@wallet-standard/base\".Wallet.chains | Chains} supported by the Wallet.\r\n     *\r\n     * The Wallet should only define this field if the value of the property has changed.\r\n     *\r\n     * The value must be the **new** value of the property.\r\n     */\r\n    readonly chains?: Wallet['chains'];\r\n    /**\r\n     * {@link \"@wallet-standard/base\".Wallet.features | Features} supported by the Wallet.\r\n     *\r\n     * The Wallet should only define this field if the value of the property has changed.\r\n     *\r\n     * The value must be the **new** value of the property.\r\n     */\r\n    readonly features?: Wallet['features'];\r\n    /**\r\n     * {@link \"@wallet-standard/base\".Wallet.accounts | Accounts} that the app is authorized to use.\r\n     *\r\n     * The Wallet should only define this field if the value of the property has changed.\r\n     *\r\n     * The value must be the **new** value of the property.\r\n     */\r\n    readonly accounts?: Wallet['accounts'];\r\n}\r\n/**\r\n * @deprecated Use {@link StandardEventsChangeProperties} instead.\r\n *\r\n * @group Deprecated\r\n */\r\nexport type EventsChangeProperties = StandardEventsChangeProperties;\r\n", "import type { ReadonlyUint8Array, WalletAccount } from '@wallet-standard/base';\r\n\r\n/**\r\n * Base implementation of a {@link \"@wallet-standard/base\".WalletAccount} to be used or extended by a\r\n * {@link \"@wallet-standard/base\".Wallet}.\r\n *\r\n * `WalletAccount` properties must be read-only. This class enforces this by making all properties\r\n * [truly private](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields) and\r\n * read-only, using getters for access, returning copies instead of references, and calling\r\n * [Object.freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze)\r\n * on the instance.\r\n *\r\n * @group Account\r\n */\r\nexport class ReadonlyWalletAccount implements WalletAccount {\r\n    readonly #address: WalletAccount['address'];\r\n    readonly #publicKey: WalletAccount['publicKey'];\r\n    readonly #chains: WalletAccount['chains'];\r\n    readonly #features: WalletAccount['features'];\r\n    readonly #label: WalletAccount['label'];\r\n    readonly #icon: WalletAccount['icon'];\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.address | WalletAccount::address} */\r\n    get address() {\r\n        return this.#address;\r\n    }\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.publicKey | WalletAccount::publicKey} */\r\n    get publicKey() {\r\n        return this.#publicKey.slice();\r\n    }\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.chains | WalletAccount::chains} */\r\n    get chains() {\r\n        return this.#chains.slice();\r\n    }\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.features | WalletAccount::features} */\r\n    get features() {\r\n        return this.#features.slice();\r\n    }\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.label | WalletAccount::label} */\r\n    get label() {\r\n        return this.#label;\r\n    }\r\n\r\n    /** Implementation of {@link \"@wallet-standard/base\".WalletAccount.icon | WalletAccount::icon} */\r\n    get icon() {\r\n        return this.#icon;\r\n    }\r\n\r\n    /**\r\n     * Create and freeze a read-only account.\r\n     *\r\n     * @param account Account to copy properties from.\r\n     */\r\n    constructor(account: WalletAccount) {\r\n        if (new.target === ReadonlyWalletAccount) {\r\n            Object.freeze(this);\r\n        }\r\n\r\n        this.#address = account.address;\r\n        this.#publicKey = account.publicKey.slice();\r\n        this.#chains = account.chains.slice();\r\n        this.#features = account.features.slice();\r\n        this.#label = account.label;\r\n        this.#icon = account.icon;\r\n    }\r\n}\r\n\r\n/**\r\n * Efficiently compare {@link Indexed} arrays (e.g. `Array` and `Uint8Array`).\r\n *\r\n * @param a An array.\r\n * @param b Another array.\r\n *\r\n * @return `true` if the arrays have the same length and elements, `false` otherwise.\r\n *\r\n * @group Util\r\n */\r\nexport function arraysEqual<T>(a: Indexed<T>, b: Indexed<T>): boolean {\r\n    if (a === b) return true;\r\n\r\n    const length = a.length;\r\n    if (length !== b.length) return false;\r\n\r\n    for (let i = 0; i < length; i++) {\r\n        if (a[i] !== b[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Efficiently compare byte arrays, using {@link arraysEqual}.\r\n *\r\n * @param a A byte array.\r\n * @param b Another byte array.\r\n *\r\n * @return `true` if the byte arrays have the same length and bytes, `false` otherwise.\r\n *\r\n * @group Util\r\n */\r\nexport function bytesEqual(a: ReadonlyUint8Array, b: ReadonlyUint8Array): boolean {\r\n    return arraysEqual(a, b);\r\n}\r\n\r\n/**\r\n * Efficiently concatenate byte arrays without modifying them.\r\n *\r\n * @param first  A byte array.\r\n * @param others Additional byte arrays.\r\n *\r\n * @return New byte array containing the concatenation of all the byte arrays.\r\n *\r\n * @group Util\r\n */\r\nexport function concatBytes(first: ReadonlyUint8Array, ...others: ReadonlyUint8Array[]): Uint8Array {\r\n    const length = others.reduce((length, bytes) => length + bytes.length, first.length);\r\n    const bytes = new Uint8Array(length);\r\n\r\n    bytes.set(first, 0);\r\n    for (const other of others) {\r\n        bytes.set(other, bytes.length);\r\n    }\r\n\r\n    return bytes;\r\n}\r\n\r\n/**\r\n * Create a new object with a subset of fields from a source object.\r\n *\r\n * @param source Object to pick fields from.\r\n * @param keys   Names of fields to pick.\r\n *\r\n * @return New object with only the picked fields.\r\n *\r\n * @group Util\r\n */\r\nexport function pick<T, K extends keyof T>(source: T, ...keys: K[]): Pick<T, K> {\r\n    const picked = {} as Pick<T, K>;\r\n    for (const key of keys) {\r\n        picked[key] = source[key];\r\n    }\r\n    return picked;\r\n}\r\n\r\n/**\r\n * Call a callback function, catch an error if it throws, and log the error without rethrowing.\r\n *\r\n * @param callback Function to call.\r\n *\r\n * @group Util\r\n */\r\nexport function guard(callback: () => void) {\r\n    try {\r\n        callback();\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\n/**\r\n * @internal\r\n *\r\n * Type with a numeric `length` and numerically indexed elements of a generic type `T`.\r\n *\r\n * For example, `Array<T>` and `Uint8Array`.\r\n *\r\n * @group Internal\r\n */\r\nexport interface Indexed<T> {\r\n    length: number;\r\n    [index: number]: T;\r\n}\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bcs } from '@mysten/sui/bcs';\nimport { Transaction } from '@mysten/sui/transactions';\nimport { fromBase64, toBase64 } from '@mysten/sui/utils';\nimport type { WalletWithFeatures } from '@wallet-standard/core';\n\nimport type {\n\tSuiSignAndExecuteTransactionInput,\n\tSuiSignTransactionInput,\n\tSuiWalletFeatures,\n} from './features/index.js';\n\ndeclare module '@wallet-standard/core' {\n\texport interface Wallet {\n\t\t/**\n\t\t * Unique identifier of the Wallet.\n\t\t *\n\t\t * If not provided, the wallet name will be used as the identifier.\n\t\t */\n\t\treadonly id?: string;\n\t}\n\n\texport interface StandardConnectOutput {\n\t\tsupportedIntents?: string[];\n\t}\n}\n\nexport type { Wallet } from '@wallet-standard/core';\n\nexport async function signAndExecuteTransaction(\n\twallet: WalletWithFeatures<Partial<SuiWalletFeatures>>,\n\tinput: SuiSignAndExecuteTransactionInput,\n) {\n\tif (wallet.features['sui:signAndExecuteTransaction']) {\n\t\treturn wallet.features['sui:signAndExecuteTransaction'].signAndExecuteTransaction(input);\n\t}\n\n\tif (!wallet.features['sui:signAndExecuteTransactionBlock']) {\n\t\tthrow new Error(\n\t\t\t`Provided wallet (${wallet.name}) does not support the signAndExecuteTransaction feature.`,\n\t\t);\n\t}\n\n\tconst { signAndExecuteTransactionBlock } = wallet.features['sui:signAndExecuteTransactionBlock'];\n\n\tconst transactionBlock = Transaction.from(await input.transaction.toJSON());\n\tconst { digest, rawEffects, rawTransaction } = await signAndExecuteTransactionBlock({\n\t\taccount: input.account,\n\t\tchain: input.chain,\n\t\ttransactionBlock,\n\t\toptions: {\n\t\t\tshowRawEffects: true,\n\t\t\tshowRawInput: true,\n\t\t},\n\t});\n\n\tconst [\n\t\t{\n\t\t\ttxSignatures: [signature],\n\t\t\tintentMessage: { value: bcsTransaction },\n\t\t},\n\t] = bcs.SenderSignedData.parse(fromBase64(rawTransaction!));\n\n\tconst bytes = bcs.TransactionData.serialize(bcsTransaction).toBase64();\n\n\treturn {\n\t\tdigest,\n\t\tsignature,\n\t\tbytes,\n\t\teffects: toBase64(new Uint8Array(rawEffects!)),\n\t};\n}\n\nexport async function signTransaction(\n\twallet: WalletWithFeatures<Partial<SuiWalletFeatures>>,\n\tinput: SuiSignTransactionInput,\n) {\n\tif (wallet.features['sui:signTransaction']) {\n\t\treturn wallet.features['sui:signTransaction'].signTransaction(input);\n\t}\n\n\tif (!wallet.features['sui:signTransactionBlock']) {\n\t\tthrow new Error(\n\t\t\t`Provided wallet (${wallet.name}) does not support the signTransaction feature.`,\n\t\t);\n\t}\n\n\tconst { signTransactionBlock } = wallet.features['sui:signTransactionBlock'];\n\n\tconst transaction = Transaction.from(await input.transaction.toJSON());\n\tconst { transactionBlockBytes, signature } = await signTransactionBlock({\n\t\ttransactionBlock: transaction,\n\t\taccount: input.account,\n\t\tchain: input.chain,\n\t});\n\n\treturn { bytes: transactionBlockBytes, signature };\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { StandardConnect, StandardEvents } from '@wallet-standard/core';\nimport type { Wallet, WalletWithFeatures } from '@wallet-standard/core';\n\nimport type { MinimallyRequiredFeatures } from './features/index.js';\n\n// These features are absolutely required for wallets to function in the Sui ecosystem.\n// Eventually, as wallets have more consistent support of features, we may want to extend this list.\nconst REQUIRED_FEATURES: (keyof MinimallyRequiredFeatures)[] = [StandardConnect, StandardEvents];\n\nexport function isWalletWithRequiredFeatureSet<AdditionalFeatures extends Wallet['features']>(\n\twallet: Wallet,\n\tadditionalFeatures: (keyof AdditionalFeatures)[] = [],\n): wallet is WalletWithFeatures<MinimallyRequiredFeatures & AdditionalFeatures> {\n\treturn [...REQUIRED_FEATURES, ...additionalFeatures].every(\n\t\t(feature) => feature in wallet.features,\n\t);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { IdentifierString } from '@wallet-standard/core';\n\n/** Sui Devnet */\nexport const SUI_DEVNET_CHAIN = 'sui:devnet';\n\n/** Sui Testnet */\nexport const SUI_TESTNET_CHAIN = 'sui:testnet';\n\n/** Sui Localnet */\nexport const SUI_LOCALNET_CHAIN = 'sui:localnet';\n\n/** Sui Mainnet */\nexport const SUI_MAINNET_CHAIN = 'sui:mainnet';\n\nexport const SUI_CHAINS = [\n\tSUI_DEVNET_CHAIN,\n\tSUI_TESTNET_CHAIN,\n\tSUI_LOCALNET_CHAIN,\n\tSUI_MAINNET_CHAIN,\n] as const;\n\nexport type SuiChain = (typeof SUI_CHAINS)[number];\n\n/**\n * Utility that returns whether or not a chain identifier is a valid Sui chain.\n * @param chain a chain identifier in the form of `${string}:{$string}`\n */\nexport function isSuiChain(chain: IdentifierString): chain is SuiChain {\n\treturn SUI_CHAINS.includes(chain as SuiChain);\n}\n", "export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<\n\tWildcardHandler<T>\n>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(\n\t\ttype: Key,\n\t\thandler?: Handler<Events[Key]>\n\t): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(\n\t\ttype: undefined extends Events[Key] ? Key : never\n\t): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t} else {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from (`'*'` to remove a wildcard handler)\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t} else {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as v from 'valibot';\n\nexport type JsonData = string | number | boolean | null | { [key: string]: JsonData } | JsonData[];\n\nconst JsonSchema: v.GenericSchema<JsonData> = v.lazy(() =>\n\tv.union([\n\t\tv.string(),\n\t\tv.number(),\n\t\tv.boolean(),\n\t\tv.null(),\n\t\tv.record(v.string(), JsonSchema),\n\t\tv.array(JsonSchema),\n\t]),\n);\n\nexport const RequestData = v.variant('type', [\n\tv.object({\n\t\ttype: v.literal('connect'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-transaction'),\n\t\ttransaction: v.string('`transaction` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tchain: v.string('`chain` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-and-execute-transaction'),\n\t\ttransaction: v.string('`transaction` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tchain: v.string('`chain` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-personal-message'),\n\t\tchain: v.string('`chain` is required'),\n\t\tmessage: v.string('`message` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n]);\nexport type RequestDataType = v.InferOutput<typeof RequestData>;\n\nexport const Request = v.object({\n\tversion: v.literal('1'),\n\trequestId: v.pipe(v.string('`requestId` is required'), v.uuid()),\n\tappUrl: v.pipe(v.string(), v.url('`appUrl` must be a valid URL')),\n\tappName: v.string('`appName` is required'),\n\tpayload: RequestData,\n\tmetadata: v.optional(v.record(v.string(), JsonSchema)),\n\textraRequestOptions: v.optional(v.record(v.string(), JsonSchema)),\n});\nexport type RequestType = v.InferOutput<typeof Request>;\n", "export const encoder = new TextEncoder();\r\nexport const decoder = new TextDecoder();\r\nconst MAX_INT32 = 2 ** 32;\r\nexport function concat(...buffers) {\r\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\r\n    const buf = new Uint8Array(size);\r\n    let i = 0;\r\n    for (const buffer of buffers) {\r\n        buf.set(buffer, i);\r\n        i += buffer.length;\r\n    }\r\n    return buf;\r\n}\r\nfunction writeUInt32BE(buf, value, offset) {\r\n    if (value < 0 || value >= MAX_INT32) {\r\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\r\n    }\r\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\r\n}\r\nexport function uint64be(value) {\r\n    const high = Math.floor(value / MAX_INT32);\r\n    const low = value % MAX_INT32;\r\n    const buf = new Uint8Array(8);\r\n    writeUInt32BE(buf, high, 0);\r\n    writeUInt32BE(buf, low, 4);\r\n    return buf;\r\n}\r\nexport function uint32be(value) {\r\n    const buf = new Uint8Array(4);\r\n    writeUInt32BE(buf, value);\r\n    return buf;\r\n}\r\nexport function encode(string) {\r\n    const bytes = new Uint8Array(string.length);\r\n    for (let i = 0; i < string.length; i++) {\r\n        const code = string.charCodeAt(i);\r\n        if (code > 127) {\r\n            throw new TypeError('non-ASCII string encountered in encode()');\r\n        }\r\n        bytes[i] = code;\r\n    }\r\n    return bytes;\r\n}\r\n", "export function encodeBase64(input) {\r\n    if (Uint8Array.prototype.toBase64) {\r\n        return input.toBase64();\r\n    }\r\n    const CHUNK_SIZE = 0x8000;\r\n    const arr = [];\r\n    for (let i = 0; i < input.length; i += CHUNK_SIZE) {\r\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\r\n    }\r\n    return btoa(arr.join(''));\r\n}\r\nexport function decodeBase64(encoded) {\r\n    if (Uint8Array.fromBase64) {\r\n        return Uint8Array.fromBase64(encoded);\r\n    }\r\n    const binary = atob(encoded);\r\n    const bytes = new Uint8Array(binary.length);\r\n    for (let i = 0; i < binary.length; i++) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return bytes;\r\n}\r\n", "import { encoder, decoder } from '../lib/buffer_utils.js';\r\nimport { encodeBase64, decodeBase64 } from '../lib/base64.js';\r\nexport function decode(input) {\r\n    if (Uint8Array.fromBase64) {\r\n        return Uint8Array.fromBase64(typeof input === 'string' ? input : decoder.decode(input), {\r\n            alphabet: 'base64url',\r\n        });\r\n    }\r\n    let encoded = input;\r\n    if (encoded instanceof Uint8Array) {\r\n        encoded = decoder.decode(encoded);\r\n    }\r\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/');\r\n    try {\r\n        return decodeBase64(encoded);\r\n    }\r\n    catch {\r\n        throw new TypeError('The input to be decoded is not correctly encoded.');\r\n    }\r\n}\r\nexport function encode(input) {\r\n    let unencoded = input;\r\n    if (typeof unencoded === 'string') {\r\n        unencoded = encoder.encode(unencoded);\r\n    }\r\n    if (Uint8Array.prototype.toBase64) {\r\n        return unencoded.toBase64({ alphabet: 'base64url', omitPadding: true });\r\n    }\r\n    return encodeBase64(unencoded).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\r\n", "export class JOSEError extends Error {\r\n    static code = 'ERR_JOSE_GENERIC';\r\n    code = 'ERR_JOSE_GENERIC';\r\n    constructor(message, options) {\r\n        super(message, options);\r\n        this.name = this.constructor.name;\r\n        Error.captureStackTrace?.(this, this.constructor);\r\n    }\r\n}\r\nexport class JWTClaimValidationFailed extends JOSEError {\r\n    static code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\r\n    code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\r\n    claim;\r\n    reason;\r\n    payload;\r\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\r\n        super(message, { cause: { claim, reason, payload } });\r\n        this.claim = claim;\r\n        this.reason = reason;\r\n        this.payload = payload;\r\n    }\r\n}\r\nexport class JWTExpired extends JOSEError {\r\n    static code = 'ERR_JWT_EXPIRED';\r\n    code = 'ERR_JWT_EXPIRED';\r\n    claim;\r\n    reason;\r\n    payload;\r\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\r\n        super(message, { cause: { claim, reason, payload } });\r\n        this.claim = claim;\r\n        this.reason = reason;\r\n        this.payload = payload;\r\n    }\r\n}\r\nexport class JOSEAlgNotAllowed extends JOSEError {\r\n    static code = 'ERR_JOSE_ALG_NOT_ALLOWED';\r\n    code = 'ERR_JOSE_ALG_NOT_ALLOWED';\r\n}\r\nexport class JOSENotSupported extends JOSEError {\r\n    static code = 'ERR_JOSE_NOT_SUPPORTED';\r\n    code = 'ERR_JOSE_NOT_SUPPORTED';\r\n}\r\nexport class JWEDecryptionFailed extends JOSEError {\r\n    static code = 'ERR_JWE_DECRYPTION_FAILED';\r\n    code = 'ERR_JWE_DECRYPTION_FAILED';\r\n    constructor(message = 'decryption operation failed', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWEInvalid extends JOSEError {\r\n    static code = 'ERR_JWE_INVALID';\r\n    code = 'ERR_JWE_INVALID';\r\n}\r\nexport class JWSInvalid extends JOSEError {\r\n    static code = 'ERR_JWS_INVALID';\r\n    code = 'ERR_JWS_INVALID';\r\n}\r\nexport class JWTInvalid extends JOSEError {\r\n    static code = 'ERR_JWT_INVALID';\r\n    code = 'ERR_JWT_INVALID';\r\n}\r\nexport class JWKInvalid extends JOSEError {\r\n    static code = 'ERR_JWK_INVALID';\r\n    code = 'ERR_JWK_INVALID';\r\n}\r\nexport class JWKSInvalid extends JOSEError {\r\n    static code = 'ERR_JWKS_INVALID';\r\n    code = 'ERR_JWKS_INVALID';\r\n}\r\nexport class JWKSNoMatchingKey extends JOSEError {\r\n    static code = 'ERR_JWKS_NO_MATCHING_KEY';\r\n    code = 'ERR_JWKS_NO_MATCHING_KEY';\r\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWKSMultipleMatchingKeys extends JOSEError {\r\n    [Symbol.asyncIterator];\r\n    static code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\r\n    code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\r\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWKSTimeout extends JOSEError {\r\n    static code = 'ERR_JWKS_TIMEOUT';\r\n    code = 'ERR_JWKS_TIMEOUT';\r\n    constructor(message = 'request timed out', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWSSignatureVerificationFailed extends JOSEError {\r\n    static code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\r\n    code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\r\n    constructor(message = 'signature verification failed', options) {\r\n        super(message, options);\r\n    }\r\n}\r\n", "const isObjectLike = (value) => typeof value === 'object' && value !== null;\r\nexport function isObject(input) {\r\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\r\n        return false;\r\n    }\r\n    if (Object.getPrototypeOf(input) === null) {\r\n        return true;\r\n    }\r\n    let proto = input;\r\n    while (Object.getPrototypeOf(proto) !== null) {\r\n        proto = Object.getPrototypeOf(proto);\r\n    }\r\n    return Object.getPrototypeOf(input) === proto;\r\n}\r\n", "export const unprotected = Symbol();\r\n", "import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\r\nimport { encoder, decoder } from './buffer_utils.js';\r\nimport { isObject } from './is_object.js';\r\nconst epoch = (date) => Math.floor(date.getTime() / 1000);\r\nconst minute = 60;\r\nconst hour = minute * 60;\r\nconst day = hour * 24;\r\nconst week = day * 7;\r\nconst year = day * 365.25;\r\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;\r\nexport function secs(str) {\r\n    const matched = REGEX.exec(str);\r\n    if (!matched || (matched[4] && matched[1])) {\r\n        throw new TypeError('Invalid time period format');\r\n    }\r\n    const value = parseFloat(matched[2]);\r\n    const unit = matched[3].toLowerCase();\r\n    let numericDate;\r\n    switch (unit) {\r\n        case 'sec':\r\n        case 'secs':\r\n        case 'second':\r\n        case 'seconds':\r\n        case 's':\r\n            numericDate = Math.round(value);\r\n            break;\r\n        case 'minute':\r\n        case 'minutes':\r\n        case 'min':\r\n        case 'mins':\r\n        case 'm':\r\n            numericDate = Math.round(value * minute);\r\n            break;\r\n        case 'hour':\r\n        case 'hours':\r\n        case 'hr':\r\n        case 'hrs':\r\n        case 'h':\r\n            numericDate = Math.round(value * hour);\r\n            break;\r\n        case 'day':\r\n        case 'days':\r\n        case 'd':\r\n            numericDate = Math.round(value * day);\r\n            break;\r\n        case 'week':\r\n        case 'weeks':\r\n        case 'w':\r\n            numericDate = Math.round(value * week);\r\n            break;\r\n        default:\r\n            numericDate = Math.round(value * year);\r\n            break;\r\n    }\r\n    if (matched[1] === '-' || matched[4] === 'ago') {\r\n        return -numericDate;\r\n    }\r\n    return numericDate;\r\n}\r\nfunction validateInput(label, input) {\r\n    if (!Number.isFinite(input)) {\r\n        throw new TypeError(`Invalid ${label} input`);\r\n    }\r\n    return input;\r\n}\r\nconst normalizeTyp = (value) => {\r\n    if (value.includes('/')) {\r\n        return value.toLowerCase();\r\n    }\r\n    return `application/${value.toLowerCase()}`;\r\n};\r\nconst checkAudiencePresence = (audPayload, audOption) => {\r\n    if (typeof audPayload === 'string') {\r\n        return audOption.includes(audPayload);\r\n    }\r\n    if (Array.isArray(audPayload)) {\r\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\r\n    }\r\n    return false;\r\n};\r\nexport function validateClaimsSet(protectedHeader, encodedPayload, options = {}) {\r\n    let payload;\r\n    try {\r\n        payload = JSON.parse(decoder.decode(encodedPayload));\r\n    }\r\n    catch {\r\n    }\r\n    if (!isObject(payload)) {\r\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\r\n    }\r\n    const { typ } = options;\r\n    if (typ &&\r\n        (typeof protectedHeader.typ !== 'string' ||\r\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\r\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', payload, 'typ', 'check_failed');\r\n    }\r\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\r\n    const presenceCheck = [...requiredClaims];\r\n    if (maxTokenAge !== undefined)\r\n        presenceCheck.push('iat');\r\n    if (audience !== undefined)\r\n        presenceCheck.push('aud');\r\n    if (subject !== undefined)\r\n        presenceCheck.push('sub');\r\n    if (issuer !== undefined)\r\n        presenceCheck.push('iss');\r\n    for (const claim of new Set(presenceCheck.reverse())) {\r\n        if (!(claim in payload)) {\r\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, payload, claim, 'missing');\r\n        }\r\n    }\r\n    if (issuer &&\r\n        !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\r\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', payload, 'iss', 'check_failed');\r\n    }\r\n    if (subject && payload.sub !== subject) {\r\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', payload, 'sub', 'check_failed');\r\n    }\r\n    if (audience &&\r\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\r\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', payload, 'aud', 'check_failed');\r\n    }\r\n    let tolerance;\r\n    switch (typeof options.clockTolerance) {\r\n        case 'string':\r\n            tolerance = secs(options.clockTolerance);\r\n            break;\r\n        case 'number':\r\n            tolerance = options.clockTolerance;\r\n            break;\r\n        case 'undefined':\r\n            tolerance = 0;\r\n            break;\r\n        default:\r\n            throw new TypeError('Invalid clockTolerance option type');\r\n    }\r\n    const { currentDate } = options;\r\n    const now = epoch(currentDate || new Date());\r\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\r\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', payload, 'iat', 'invalid');\r\n    }\r\n    if (payload.nbf !== undefined) {\r\n        if (typeof payload.nbf !== 'number') {\r\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', payload, 'nbf', 'invalid');\r\n        }\r\n        if (payload.nbf > now + tolerance) {\r\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', payload, 'nbf', 'check_failed');\r\n        }\r\n    }\r\n    if (payload.exp !== undefined) {\r\n        if (typeof payload.exp !== 'number') {\r\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', payload, 'exp', 'invalid');\r\n        }\r\n        if (payload.exp <= now - tolerance) {\r\n            throw new JWTExpired('\"exp\" claim timestamp check failed', payload, 'exp', 'check_failed');\r\n        }\r\n    }\r\n    if (maxTokenAge) {\r\n        const age = now - payload.iat;\r\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\r\n        if (age - tolerance > max) {\r\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', payload, 'iat', 'check_failed');\r\n        }\r\n        if (age < 0 - tolerance) {\r\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', payload, 'iat', 'check_failed');\r\n        }\r\n    }\r\n    return payload;\r\n}\r\nexport class JWTClaimsBuilder {\r\n    #payload;\r\n    constructor(payload) {\r\n        if (!isObject(payload)) {\r\n            throw new TypeError('JWT Claims Set MUST be an object');\r\n        }\r\n        this.#payload = structuredClone(payload);\r\n    }\r\n    data() {\r\n        return encoder.encode(JSON.stringify(this.#payload));\r\n    }\r\n    get iss() {\r\n        return this.#payload.iss;\r\n    }\r\n    set iss(value) {\r\n        this.#payload.iss = value;\r\n    }\r\n    get sub() {\r\n        return this.#payload.sub;\r\n    }\r\n    set sub(value) {\r\n        this.#payload.sub = value;\r\n    }\r\n    get aud() {\r\n        return this.#payload.aud;\r\n    }\r\n    set aud(value) {\r\n        this.#payload.aud = value;\r\n    }\r\n    set jti(value) {\r\n        this.#payload.jti = value;\r\n    }\r\n    set nbf(value) {\r\n        if (typeof value === 'number') {\r\n            this.#payload.nbf = validateInput('setNotBefore', value);\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.nbf = validateInput('setNotBefore', epoch(value));\r\n        }\r\n        else {\r\n            this.#payload.nbf = epoch(new Date()) + secs(value);\r\n        }\r\n    }\r\n    set exp(value) {\r\n        if (typeof value === 'number') {\r\n            this.#payload.exp = validateInput('setExpirationTime', value);\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.exp = validateInput('setExpirationTime', epoch(value));\r\n        }\r\n        else {\r\n            this.#payload.exp = epoch(new Date()) + secs(value);\r\n        }\r\n    }\r\n    set iat(value) {\r\n        if (value === undefined) {\r\n            this.#payload.iat = epoch(new Date());\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.iat = validateInput('setIssuedAt', epoch(value));\r\n        }\r\n        else if (typeof value === 'string') {\r\n            this.#payload.iat = validateInput('setIssuedAt', epoch(new Date()) + secs(value));\r\n        }\r\n        else {\r\n            this.#payload.iat = validateInput('setIssuedAt', value);\r\n        }\r\n    }\r\n}\r\n", "import { JOSEError, JWKSNoMatchingKey, JWKSTimeout } from '../util/errors.js';\r\nimport { createLocalJWKSet } from './local.js';\r\nimport { isObject } from '../lib/is_object.js';\r\nfunction isCloudflareWorkers() {\r\n    return (typeof WebSocketPair !== 'undefined' ||\r\n        (typeof navigator !== 'undefined' && navigator.userAgent === 'Cloudflare-Workers') ||\r\n        (typeof EdgeRuntime !== 'undefined' && EdgeRuntime === 'vercel'));\r\n}\r\nlet USER_AGENT;\r\nif (typeof navigator === 'undefined' || !navigator.userAgent?.startsWith?.('Mozilla/5.0 ')) {\r\n    const NAME = 'jose';\r\n    const VERSION = 'v6.1.2';\r\n    USER_AGENT = `${NAME}/${VERSION}`;\r\n}\r\nexport const customFetch = Symbol();\r\nasync function fetchJwks(url, headers, signal, fetchImpl = fetch) {\r\n    const response = await fetchImpl(url, {\r\n        method: 'GET',\r\n        signal,\r\n        redirect: 'manual',\r\n        headers,\r\n    }).catch((err) => {\r\n        if (err.name === 'TimeoutError') {\r\n            throw new JWKSTimeout();\r\n        }\r\n        throw err;\r\n    });\r\n    if (response.status !== 200) {\r\n        throw new JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');\r\n    }\r\n    try {\r\n        return await response.json();\r\n    }\r\n    catch {\r\n        throw new JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');\r\n    }\r\n}\r\nexport const jwksCache = Symbol();\r\nfunction isFreshJwksCache(input, cacheMaxAge) {\r\n    if (typeof input !== 'object' || input === null) {\r\n        return false;\r\n    }\r\n    if (!('uat' in input) || typeof input.uat !== 'number' || Date.now() - input.uat >= cacheMaxAge) {\r\n        return false;\r\n    }\r\n    if (!('jwks' in input) ||\r\n        !isObject(input.jwks) ||\r\n        !Array.isArray(input.jwks.keys) ||\r\n        !Array.prototype.every.call(input.jwks.keys, isObject)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nclass RemoteJWKSet {\r\n    #url;\r\n    #timeoutDuration;\r\n    #cooldownDuration;\r\n    #cacheMaxAge;\r\n    #jwksTimestamp;\r\n    #pendingFetch;\r\n    #headers;\r\n    #customFetch;\r\n    #local;\r\n    #cache;\r\n    constructor(url, options) {\r\n        if (!(url instanceof URL)) {\r\n            throw new TypeError('url must be an instance of URL');\r\n        }\r\n        this.#url = new URL(url.href);\r\n        this.#timeoutDuration =\r\n            typeof options?.timeoutDuration === 'number' ? options?.timeoutDuration : 5000;\r\n        this.#cooldownDuration =\r\n            typeof options?.cooldownDuration === 'number' ? options?.cooldownDuration : 30000;\r\n        this.#cacheMaxAge = typeof options?.cacheMaxAge === 'number' ? options?.cacheMaxAge : 600000;\r\n        this.#headers = new Headers(options?.headers);\r\n        if (USER_AGENT && !this.#headers.has('User-Agent')) {\r\n            this.#headers.set('User-Agent', USER_AGENT);\r\n        }\r\n        if (!this.#headers.has('accept')) {\r\n            this.#headers.set('accept', 'application/json');\r\n            this.#headers.append('accept', 'application/jwk-set+json');\r\n        }\r\n        this.#customFetch = options?.[customFetch];\r\n        if (options?.[jwksCache] !== undefined) {\r\n            this.#cache = options?.[jwksCache];\r\n            if (isFreshJwksCache(options?.[jwksCache], this.#cacheMaxAge)) {\r\n                this.#jwksTimestamp = this.#cache.uat;\r\n                this.#local = createLocalJWKSet(this.#cache.jwks);\r\n            }\r\n        }\r\n    }\r\n    pendingFetch() {\r\n        return !!this.#pendingFetch;\r\n    }\r\n    coolingDown() {\r\n        return typeof this.#jwksTimestamp === 'number'\r\n            ? Date.now() < this.#jwksTimestamp + this.#cooldownDuration\r\n            : false;\r\n    }\r\n    fresh() {\r\n        return typeof this.#jwksTimestamp === 'number'\r\n            ? Date.now() < this.#jwksTimestamp + this.#cacheMaxAge\r\n            : false;\r\n    }\r\n    jwks() {\r\n        return this.#local?.jwks();\r\n    }\r\n    async getKey(protectedHeader, token) {\r\n        if (!this.#local || !this.fresh()) {\r\n            await this.reload();\r\n        }\r\n        try {\r\n            return await this.#local(protectedHeader, token);\r\n        }\r\n        catch (err) {\r\n            if (err instanceof JWKSNoMatchingKey) {\r\n                if (this.coolingDown() === false) {\r\n                    await this.reload();\r\n                    return this.#local(protectedHeader, token);\r\n                }\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    async reload() {\r\n        if (this.#pendingFetch && isCloudflareWorkers()) {\r\n            this.#pendingFetch = undefined;\r\n        }\r\n        this.#pendingFetch ||= fetchJwks(this.#url.href, this.#headers, AbortSignal.timeout(this.#timeoutDuration), this.#customFetch)\r\n            .then((json) => {\r\n            this.#local = createLocalJWKSet(json);\r\n            if (this.#cache) {\r\n                this.#cache.uat = Date.now();\r\n                this.#cache.jwks = json;\r\n            }\r\n            this.#jwksTimestamp = Date.now();\r\n            this.#pendingFetch = undefined;\r\n        })\r\n            .catch((err) => {\r\n            this.#pendingFetch = undefined;\r\n            throw err;\r\n        });\r\n        await this.#pendingFetch;\r\n    }\r\n}\r\nexport function createRemoteJWKSet(url, options) {\r\n    const set = new RemoteJWKSet(url, options);\r\n    const remoteJWKSet = async (protectedHeader, token) => set.getKey(protectedHeader, token);\r\n    Object.defineProperties(remoteJWKSet, {\r\n        coolingDown: {\r\n            get: () => set.coolingDown(),\r\n            enumerable: true,\r\n            configurable: false,\r\n        },\r\n        fresh: {\r\n            get: () => set.fresh(),\r\n            enumerable: true,\r\n            configurable: false,\r\n        },\r\n        reload: {\r\n            value: () => set.reload(),\r\n            enumerable: true,\r\n            configurable: false,\r\n            writable: false,\r\n        },\r\n        reloading: {\r\n            get: () => set.pendingFetch(),\r\n            enumerable: true,\r\n            configurable: false,\r\n        },\r\n        jwks: {\r\n            value: () => set.jwks(),\r\n            enumerable: true,\r\n            configurable: false,\r\n            writable: false,\r\n        },\r\n    });\r\n    return remoteJWKSet;\r\n}\r\n", "import { decode as b64u } from './base64url.js';\r\nimport { decoder } from '../lib/buffer_utils.js';\r\nimport { isObject } from '../lib/is_object.js';\r\nimport { JWTInvalid } from './errors.js';\r\nexport function decodeJwt(jwt) {\r\n    if (typeof jwt !== 'string')\r\n        throw new JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');\r\n    const { 1: payload, length } = jwt.split('.');\r\n    if (length === 5)\r\n        throw new JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');\r\n    if (length !== 3)\r\n        throw new JWTInvalid('Invalid JWT');\r\n    if (!payload)\r\n        throw new JWTInvalid('JWTs must contain a payload');\r\n    let decoded;\r\n    try {\r\n        decoded = b64u(payload);\r\n    }\r\n    catch {\r\n        throw new JWTInvalid('Failed to base64url decode the payload');\r\n    }\r\n    let result;\r\n    try {\r\n        result = JSON.parse(decoder.decode(decoded));\r\n    }\r\n    catch {\r\n        throw new JWTInvalid('Failed to parse the decoded payload as JSON');\r\n    }\r\n    if (!isObject(result))\r\n        throw new JWTInvalid('Invalid JWT Claims Set');\r\n    return result;\r\n}\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as v from 'valibot';\nimport { SignJWT, decodeJwt, jwtVerify } from 'jose';\n\nconst AccountSchema = v.object({\n\taddress: v.string(),\n\tpublicKey: v.string(),\n});\n\nconst JwtSessionSchema = v.object({\n\texp: v.number(), // Expiration Time\n\tiat: v.number(), // Issued At\n\tiss: v.string(), // Issuer\n\taud: v.string(), // Audience (the dapp origin)\n\tpayload: v.object({\n\t\taccounts: v.array(AccountSchema),\n\t}),\n});\n\ntype JwtSessionPayload = v.InferOutput<typeof JwtSessionSchema>;\n\nexport async function createJwtSession(\n\tpayload: JwtSessionPayload['payload'],\n\toptions: {\n\t\tsecretKey: Parameters<SignJWT['sign']>[0];\n\t\texpirationTime: Parameters<SignJWT['setExpirationTime']>[0];\n\t\tissuer: Parameters<SignJWT['setIssuer']>[0];\n\t\taudience: Parameters<SignJWT['setAudience']>[0];\n\t},\n) {\n\tconst token = await new SignJWT({ payload })\n\t\t.setProtectedHeader({ alg: 'HS256' })\n\t\t.setExpirationTime(options.expirationTime)\n\t\t.setIssuedAt()\n\t\t.setIssuer(options.issuer)\n\t\t.setAudience(options.audience)\n\t\t.sign(options.secretKey);\n\n\treturn token;\n}\n\nexport function decodeJwtSession(jwt: string) {\n\tconst decodedJwt = decodeJwt(jwt);\n\n\treturn v.parse(JwtSessionSchema, decodedJwt);\n}\n\nexport async function verifyJwtSession(jwt: string, secretKey: CryptoKey | Uint8Array) {\n\tconst verified = await jwtVerify(jwt, secretKey, { algorithms: ['HS256'] });\n\n\treturn v.parse(JwtSessionSchema, verified.payload);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { parse } from 'valibot';\nimport type { RequestType } from './requests.js';\nimport { Request } from './requests.js';\nimport type { ResponsePayloadType, ResponseType } from './responses.js';\nimport { verifyJwtSession } from '../jwt-session/index.js';\n\nexport class WalletPostMessageChannel {\n\t#request: RequestType;\n\t#isSendCalled: boolean = false;\n\n\tconstructor(request: RequestType) {\n\t\tif (typeof window === 'undefined' || !window.opener) {\n\t\t\tthrow new Error(\n\t\t\t\t'This functionality requires a window opened through `window.open`. `window.opener` is not available.',\n\t\t\t);\n\t\t}\n\n\t\tthis.#request = request;\n\t}\n\n\tstatic fromPayload(payload: RequestType) {\n\t\tconst request = parse(Request, payload);\n\n\t\treturn new WalletPostMessageChannel(request);\n\t}\n\n\tstatic fromUrlHash(hash: string = window.location.hash.slice(1)) {\n\t\tconst decoded = atob(decodeURIComponent(hash));\n\t\tconst request = parse(Request, JSON.parse(decoded));\n\n\t\treturn new WalletPostMessageChannel(request);\n\t}\n\n\tgetRequestData() {\n\t\treturn this.#request;\n\t}\n\n\tasync verifyJwtSession(secretKey: Parameters<typeof verifyJwtSession>[1]) {\n\t\tif (!('session' in this.#request.payload)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst session = await verifyJwtSession(this.#request.payload.session, secretKey);\n\n\t\tif (session.aud !== new URL(this.#request.appUrl).origin) {\n\t\t\tthrow new Error('App and session origin mismatch');\n\t\t}\n\n\t\tconst requestAddress = this.#request.payload.address;\n\t\tconst addressInSession = session.payload.accounts.find(\n\t\t\t(account) => account.address === requestAddress,\n\t\t);\n\n\t\tif (!addressInSession) {\n\t\t\tthrow new Error('Requested account not found in session');\n\t\t}\n\n\t\treturn session;\n\t}\n\n\tsendMessage(payload: ResponsePayloadType) {\n\t\tif (this.#isSendCalled) {\n\t\t\tthrow new Error('sendMessage() can only be called once');\n\t\t}\n\n\t\tthis.#isSendCalled = true;\n\n\t\twindow.opener.postMessage(\n\t\t\t{\n\t\t\t\tid: this.#request.requestId,\n\t\t\t\tsource: 'web-wallet-channel',\n\t\t\t\tpayload,\n\t\t\t\tversion: this.#request.version,\n\t\t\t} satisfies ResponseType,\n\t\t\tthis.#request.appUrl,\n\t\t);\n\t}\n\n\tclose(payload?: ResponsePayloadType) {\n\t\tif (payload) {\n\t\t\tthis.sendMessage(payload);\n\t\t}\n\t\twindow.close();\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as v from 'valibot';\n\nexport const ResponseData = v.variant('type', [\n\tv.object({\n\t\ttype: v.literal('connect'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-transaction'),\n\t\tbytes: v.string(),\n\t\tsignature: v.string(),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-and-execute-transaction'),\n\t\tbytes: v.string(),\n\t\tsignature: v.string(),\n\t\tdigest: v.string(),\n\t\teffects: v.string(),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-personal-message'),\n\t\tbytes: v.string(),\n\t\tsignature: v.string(),\n\t}),\n]);\nexport type ResponseDataType = v.InferOutput<typeof ResponseData>;\n\nexport const ResponsePayload = v.variant('type', [\n\tv.object({\n\t\ttype: v.literal('reject'),\n\t\treason: v.optional(v.string('`reason` must be a string')),\n\t}),\n\tv.object({\n\t\ttype: v.literal('resolve'),\n\t\tdata: ResponseData,\n\t}),\n]);\nexport type ResponsePayloadType = v.InferOutput<typeof ResponsePayload>;\n\nexport const Response = v.object({\n\tid: v.pipe(v.string(), v.uuid()),\n\tsource: v.literal('web-wallet-channel'),\n\tpayload: ResponsePayload,\n\tversion: v.literal('1'),\n});\nexport type ResponseType = v.InferOutput<typeof Response>;\n\nexport type ResponseTypes = {\n\t[P in ResponseDataType as P['type']]: P;\n};\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport function getClientMetadata() {\n\treturn {\n\t\tversion: '1',\n\t\toriginUrl: window.location.href,\n\t\tuserAgent: navigator.userAgent,\n\t\tscreenResolution: `${window.screen.width}x${window.screen.height}`,\n\t\tlanguage: navigator.language,\n\t\tplatform: navigator.platform,\n\t\ttimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n\t\ttimestamp: Date.now(),\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { safeParse } from 'valibot';\nimport type { JsonData, RequestDataType, RequestType } from './requests.js';\nimport type { ResponseTypes } from './responses.js';\nimport { Response } from './responses.js';\nimport { promiseWithResolvers } from '@mysten/utils';\nimport { getClientMetadata } from './utils.js';\n\ntype DappPostMessageChannelOptions = {\n\tappName: string;\n\thostOrigin: string;\n\thostPathname?: string;\n\textraRequestOptions?: Record<string, JsonData>;\n\tpopupWindow?: Window;\n};\n\nexport class DappPostMessageChannel {\n\t#popup: Window;\n\t#version = '1' as const;\n\t#id: string;\n\t#hostOrigin: string;\n\t#hostPathname: string;\n\t#appName: string;\n\t#extraRequestOptions?: Record<string, JsonData>;\n\t#promise: Promise<unknown>;\n\t#resolve: (data: unknown) => void;\n\t#reject: (error: Error) => void;\n\t#interval: ReturnType<typeof setInterval> | null = null;\n\t#isSendCalled: boolean = false;\n\n\tconstructor({\n\t\tappName,\n\t\thostOrigin,\n\t\thostPathname = 'dapp-request',\n\t\textraRequestOptions,\n\t\tpopupWindow,\n\t}: DappPostMessageChannelOptions) {\n\t\tconst popup = popupWindow ?? window.open('about:blank', '_blank');\n\n\t\tif (!popup) {\n\t\t\tthrow new Error('Failed to open new window');\n\t\t}\n\n\t\tthis.#id = crypto.randomUUID();\n\t\tthis.#popup = popup;\n\t\tthis.#hostOrigin = hostOrigin;\n\t\tthis.#hostPathname = hostPathname;\n\t\tthis.#appName = appName;\n\n\t\tconst { promise, resolve, reject } = promiseWithResolvers();\n\n\t\tthis.#promise = promise;\n\t\tthis.#resolve = resolve;\n\t\tthis.#reject = reject;\n\t\tthis.#extraRequestOptions = extraRequestOptions;\n\t\tthis.#interval = setInterval(() => {\n\t\t\ttry {\n\t\t\t\tif (this.#popup.closed) {\n\t\t\t\t\tthis.#cleanup();\n\t\t\t\t\treject(new Error('User closed the wallet window'));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// This can error during the login flow, but that's fine.\n\t\t\t}\n\t\t}, 1000);\n\t}\n\n\tsend<T extends RequestDataType['type']>({\n\t\ttype,\n\t\t...data\n\t}: {\n\t\ttype: T;\n\t} & Extract<RequestDataType, { type: T }>): Promise<ResponseTypes[T]> {\n\t\tif (this.#popup.closed) {\n\t\t\tthrow new Error('User closed the wallet window');\n\t\t}\n\n\t\tif (this.#isSendCalled) {\n\t\t\tthrow new Error('send() can only be called once');\n\t\t}\n\n\t\tthis.#isSendCalled = true;\n\n\t\twindow.addEventListener('message', this.#listener);\n\n\t\tconst requestData = {\n\t\t\tversion: this.#version,\n\t\t\trequestId: this.#id,\n\t\t\tappUrl: window.location.href.split('#')[0],\n\t\t\tappName: this.#appName,\n\t\t\tpayload: {\n\t\t\t\ttype,\n\t\t\t\t...data,\n\t\t\t} as RequestDataType,\n\t\t\tmetadata: getClientMetadata(),\n\t\t\textraRequestOptions: this.#extraRequestOptions,\n\t\t} satisfies RequestType;\n\t\tconst encodedRequestData = encodeURIComponent(btoa(JSON.stringify(requestData)));\n\n\t\tthis.#popup.location.assign(`${this.#hostOrigin}/${this.#hostPathname}#${encodedRequestData}`);\n\n\t\treturn this.#promise as Promise<ResponseTypes[T]>;\n\t}\n\n\tclose() {\n\t\tthis.#cleanup();\n\t\tthis.#popup.close();\n\t}\n\n\t#listener = (event: MessageEvent) => {\n\t\tif (event.origin !== this.#hostOrigin) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { success, output } = safeParse(Response, event.data);\n\n\t\tif (!success || output.id !== this.#id) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#cleanup();\n\n\t\tif (output.payload.type === 'reject') {\n\t\t\tthis.#reject(new Error('User rejected the request'));\n\t\t} else if (output.payload.type === 'resolve') {\n\t\t\tthis.#resolve(output.payload.data);\n\t\t}\n\t};\n\n\t#cleanup() {\n\t\tif (this.#interval) {\n\t\t\tclearInterval(this.#interval);\n\t\t\tthis.#interval = null;\n\t\t}\n\t\twindow.removeEventListener('message', this.#listener);\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64, toBase64 } from '@mysten/sui/utils';\nimport type {\n\tStandardConnectFeature,\n\tStandardConnectMethod,\n\tStandardDisconnectFeature,\n\tStandardDisconnectMethod,\n\tStandardEventsFeature,\n\tStandardEventsListeners,\n\tStandardEventsOnMethod,\n\tSuiChain,\n\tSuiSignAndExecuteTransactionFeature,\n\tSuiSignAndExecuteTransactionMethod,\n\tSuiSignPersonalMessageFeature,\n\tSuiSignPersonalMessageMethod,\n\tSuiSignTransactionBlockFeature,\n\tSuiSignTransactionBlockMethod,\n\tSuiSignTransactionFeature,\n\tSuiSignTransactionMethod,\n\tWallet,\n\tWalletIcon,\n} from '@mysten/wallet-standard';\nimport { getWallets, ReadonlyWalletAccount, SUI_CHAINS } from '@mysten/wallet-standard';\nimport type { Emitter } from 'mitt';\nimport mitt from 'mitt';\nimport type { InferOutput } from 'valibot';\nimport { boolean, object, parse, string } from 'valibot';\nimport { DappPostMessageChannel, decodeJwtSession } from '@mysten/window-wallet-core';\n\nconst DEFAULT_SLUSH_ORIGIN = 'https://my.slush.app';\n\ntype WalletEventsMap = {\n\t[E in keyof StandardEventsListeners]: Parameters<StandardEventsListeners[E]>[0];\n};\n\nconst SLUSH_SESSION_KEY = 'slush:session';\n\nexport const SLUSH_WALLET_NAME = 'Slush' as const;\n\nconst SUI_WALLET_EXTENSION_ID = 'com.mystenlabs.suiwallet' as const;\nconst METADATA_API_URL = 'https://api.slush.app/api/wallet/metadata';\n\nconst FALLBACK_METADATA = {\n\tid: 'com.mystenlabs.suiwallet.web',\n\twalletName: 'Slush',\n\tdescription: 'Trade and earn on Sui.',\n\ticon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNENBMkZGIi8+CjxwYXRoIGQ9Ik0xMi4zNDczIDM0LjcyNTRDMTMuNTU1MyAzOS4yMzM2IDE4LjA2NzMgNDMuMzE0OCAyNy40MDI1IDQwLjgxMzRDMzYuMzA5NyAzOC40MjY3IDQxLjg5MjEgMzEuMDk5MyA0MC40NDQ2IDI1LjY5NzJDMzkuOTQ0NyAyMy44MzE3IDM4LjQzOTEgMjIuNTY4OSAzNi4xMTc4IDIyLjc3NDRMMTUuMzYxNSAyNC41MDM4QzE0LjA1NDQgMjQuNjA0MSAxMy40NTUgMjQuMzg5OCAxMy4xMDkyIDIzLjU2NjFDMTIuNzczOCAyMi43ODEyIDEyLjk2NDkgMjEuOTM4NSAxNC41NDM3IDIxLjE0MDZMMzAuMzM5NiAxMy4wMzQyQzMxLjU1MDMgMTIuNDE4MiAzMi4zNTY3IDEyLjE2MDUgMzMuMDkzNiAxMi40MjEzQzMzLjU1NTUgMTIuNTg5MSAzMy44NTk2IDEzLjI1NzQgMzMuNTgwMyAxNC4wODJMMzIuNTU2MSAxNy4xMDU2QzMxLjI5OTIgMjAuODE2NCAzMy45ODk5IDIxLjY3ODQgMzUuNTA2OCAyMS4yNzE5QzM3LjgwMTcgMjAuNjU3IDM4LjM0MTYgMTguNDcxMiAzNy42MDIzIDE1LjcxMTlDMzUuNzI3OCA4LjcxNjI5IDI4LjMwNTkgNy42MjI1NCAyMS41NzY4IDkuNDI1NTlDMTQuNzMxMSAxMS4yNTk5IDguNzk2ODEgMTYuODA3MiAxMC42MDg4IDIzLjU2OTZDMTEuMDM1OCAyNS4xNjMgMTIuNTAyNSAyNi40MzYyIDE0LjIwMTQgMjYuMzk3NUwxNi43OTUgMjYuMzkxMkMxNy4zMjg0IDI2LjM3ODggMTcuMTM2MyAyNi40MjI3IDE4LjE2NTMgMjYuMzM3NEMxOS4xOTQ0IDI2LjI1MjIgMjEuOTQyNSAyNS45MTQgMjEuOTQyNSAyNS45MTRMMzUuNDI3NSAyNC4zODhMMzUuNzc1IDI0LjMzNzVDMzYuNTYzNyAyNC4yMDMgMzcuMTU5NyAyNC40MDc5IDM3LjY2MzYgMjUuMjc2QzM4LjQxNzcgMjYuNTc1IDM3LjI2NzIgMjcuNTU0NiAzNS44ODk5IDI4LjcyNzJDMzUuODUzIDI4Ljc1ODYgMzUuODE2IDI4Ljc5MDEgMzUuNzc4OSAyOC44MjE4TDIzLjkyNSAzOS4wMzc3QzIxLjg5MzMgNDAuNzkwMSAyMC40NjYgNDAuMTMxMSAxOS45NjYyIDM4LjI2NTZMMTguMTk1OCAzMS42NTg3QzE3Ljc1ODUgMzAuMDI2NCAxNi4xNjQ2IDI4Ljc0NTYgMTQuMjk3NiAyOS4yNDU5QzExLjk2MzggMjkuODcxMiAxMS43NzQ2IDMyLjU4NzggMTIuMzQ3MyAzNC43MjU0WiIgZmlsbD0iIzA2MEQxNCIvPgo8L3N2Zz4K',\n\tenabled: true,\n};\n\nconst WalletMetadataSchema = object({\n\tid: string('Wallet ID is required'),\n\twalletName: string('Wallet name is required'),\n\ticon: string('Icon must be a valid wallet icon format'),\n\tenabled: boolean('Enabled is required'),\n});\n\nfunction setSessionToStorage(session: string) {\n\tlocalStorage.setItem(SLUSH_SESSION_KEY, session);\n}\n\nfunction getSessionFromStorage() {\n\tconst session = localStorage.getItem(SLUSH_SESSION_KEY);\n\n\tif (!session) {\n\t\tthrow new Error('No session found');\n\t}\n\n\treturn session;\n}\n\nconst walletAccountFeatures = [\n\t'sui:signTransaction',\n\t'sui:signAndExecuteTransaction',\n\t'sui:signPersonalMessage',\n\t'sui:signTransactionBlock',\n\t'sui:signAndExecuteTransactionBlock',\n] as const;\n\nfunction getAccountsFromSession(session: string) {\n\tconst { payload } = decodeJwtSession(session);\n\treturn payload.accounts.map((account) => {\n\t\treturn new ReadonlyWalletAccount({\n\t\t\taddress: account.address,\n\t\t\tchains: SUI_CHAINS,\n\t\t\tfeatures: walletAccountFeatures,\n\t\t\tpublicKey: fromBase64(account.publicKey),\n\t\t});\n\t});\n}\n\ntype WalletMetadata = InferOutput<typeof WalletMetadataSchema>;\nexport class SlushWallet implements Wallet {\n\t#id: string;\n\t#events: Emitter<WalletEventsMap>;\n\t#accounts: ReadonlyWalletAccount[];\n\t#origin: string;\n\t#walletName: string;\n\t#icon: WalletIcon;\n\t#name: string;\n\n\tget name() {\n\t\treturn this.#walletName;\n\t}\n\n\tget id() {\n\t\treturn this.#id;\n\t}\n\n\tget icon() {\n\t\treturn this.#icon;\n\t}\n\n\tget version() {\n\t\treturn '1.0.0' as const;\n\t}\n\n\tget chains() {\n\t\treturn SUI_CHAINS;\n\t}\n\n\tget accounts() {\n\t\treturn this.#accounts;\n\t}\n\n\tget features(): StandardConnectFeature &\n\t\tStandardDisconnectFeature &\n\t\tStandardEventsFeature &\n\t\tSuiSignTransactionBlockFeature &\n\t\tSuiSignTransactionFeature &\n\t\tSuiSignPersonalMessageFeature &\n\t\tSuiSignAndExecuteTransactionFeature {\n\t\treturn {\n\t\t\t'standard:connect': {\n\t\t\t\tversion: '1.0.0',\n\t\t\t\tconnect: this.#connect,\n\t\t\t},\n\t\t\t'standard:disconnect': {\n\t\t\t\tversion: '1.0.0',\n\t\t\t\tdisconnect: this.#disconnect,\n\t\t\t},\n\t\t\t'standard:events': {\n\t\t\t\tversion: '1.0.0',\n\t\t\t\ton: this.#on,\n\t\t\t},\n\t\t\t'sui:signTransactionBlock': {\n\t\t\t\tversion: '1.0.0',\n\t\t\t\tsignTransactionBlock: this.#signTransactionBlock,\n\t\t\t},\n\t\t\t'sui:signTransaction': {\n\t\t\t\tversion: '2.0.0',\n\t\t\t\tsignTransaction: this.#signTransaction,\n\t\t\t},\n\t\t\t'sui:signPersonalMessage': {\n\t\t\t\tversion: '1.1.0',\n\t\t\t\tsignPersonalMessage: this.#signPersonalMessage,\n\t\t\t},\n\t\t\t'sui:signAndExecuteTransaction': {\n\t\t\t\tversion: '2.0.0',\n\t\t\t\tsignAndExecuteTransaction: this.#signAndExecuteTransaction,\n\t\t\t},\n\t\t};\n\t}\n\n\tconstructor({\n\t\tname,\n\t\torigin,\n\t\tmetadata,\n\t}: {\n\t\tname: string;\n\t\torigin?: string;\n\t\tchain?: SuiChain;\n\t\tmetadata: WalletMetadata;\n\t}) {\n\t\tthis.#id = metadata.id;\n\t\tthis.#accounts = this.#getPreviouslyAuthorizedAccounts();\n\t\tthis.#events = mitt();\n\t\tthis.#origin = origin || DEFAULT_SLUSH_ORIGIN;\n\t\tthis.#name = name;\n\t\tthis.#walletName = metadata.walletName;\n\t\tthis.#icon = metadata.icon as WalletIcon;\n\t}\n\n\t#signTransactionBlock: SuiSignTransactionBlockMethod = async ({\n\t\ttransactionBlock,\n\t\taccount,\n\t\tchain,\n\t}) => {\n\t\tconst data = await transactionBlock.toJSON();\n\n\t\tconst popup = this.#getNewPopupChannel();\n\n\t\tconst response = await popup.send({\n\t\t\ttype: 'sign-transaction',\n\t\t\ttransaction: data,\n\t\t\taddress: account.address,\n\t\t\tchain,\n\t\t\tsession: getSessionFromStorage(),\n\t\t});\n\n\t\treturn {\n\t\t\ttransactionBlockBytes: response.bytes,\n\t\t\tsignature: response.signature,\n\t\t};\n\t};\n\n\t#signTransaction: SuiSignTransactionMethod = async ({ transaction, account, chain }) => {\n\t\tconst popup = this.#getNewPopupChannel();\n\n\t\tconst tx = await transaction.toJSON();\n\n\t\tconst response = await popup.send({\n\t\t\ttype: 'sign-transaction',\n\t\t\ttransaction: tx,\n\t\t\taddress: account.address,\n\t\t\tchain,\n\t\t\tsession: getSessionFromStorage(),\n\t\t});\n\n\t\treturn {\n\t\t\tbytes: response.bytes,\n\t\t\tsignature: response.signature,\n\t\t};\n\t};\n\n\t#signAndExecuteTransaction: SuiSignAndExecuteTransactionMethod = async ({\n\t\ttransaction,\n\t\taccount,\n\t\tchain,\n\t}) => {\n\t\tconst popup = this.#getNewPopupChannel();\n\n\t\tconst data = await transaction.toJSON();\n\n\t\tconst response = await popup.send({\n\t\t\ttype: 'sign-and-execute-transaction',\n\t\t\ttransaction: data,\n\t\t\taddress: account.address,\n\t\t\tchain,\n\t\t\tsession: getSessionFromStorage(),\n\t\t});\n\t\treturn {\n\t\t\tbytes: response.bytes,\n\t\t\tsignature: response.signature,\n\t\t\tdigest: response.digest,\n\t\t\teffects: response.effects,\n\t\t};\n\t};\n\n\t#signPersonalMessage: SuiSignPersonalMessageMethod = async ({ message, account, chain }) => {\n\t\tconst popup = this.#getNewPopupChannel();\n\n\t\tconst response = await popup.send({\n\t\t\ttype: 'sign-personal-message',\n\t\t\tmessage: toBase64(message),\n\t\t\taddress: account.address,\n\t\t\tchain: chain ?? account.chains[0],\n\t\t\tsession: getSessionFromStorage(),\n\t\t});\n\n\t\treturn {\n\t\t\tbytes: response.bytes,\n\t\t\tsignature: response.signature,\n\t\t};\n\t};\n\n\t#on: StandardEventsOnMethod = (event, listener) => {\n\t\tthis.#events.on(event, listener);\n\t\treturn () => this.#events.off(event, listener);\n\t};\n\n\t#setAccounts(accounts: ReadonlyWalletAccount[]) {\n\t\tthis.#accounts = accounts;\n\t\tthis.#events.emit('change', { accounts: this.accounts });\n\t}\n\n\t#connect: StandardConnectMethod = async (input) => {\n\t\tif (input?.silent) {\n\t\t\treturn { accounts: this.accounts };\n\t\t}\n\n\t\tconst popup = this.#getNewPopupChannel();\n\t\tconst response = await popup.send({\n\t\t\ttype: 'connect',\n\t\t});\n\n\t\tsetSessionToStorage(response.session);\n\t\tthis.#setAccounts(getAccountsFromSession(response.session));\n\n\t\treturn { accounts: this.accounts };\n\t};\n\n\t#getPreviouslyAuthorizedAccounts() {\n\t\ttry {\n\t\t\treturn getAccountsFromSession(getSessionFromStorage());\n\t\t} catch {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t#disconnect: StandardDisconnectMethod = async () => {\n\t\tlocalStorage.removeItem(SLUSH_SESSION_KEY);\n\t\tthis.#setAccounts([]);\n\t};\n\n\t#getNewPopupChannel() {\n\t\treturn new DappPostMessageChannel({\n\t\t\tappName: this.#name,\n\t\t\thostOrigin: this.#origin,\n\t\t});\n\t}\n\n\tupdateMetadata(metadata: WalletMetadata) {\n\t\tthis.#id = metadata.id;\n\t\tthis.#walletName = metadata.walletName;\n\t\tthis.#icon = metadata.icon as WalletIcon;\n\t}\n}\n\nasync function fetchMetadata(metadataApiUrl: string): Promise<WalletMetadata> {\n\tconst response = await fetch(metadataApiUrl);\n\tif (!response.ok) {\n\t\tthrow new Error('Failed to fetch wallet metadata');\n\t}\n\tconst data = await response.json();\n\treturn parse(WalletMetadataSchema, data);\n}\n\nexport function registerSlushWallet(\n\tname: string,\n\t{\n\t\torigin,\n\t\tmetadataApiUrl = METADATA_API_URL,\n\t}: {\n\t\torigin?: string;\n\t\tmetadataApiUrl?: string;\n\t} = {},\n) {\n\tconst wallets = getWallets();\n\n\tlet unregister: (() => void) | null = null;\n\n\t// listen for wallet registration\n\twallets.on('register', (wallet) => {\n\t\tif (wallet.id === SUI_WALLET_EXTENSION_ID) {\n\t\t\tunregister?.();\n\t\t}\n\t});\n\n\tconst extension = wallets.get().find((wallet) => wallet.id === SUI_WALLET_EXTENSION_ID);\n\tif (extension) {\n\t\treturn;\n\t}\n\n\tconst slushWalletInstance = new SlushWallet({\n\t\tname,\n\t\torigin,\n\t\tmetadata: FALLBACK_METADATA,\n\t});\n\tunregister = wallets.register(slushWalletInstance);\n\n\tfetchMetadata(metadataApiUrl)\n\t\t.then((metadata) => {\n\t\t\tif (!metadata.enabled) {\n\t\t\t\tconsole.log('Slush wallet is not currently enabled.');\n\t\t\t\tunregister?.();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tslushWalletInstance.updateMetadata(metadata);\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error fetching metadata', error);\n\t\t});\n\n\treturn {\n\t\twallet: slushWalletInstance,\n\t\tunregister,\n\t};\n}\n", "const createStoreImpl = (createState) => {\r\n  let state;\r\n  const listeners = /* @__PURE__ */ new Set();\r\n  const setState = (partial, replace) => {\r\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\r\n    if (!Object.is(nextState, state)) {\r\n      const previousState = state;\r\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\r\n      listeners.forEach((listener) => listener(state, previousState));\r\n    }\r\n  };\r\n  const getState = () => state;\r\n  const getInitialState = () => initialState;\r\n  const subscribe = (listener) => {\r\n    listeners.add(listener);\r\n    return () => listeners.delete(listener);\r\n  };\r\n  const destroy = () => {\r\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\r\n      console.warn(\r\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\r\n      );\r\n    }\r\n    listeners.clear();\r\n  };\r\n  const api = { setState, getState, getInitialState, subscribe, destroy };\r\n  const initialState = state = createState(setState, getState, api);\r\n  return api;\r\n};\r\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\r\nvar vanilla = (createState) => {\r\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\r\n    console.warn(\r\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\r\n    );\r\n  }\r\n  return createStore(createState);\r\n};\r\n\r\nexport { createStore, vanilla as default };\r\n", "import { createStore } from 'zustand/vanilla';\r\nexport * from 'zustand/vanilla';\r\nimport ReactExports from 'react';\r\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\r\n\r\nconst { useDebugValue } = ReactExports;\r\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\r\nlet didWarnAboutEqualityFn = false;\r\nconst identity = (arg) => arg;\r\nfunction useStore(api, selector = identity, equalityFn) {\r\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\r\n    console.warn(\r\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\r\n    );\r\n    didWarnAboutEqualityFn = true;\r\n  }\r\n  const slice = useSyncExternalStoreWithSelector(\r\n    api.subscribe,\r\n    api.getState,\r\n    api.getServerState || api.getInitialState,\r\n    selector,\r\n    equalityFn\r\n  );\r\n  useDebugValue(slice);\r\n  return slice;\r\n}\r\nconst createImpl = (createState) => {\r\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\r\n    console.warn(\r\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\r\n    );\r\n  }\r\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\r\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\r\n  Object.assign(useBoundStore, api);\r\n  return useBoundStore;\r\n};\r\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\r\nvar react = (createState) => {\r\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\r\n    console.warn(\r\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\r\n    );\r\n  }\r\n  return create(createState);\r\n};\r\n\r\nexport { create, react as default, useStore };\r\n", "import * as React from 'react';\nimport { composeRefs } from '@radix-ui/react-compose-refs';\n\ndeclare module 'react' {\n  interface ReactElement {\n    $$typeof?: symbol | string;\n  }\n}\n\nconst REACT_LAZY_TYPE = Symbol.for('react.lazy');\n\ninterface LazyReactElement extends React.ReactElement {\n  $$typeof: typeof REACT_LAZY_TYPE;\n  _payload: PromiseLike<Exclude<React.ReactNode, PromiseLike<any>>>;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Slot\n * -----------------------------------------------------------------------------------------------*/\n\nexport type Usable<T> = PromiseLike<T> | React.Context<T>;\nconst use: typeof React.use | undefined = (React as any)[' use '.trim().toString()];\n\ninterface SlotProps extends React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nfunction isPromiseLike(value: unknown): value is PromiseLike<unknown> {\n  return typeof value === 'object' && value !== null && 'then' in value;\n}\n\nfunction isLazyComponent(element: React.ReactNode): element is LazyReactElement {\n  return (\n    element != null &&\n    typeof element === 'object' &&\n    '$$typeof' in element &&\n    element.$$typeof === REACT_LAZY_TYPE &&\n    '_payload' in element &&\n    isPromiseLike(element._payload)\n  );\n}\n\n/* @__NO_SIDE_EFFECTS__ */ export function createSlot(ownerName: string) {\n  const SlotClone = createSlotClone(ownerName);\n  const Slot = React.forwardRef<HTMLElement, SlotProps>((props, forwardedRef) => {\n    let { children, ...slotProps } = props;\n    if (isLazyComponent(children) && typeof use === 'function') {\n      children = use(children._payload);\n    }\n    const childrenArray = React.Children.toArray(children);\n    const slottable = childrenArray.find(isSlottable);\n\n    if (slottable) {\n      // the new element to render is the one passed as a child of `Slottable`\n      const newElement = slottable.props.children;\n\n      const newChildren = childrenArray.map((child) => {\n        if (child === slottable) {\n          // because the new element will be the one rendered, we are only interested\n          // in grabbing its children (`newElement.props.children`)\n          if (React.Children.count(newElement) > 1) return React.Children.only(null);\n          return React.isValidElement(newElement)\n            ? (newElement.props as { children: React.ReactNode }).children\n            : null;\n        } else {\n          return child;\n        }\n      });\n\n      return (\n        <SlotClone {...slotProps} ref={forwardedRef}>\n          {React.isValidElement(newElement)\n            ? React.cloneElement(newElement, undefined, newChildren)\n            : null}\n        </SlotClone>\n      );\n    }\n\n    return (\n      <SlotClone {...slotProps} ref={forwardedRef}>\n        {children}\n      </SlotClone>\n    );\n  });\n\n  Slot.displayName = `${ownerName}.Slot`;\n  return Slot;\n}\n\nconst Slot = createSlot('Slot');\n\n/* -------------------------------------------------------------------------------------------------\n * SlotClone\n * -----------------------------------------------------------------------------------------------*/\n\ninterface SlotCloneProps {\n  children: React.ReactNode;\n}\n\n/* @__NO_SIDE_EFFECTS__ */ function createSlotClone(ownerName: string) {\n  const SlotClone = React.forwardRef<any, SlotCloneProps>((props, forwardedRef) => {\n    let { children, ...slotProps } = props;\n    if (isLazyComponent(children) && typeof use === 'function') {\n      children = use(children._payload);\n    }\n\n    if (React.isValidElement(children)) {\n      const childrenRef = getElementRef(children);\n      const props = mergeProps(slotProps, children.props as AnyProps);\n      // do not pass ref to React.Fragment for React 19 compatibility\n      if (children.type !== React.Fragment) {\n        props.ref = forwardedRef ? composeRefs(forwardedRef, childrenRef) : childrenRef;\n      }\n      return React.cloneElement(children, props);\n    }\n\n    return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n  });\n\n  SlotClone.displayName = `${ownerName}.SlotClone`;\n  return SlotClone;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Slottable\n * -----------------------------------------------------------------------------------------------*/\n\nconst SLOTTABLE_IDENTIFIER = Symbol('radix.slottable');\n\ninterface SlottableProps {\n  children: React.ReactNode;\n}\n\ninterface SlottableComponent extends React.FC<SlottableProps> {\n  __radixId: symbol;\n}\n\n/* @__NO_SIDE_EFFECTS__ */ export function createSlottable(ownerName: string) {\n  const Slottable: SlottableComponent = ({ children }) => {\n    return <>{children}</>;\n  };\n  Slottable.displayName = `${ownerName}.Slottable`;\n  Slottable.__radixId = SLOTTABLE_IDENTIFIER;\n  return Slottable;\n}\n\nconst Slottable = createSlottable('Slottable');\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype AnyProps = Record<string, any>;\n\nfunction isSlottable(\n  child: React.ReactNode,\n): child is React.ReactElement<SlottableProps, typeof Slottable> {\n  return (\n    React.isValidElement(child) &&\n    typeof child.type === 'function' &&\n    '__radixId' in child.type &&\n    child.type.__radixId === SLOTTABLE_IDENTIFIER\n  );\n}\n\nfunction mergeProps(slotProps: AnyProps, childProps: AnyProps) {\n  // all child props should override\n  const overrideProps = { ...childProps };\n\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      // if the handler exists on both, we compose them\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args: unknown[]) => {\n          const result = childPropValue(...args);\n          slotPropValue(...args);\n          return result;\n        };\n      }\n      // but if it exists only on the slot, we use only this one\n      else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    }\n    // if it's `style`, we merge them\n    else if (propName === 'style') {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === 'className') {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(' ');\n    }\n  }\n\n  return { ...slotProps, ...overrideProps };\n}\n\n// Before React 19 accessing `element.props.ref` will throw a warning and suggest using `element.ref`\n// After React 19 accessing `element.ref` does the opposite.\n// https://github.com/facebook/react/pull/28348\n//\n// Access the ref using the method that doesn't yield a warning.\nfunction getElementRef(element: React.ReactElement) {\n  // React <=18 in DEV\n  let getter = Object.getOwnPropertyDescriptor(element.props, 'ref')?.get;\n  let mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return (element as any).ref;\n  }\n\n  // React 19 in DEV\n  getter = Object.getOwnPropertyDescriptor(element, 'ref')?.get;\n  mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return (element.props as { ref?: React.Ref<unknown> }).ref;\n  }\n\n  // Not DEV\n  return (element.props as { ref?: React.Ref<unknown> }).ref || (element as any).ref;\n}\n\nexport {\n  Slot,\n  Slottable,\n  //\n  Slot as Root,\n};\nexport type { SlotProps };\n", "function toPrimitive(t, r) {\r\n  if (\"object\" != typeof t || !t) return t;\r\n  var e = t[Symbol.toPrimitive];\r\n  if (void 0 !== e) {\r\n    var i = e.call(t, r || \"default\");\r\n    if (\"object\" != typeof i) return i;\r\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n  }\r\n  return (\"string\" === r ? String : Number)(t);\r\n}\r\n\r\nfunction toPropertyKey(t) {\r\n  var i = toPrimitive(t, \"string\");\r\n  return \"symbol\" == typeof i ? i : String(i);\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n  key = toPropertyKey(key);\r\n  if (key in obj) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n  } else {\r\n    obj[key] = value;\r\n  }\r\n  return obj;\r\n}\r\n\r\nfunction ownKeys(e, r) {\r\n  var t = Object.keys(e);\r\n  if (Object.getOwnPropertySymbols) {\r\n    var o = Object.getOwnPropertySymbols(e);\r\n    r && (o = o.filter(function (r) {\r\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\r\n    })), t.push.apply(t, o);\r\n  }\r\n  return t;\r\n}\r\nfunction _objectSpread2(e) {\r\n  for (var r = 1; r < arguments.length; r++) {\r\n    var t = null != arguments[r] ? arguments[r] : {};\r\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\r\n      _defineProperty(e, r, t[r]);\r\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\r\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\r\n    });\r\n  }\r\n  return e;\r\n}\r\n\r\nfunction mapValues(input, fn) {\r\n  var result = {};\r\n  for (var _key in input) {\r\n    result[_key] = fn(input[_key], _key);\r\n  }\r\n  return result;\r\n}\r\n\r\nvar shouldApplyCompound = (compoundCheck, selections, defaultVariants) => {\r\n  for (var key of Object.keys(compoundCheck)) {\r\n    var _selections$key;\r\n    if (compoundCheck[key] !== ((_selections$key = selections[key]) !== null && _selections$key !== void 0 ? _selections$key : defaultVariants[key])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\nvar createRuntimeFn = config => {\r\n  var runtimeFn = options => {\r\n    var className = config.defaultClassName;\r\n    var selections = _objectSpread2(_objectSpread2({}, config.defaultVariants), options);\r\n    for (var variantName in selections) {\r\n      var _selections$variantNa;\r\n      var variantSelection = (_selections$variantNa = selections[variantName]) !== null && _selections$variantNa !== void 0 ? _selections$variantNa : config.defaultVariants[variantName];\r\n      if (variantSelection != null) {\r\n        var selection = variantSelection;\r\n        if (typeof selection === 'boolean') {\r\n          // @ts-expect-error\r\n          selection = selection === true ? 'true' : 'false';\r\n        }\r\n        var selectionClassName =\r\n        // @ts-expect-error\r\n        config.variantClassNames[variantName][selection];\r\n        if (selectionClassName) {\r\n          className += ' ' + selectionClassName;\r\n        }\r\n      }\r\n    }\r\n    for (var [compoundCheck, compoundClassName] of config.compoundVariants) {\r\n      if (shouldApplyCompound(compoundCheck, selections, config.defaultVariants)) {\r\n        className += ' ' + compoundClassName;\r\n      }\r\n    }\r\n    return className;\r\n  };\r\n  runtimeFn.variants = () => Object.keys(config.variantClassNames);\r\n  runtimeFn.classNames = {\r\n    get base() {\r\n      return config.defaultClassName.split(' ')[0];\r\n    },\r\n    get variants() {\r\n      return mapValues(config.variantClassNames, classNames => mapValues(classNames, className => className.split(' ')[0]));\r\n    }\r\n  };\r\n  return runtimeFn;\r\n};\r\n\r\nexport { createRuntimeFn as c, mapValues as m };\r\n", "/**\r\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\r\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\r\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\r\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\r\n * @module\r\n */\r\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from './_md.ts';\r\nimport * as u64 from './_u64.ts';\r\nimport { type CHash, clean, createHasher, rotr } from './utils.ts';\r\n\r\n/**\r\n * Round constants:\r\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\r\n */\r\n// prettier-ignore\r\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\r\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\r\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\r\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\r\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\r\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\r\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\r\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\r\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\r\n]);\r\n\r\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\r\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\r\nexport class SHA256 extends HashMD<SHA256> {\r\n  // We cannot use array here since array allows indexing by variable\r\n  // which means optimizer/compiler cannot use registers.\r\n  protected A: number = SHA256_IV[0] | 0;\r\n  protected B: number = SHA256_IV[1] | 0;\r\n  protected C: number = SHA256_IV[2] | 0;\r\n  protected D: number = SHA256_IV[3] | 0;\r\n  protected E: number = SHA256_IV[4] | 0;\r\n  protected F: number = SHA256_IV[5] | 0;\r\n  protected G: number = SHA256_IV[6] | 0;\r\n  protected H: number = SHA256_IV[7] | 0;\r\n\r\n  constructor(outputLen: number = 32) {\r\n    super(64, outputLen, 8, false);\r\n  }\r\n  protected get(): [number, number, number, number, number, number, number, number] {\r\n    const { A, B, C, D, E, F, G, H } = this;\r\n    return [A, B, C, D, E, F, G, H];\r\n  }\r\n  // prettier-ignore\r\n  protected set(\r\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\r\n  ): void {\r\n    this.A = A | 0;\r\n    this.B = B | 0;\r\n    this.C = C | 0;\r\n    this.D = D | 0;\r\n    this.E = E | 0;\r\n    this.F = F | 0;\r\n    this.G = G | 0;\r\n    this.H = H | 0;\r\n  }\r\n  protected process(view: DataView, offset: number): void {\r\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\r\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\r\n    for (let i = 16; i < 64; i++) {\r\n      const W15 = SHA256_W[i - 15];\r\n      const W2 = SHA256_W[i - 2];\r\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\r\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\r\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\r\n    }\r\n    // Compression function main loop, 64 rounds\r\n    let { A, B, C, D, E, F, G, H } = this;\r\n    for (let i = 0; i < 64; i++) {\r\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\r\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\r\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\r\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\r\n      H = G;\r\n      G = F;\r\n      F = E;\r\n      E = (D + T1) | 0;\r\n      D = C;\r\n      C = B;\r\n      B = A;\r\n      A = (T1 + T2) | 0;\r\n    }\r\n    // Add the compressed chunk to the current hash value\r\n    A = (A + this.A) | 0;\r\n    B = (B + this.B) | 0;\r\n    C = (C + this.C) | 0;\r\n    D = (D + this.D) | 0;\r\n    E = (E + this.E) | 0;\r\n    F = (F + this.F) | 0;\r\n    G = (G + this.G) | 0;\r\n    H = (H + this.H) | 0;\r\n    this.set(A, B, C, D, E, F, G, H);\r\n  }\r\n  protected roundClean(): void {\r\n    clean(SHA256_W);\r\n  }\r\n  destroy(): void {\r\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\r\n    clean(this.buffer);\r\n  }\r\n}\r\n\r\nexport class SHA224 extends SHA256 {\r\n  protected A: number = SHA224_IV[0] | 0;\r\n  protected B: number = SHA224_IV[1] | 0;\r\n  protected C: number = SHA224_IV[2] | 0;\r\n  protected D: number = SHA224_IV[3] | 0;\r\n  protected E: number = SHA224_IV[4] | 0;\r\n  protected F: number = SHA224_IV[5] | 0;\r\n  protected G: number = SHA224_IV[6] | 0;\r\n  protected H: number = SHA224_IV[7] | 0;\r\n  constructor() {\r\n    super(28);\r\n  }\r\n}\r\n\r\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\r\n\r\n// Round contants\r\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\r\n// prettier-ignore\r\nconst K512 = /* @__PURE__ */ (() => u64.split([\r\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\r\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\r\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\r\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\r\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\r\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\r\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\r\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\r\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\r\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\r\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\r\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\r\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\r\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\r\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\r\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\r\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\r\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\r\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\r\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\r\n].map(n => BigInt(n))))();\r\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\r\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\r\n\r\n// Reusable temporary buffers\r\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\r\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\r\n\r\nexport class SHA512 extends HashMD<SHA512> {\r\n  // We cannot use array here since array allows indexing by variable\r\n  // which means optimizer/compiler cannot use registers.\r\n  // h -- high 32 bits, l -- low 32 bits\r\n  protected Ah: number = SHA512_IV[0] | 0;\r\n  protected Al: number = SHA512_IV[1] | 0;\r\n  protected Bh: number = SHA512_IV[2] | 0;\r\n  protected Bl: number = SHA512_IV[3] | 0;\r\n  protected Ch: number = SHA512_IV[4] | 0;\r\n  protected Cl: number = SHA512_IV[5] | 0;\r\n  protected Dh: number = SHA512_IV[6] | 0;\r\n  protected Dl: number = SHA512_IV[7] | 0;\r\n  protected Eh: number = SHA512_IV[8] | 0;\r\n  protected El: number = SHA512_IV[9] | 0;\r\n  protected Fh: number = SHA512_IV[10] | 0;\r\n  protected Fl: number = SHA512_IV[11] | 0;\r\n  protected Gh: number = SHA512_IV[12] | 0;\r\n  protected Gl: number = SHA512_IV[13] | 0;\r\n  protected Hh: number = SHA512_IV[14] | 0;\r\n  protected Hl: number = SHA512_IV[15] | 0;\r\n\r\n  constructor(outputLen: number = 64) {\r\n    super(128, outputLen, 16, false);\r\n  }\r\n  // prettier-ignore\r\n  protected get(): [\r\n    number, number, number, number, number, number, number, number,\r\n    number, number, number, number, number, number, number, number\r\n  ] {\r\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\r\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\r\n  }\r\n  // prettier-ignore\r\n  protected set(\r\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\r\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\r\n  ): void {\r\n    this.Ah = Ah | 0;\r\n    this.Al = Al | 0;\r\n    this.Bh = Bh | 0;\r\n    this.Bl = Bl | 0;\r\n    this.Ch = Ch | 0;\r\n    this.Cl = Cl | 0;\r\n    this.Dh = Dh | 0;\r\n    this.Dl = Dl | 0;\r\n    this.Eh = Eh | 0;\r\n    this.El = El | 0;\r\n    this.Fh = Fh | 0;\r\n    this.Fl = Fl | 0;\r\n    this.Gh = Gh | 0;\r\n    this.Gl = Gl | 0;\r\n    this.Hh = Hh | 0;\r\n    this.Hl = Hl | 0;\r\n  }\r\n  protected process(view: DataView, offset: number): void {\r\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\r\n    for (let i = 0; i < 16; i++, offset += 4) {\r\n      SHA512_W_H[i] = view.getUint32(offset);\r\n      SHA512_W_L[i] = view.getUint32((offset += 4));\r\n    }\r\n    for (let i = 16; i < 80; i++) {\r\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\r\n      const W15h = SHA512_W_H[i - 15] | 0;\r\n      const W15l = SHA512_W_L[i - 15] | 0;\r\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\r\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\r\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\r\n      const W2h = SHA512_W_H[i - 2] | 0;\r\n      const W2l = SHA512_W_L[i - 2] | 0;\r\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\r\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\r\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\r\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\r\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\r\n      SHA512_W_H[i] = SUMh | 0;\r\n      SHA512_W_L[i] = SUMl | 0;\r\n    }\r\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\r\n    // Compression function main loop, 80 rounds\r\n    for (let i = 0; i < 80; i++) {\r\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\r\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\r\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\r\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\r\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\r\n      const CHIl = (El & Fl) ^ (~El & Gl);\r\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\r\n      // prettier-ignore\r\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\r\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\r\n      const T1l = T1ll | 0;\r\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\r\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\r\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\r\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\r\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\r\n      Hh = Gh | 0;\r\n      Hl = Gl | 0;\r\n      Gh = Fh | 0;\r\n      Gl = Fl | 0;\r\n      Fh = Eh | 0;\r\n      Fl = El | 0;\r\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\r\n      Dh = Ch | 0;\r\n      Dl = Cl | 0;\r\n      Ch = Bh | 0;\r\n      Cl = Bl | 0;\r\n      Bh = Ah | 0;\r\n      Bl = Al | 0;\r\n      const All = u64.add3L(T1l, sigma0l, MAJl);\r\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\r\n      Al = All | 0;\r\n    }\r\n    // Add the compressed chunk to the current hash value\r\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\r\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\r\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\r\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\r\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\r\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\r\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\r\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\r\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\r\n  }\r\n  protected roundClean(): void {\r\n    clean(SHA512_W_H, SHA512_W_L);\r\n  }\r\n  destroy(): void {\r\n    clean(this.buffer);\r\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n  }\r\n}\r\n\r\nexport class SHA384 extends SHA512 {\r\n  protected Ah: number = SHA384_IV[0] | 0;\r\n  protected Al: number = SHA384_IV[1] | 0;\r\n  protected Bh: number = SHA384_IV[2] | 0;\r\n  protected Bl: number = SHA384_IV[3] | 0;\r\n  protected Ch: number = SHA384_IV[4] | 0;\r\n  protected Cl: number = SHA384_IV[5] | 0;\r\n  protected Dh: number = SHA384_IV[6] | 0;\r\n  protected Dl: number = SHA384_IV[7] | 0;\r\n  protected Eh: number = SHA384_IV[8] | 0;\r\n  protected El: number = SHA384_IV[9] | 0;\r\n  protected Fh: number = SHA384_IV[10] | 0;\r\n  protected Fl: number = SHA384_IV[11] | 0;\r\n  protected Gh: number = SHA384_IV[12] | 0;\r\n  protected Gl: number = SHA384_IV[13] | 0;\r\n  protected Hh: number = SHA384_IV[14] | 0;\r\n  protected Hl: number = SHA384_IV[15] | 0;\r\n\r\n  constructor() {\r\n    super(48);\r\n  }\r\n}\r\n\r\n/**\r\n * Truncated SHA512/256 and SHA512/224.\r\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\r\n * Then t hashes string to produce result IV.\r\n * See `test/misc/sha2-gen-iv.js`.\r\n */\r\n\r\n/** SHA512/224 IV */\r\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\r\n  0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\r\n  0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\r\n]);\r\n\r\n/** SHA512/256 IV */\r\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\r\n  0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\r\n  0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\r\n]);\r\n\r\nexport class SHA512_224 extends SHA512 {\r\n  protected Ah: number = T224_IV[0] | 0;\r\n  protected Al: number = T224_IV[1] | 0;\r\n  protected Bh: number = T224_IV[2] | 0;\r\n  protected Bl: number = T224_IV[3] | 0;\r\n  protected Ch: number = T224_IV[4] | 0;\r\n  protected Cl: number = T224_IV[5] | 0;\r\n  protected Dh: number = T224_IV[6] | 0;\r\n  protected Dl: number = T224_IV[7] | 0;\r\n  protected Eh: number = T224_IV[8] | 0;\r\n  protected El: number = T224_IV[9] | 0;\r\n  protected Fh: number = T224_IV[10] | 0;\r\n  protected Fl: number = T224_IV[11] | 0;\r\n  protected Gh: number = T224_IV[12] | 0;\r\n  protected Gl: number = T224_IV[13] | 0;\r\n  protected Hh: number = T224_IV[14] | 0;\r\n  protected Hl: number = T224_IV[15] | 0;\r\n\r\n  constructor() {\r\n    super(28);\r\n  }\r\n}\r\n\r\nexport class SHA512_256 extends SHA512 {\r\n  protected Ah: number = T256_IV[0] | 0;\r\n  protected Al: number = T256_IV[1] | 0;\r\n  protected Bh: number = T256_IV[2] | 0;\r\n  protected Bl: number = T256_IV[3] | 0;\r\n  protected Ch: number = T256_IV[4] | 0;\r\n  protected Cl: number = T256_IV[5] | 0;\r\n  protected Dh: number = T256_IV[6] | 0;\r\n  protected Dl: number = T256_IV[7] | 0;\r\n  protected Eh: number = T256_IV[8] | 0;\r\n  protected El: number = T256_IV[9] | 0;\r\n  protected Fh: number = T256_IV[10] | 0;\r\n  protected Fl: number = T256_IV[11] | 0;\r\n  protected Gh: number = T256_IV[12] | 0;\r\n  protected Gl: number = T256_IV[13] | 0;\r\n  protected Hh: number = T256_IV[14] | 0;\r\n  protected Hl: number = T256_IV[15] | 0;\r\n\r\n  constructor() {\r\n    super(32);\r\n  }\r\n}\r\n\r\n/**\r\n * SHA2-256 hash function from RFC 4634.\r\n *\r\n * It is the fastest JS hash, even faster than Blake3.\r\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\r\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\r\n */\r\nexport const sha256: CHash = /* @__PURE__ */ createHasher(() => new SHA256());\r\n/** SHA2-224 hash function from RFC 4634 */\r\nexport const sha224: CHash = /* @__PURE__ */ createHasher(() => new SHA224());\r\n\r\n/** SHA2-512 hash function from RFC 4634. */\r\nexport const sha512: CHash = /* @__PURE__ */ createHasher(() => new SHA512());\r\n/** SHA2-384 hash function from RFC 4634. */\r\nexport const sha384: CHash = /* @__PURE__ */ createHasher(() => new SHA384());\r\n\r\n/**\r\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\r\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\r\n */\r\nexport const sha512_256: CHash = /* @__PURE__ */ createHasher(() => new SHA512_256());\r\n/**\r\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\r\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\r\n */\r\nexport const sha512_224: CHash = /* @__PURE__ */ createHasher(() => new SHA512_224());\r\n", "/**\r\n * Hex, bytes and number utilities.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport {\r\n  abytes as abytes_,\r\n  bytesToHex as bytesToHex_,\r\n  concatBytes as concatBytes_,\r\n  hexToBytes as hexToBytes_,\r\n  isBytes as isBytes_,\r\n} from '@noble/hashes/utils.js';\r\nexport {\r\n  abytes,\r\n  anumber,\r\n  bytesToHex,\r\n  bytesToUtf8,\r\n  concatBytes,\r\n  hexToBytes,\r\n  isBytes,\r\n  randomBytes,\r\n  utf8ToBytes,\r\n} from '@noble/hashes/utils.js';\r\nconst _0n = /* @__PURE__ */ BigInt(0);\r\nconst _1n = /* @__PURE__ */ BigInt(1);\r\nexport type Hex = Uint8Array | string; // hex strings are accepted for simplicity\r\nexport type PrivKey = Hex | bigint; // bigints are accepted to ease learning curve\r\nexport type CHash = {\r\n  (message: Uint8Array | string): Uint8Array;\r\n  blockLen: number;\r\n  outputLen: number;\r\n  create(opts?: { dkLen?: number }): any; // For shake\r\n};\r\nexport type FHash = (message: Uint8Array | string) => Uint8Array;\r\n\r\nexport function abool(title: string, value: boolean): void {\r\n  if (typeof value !== 'boolean') throw new Error(title + ' boolean expected, got ' + value);\r\n}\r\n\r\n// Used in weierstrass, der\r\nexport function numberToHexUnpadded(num: number | bigint): string {\r\n  const hex = num.toString(16);\r\n  return hex.length & 1 ? '0' + hex : hex;\r\n}\r\n\r\nexport function hexToNumber(hex: string): bigint {\r\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\r\n  return hex === '' ? _0n : BigInt('0x' + hex); // Big Endian\r\n}\r\n\r\n// BE: Big Endian, LE: Little Endian\r\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\r\n  return hexToNumber(bytesToHex_(bytes));\r\n}\r\nexport function bytesToNumberLE(bytes: Uint8Array): bigint {\r\n  abytes_(bytes);\r\n  return hexToNumber(bytesToHex_(Uint8Array.from(bytes).reverse()));\r\n}\r\n\r\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\r\n  return hexToBytes_(n.toString(16).padStart(len * 2, '0'));\r\n}\r\nexport function numberToBytesLE(n: number | bigint, len: number): Uint8Array {\r\n  return numberToBytesBE(n, len).reverse();\r\n}\r\n// Unpadded, rarely used\r\nexport function numberToVarBytesBE(n: number | bigint): Uint8Array {\r\n  return hexToBytes_(numberToHexUnpadded(n));\r\n}\r\n\r\n/**\r\n * Takes hex string or Uint8Array, converts to Uint8Array.\r\n * Validates output length.\r\n * Will throw error for other types.\r\n * @param title descriptive title for an error e.g. 'secret key'\r\n * @param hex hex string or Uint8Array\r\n * @param expectedLength optional, will compare to result array's length\r\n * @returns\r\n */\r\nexport function ensureBytes(title: string, hex: Hex, expectedLength?: number): Uint8Array {\r\n  let res: Uint8Array;\r\n  if (typeof hex === 'string') {\r\n    try {\r\n      res = hexToBytes_(hex);\r\n    } catch (e) {\r\n      throw new Error(title + ' must be hex string or Uint8Array, cause: ' + e);\r\n    }\r\n  } else if (isBytes_(hex)) {\r\n    // Uint8Array.from() instead of hash.slice() because node.js Buffer\r\n    // is instance of Uint8Array, and its slice() creates **mutable** copy\r\n    res = Uint8Array.from(hex);\r\n  } else {\r\n    throw new Error(title + ' must be hex string or Uint8Array');\r\n  }\r\n  const len = res.length;\r\n  if (typeof expectedLength === 'number' && len !== expectedLength)\r\n    throw new Error(title + ' of length ' + expectedLength + ' expected, got ' + len);\r\n  return res;\r\n}\r\n\r\n// Compares 2 u8a-s in kinda constant time\r\nexport function equalBytes(a: Uint8Array, b: Uint8Array): boolean {\r\n  if (a.length !== b.length) return false;\r\n  let diff = 0;\r\n  for (let i = 0; i < a.length; i++) diff |= a[i] ^ b[i];\r\n  return diff === 0;\r\n}\r\n\r\n/**\r\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\r\n */\r\n// export const utf8ToBytes: typeof utf8ToBytes_ = utf8ToBytes_;\r\n/**\r\n * Converts bytes to string using UTF8 encoding.\r\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\r\n */\r\n// export const bytesToUtf8: typeof bytesToUtf8_ = bytesToUtf8_;\r\n\r\n// Is positive bigint\r\nconst isPosBig = (n: bigint) => typeof n === 'bigint' && _0n <= n;\r\n\r\nexport function inRange(n: bigint, min: bigint, max: bigint): boolean {\r\n  return isPosBig(n) && isPosBig(min) && isPosBig(max) && min <= n && n < max;\r\n}\r\n\r\n/**\r\n * Asserts min <= n < max. NOTE: It's < max and not <= max.\r\n * @example\r\n * aInRange('x', x, 1n, 256n); // would assume x is in (1n..255n)\r\n */\r\nexport function aInRange(title: string, n: bigint, min: bigint, max: bigint): void {\r\n  // Why min <= n < max and not a (min < n < max) OR b (min <= n <= max)?\r\n  // consider P=256n, min=0n, max=P\r\n  // - a for min=0 would require -1:          `inRange('x', x, -1n, P)`\r\n  // - b would commonly require subtraction:  `inRange('x', x, 0n, P - 1n)`\r\n  // - our way is the cleanest:               `inRange('x', x, 0n, P)\r\n  if (!inRange(n, min, max))\r\n    throw new Error('expected valid ' + title + ': ' + min + ' <= n < ' + max + ', got ' + n);\r\n}\r\n\r\n// Bit operations\r\n\r\n/**\r\n * Calculates amount of bits in a bigint.\r\n * Same as `n.toString(2).length`\r\n * TODO: merge with nLength in modular\r\n */\r\nexport function bitLen(n: bigint): number {\r\n  let len;\r\n  for (len = 0; n > _0n; n >>= _1n, len += 1);\r\n  return len;\r\n}\r\n\r\n/**\r\n * Gets single bit at position.\r\n * NOTE: first bit position is 0 (same as arrays)\r\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\r\n */\r\nexport function bitGet(n: bigint, pos: number): bigint {\r\n  return (n >> BigInt(pos)) & _1n;\r\n}\r\n\r\n/**\r\n * Sets single bit at position.\r\n */\r\nexport function bitSet(n: bigint, pos: number, value: boolean): bigint {\r\n  return n | ((value ? _1n : _0n) << BigInt(pos));\r\n}\r\n\r\n/**\r\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\r\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\r\n */\r\nexport const bitMask = (n: number): bigint => (_1n << BigInt(n)) - _1n;\r\n\r\n// DRBG\r\n\r\ntype Pred<T> = (v: Uint8Array) => T | undefined;\r\n/**\r\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\r\n * @returns function that will call DRBG until 2nd arg returns something meaningful\r\n * @example\r\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\r\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\r\n */\r\nexport function createHmacDrbg<T>(\r\n  hashLen: number,\r\n  qByteLen: number,\r\n  hmacFn: (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array\r\n): (seed: Uint8Array, predicate: Pred<T>) => T {\r\n  if (typeof hashLen !== 'number' || hashLen < 2) throw new Error('hashLen must be a number');\r\n  if (typeof qByteLen !== 'number' || qByteLen < 2) throw new Error('qByteLen must be a number');\r\n  if (typeof hmacFn !== 'function') throw new Error('hmacFn must be a function');\r\n  // Step B, Step C: set hashLen to 8*ceil(hlen/8)\r\n  const u8n = (len: number) => new Uint8Array(len); // creates Uint8Array\r\n  const u8of = (byte: number) => Uint8Array.of(byte); // another shortcut\r\n  let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\r\n  let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\r\n  let i = 0; // Iterations counter, will throw when over 1000\r\n  const reset = () => {\r\n    v.fill(1);\r\n    k.fill(0);\r\n    i = 0;\r\n  };\r\n  const h = (...b: Uint8Array[]) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\r\n  const reseed = (seed = u8n(0)) => {\r\n    // HMAC-DRBG reseed() function. Steps D-G\r\n    k = h(u8of(0x00), seed); // k = hmac(k || v || 0x00 || seed)\r\n    v = h(); // v = hmac(k || v)\r\n    if (seed.length === 0) return;\r\n    k = h(u8of(0x01), seed); // k = hmac(k || v || 0x01 || seed)\r\n    v = h(); // v = hmac(k || v)\r\n  };\r\n  const gen = () => {\r\n    // HMAC-DRBG generate() function\r\n    if (i++ >= 1000) throw new Error('drbg: tried 1000 values');\r\n    let len = 0;\r\n    const out: Uint8Array[] = [];\r\n    while (len < qByteLen) {\r\n      v = h();\r\n      const sl = v.slice();\r\n      out.push(sl);\r\n      len += v.length;\r\n    }\r\n    return concatBytes_(...out);\r\n  };\r\n  const genUntil = (seed: Uint8Array, pred: Pred<T>): T => {\r\n    reset();\r\n    reseed(seed); // Steps D-G\r\n    let res: T | undefined = undefined; // Step H: grind until k is in [1..n-1]\r\n    while (!(res = pred(gen()))) reseed();\r\n    reset();\r\n    return res;\r\n  };\r\n  return genUntil;\r\n}\r\n\r\n// Validating curves and fields\r\n\r\nconst validatorFns = {\r\n  bigint: (val: any): boolean => typeof val === 'bigint',\r\n  function: (val: any): boolean => typeof val === 'function',\r\n  boolean: (val: any): boolean => typeof val === 'boolean',\r\n  string: (val: any): boolean => typeof val === 'string',\r\n  stringOrUint8Array: (val: any): boolean => typeof val === 'string' || isBytes_(val),\r\n  isSafeInteger: (val: any): boolean => Number.isSafeInteger(val),\r\n  array: (val: any): boolean => Array.isArray(val),\r\n  field: (val: any, object: any): any => (object as any).Fp.isValid(val),\r\n  hash: (val: any): boolean => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\r\n} as const;\r\ntype Validator = keyof typeof validatorFns;\r\ntype ValMap<T extends Record<string, any>> = { [K in keyof T]?: Validator };\r\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\r\n\r\nexport function validateObject<T extends Record<string, any>>(\r\n  object: T,\r\n  validators: ValMap<T>,\r\n  optValidators: ValMap<T> = {}\r\n): T {\r\n  const checkField = (fieldName: keyof T, type: Validator, isOptional: boolean) => {\r\n    const checkVal = validatorFns[type];\r\n    if (typeof checkVal !== 'function') throw new Error('invalid validator function');\r\n\r\n    const val = object[fieldName as keyof typeof object];\r\n    if (isOptional && val === undefined) return;\r\n    if (!checkVal(val, object)) {\r\n      throw new Error(\r\n        'param ' + String(fieldName) + ' is invalid. Expected ' + type + ', got ' + val\r\n      );\r\n    }\r\n  };\r\n  for (const [fieldName, type] of Object.entries(validators)) checkField(fieldName, type!, false);\r\n  for (const [fieldName, type] of Object.entries(optValidators)) checkField(fieldName, type!, true);\r\n  return object;\r\n}\r\n// validate type tests\r\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\r\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\r\n// // Should fail type-check\r\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\r\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\r\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\r\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\r\n\r\nexport function isHash(val: CHash): boolean {\r\n  return typeof val === 'function' && Number.isSafeInteger(val.outputLen);\r\n}\r\nexport function _validateObject(\r\n  object: Record<string, any>,\r\n  fields: Record<string, string>,\r\n  optFields: Record<string, string> = {}\r\n): void {\r\n  if (!object || typeof object !== 'object') throw new Error('expected valid options object');\r\n  type Item = keyof typeof object;\r\n  function checkField(fieldName: Item, expectedType: string, isOpt: boolean) {\r\n    const val = object[fieldName];\r\n    if (isOpt && val === undefined) return;\r\n    const current = typeof val;\r\n    if (current !== expectedType || val === null)\r\n      throw new Error(`param \"${fieldName}\" is invalid: expected ${expectedType}, got ${current}`);\r\n  }\r\n  Object.entries(fields).forEach(([k, v]) => checkField(k, v, false));\r\n  Object.entries(optFields).forEach(([k, v]) => checkField(k, v, true));\r\n}\r\n\r\n/**\r\n * throws not implemented error\r\n */\r\nexport const notImplemented = (): never => {\r\n  throw new Error('not implemented');\r\n};\r\n\r\n/**\r\n * Memoizes (caches) computation result.\r\n * Uses WeakMap: the value is going auto-cleaned by GC after last reference is removed.\r\n */\r\nexport function memoized<T extends object, R, O extends any[]>(\r\n  fn: (arg: T, ...args: O) => R\r\n): (arg: T, ...args: O) => R {\r\n  const map = new WeakMap<T, R>();\r\n  return (arg: T, ...args: O): R => {\r\n    const val = map.get(arg);\r\n    if (val !== undefined) return val;\r\n    const computed = fn(arg, ...args);\r\n    map.set(arg, computed);\r\n    return computed;\r\n  };\r\n}\r\n", "/**\r\n * Utils for modular division and fields.\r\n * Field over 11 is a finite (Galois) field is integer number operations `mod 11`.\r\n * There is no division: it is replaced by modular multiplicative inverse.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport {\r\n  _validateObject,\r\n  anumber,\r\n  bitMask,\r\n  bytesToNumberBE,\r\n  bytesToNumberLE,\r\n  ensureBytes,\r\n  numberToBytesBE,\r\n  numberToBytesLE,\r\n} from '../utils.ts';\r\n\r\n// prettier-ignore\r\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = /* @__PURE__ */ BigInt(2), _3n = /* @__PURE__ */ BigInt(3);\r\n// prettier-ignore\r\nconst _4n = /* @__PURE__ */ BigInt(4), _5n = /* @__PURE__ */ BigInt(5), _7n = /* @__PURE__ */ BigInt(7);\r\n// prettier-ignore\r\nconst _8n = /* @__PURE__ */ BigInt(8), _9n = /* @__PURE__ */ BigInt(9), _16n = /* @__PURE__ */ BigInt(16);\r\n\r\n// Calculates a modulo b\r\nexport function mod(a: bigint, b: bigint): bigint {\r\n  const result = a % b;\r\n  return result >= _0n ? result : b + result;\r\n}\r\n/**\r\n * Efficiently raise num to power and do modular division.\r\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\r\n * @example\r\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\r\n */\r\nexport function pow(num: bigint, power: bigint, modulo: bigint): bigint {\r\n  return FpPow(Field(modulo), num, power);\r\n}\r\n\r\n/** Does `x^(2^power)` mod p. `pow2(30, 4)` == `30^(2^4)` */\r\nexport function pow2(x: bigint, power: bigint, modulo: bigint): bigint {\r\n  let res = x;\r\n  while (power-- > _0n) {\r\n    res *= res;\r\n    res %= modulo;\r\n  }\r\n  return res;\r\n}\r\n\r\n/**\r\n * Inverses number over modulo.\r\n * Implemented using [Euclidean GCD](https://brilliant.org/wiki/extended-euclidean-algorithm/).\r\n */\r\nexport function invert(number: bigint, modulo: bigint): bigint {\r\n  if (number === _0n) throw new Error('invert: expected non-zero number');\r\n  if (modulo <= _0n) throw new Error('invert: expected positive modulus, got ' + modulo);\r\n  // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\r\n  let a = mod(number, modulo);\r\n  let b = modulo;\r\n  // prettier-ignore\r\n  let x = _0n, y = _1n, u = _1n, v = _0n;\r\n  while (a !== _0n) {\r\n    // JIT applies optimization if those two lines follow each other\r\n    const q = b / a;\r\n    const r = b % a;\r\n    const m = x - u * q;\r\n    const n = y - v * q;\r\n    // prettier-ignore\r\n    b = a, a = r, x = u, y = v, u = m, v = n;\r\n  }\r\n  const gcd = b;\r\n  if (gcd !== _1n) throw new Error('invert: does not exist');\r\n  return mod(x, modulo);\r\n}\r\n\r\nfunction assertIsSquare<T>(Fp: IField<T>, root: T, n: T): void {\r\n  if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\r\n}\r\n\r\n// Not all roots are possible! Example which will throw:\r\n// const NUM =\r\n// n = 72057594037927816n;\r\n// Fp = Field(BigInt('0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab'));\r\nfunction sqrt3mod4<T>(Fp: IField<T>, n: T) {\r\n  const p1div4 = (Fp.ORDER + _1n) / _4n;\r\n  const root = Fp.pow(n, p1div4);\r\n  assertIsSquare(Fp, root, n);\r\n  return root;\r\n}\r\n\r\nfunction sqrt5mod8<T>(Fp: IField<T>, n: T) {\r\n  const p5div8 = (Fp.ORDER - _5n) / _8n;\r\n  const n2 = Fp.mul(n, _2n);\r\n  const v = Fp.pow(n2, p5div8);\r\n  const nv = Fp.mul(n, v);\r\n  const i = Fp.mul(Fp.mul(nv, _2n), v);\r\n  const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\r\n  assertIsSquare(Fp, root, n);\r\n  return root;\r\n}\r\n\r\n// Based on RFC9380, Kong algorithm\r\n// prettier-ignore\r\nfunction sqrt9mod16(P: bigint): <T>(Fp: IField<T>, n: T) => T {\r\n  const Fp_ = Field(P);\r\n  const tn = tonelliShanks(P);\r\n  const c1 = tn(Fp_, Fp_.neg(Fp_.ONE));//  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\r\n  const c2 = tn(Fp_, c1);              //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\r\n  const c3 = tn(Fp_, Fp_.neg(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\r\n  const c4 = (P + _7n) / _16n;         //  4. c4 = (q + 7) / 16        # Integer arithmetic\r\n  return <T>(Fp: IField<T>, n: T) => {\r\n    let tv1 = Fp.pow(n, c4);           //  1. tv1 = x^c4\r\n    let tv2 = Fp.mul(tv1, c1);         //  2. tv2 = c1 * tv1\r\n    const tv3 = Fp.mul(tv1, c2);       //  3. tv3 = c2 * tv1\r\n    const tv4 = Fp.mul(tv1, c3);       //  4. tv4 = c3 * tv1\r\n    const e1 = Fp.eql(Fp.sqr(tv2), n); //  5.  e1 = (tv2^2) == x\r\n    const e2 = Fp.eql(Fp.sqr(tv3), n); //  6.  e2 = (tv3^2) == x\r\n    tv1 = Fp.cmov(tv1, tv2, e1);       //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\r\n    tv2 = Fp.cmov(tv4, tv3, e2);       //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\r\n    const e3 = Fp.eql(Fp.sqr(tv2), n); //  9.  e3 = (tv2^2) == x\r\n    const root = Fp.cmov(tv1, tv2, e3);// 10.  z = CMOV(tv1, tv2, e3)   # Select sqrt from tv1 & tv2\r\n    assertIsSquare(Fp, root, n);\r\n    return root;\r\n  };\r\n}\r\n\r\n/**\r\n * Tonelli-Shanks square root search algorithm.\r\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\r\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\r\n * @param P field order\r\n * @returns function that takes field Fp (created from P) and number n\r\n */\r\nexport function tonelliShanks(P: bigint): <T>(Fp: IField<T>, n: T) => T {\r\n  // Initialization (precomputation).\r\n  // Caching initialization could boost perf by 7%.\r\n  if (P < _3n) throw new Error('sqrt is not defined for small field');\r\n  // Factor P - 1 = Q * 2^S, where Q is odd\r\n  let Q = P - _1n;\r\n  let S = 0;\r\n  while (Q % _2n === _0n) {\r\n    Q /= _2n;\r\n    S++;\r\n  }\r\n\r\n  // Find the first quadratic non-residue Z >= 2\r\n  let Z = _2n;\r\n  const _Fp = Field(P);\r\n  while (FpLegendre(_Fp, Z) === 1) {\r\n    // Basic primality test for P. After x iterations, chance of\r\n    // not finding quadratic non-residue is 2^x, so 2^1000.\r\n    if (Z++ > 1000) throw new Error('Cannot find square root: probably non-prime P');\r\n  }\r\n  // Fast-path; usually done before Z, but we do \"primality test\".\r\n  if (S === 1) return sqrt3mod4;\r\n\r\n  // Slow-path\r\n  // TODO: test on Fp2 and others\r\n  let cc = _Fp.pow(Z, Q); // c = z^Q\r\n  const Q1div2 = (Q + _1n) / _2n;\r\n  return function tonelliSlow<T>(Fp: IField<T>, n: T): T {\r\n    if (Fp.is0(n)) return n;\r\n    // Check if n is a quadratic residue using Legendre symbol\r\n    if (FpLegendre(Fp, n) !== 1) throw new Error('Cannot find square root');\r\n\r\n    // Initialize variables for the main loop\r\n    let M = S;\r\n    let c = Fp.mul(Fp.ONE, cc); // c = z^Q, move cc from field _Fp into field Fp\r\n    let t = Fp.pow(n, Q); // t = n^Q, first guess at the fudge factor\r\n    let R = Fp.pow(n, Q1div2); // R = n^((Q+1)/2), first guess at the square root\r\n\r\n    // Main loop\r\n    // while t != 1\r\n    while (!Fp.eql(t, Fp.ONE)) {\r\n      if (Fp.is0(t)) return Fp.ZERO; // if t=0 return R=0\r\n      let i = 1;\r\n\r\n      // Find the smallest i >= 1 such that t^(2^i) ≡ 1 (mod P)\r\n      let t_tmp = Fp.sqr(t); // t^(2^1)\r\n      while (!Fp.eql(t_tmp, Fp.ONE)) {\r\n        i++;\r\n        t_tmp = Fp.sqr(t_tmp); // t^(2^2)...\r\n        if (i === M) throw new Error('Cannot find square root');\r\n      }\r\n\r\n      // Calculate the exponent for b: 2^(M - i - 1)\r\n      const exponent = _1n << BigInt(M - i - 1); // bigint is important\r\n      const b = Fp.pow(c, exponent); // b = 2^(M - i - 1)\r\n\r\n      // Update variables\r\n      M = i;\r\n      c = Fp.sqr(b); // c = b^2\r\n      t = Fp.mul(t, c); // t = (t * b^2)\r\n      R = Fp.mul(R, b); // R = R*b\r\n    }\r\n    return R;\r\n  };\r\n}\r\n\r\n/**\r\n * Square root for a finite field. Will try optimized versions first:\r\n *\r\n * 1. P ≡ 3 (mod 4)\r\n * 2. P ≡ 5 (mod 8)\r\n * 3. P ≡ 9 (mod 16)\r\n * 4. Tonelli-Shanks algorithm\r\n *\r\n * Different algorithms can give different roots, it is up to user to decide which one they want.\r\n * For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\r\n */\r\nexport function FpSqrt(P: bigint): <T>(Fp: IField<T>, n: T) => T {\r\n  // P ≡ 3 (mod 4) => √n = n^((P+1)/4)\r\n  if (P % _4n === _3n) return sqrt3mod4;\r\n  // P ≡ 5 (mod 8) => Atkin algorithm, page 10 of https://eprint.iacr.org/2012/685.pdf\r\n  if (P % _8n === _5n) return sqrt5mod8;\r\n  // P ≡ 9 (mod 16) => Kong algorithm, page 11 of https://eprint.iacr.org/2012/685.pdf (algorithm 4)\r\n  if (P % _16n === _9n) return sqrt9mod16(P);\r\n  // Tonelli-Shanks algorithm\r\n  return tonelliShanks(P);\r\n}\r\n\r\n// Little-endian check for first LE bit (last BE bit);\r\nexport const isNegativeLE = (num: bigint, modulo: bigint): boolean =>\r\n  (mod(num, modulo) & _1n) === _1n;\r\n\r\n/** Field is not always over prime: for example, Fp2 has ORDER(q)=p^m. */\r\nexport interface IField<T> {\r\n  ORDER: bigint;\r\n  isLE: boolean;\r\n  BYTES: number;\r\n  BITS: number;\r\n  MASK: bigint;\r\n  ZERO: T;\r\n  ONE: T;\r\n  // 1-arg\r\n  create: (num: T) => T;\r\n  isValid: (num: T) => boolean;\r\n  is0: (num: T) => boolean;\r\n  isValidNot0: (num: T) => boolean;\r\n  neg(num: T): T;\r\n  inv(num: T): T;\r\n  sqrt(num: T): T;\r\n  sqr(num: T): T;\r\n  // 2-args\r\n  eql(lhs: T, rhs: T): boolean;\r\n  add(lhs: T, rhs: T): T;\r\n  sub(lhs: T, rhs: T): T;\r\n  mul(lhs: T, rhs: T | bigint): T;\r\n  pow(lhs: T, power: bigint): T;\r\n  div(lhs: T, rhs: T | bigint): T;\r\n  // N for NonNormalized (for now)\r\n  addN(lhs: T, rhs: T): T;\r\n  subN(lhs: T, rhs: T): T;\r\n  mulN(lhs: T, rhs: T | bigint): T;\r\n  sqrN(num: T): T;\r\n\r\n  // Optional\r\n  // Should be same as sgn0 function in\r\n  // [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#section-4.1).\r\n  // NOTE: sgn0 is 'negative in LE', which is same as odd. And negative in LE is kinda strange definition anyway.\r\n  isOdd?(num: T): boolean; // Odd instead of even since we have it for Fp2\r\n  allowedLengths?: number[];\r\n  // legendre?(num: T): T;\r\n  invertBatch: (lst: T[]) => T[];\r\n  toBytes(num: T): Uint8Array;\r\n  fromBytes(bytes: Uint8Array, skipValidation?: boolean): T;\r\n  // If c is False, CMOV returns a, otherwise it returns b.\r\n  cmov(a: T, b: T, c: boolean): T;\r\n}\r\n// prettier-ignore\r\nconst FIELD_FIELDS = [\r\n  'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\r\n  'eql', 'add', 'sub', 'mul', 'pow', 'div',\r\n  'addN', 'subN', 'mulN', 'sqrN'\r\n] as const;\r\nexport function validateField<T>(field: IField<T>): IField<T> {\r\n  const initial = {\r\n    ORDER: 'bigint',\r\n    MASK: 'bigint',\r\n    BYTES: 'number',\r\n    BITS: 'number',\r\n  } as Record<string, string>;\r\n  const opts = FIELD_FIELDS.reduce((map, val: string) => {\r\n    map[val] = 'function';\r\n    return map;\r\n  }, initial);\r\n  _validateObject(field, opts);\r\n  // const max = 16384;\r\n  // if (field.BYTES < 1 || field.BYTES > max) throw new Error('invalid field');\r\n  // if (field.BITS < 1 || field.BITS > 8 * max) throw new Error('invalid field');\r\n  return field;\r\n}\r\n\r\n// Generic field functions\r\n\r\n/**\r\n * Same as `pow` but for Fp: non-constant-time.\r\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\r\n */\r\nexport function FpPow<T>(Fp: IField<T>, num: T, power: bigint): T {\r\n  if (power < _0n) throw new Error('invalid exponent, negatives unsupported');\r\n  if (power === _0n) return Fp.ONE;\r\n  if (power === _1n) return num;\r\n  let p = Fp.ONE;\r\n  let d = num;\r\n  while (power > _0n) {\r\n    if (power & _1n) p = Fp.mul(p, d);\r\n    d = Fp.sqr(d);\r\n    power >>= _1n;\r\n  }\r\n  return p;\r\n}\r\n\r\n/**\r\n * Efficiently invert an array of Field elements.\r\n * Exception-free. Will return `undefined` for 0 elements.\r\n * @param passZero map 0 to 0 (instead of undefined)\r\n */\r\nexport function FpInvertBatch<T>(Fp: IField<T>, nums: T[], passZero = false): T[] {\r\n  const inverted = new Array(nums.length).fill(passZero ? Fp.ZERO : undefined);\r\n  // Walk from first to last, multiply them by each other MOD p\r\n  const multipliedAcc = nums.reduce((acc, num, i) => {\r\n    if (Fp.is0(num)) return acc;\r\n    inverted[i] = acc;\r\n    return Fp.mul(acc, num);\r\n  }, Fp.ONE);\r\n  // Invert last element\r\n  const invertedAcc = Fp.inv(multipliedAcc);\r\n  // Walk from last to first, multiply them by inverted each other MOD p\r\n  nums.reduceRight((acc, num, i) => {\r\n    if (Fp.is0(num)) return acc;\r\n    inverted[i] = Fp.mul(acc, inverted[i]);\r\n    return Fp.mul(acc, num);\r\n  }, invertedAcc);\r\n  return inverted;\r\n}\r\n\r\n// TODO: remove\r\nexport function FpDiv<T>(Fp: IField<T>, lhs: T, rhs: T | bigint): T {\r\n  return Fp.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, Fp.ORDER) : Fp.inv(rhs));\r\n}\r\n\r\n/**\r\n * Legendre symbol.\r\n * Legendre constant is used to calculate Legendre symbol (a | p)\r\n * which denotes the value of a^((p-1)/2) (mod p).\r\n *\r\n * * (a | p) ≡ 1    if a is a square (mod p), quadratic residue\r\n * * (a | p) ≡ -1   if a is not a square (mod p), quadratic non residue\r\n * * (a | p) ≡ 0    if a ≡ 0 (mod p)\r\n */\r\nexport function FpLegendre<T>(Fp: IField<T>, n: T): -1 | 0 | 1 {\r\n  // We can use 3rd argument as optional cache of this value\r\n  // but seems unneeded for now. The operation is very fast.\r\n  const p1mod2 = (Fp.ORDER - _1n) / _2n;\r\n  const powered = Fp.pow(n, p1mod2);\r\n  const yes = Fp.eql(powered, Fp.ONE);\r\n  const zero = Fp.eql(powered, Fp.ZERO);\r\n  const no = Fp.eql(powered, Fp.neg(Fp.ONE));\r\n  if (!yes && !zero && !no) throw new Error('invalid Legendre symbol result');\r\n  return yes ? 1 : zero ? 0 : -1;\r\n}\r\n\r\n// This function returns True whenever the value x is a square in the field F.\r\nexport function FpIsSquare<T>(Fp: IField<T>, n: T): boolean {\r\n  const l = FpLegendre(Fp, n);\r\n  return l === 1;\r\n}\r\n\r\nexport type NLength = { nByteLength: number; nBitLength: number };\r\n// CURVE.n lengths\r\nexport function nLength(n: bigint, nBitLength?: number): NLength {\r\n  // Bit size, byte size of CURVE.n\r\n  if (nBitLength !== undefined) anumber(nBitLength);\r\n  const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\r\n  const nByteLength = Math.ceil(_nBitLength / 8);\r\n  return { nBitLength: _nBitLength, nByteLength };\r\n}\r\n\r\ntype FpField = IField<bigint> & Required<Pick<IField<bigint>, 'isOdd'>>;\r\ntype SqrtFn = (n: bigint) => bigint;\r\ntype FieldOpts = Partial<{\r\n  sqrt: SqrtFn;\r\n  isLE: boolean;\r\n  BITS: number;\r\n  modOnDecode: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\r\n  allowedLengths?: readonly number[]; // for P521 (adds padding for smaller sizes)\r\n}>;\r\n/**\r\n * Creates a finite field. Major performance optimizations:\r\n * * 1. Denormalized operations like mulN instead of mul.\r\n * * 2. Identical object shape: never add or remove keys.\r\n * * 3. `Object.freeze`.\r\n * Fragile: always run a benchmark on a change.\r\n * Security note: operations don't check 'isValid' for all elements for performance reasons,\r\n * it is caller responsibility to check this.\r\n * This is low-level code, please make sure you know what you're doing.\r\n *\r\n * Note about field properties:\r\n * * CHARACTERISTIC p = prime number, number of elements in main subgroup.\r\n * * ORDER q = similar to cofactor in curves, may be composite `q = p^m`.\r\n *\r\n * @param ORDER field order, probably prime, or could be composite\r\n * @param bitLen how many bits the field consumes\r\n * @param isLE (default: false) if encoding / decoding should be in little-endian\r\n * @param redef optional faster redefinitions of sqrt and other methods\r\n */\r\nexport function Field(\r\n  ORDER: bigint,\r\n  bitLenOrOpts?: number | FieldOpts, // TODO: use opts only in v2?\r\n  isLE = false,\r\n  opts: { sqrt?: SqrtFn } = {}\r\n): Readonly<FpField> {\r\n  if (ORDER <= _0n) throw new Error('invalid field: expected ORDER > 0, got ' + ORDER);\r\n  let _nbitLength: number | undefined = undefined;\r\n  let _sqrt: SqrtFn | undefined = undefined;\r\n  let modOnDecode: boolean = false;\r\n  let allowedLengths: undefined | readonly number[] = undefined;\r\n  if (typeof bitLenOrOpts === 'object' && bitLenOrOpts != null) {\r\n    if (opts.sqrt || isLE) throw new Error('cannot specify opts in two arguments');\r\n    const _opts = bitLenOrOpts;\r\n    if (_opts.BITS) _nbitLength = _opts.BITS;\r\n    if (_opts.sqrt) _sqrt = _opts.sqrt;\r\n    if (typeof _opts.isLE === 'boolean') isLE = _opts.isLE;\r\n    if (typeof _opts.modOnDecode === 'boolean') modOnDecode = _opts.modOnDecode;\r\n    allowedLengths = _opts.allowedLengths;\r\n  } else {\r\n    if (typeof bitLenOrOpts === 'number') _nbitLength = bitLenOrOpts;\r\n    if (opts.sqrt) _sqrt = opts.sqrt;\r\n  }\r\n  const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, _nbitLength);\r\n  if (BYTES > 2048) throw new Error('invalid field: expected ORDER of <= 2048 bytes');\r\n  let sqrtP: ReturnType<typeof FpSqrt>; // cached sqrtP\r\n  const f: Readonly<FpField> = Object.freeze({\r\n    ORDER,\r\n    isLE,\r\n    BITS,\r\n    BYTES,\r\n    MASK: bitMask(BITS),\r\n    ZERO: _0n,\r\n    ONE: _1n,\r\n    allowedLengths: allowedLengths,\r\n    create: (num) => mod(num, ORDER),\r\n    isValid: (num) => {\r\n      if (typeof num !== 'bigint')\r\n        throw new Error('invalid field element: expected bigint, got ' + typeof num);\r\n      return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\r\n    },\r\n    is0: (num) => num === _0n,\r\n    // is valid and invertible\r\n    isValidNot0: (num: bigint) => !f.is0(num) && f.isValid(num),\r\n    isOdd: (num) => (num & _1n) === _1n,\r\n    neg: (num) => mod(-num, ORDER),\r\n    eql: (lhs, rhs) => lhs === rhs,\r\n\r\n    sqr: (num) => mod(num * num, ORDER),\r\n    add: (lhs, rhs) => mod(lhs + rhs, ORDER),\r\n    sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\r\n    mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\r\n    pow: (num, power) => FpPow(f, num, power),\r\n    div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\r\n\r\n    // Same as above, but doesn't normalize\r\n    sqrN: (num) => num * num,\r\n    addN: (lhs, rhs) => lhs + rhs,\r\n    subN: (lhs, rhs) => lhs - rhs,\r\n    mulN: (lhs, rhs) => lhs * rhs,\r\n\r\n    inv: (num) => invert(num, ORDER),\r\n    sqrt:\r\n      _sqrt ||\r\n      ((n) => {\r\n        if (!sqrtP) sqrtP = FpSqrt(ORDER);\r\n        return sqrtP(f, n);\r\n      }),\r\n    toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\r\n    fromBytes: (bytes, skipValidation = true) => {\r\n      if (allowedLengths) {\r\n        if (!allowedLengths.includes(bytes.length) || bytes.length > BYTES) {\r\n          throw new Error(\r\n            'Field.fromBytes: expected ' + allowedLengths + ' bytes, got ' + bytes.length\r\n          );\r\n        }\r\n        const padded = new Uint8Array(BYTES);\r\n        // isLE add 0 to right, !isLE to the left.\r\n        padded.set(bytes, isLE ? 0 : padded.length - bytes.length);\r\n        bytes = padded;\r\n      }\r\n      if (bytes.length !== BYTES)\r\n        throw new Error('Field.fromBytes: expected ' + BYTES + ' bytes, got ' + bytes.length);\r\n      let scalar = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\r\n      if (modOnDecode) scalar = mod(scalar, ORDER);\r\n      if (!skipValidation)\r\n        if (!f.isValid(scalar)) throw new Error('invalid field element: outside of range 0..ORDER');\r\n      // NOTE: we don't validate scalar here, please use isValid. This done such way because some\r\n      // protocol may allow non-reduced scalar that reduced later or changed some other way.\r\n      return scalar;\r\n    },\r\n    // TODO: we don't need it here, move out to separate fn\r\n    invertBatch: (lst) => FpInvertBatch(f, lst),\r\n    // We can't move this out because Fp6, Fp12 implement it\r\n    // and it's unclear what to return in there.\r\n    cmov: (a, b, c) => (c ? b : a),\r\n  } as FpField);\r\n  return Object.freeze(f);\r\n}\r\n\r\n// Generic random scalar, we can do same for other fields if via Fp2.mul(Fp2.ONE, Fp2.random)?\r\n// This allows unsafe methods like ignore bias or zero. These unsafe, but often used in different protocols (if deterministic RNG).\r\n// which mean we cannot force this via opts.\r\n// Not sure what to do with randomBytes, we can accept it inside opts if wanted.\r\n// Probably need to export getMinHashLength somewhere?\r\n// random(bytes?: Uint8Array, unsafeAllowZero = false, unsafeAllowBias = false) {\r\n//   const LEN = !unsafeAllowBias ? getMinHashLength(ORDER) : BYTES;\r\n//   if (bytes === undefined) bytes = randomBytes(LEN); // _opts.randomBytes?\r\n//   const num = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\r\n//   // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\r\n//   const reduced = unsafeAllowZero ? mod(num, ORDER) : mod(num, ORDER - _1n) + _1n;\r\n//   return reduced;\r\n// },\r\n\r\nexport function FpSqrtOdd<T>(Fp: IField<T>, elm: T): T {\r\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\r\n  const root = Fp.sqrt(elm);\r\n  return Fp.isOdd(root) ? root : Fp.neg(root);\r\n}\r\n\r\nexport function FpSqrtEven<T>(Fp: IField<T>, elm: T): T {\r\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\r\n  const root = Fp.sqrt(elm);\r\n  return Fp.isOdd(root) ? Fp.neg(root) : root;\r\n}\r\n\r\n/**\r\n * \"Constant-time\" private key generation utility.\r\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\r\n * Which makes it slightly more biased, less secure.\r\n * @deprecated use `mapKeyToField` instead\r\n */\r\nexport function hashToPrivateScalar(\r\n  hash: string | Uint8Array,\r\n  groupOrder: bigint,\r\n  isLE = false\r\n): bigint {\r\n  hash = ensureBytes('privateHash', hash);\r\n  const hashLen = hash.length;\r\n  const minLen = nLength(groupOrder).nByteLength + 8;\r\n  if (minLen < 24 || hashLen < minLen || hashLen > 1024)\r\n    throw new Error(\r\n      'hashToPrivateScalar: expected ' + minLen + '-1024 bytes of input, got ' + hashLen\r\n    );\r\n  const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\r\n  return mod(num, groupOrder - _1n) + _1n;\r\n}\r\n\r\n/**\r\n * Returns total number of bytes consumed by the field element.\r\n * For example, 32 bytes for usual 256-bit weierstrass curve.\r\n * @param fieldOrder number of field elements, usually CURVE.n\r\n * @returns byte length of field\r\n */\r\nexport function getFieldBytesLength(fieldOrder: bigint): number {\r\n  if (typeof fieldOrder !== 'bigint') throw new Error('field order must be bigint');\r\n  const bitLength = fieldOrder.toString(2).length;\r\n  return Math.ceil(bitLength / 8);\r\n}\r\n\r\n/**\r\n * Returns minimal amount of bytes that can be safely reduced\r\n * by field order.\r\n * Should be 2^-128 for 128-bit curve such as P256.\r\n * @param fieldOrder number of field elements, usually CURVE.n\r\n * @returns byte length of target hash\r\n */\r\nexport function getMinHashLength(fieldOrder: bigint): number {\r\n  const length = getFieldBytesLength(fieldOrder);\r\n  return length + Math.ceil(length / 2);\r\n}\r\n\r\n/**\r\n * \"Constant-time\" private key generation utility.\r\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\r\n * and convert them into private scalar, with the modulo bias being negligible.\r\n * Needs at least 48 bytes of input for 32-byte private key.\r\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\r\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\r\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\r\n * @param hash hash output from SHA3 or a similar function\r\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\r\n * @param isLE interpret hash bytes as LE num\r\n * @returns valid private scalar\r\n */\r\nexport function mapHashToField(key: Uint8Array, fieldOrder: bigint, isLE = false): Uint8Array {\r\n  const len = key.length;\r\n  const fieldLen = getFieldBytesLength(fieldOrder);\r\n  const minLen = getMinHashLength(fieldOrder);\r\n  // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\r\n  if (len < 16 || len < minLen || len > 1024)\r\n    throw new Error('expected ' + minLen + '-1024 bytes of input, got ' + len);\r\n  const num = isLE ? bytesToNumberLE(key) : bytesToNumberBE(key);\r\n  // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\r\n  const reduced = mod(num, fieldOrder - _1n) + _1n;\r\n  return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\r\n}\r\n", "/**\r\n * Methods for elliptic curve multiplication by scalars.\r\n * Contains wNAF, pippenger.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { bitLen, bitMask, validateObject, type Hex } from '../utils.ts';\r\nimport { Field, FpInvertBatch, nLength, validateField, type IField } from './modular.ts';\r\n\r\nconst _0n = BigInt(0);\r\nconst _1n = BigInt(1);\r\n\r\nexport type AffinePoint<T> = {\r\n  x: T;\r\n  y: T;\r\n} & { z?: never; t?: never };\r\n\r\n// This was initialy do this way to re-use montgomery ladder in field (add->mul,double->sqr), but\r\n// that didn't happen and there is probably not much reason to have separate Group like this?\r\nexport interface Group<T extends Group<T>> {\r\n  double(): T;\r\n  negate(): T;\r\n  add(other: T): T;\r\n  subtract(other: T): T;\r\n  equals(other: T): boolean;\r\n  multiply(scalar: bigint): T;\r\n  toAffine?(invertedZ?: any): AffinePoint<any>;\r\n}\r\n\r\n// We can't \"abstract out\" coordinates (X, Y, Z; and T in Edwards): argument names of constructor\r\n// are not accessible. See Typescript gh-56093, gh-41594.\r\n\r\n/** Base interface for all elliptic curve Points. */\r\nexport interface CurvePoint<F, P extends CurvePoint<F, P>> extends Group<P> {\r\n  /** Affine x coordinate. Different from projective / extended X coordinate. */\r\n  x: F;\r\n  /** Affine y coordinate. Different from projective / extended Y coordinate. */\r\n  y: F;\r\n  Z?: F;\r\n  assertValidity(): void;\r\n  clearCofactor(): P;\r\n  is0(): boolean;\r\n  isTorsionFree(): boolean;\r\n  isSmallOrder(): boolean;\r\n  multiplyUnsafe(scalar: bigint): P;\r\n  /**\r\n   * Massively speeds up `p.multiply(n)` by using precompute tables (caching). See {@link wNAF}.\r\n   * @param isLazy calculate cache now. Default (true) ensures it's deferred to first `multiply()`\r\n   */\r\n  precompute(windowSize?: number, isLazy?: boolean): P;\r\n  /** Converts point to 2D xy affine coordinates */\r\n  toAffine(invertedZ?: F): AffinePoint<F>;\r\n  toBytes(): Uint8Array;\r\n  toHex(): string;\r\n}\r\n\r\n/** Base interface for all elliptic curve Point constructors. */\r\nexport interface CurvePointCons<F, P extends CurvePoint<F, P>> extends GroupConstructor<P> {\r\n  BASE: P;\r\n  ZERO: P;\r\n  /** Field for basic curve math */\r\n  Fp: IField<F>;\r\n  /** Scalar field, for scalars in multiply and others */\r\n  Fn: IField<bigint>;\r\n  /** Creates point from x, y. Does NOT validate if the point is valid. Use `.assertValidity()`. */\r\n  fromAffine(p: AffinePoint<F>): P;\r\n  fromBytes(bytes: Uint8Array): P;\r\n  fromHex(hex: Hex): P;\r\n}\r\n\r\n// Type inference helpers\r\n// PC - PointConstructor, P - Point, Fp - Field element\r\nexport type GetPointConsF<PC> = PC extends CurvePointCons<infer F, any> ? F : never;\r\nexport type GetPointConsPoint<PC> = PC extends CurvePointCons<any, infer P> ? P : never;\r\n\r\n// More like SigAlgorithmInfo, not CurveInfo\r\nexport interface CurveInfo {\r\n  type: 'weierstrass' | 'edwards' | 'montgomery';\r\n  publicKeyHasPrefix?: boolean;\r\n  lengths: {\r\n    secret: number;\r\n    public: number;\r\n    publicUncompressed?: number;\r\n    signature: number;\r\n    seed: number;\r\n  };\r\n}\r\nexport type GroupConstructor<T> = {\r\n  BASE: T;\r\n  ZERO: T;\r\n};\r\n/** @deprecated */\r\nexport type ExtendedGroupConstructor<T> = GroupConstructor<T> & {\r\n  Fp: IField<any>;\r\n  Fn: IField<bigint>;\r\n  fromAffine(ap: AffinePoint<any>): T;\r\n};\r\nexport type Mapper<T> = (i: T[]) => T[];\r\n\r\nexport function negateCt<T extends { negate: () => T }>(condition: boolean, item: T): T {\r\n  const neg = item.negate();\r\n  return condition ? neg : item;\r\n}\r\n\r\n/**\r\n * Takes a bunch of Projective Points but executes only one\r\n * inversion on all of them. Inversion is very slow operation,\r\n * so this improves performance massively.\r\n * Optimization: converts a list of projective points to a list of identical points with Z=1.\r\n */\r\nexport function normalizeZ<\r\n  PC extends CurvePointCons<any, any>,\r\n  F = GetPointConsF<PC>,\r\n  P extends CurvePoint<F, P> = GetPointConsPoint<PC>,\r\n>(c: CurvePointCons<F, P>, points: P[]): P[] {\r\n  const invertedZs = FpInvertBatch(\r\n    c.Fp,\r\n    points.map((p) => p.Z!)\r\n  );\r\n  return points.map((p, i) => c.fromAffine(p.toAffine(invertedZs[i])));\r\n}\r\n\r\nfunction validateW(W: number, bits: number) {\r\n  if (!Number.isSafeInteger(W) || W <= 0 || W > bits)\r\n    throw new Error('invalid window size, expected [1..' + bits + '], got W=' + W);\r\n}\r\n\r\n/** Internal wNAF opts for specific W and scalarBits */\r\nexport type WOpts = {\r\n  windows: number;\r\n  windowSize: number;\r\n  mask: bigint;\r\n  maxNumber: number;\r\n  shiftBy: bigint;\r\n};\r\n\r\nfunction calcWOpts(W: number, scalarBits: number): WOpts {\r\n  validateW(W, scalarBits);\r\n  const windows = Math.ceil(scalarBits / W) + 1; // W=8 33. Not 32, because we skip zero\r\n  const windowSize = 2 ** (W - 1); // W=8 128. Not 256, because we skip zero\r\n  const maxNumber = 2 ** W; // W=8 256\r\n  const mask = bitMask(W); // W=8 255 == mask 0b11111111\r\n  const shiftBy = BigInt(W); // W=8 8\r\n  return { windows, windowSize, mask, maxNumber, shiftBy };\r\n}\r\n\r\nfunction calcOffsets(n: bigint, window: number, wOpts: WOpts) {\r\n  const { windowSize, mask, maxNumber, shiftBy } = wOpts;\r\n  let wbits = Number(n & mask); // extract W bits.\r\n  let nextN = n >> shiftBy; // shift number by W bits.\r\n\r\n  // What actually happens here:\r\n  // const highestBit = Number(mask ^ (mask >> 1n));\r\n  // let wbits2 = wbits - 1; // skip zero\r\n  // if (wbits2 & highestBit) { wbits2 ^= Number(mask); // (~);\r\n\r\n  // split if bits > max: +224 => 256-32\r\n  if (wbits > windowSize) {\r\n    // we skip zero, which means instead of `>= size-1`, we do `> size`\r\n    wbits -= maxNumber; // -32, can be maxNumber - wbits, but then we need to set isNeg here.\r\n    nextN += _1n; // +256 (carry)\r\n  }\r\n  const offsetStart = window * windowSize;\r\n  const offset = offsetStart + Math.abs(wbits) - 1; // -1 because we skip zero\r\n  const isZero = wbits === 0; // is current window slice a 0?\r\n  const isNeg = wbits < 0; // is current window slice negative?\r\n  const isNegF = window % 2 !== 0; // fake random statement for noise\r\n  const offsetF = offsetStart; // fake offset for noise\r\n  return { nextN, offset, isZero, isNeg, isNegF, offsetF };\r\n}\r\n\r\nfunction validateMSMPoints(points: any[], c: any) {\r\n  if (!Array.isArray(points)) throw new Error('array expected');\r\n  points.forEach((p, i) => {\r\n    if (!(p instanceof c)) throw new Error('invalid point at index ' + i);\r\n  });\r\n}\r\nfunction validateMSMScalars(scalars: any[], field: any) {\r\n  if (!Array.isArray(scalars)) throw new Error('array of scalars expected');\r\n  scalars.forEach((s, i) => {\r\n    if (!field.isValid(s)) throw new Error('invalid scalar at index ' + i);\r\n  });\r\n}\r\n\r\n// Since points in different groups cannot be equal (different object constructor),\r\n// we can have single place to store precomputes.\r\n// Allows to make points frozen / immutable.\r\nconst pointPrecomputes = new WeakMap<any, any[]>();\r\nconst pointWindowSizes = new WeakMap<any, number>();\r\n\r\nfunction getW(P: any): number {\r\n  // To disable precomputes:\r\n  // return 1;\r\n  return pointWindowSizes.get(P) || 1;\r\n}\r\n\r\nfunction assert0(n: bigint): void {\r\n  if (n !== _0n) throw new Error('invalid wNAF');\r\n}\r\n\r\n/**\r\n * Elliptic curve multiplication of Point by scalar. Fragile.\r\n * Table generation takes **30MB of ram and 10ms on high-end CPU**,\r\n * but may take much longer on slow devices. Actual generation will happen on\r\n * first call of `multiply()`. By default, `BASE` point is precomputed.\r\n *\r\n * Scalars should always be less than curve order: this should be checked inside of a curve itself.\r\n * Creates precomputation tables for fast multiplication:\r\n * - private scalar is split by fixed size windows of W bits\r\n * - every window point is collected from window's table & added to accumulator\r\n * - since windows are different, same point inside tables won't be accessed more than once per calc\r\n * - each multiplication is 'Math.ceil(CURVE_ORDER / 𝑊) + 1' point additions (fixed for any scalar)\r\n * - +1 window is neccessary for wNAF\r\n * - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\r\n *\r\n * @todo Research returning 2d JS array of windows, instead of a single window.\r\n * This would allow windows to be in different memory locations\r\n */\r\nexport class wNAF<F, P extends CurvePoint<F, P>> {\r\n  private readonly BASE: P;\r\n  private readonly ZERO: P;\r\n  private readonly Fn: CurvePointCons<F, P>['Fn'];\r\n  readonly bits: number;\r\n\r\n  // Parametrized with a given Point class (not individual point)\r\n  constructor(Point: CurvePointCons<F, P>, bits: number) {\r\n    this.BASE = Point.BASE;\r\n    this.ZERO = Point.ZERO;\r\n    this.Fn = Point.Fn;\r\n    this.bits = bits;\r\n  }\r\n\r\n  // non-const time multiplication ladder\r\n  _unsafeLadder(elm: P, n: bigint, p: P = this.ZERO): P {\r\n    let d: P = elm;\r\n    while (n > _0n) {\r\n      if (n & _1n) p = p.add(d);\r\n      d = d.double();\r\n      n >>= _1n;\r\n    }\r\n    return p;\r\n  }\r\n\r\n  /**\r\n   * Creates a wNAF precomputation window. Used for caching.\r\n   * Default window size is set by `utils.precompute()` and is equal to 8.\r\n   * Number of precomputed points depends on the curve size:\r\n   * 2^(𝑊−1) * (Math.ceil(𝑛 / 𝑊) + 1), where:\r\n   * - 𝑊 is the window size\r\n   * - 𝑛 is the bitlength of the curve order.\r\n   * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\r\n   * @param point Point instance\r\n   * @param W window size\r\n   * @returns precomputed point tables flattened to a single array\r\n   */\r\n  private precomputeWindow(point: P, W: number): Group<P>[] {\r\n    const { windows, windowSize } = calcWOpts(W, this.bits);\r\n    const points: P[] = [];\r\n    let p: P = point;\r\n    let base = p;\r\n    for (let window = 0; window < windows; window++) {\r\n      base = p;\r\n      points.push(base);\r\n      // i=1, bc we skip 0\r\n      for (let i = 1; i < windowSize; i++) {\r\n        base = base.add(p);\r\n        points.push(base);\r\n      }\r\n      p = base.double();\r\n    }\r\n    return points;\r\n  }\r\n\r\n  /**\r\n   * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\r\n   * More compact implementation:\r\n   * https://github.com/paulmillr/noble-secp256k1/blob/47cb1669b6e506ad66b35fe7d76132ae97465da2/index.ts#L502-L541\r\n   * @returns real and fake (for const-time) points\r\n   */\r\n  private wNAF(W: number, precomputes: P[], n: bigint): { p: P; f: P } {\r\n    // Scalar should be smaller than field order\r\n    if (!this.Fn.isValid(n)) throw new Error('invalid scalar');\r\n    // Accumulators\r\n    let p = this.ZERO;\r\n    let f = this.BASE;\r\n    // This code was first written with assumption that 'f' and 'p' will never be infinity point:\r\n    // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\r\n    // there is negate now: it is possible that negated element from low value\r\n    // would be the same as high element, which will create carry into next window.\r\n    // It's not obvious how this can fail, but still worth investigating later.\r\n    const wo = calcWOpts(W, this.bits);\r\n    for (let window = 0; window < wo.windows; window++) {\r\n      // (n === _0n) is handled and not early-exited. isEven and offsetF are used for noise\r\n      const { nextN, offset, isZero, isNeg, isNegF, offsetF } = calcOffsets(n, window, wo);\r\n      n = nextN;\r\n      if (isZero) {\r\n        // bits are 0: add garbage to fake point\r\n        // Important part for const-time getPublicKey: add random \"noise\" point to f.\r\n        f = f.add(negateCt(isNegF, precomputes[offsetF]));\r\n      } else {\r\n        // bits are 1: add to result point\r\n        p = p.add(negateCt(isNeg, precomputes[offset]));\r\n      }\r\n    }\r\n    assert0(n);\r\n    // Return both real and fake points: JIT won't eliminate f.\r\n    // At this point there is a way to F be infinity-point even if p is not,\r\n    // which makes it less const-time: around 1 bigint multiply.\r\n    return { p, f };\r\n  }\r\n\r\n  /**\r\n   * Implements ec unsafe (non const-time) multiplication using precomputed tables and w-ary non-adjacent form.\r\n   * @param acc accumulator point to add result of multiplication\r\n   * @returns point\r\n   */\r\n  private wNAFUnsafe(W: number, precomputes: P[], n: bigint, acc: P = this.ZERO): P {\r\n    const wo = calcWOpts(W, this.bits);\r\n    for (let window = 0; window < wo.windows; window++) {\r\n      if (n === _0n) break; // Early-exit, skip 0 value\r\n      const { nextN, offset, isZero, isNeg } = calcOffsets(n, window, wo);\r\n      n = nextN;\r\n      if (isZero) {\r\n        // Window bits are 0: skip processing.\r\n        // Move to next window.\r\n        continue;\r\n      } else {\r\n        const item = precomputes[offset];\r\n        acc = acc.add(isNeg ? item.negate() : item); // Re-using acc allows to save adds in MSM\r\n      }\r\n    }\r\n    assert0(n);\r\n    return acc;\r\n  }\r\n\r\n  private getPrecomputes(W: number, point: P, transform?: Mapper<P>): P[] {\r\n    // Calculate precomputes on a first run, reuse them after\r\n    let comp = pointPrecomputes.get(point);\r\n    if (!comp) {\r\n      comp = this.precomputeWindow(point, W) as P[];\r\n      if (W !== 1) {\r\n        // Doing transform outside of if brings 15% perf hit\r\n        if (typeof transform === 'function') comp = transform(comp);\r\n        pointPrecomputes.set(point, comp);\r\n      }\r\n    }\r\n    return comp;\r\n  }\r\n\r\n  cached(point: P, scalar: bigint, transform?: Mapper<P>): { p: P; f: P } {\r\n    const W = getW(point);\r\n    return this.wNAF(W, this.getPrecomputes(W, point, transform), scalar);\r\n  }\r\n\r\n  unsafe(point: P, scalar: bigint, transform?: Mapper<P>, prev?: P): P {\r\n    const W = getW(point);\r\n    if (W === 1) return this._unsafeLadder(point, scalar, prev); // For W=1 ladder is ~x2 faster\r\n    return this.wNAFUnsafe(W, this.getPrecomputes(W, point, transform), scalar, prev);\r\n  }\r\n\r\n  // We calculate precomputes for elliptic curve point multiplication\r\n  // using windowed method. This specifies window size and\r\n  // stores precomputed values. Usually only base point would be precomputed.\r\n  createCache(P: P, W: number): void {\r\n    validateW(W, this.bits);\r\n    pointWindowSizes.set(P, W);\r\n    pointPrecomputes.delete(P);\r\n  }\r\n\r\n  hasCache(elm: P): boolean {\r\n    return getW(elm) !== 1;\r\n  }\r\n}\r\n\r\n/**\r\n * Endomorphism-specific multiplication for Koblitz curves.\r\n * Cost: 128 dbl, 0-256 adds.\r\n */\r\nexport function mulEndoUnsafe<T extends Group<T>>(\r\n  Point: GroupConstructor<T>,\r\n  point: T,\r\n  k1: bigint,\r\n  k2: bigint\r\n): { p1: T; p2: T } {\r\n  let acc = point;\r\n  let p1 = Point.ZERO;\r\n  let p2 = Point.ZERO;\r\n  while (k1 > _0n || k2 > _0n) {\r\n    if (k1 & _1n) p1 = p1.add(acc);\r\n    if (k2 & _1n) p2 = p2.add(acc);\r\n    acc = acc.double();\r\n    k1 >>= _1n;\r\n    k2 >>= _1n;\r\n  }\r\n  return { p1, p2 };\r\n}\r\n\r\n/**\r\n * Pippenger algorithm for multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\r\n * 30x faster vs naive addition on L=4096, 10x faster than precomputes.\r\n * For N=254bit, L=1, it does: 1024 ADD + 254 DBL. For L=5: 1536 ADD + 254 DBL.\r\n * Algorithmically constant-time (for same L), even when 1 point + scalar, or when scalar = 0.\r\n * @param c Curve Point constructor\r\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\r\n * @param points array of L curve points\r\n * @param scalars array of L scalars (aka secret keys / bigints)\r\n */\r\nexport function pippenger<T extends Group<T>>(\r\n  c: GroupConstructor<T>,\r\n  fieldN: IField<bigint>,\r\n  points: T[],\r\n  scalars: bigint[]\r\n): T {\r\n  // If we split scalars by some window (let's say 8 bits), every chunk will only\r\n  // take 256 buckets even if there are 4096 scalars, also re-uses double.\r\n  // TODO:\r\n  // - https://eprint.iacr.org/2024/750.pdf\r\n  // - https://tches.iacr.org/index.php/TCHES/article/view/10287\r\n  // 0 is accepted in scalars\r\n  validateMSMPoints(points, c);\r\n  validateMSMScalars(scalars, fieldN);\r\n  const plength = points.length;\r\n  const slength = scalars.length;\r\n  if (plength !== slength) throw new Error('arrays of points and scalars must have equal length');\r\n  // if (plength === 0) throw new Error('array must be of length >= 2');\r\n  const zero = c.ZERO;\r\n  const wbits = bitLen(BigInt(plength));\r\n  let windowSize = 1; // bits\r\n  if (wbits > 12) windowSize = wbits - 3;\r\n  else if (wbits > 4) windowSize = wbits - 2;\r\n  else if (wbits > 0) windowSize = 2;\r\n  const MASK = bitMask(windowSize);\r\n  const buckets = new Array(Number(MASK) + 1).fill(zero); // +1 for zero array\r\n  const lastBits = Math.floor((fieldN.BITS - 1) / windowSize) * windowSize;\r\n  let sum = zero;\r\n  for (let i = lastBits; i >= 0; i -= windowSize) {\r\n    buckets.fill(zero);\r\n    for (let j = 0; j < slength; j++) {\r\n      const scalar = scalars[j];\r\n      const wbits = Number((scalar >> BigInt(i)) & MASK);\r\n      buckets[wbits] = buckets[wbits].add(points[j]);\r\n    }\r\n    let resI = zero; // not using this will do small speed-up, but will lose ct\r\n    // Skip first bucket, because it is zero\r\n    for (let j = buckets.length - 1, sumI = zero; j > 0; j--) {\r\n      sumI = sumI.add(buckets[j]);\r\n      resI = resI.add(sumI);\r\n    }\r\n    sum = sum.add(resI);\r\n    if (i !== 0) for (let j = 0; j < windowSize; j++) sum = sum.double();\r\n  }\r\n  return sum as T;\r\n}\r\n/**\r\n * Precomputed multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\r\n * @param c Curve Point constructor\r\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\r\n * @param points array of L curve points\r\n * @returns function which multiplies points with scaars\r\n */\r\nexport function precomputeMSMUnsafe<T extends Group<T>>(\r\n  c: GroupConstructor<T>,\r\n  fieldN: IField<bigint>,\r\n  points: T[],\r\n  windowSize: number\r\n): (scalars: bigint[]) => T {\r\n  /**\r\n   * Performance Analysis of Window-based Precomputation\r\n   *\r\n   * Base Case (256-bit scalar, 8-bit window):\r\n   * - Standard precomputation requires:\r\n   *   - 31 additions per scalar × 256 scalars = 7,936 ops\r\n   *   - Plus 255 summary additions = 8,191 total ops\r\n   *   Note: Summary additions can be optimized via accumulator\r\n   *\r\n   * Chunked Precomputation Analysis:\r\n   * - Using 32 chunks requires:\r\n   *   - 255 additions per chunk\r\n   *   - 256 doublings\r\n   *   - Total: (255 × 32) + 256 = 8,416 ops\r\n   *\r\n   * Memory Usage Comparison:\r\n   * Window Size | Standard Points | Chunked Points\r\n   * ------------|-----------------|---------------\r\n   *     4-bit   |     520         |      15\r\n   *     8-bit   |    4,224        |     255\r\n   *    10-bit   |   13,824        |   1,023\r\n   *    16-bit   |  557,056        |  65,535\r\n   *\r\n   * Key Advantages:\r\n   * 1. Enables larger window sizes due to reduced memory overhead\r\n   * 2. More efficient for smaller scalar counts:\r\n   *    - 16 chunks: (16 × 255) + 256 = 4,336 ops\r\n   *    - ~2x faster than standard 8,191 ops\r\n   *\r\n   * Limitations:\r\n   * - Not suitable for plain precomputes (requires 256 constant doublings)\r\n   * - Performance degrades with larger scalar counts:\r\n   *   - Optimal for ~256 scalars\r\n   *   - Less efficient for 4096+ scalars (Pippenger preferred)\r\n   */\r\n  validateW(windowSize, fieldN.BITS);\r\n  validateMSMPoints(points, c);\r\n  const zero = c.ZERO;\r\n  const tableSize = 2 ** windowSize - 1; // table size (without zero)\r\n  const chunks = Math.ceil(fieldN.BITS / windowSize); // chunks of item\r\n  const MASK = bitMask(windowSize);\r\n  const tables = points.map((p: T) => {\r\n    const res = [];\r\n    for (let i = 0, acc = p; i < tableSize; i++) {\r\n      res.push(acc);\r\n      acc = acc.add(p);\r\n    }\r\n    return res;\r\n  });\r\n  return (scalars: bigint[]): T => {\r\n    validateMSMScalars(scalars, fieldN);\r\n    if (scalars.length > points.length)\r\n      throw new Error('array of scalars must be smaller than array of points');\r\n    let res = zero;\r\n    for (let i = 0; i < chunks; i++) {\r\n      // No need to double if accumulator is still zero.\r\n      if (res !== zero) for (let j = 0; j < windowSize; j++) res = res.double();\r\n      const shiftBy = BigInt(chunks * windowSize - (i + 1) * windowSize);\r\n      for (let j = 0; j < scalars.length; j++) {\r\n        const n = scalars[j];\r\n        const curr = Number((n >> shiftBy) & MASK);\r\n        if (!curr) continue; // skip zero scalars chunks\r\n        res = res.add(tables[j][curr - 1]);\r\n      }\r\n    }\r\n    return res;\r\n  };\r\n}\r\n\r\n// TODO: remove\r\n/**\r\n * Generic BasicCurve interface: works even for polynomial fields (BLS): P, n, h would be ok.\r\n * Though generator can be different (Fp2 / Fp6 for BLS).\r\n */\r\nexport type BasicCurve<T> = {\r\n  Fp: IField<T>; // Field over which we'll do calculations (Fp)\r\n  n: bigint; // Curve order, total count of valid points in the field\r\n  nBitLength?: number; // bit length of curve order\r\n  nByteLength?: number; // byte length of curve order\r\n  h: bigint; // cofactor. we can assign default=1, but users will just ignore it w/o validation\r\n  hEff?: bigint; // Number to multiply to clear cofactor\r\n  Gx: T; // base point X coordinate\r\n  Gy: T; // base point Y coordinate\r\n  allowInfinityPoint?: boolean; // bls12-381 requires it. ZERO point is valid, but invalid pubkey\r\n};\r\n\r\n// TODO: remove\r\n/** @deprecated */\r\nexport function validateBasic<FP, T>(\r\n  curve: BasicCurve<FP> & T\r\n): Readonly<\r\n  {\r\n    readonly nBitLength: number;\r\n    readonly nByteLength: number;\r\n  } & BasicCurve<FP> &\r\n    T & {\r\n      p: bigint;\r\n    }\r\n> {\r\n  validateField(curve.Fp);\r\n  validateObject(\r\n    curve,\r\n    {\r\n      n: 'bigint',\r\n      h: 'bigint',\r\n      Gx: 'field',\r\n      Gy: 'field',\r\n    },\r\n    {\r\n      nBitLength: 'isSafeInteger',\r\n      nByteLength: 'isSafeInteger',\r\n    }\r\n  );\r\n  // Set defaults\r\n  return Object.freeze({\r\n    ...nLength(curve.n, curve.nBitLength),\r\n    ...curve,\r\n    ...{ p: curve.Fp.ORDER },\r\n  } as const);\r\n}\r\n\r\nexport type ValidCurveParams<T> = {\r\n  a: T;\r\n  p: bigint;\r\n  n: bigint;\r\n  h: bigint;\r\n  Gx: T;\r\n  Gy: T;\r\n} & ({ b: T } | { d: T });\r\n\r\nfunction createField<T>(order: bigint, field?: IField<T>): IField<T> {\r\n  if (field) {\r\n    if (field.ORDER !== order) throw new Error('Field.ORDER must match order: Fp == p, Fn == n');\r\n    validateField(field);\r\n    return field;\r\n  } else {\r\n    return Field(order) as unknown as IField<T>;\r\n  }\r\n}\r\nexport type FpFn<T> = { Fp: IField<T>; Fn: IField<bigint> };\r\n/** Validates CURVE opts and creates fields */\r\nexport function _createCurveFields<T>(\r\n  type: 'weierstrass' | 'edwards',\r\n  CURVE: ValidCurveParams<T>,\r\n  curveOpts: Partial<FpFn<T>> = {}\r\n): FpFn<T> {\r\n  if (!CURVE || typeof CURVE !== 'object') throw new Error(`expected valid ${type} CURVE object`);\r\n  for (const p of ['p', 'n', 'h'] as const) {\r\n    const val = CURVE[p];\r\n    if (!(typeof val === 'bigint' && val > _0n))\r\n      throw new Error(`CURVE.${p} must be positive bigint`);\r\n  }\r\n  const Fp = createField(CURVE.p, curveOpts.Fp);\r\n  const Fn = createField(CURVE.n, curveOpts.Fn);\r\n  const _b: 'b' | 'd' = type === 'weierstrass' ? 'b' : 'd';\r\n  const params = ['Gx', 'Gy', 'a', _b] as const;\r\n  for (const p of params) {\r\n    // @ts-ignore\r\n    if (!Fp.isValid(CURVE[p]))\r\n      throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);\r\n  }\r\n  return { Fp, Fn };\r\n}\r\n", "/**\r\n * Twisted Edwards curve. The formula is: ax² + y² = 1 + dx²y².\r\n * For design rationale of types / exports, see weierstrass module documentation.\r\n * Untwisted Edwards curves exist, but they aren't used in real-world protocols.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport {\r\n  _validateObject,\r\n  abool,\r\n  abytes,\r\n  aInRange,\r\n  bytesToHex,\r\n  bytesToNumberLE,\r\n  concatBytes,\r\n  ensureBytes,\r\n  memoized,\r\n  numberToBytesLE,\r\n  randomBytes,\r\n  type FHash,\r\n  type Hex,\r\n} from '../utils.ts';\r\nimport {\r\n  _createCurveFields,\r\n  normalizeZ,\r\n  pippenger,\r\n  wNAF,\r\n  type AffinePoint,\r\n  type BasicCurve,\r\n  type CurveInfo,\r\n  type CurvePoint,\r\n  type CurvePointCons,\r\n} from './curve.ts';\r\nimport { Field, type IField, type NLength } from './modular.ts';\r\n\r\n// Be friendly to bad ECMAScript parsers by not using bigint literals\r\n// prettier-ignore\r\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _8n = BigInt(8);\r\n\r\nexport type UVRatio = (u: bigint, v: bigint) => { isValid: boolean; value: bigint };\r\n\r\n// TODO: remove\r\nexport type CurveType = BasicCurve<bigint> & {\r\n  a: bigint; // curve param a\r\n  d: bigint; // curve param d\r\n  /** @deprecated the property will be removed in next release */\r\n  hash: FHash; // Hashing\r\n  randomBytes?: (bytesLength?: number) => Uint8Array; // CSPRNG\r\n  adjustScalarBytes?: (bytes: Uint8Array) => Uint8Array; // clears bits to get valid field elemtn\r\n  domain?: (data: Uint8Array, ctx: Uint8Array, phflag: boolean) => Uint8Array; // Used for hashing\r\n  uvRatio?: UVRatio; // Ratio √(u/v)\r\n  prehash?: FHash; // RFC 8032 pre-hashing of messages to sign() / verify()\r\n  mapToCurve?: (scalar: bigint[]) => AffinePoint<bigint>; // for hash-to-curve standard\r\n};\r\n\r\n// TODO: remove\r\nexport type CurveTypeWithLength = Readonly<CurveType & Partial<NLength>>;\r\n\r\n/** Instance of Extended Point with coordinates in X, Y, Z, T. */\r\nexport interface EdwardsPoint extends CurvePoint<bigint, EdwardsPoint> {\r\n  /** extended X coordinate. Different from affine x. */\r\n  readonly X: bigint;\r\n  /** extended Y coordinate. Different from affine y. */\r\n  readonly Y: bigint;\r\n  /** extended Z coordinate */\r\n  readonly Z: bigint;\r\n  /** extended T coordinate */\r\n  readonly T: bigint;\r\n\r\n  /** @deprecated use `toBytes` */\r\n  toRawBytes(): Uint8Array;\r\n  /** @deprecated use `p.precompute(windowSize)` */\r\n  _setWindowSize(windowSize: number): void;\r\n  /** @deprecated use .X */\r\n  readonly ex: bigint;\r\n  /** @deprecated use .Y */\r\n  readonly ey: bigint;\r\n  /** @deprecated use .Z */\r\n  readonly ez: bigint;\r\n  /** @deprecated use .T */\r\n  readonly et: bigint;\r\n}\r\n/** Static methods of Extended Point with coordinates in X, Y, Z, T. */\r\nexport interface EdwardsPointCons extends CurvePointCons<bigint, EdwardsPoint> {\r\n  new (X: bigint, Y: bigint, Z: bigint, T: bigint): EdwardsPoint;\r\n  fromBytes(bytes: Uint8Array, zip215?: boolean): EdwardsPoint;\r\n  fromHex(hex: Hex, zip215?: boolean): EdwardsPoint;\r\n  /** @deprecated use `import { pippenger } from '@noble/curves/abstract/curve.js';` */\r\n  msm(points: EdwardsPoint[], scalars: bigint[]): EdwardsPoint;\r\n}\r\n/** @deprecated use EdwardsPoint */\r\nexport type ExtPointType = EdwardsPoint;\r\n/** @deprecated use EdwardsPointCons */\r\nexport type ExtPointConstructor = EdwardsPointCons;\r\n\r\n/**\r\n * Twisted Edwards curve options.\r\n *\r\n * * a: formula param\r\n * * d: formula param\r\n * * p: prime characteristic (order) of finite field, in which arithmetics is done\r\n * * n: order of prime subgroup a.k.a total amount of valid curve points\r\n * * h: cofactor. h*n is group order; n is subgroup order\r\n * * Gx: x coordinate of generator point a.k.a. base point\r\n * * Gy: y coordinate of generator point\r\n */\r\nexport type EdwardsOpts = Readonly<{\r\n  p: bigint;\r\n  n: bigint;\r\n  h: bigint;\r\n  a: bigint;\r\n  d: bigint;\r\n  Gx: bigint;\r\n  Gy: bigint;\r\n}>;\r\n\r\n/**\r\n * Extra curve options for Twisted Edwards.\r\n *\r\n * * Fp: redefined Field over curve.p\r\n * * Fn: redefined Field over curve.n\r\n * * uvRatio: helper function for decompression, calculating √(u/v)\r\n */\r\nexport type EdwardsExtraOpts = Partial<{\r\n  Fp: IField<bigint>;\r\n  Fn: IField<bigint>;\r\n  uvRatio: (u: bigint, v: bigint) => { isValid: boolean; value: bigint };\r\n}>;\r\n\r\n/**\r\n * EdDSA (Edwards Digital Signature algorithm) options.\r\n *\r\n * * hash: hash function used to hash secret keys and messages\r\n * * adjustScalarBytes: clears bits to get valid field element\r\n * * domain: Used for hashing\r\n * * mapToCurve: for hash-to-curve standard\r\n * * prehash: RFC 8032 pre-hashing of messages to sign() / verify()\r\n * * randomBytes: function generating random bytes, used for randomSecretKey\r\n */\r\nexport type EdDSAOpts = Partial<{\r\n  adjustScalarBytes: (bytes: Uint8Array) => Uint8Array;\r\n  domain: (data: Uint8Array, ctx: Uint8Array, phflag: boolean) => Uint8Array;\r\n  mapToCurve: (scalar: bigint[]) => AffinePoint<bigint>;\r\n  prehash: FHash;\r\n  randomBytes: (bytesLength?: number) => Uint8Array;\r\n}>;\r\n\r\n/**\r\n * EdDSA (Edwards Digital Signature algorithm) interface.\r\n *\r\n * Allows to create and verify signatures, create public and secret keys.\r\n */\r\nexport interface EdDSA {\r\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\r\n  getPublicKey: (secretKey: Hex) => Uint8Array;\r\n  sign: (message: Hex, secretKey: Hex, options?: { context?: Hex }) => Uint8Array;\r\n  verify: (\r\n    sig: Hex,\r\n    message: Hex,\r\n    publicKey: Hex,\r\n    options?: { context?: Hex; zip215: boolean }\r\n  ) => boolean;\r\n  Point: EdwardsPointCons;\r\n  utils: {\r\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\r\n    isValidSecretKey: (secretKey: Uint8Array) => boolean;\r\n    isValidPublicKey: (publicKey: Uint8Array, zip215?: boolean) => boolean;\r\n\r\n    /**\r\n     * Converts ed public key to x public key.\r\n     * @example\r\n     * ```js\r\n     * const someonesPub = ed25519.getPublicKey(ed25519.utils.randomSecretKey());\r\n     * const aPriv = x25519.utils.randomSecretKey();\r\n     * x25519.getSharedSecret(aPriv, ed25519.utils.toMontgomery(someonesPub))\r\n     * ```\r\n     */\r\n    toMontgomery: (publicKey: Uint8Array) => Uint8Array;\r\n    /**\r\n     * Converts ed secret key to x secret key.\r\n     * @example\r\n     * ```js\r\n     * const someonesPub = x25519.getPublicKey(x25519.utils.randomSecretKey());\r\n     * const aPriv = ed25519.utils.randomSecretKey();\r\n     * x25519.getSharedSecret(ed25519.utils.toMontgomeryPriv(aPriv), someonesPub)\r\n     * ```\r\n     */\r\n    toMontgomeryPriv: (privateKey: Uint8Array) => Uint8Array;\r\n    getExtendedPublicKey: (key: Hex) => {\r\n      head: Uint8Array;\r\n      prefix: Uint8Array;\r\n      scalar: bigint;\r\n      point: EdwardsPoint;\r\n      pointBytes: Uint8Array;\r\n    };\r\n\r\n    /** @deprecated use `randomSecretKey` */\r\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\r\n    /** @deprecated use `point.precompute()` */\r\n    precompute: (windowSize?: number, point?: EdwardsPoint) => EdwardsPoint;\r\n  };\r\n  info: CurveInfo;\r\n}\r\n\r\n// Legacy params. TODO: remove\r\nexport type CurveFn = {\r\n  /** @deprecated the property will be removed in next release */\r\n  CURVE: CurveType;\r\n  keygen: EdDSA['keygen'];\r\n  getPublicKey: EdDSA['getPublicKey'];\r\n  sign: EdDSA['sign'];\r\n  verify: EdDSA['verify'];\r\n  Point: EdwardsPointCons;\r\n  /** @deprecated use `Point` */\r\n  ExtendedPoint: EdwardsPointCons;\r\n  utils: EdDSA['utils'];\r\n  info: CurveInfo;\r\n};\r\n\r\nfunction isEdValidXY(Fp: IField<bigint>, CURVE: EdwardsOpts, x: bigint, y: bigint): boolean {\r\n  const x2 = Fp.sqr(x);\r\n  const y2 = Fp.sqr(y);\r\n  const left = Fp.add(Fp.mul(CURVE.a, x2), y2);\r\n  const right = Fp.add(Fp.ONE, Fp.mul(CURVE.d, Fp.mul(x2, y2)));\r\n  return Fp.eql(left, right);\r\n}\r\n\r\nexport function edwards(CURVE: EdwardsOpts, curveOpts: EdwardsExtraOpts = {}): EdwardsPointCons {\r\n  const { Fp, Fn } = _createCurveFields('edwards', CURVE, curveOpts);\r\n  const { h: cofactor, n: CURVE_ORDER } = CURVE;\r\n  _validateObject(curveOpts, {}, { uvRatio: 'function' });\r\n\r\n  // Important:\r\n  // There are some places where Fp.BYTES is used instead of nByteLength.\r\n  // So far, everything has been tested with curves of Fp.BYTES == nByteLength.\r\n  // TODO: test and find curves which behave otherwise.\r\n  const MASK = _2n << (BigInt(Fn.BYTES * 8) - _1n);\r\n  const modP = (n: bigint) => Fp.create(n); // Function overrides\r\n\r\n  // sqrt(u/v)\r\n  const uvRatio =\r\n    curveOpts.uvRatio ||\r\n    ((u: bigint, v: bigint) => {\r\n      try {\r\n        return { isValid: true, value: Fp.sqrt(Fp.div(u, v)) };\r\n      } catch (e) {\r\n        return { isValid: false, value: _0n };\r\n      }\r\n    });\r\n\r\n  // Validate whether the passed curve params are valid.\r\n  // equation ax² + y² = 1 + dx²y² should work for generator point.\r\n  if (!isEdValidXY(Fp, CURVE, CURVE.Gx, CURVE.Gy))\r\n    throw new Error('bad curve params: generator point');\r\n\r\n  /**\r\n   * Asserts coordinate is valid: 0 <= n < MASK.\r\n   * Coordinates >= Fp.ORDER are allowed for zip215.\r\n   */\r\n  function acoord(title: string, n: bigint, banZero = false) {\r\n    const min = banZero ? _1n : _0n;\r\n    aInRange('coordinate ' + title, n, min, MASK);\r\n    return n;\r\n  }\r\n\r\n  function aextpoint(other: unknown) {\r\n    if (!(other instanceof Point)) throw new Error('ExtendedPoint expected');\r\n  }\r\n  // Converts Extended point to default (x, y) coordinates.\r\n  // Can accept precomputed Z^-1 - for example, from invertBatch.\r\n  const toAffineMemo = memoized((p: Point, iz?: bigint): AffinePoint<bigint> => {\r\n    const { X, Y, Z } = p;\r\n    const is0 = p.is0();\r\n    if (iz == null) iz = is0 ? _8n : (Fp.inv(Z) as bigint); // 8 was chosen arbitrarily\r\n    const x = modP(X * iz);\r\n    const y = modP(Y * iz);\r\n    const zz = Fp.mul(Z, iz);\r\n    if (is0) return { x: _0n, y: _1n };\r\n    if (zz !== _1n) throw new Error('invZ was invalid');\r\n    return { x, y };\r\n  });\r\n  const assertValidMemo = memoized((p: Point) => {\r\n    const { a, d } = CURVE;\r\n    if (p.is0()) throw new Error('bad point: ZERO'); // TODO: optimize, with vars below?\r\n    // Equation in affine coordinates: ax² + y² = 1 + dx²y²\r\n    // Equation in projective coordinates (X/Z, Y/Z, Z):  (aX² + Y²)Z² = Z⁴ + dX²Y²\r\n    const { X, Y, Z, T } = p;\r\n    const X2 = modP(X * X); // X²\r\n    const Y2 = modP(Y * Y); // Y²\r\n    const Z2 = modP(Z * Z); // Z²\r\n    const Z4 = modP(Z2 * Z2); // Z⁴\r\n    const aX2 = modP(X2 * a); // aX²\r\n    const left = modP(Z2 * modP(aX2 + Y2)); // (aX² + Y²)Z²\r\n    const right = modP(Z4 + modP(d * modP(X2 * Y2))); // Z⁴ + dX²Y²\r\n    if (left !== right) throw new Error('bad point: equation left != right (1)');\r\n    // In Extended coordinates we also have T, which is x*y=T/Z: check X*Y == Z*T\r\n    const XY = modP(X * Y);\r\n    const ZT = modP(Z * T);\r\n    if (XY !== ZT) throw new Error('bad point: equation left != right (2)');\r\n    return true;\r\n  });\r\n\r\n  // Extended Point works in extended coordinates: (X, Y, Z, T) ∋ (x=X/Z, y=Y/Z, T=xy).\r\n  // https://en.wikipedia.org/wiki/Twisted_Edwards_curve#Extended_coordinates\r\n  class Point implements EdwardsPoint {\r\n    // base / generator point\r\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, _1n, modP(CURVE.Gx * CURVE.Gy));\r\n    // zero / infinity / identity point\r\n    static readonly ZERO = new Point(_0n, _1n, _1n, _0n); // 0, 1, 1, 0\r\n    // fields\r\n    static readonly Fp = Fp;\r\n    static readonly Fn = Fn;\r\n\r\n    readonly X: bigint;\r\n    readonly Y: bigint;\r\n    readonly Z: bigint;\r\n    readonly T: bigint;\r\n\r\n    constructor(X: bigint, Y: bigint, Z: bigint, T: bigint) {\r\n      this.X = acoord('x', X);\r\n      this.Y = acoord('y', Y);\r\n      this.Z = acoord('z', Z, true);\r\n      this.T = acoord('t', T);\r\n      Object.freeze(this);\r\n    }\r\n\r\n    get x(): bigint {\r\n      return this.toAffine().x;\r\n    }\r\n    get y(): bigint {\r\n      return this.toAffine().y;\r\n    }\r\n\r\n    // TODO: remove\r\n    get ex(): bigint {\r\n      return this.X;\r\n    }\r\n    get ey(): bigint {\r\n      return this.Y;\r\n    }\r\n    get ez(): bigint {\r\n      return this.Z;\r\n    }\r\n    get et(): bigint {\r\n      return this.T;\r\n    }\r\n    static normalizeZ(points: Point[]): Point[] {\r\n      return normalizeZ(Point, points);\r\n    }\r\n    static msm(points: Point[], scalars: bigint[]): Point {\r\n      return pippenger(Point, Fn, points, scalars);\r\n    }\r\n    _setWindowSize(windowSize: number) {\r\n      this.precompute(windowSize);\r\n    }\r\n\r\n    static fromAffine(p: AffinePoint<bigint>): Point {\r\n      if (p instanceof Point) throw new Error('extended point not allowed');\r\n      const { x, y } = p || {};\r\n      acoord('x', x);\r\n      acoord('y', y);\r\n      return new Point(x, y, _1n, modP(x * y));\r\n    }\r\n\r\n    precompute(windowSize: number = 8, isLazy = true) {\r\n      wnaf.createCache(this, windowSize);\r\n      if (!isLazy) this.multiply(_2n); // random number\r\n      return this;\r\n    }\r\n\r\n    // Useful in fromAffine() - not for fromBytes(), which always created valid points.\r\n    assertValidity(): void {\r\n      assertValidMemo(this);\r\n    }\r\n\r\n    // Compare one point to another.\r\n    equals(other: Point): boolean {\r\n      aextpoint(other);\r\n      const { X: X1, Y: Y1, Z: Z1 } = this;\r\n      const { X: X2, Y: Y2, Z: Z2 } = other;\r\n      const X1Z2 = modP(X1 * Z2);\r\n      const X2Z1 = modP(X2 * Z1);\r\n      const Y1Z2 = modP(Y1 * Z2);\r\n      const Y2Z1 = modP(Y2 * Z1);\r\n      return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\r\n    }\r\n\r\n    is0(): boolean {\r\n      return this.equals(Point.ZERO);\r\n    }\r\n\r\n    negate(): Point {\r\n      // Flips point sign to a negative one (-x, y in affine coords)\r\n      return new Point(modP(-this.X), this.Y, this.Z, modP(-this.T));\r\n    }\r\n\r\n    // Fast algo for doubling Extended Point.\r\n    // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#doubling-dbl-2008-hwcd\r\n    // Cost: 4M + 4S + 1*a + 6add + 1*2.\r\n    double(): Point {\r\n      const { a } = CURVE;\r\n      const { X: X1, Y: Y1, Z: Z1 } = this;\r\n      const A = modP(X1 * X1); // A = X12\r\n      const B = modP(Y1 * Y1); // B = Y12\r\n      const C = modP(_2n * modP(Z1 * Z1)); // C = 2*Z12\r\n      const D = modP(a * A); // D = a*A\r\n      const x1y1 = X1 + Y1;\r\n      const E = modP(modP(x1y1 * x1y1) - A - B); // E = (X1+Y1)2-A-B\r\n      const G = D + B; // G = D+B\r\n      const F = G - C; // F = G-C\r\n      const H = D - B; // H = D-B\r\n      const X3 = modP(E * F); // X3 = E*F\r\n      const Y3 = modP(G * H); // Y3 = G*H\r\n      const T3 = modP(E * H); // T3 = E*H\r\n      const Z3 = modP(F * G); // Z3 = F*G\r\n      return new Point(X3, Y3, Z3, T3);\r\n    }\r\n\r\n    // Fast algo for adding 2 Extended Points.\r\n    // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#addition-add-2008-hwcd\r\n    // Cost: 9M + 1*a + 1*d + 7add.\r\n    add(other: Point) {\r\n      aextpoint(other);\r\n      const { a, d } = CURVE;\r\n      const { X: X1, Y: Y1, Z: Z1, T: T1 } = this;\r\n      const { X: X2, Y: Y2, Z: Z2, T: T2 } = other;\r\n      const A = modP(X1 * X2); // A = X1*X2\r\n      const B = modP(Y1 * Y2); // B = Y1*Y2\r\n      const C = modP(T1 * d * T2); // C = T1*d*T2\r\n      const D = modP(Z1 * Z2); // D = Z1*Z2\r\n      const E = modP((X1 + Y1) * (X2 + Y2) - A - B); // E = (X1+Y1)*(X2+Y2)-A-B\r\n      const F = D - C; // F = D-C\r\n      const G = D + C; // G = D+C\r\n      const H = modP(B - a * A); // H = B-a*A\r\n      const X3 = modP(E * F); // X3 = E*F\r\n      const Y3 = modP(G * H); // Y3 = G*H\r\n      const T3 = modP(E * H); // T3 = E*H\r\n      const Z3 = modP(F * G); // Z3 = F*G\r\n      return new Point(X3, Y3, Z3, T3);\r\n    }\r\n\r\n    subtract(other: Point): Point {\r\n      return this.add(other.negate());\r\n    }\r\n\r\n    // Constant-time multiplication.\r\n    multiply(scalar: bigint): Point {\r\n      const n = scalar;\r\n      aInRange('scalar', n, _1n, CURVE_ORDER); // 1 <= scalar < L\r\n      const { p, f } = wnaf.cached(this, n, (p) => normalizeZ(Point, p));\r\n      return normalizeZ(Point, [p, f])[0];\r\n    }\r\n\r\n    // Non-constant-time multiplication. Uses double-and-add algorithm.\r\n    // It's faster, but should only be used when you don't care about\r\n    // an exposed private key e.g. sig verification.\r\n    // Does NOT allow scalars higher than CURVE.n.\r\n    // Accepts optional accumulator to merge with multiply (important for sparse scalars)\r\n    multiplyUnsafe(scalar: bigint, acc = Point.ZERO): Point {\r\n      const n = scalar;\r\n      aInRange('scalar', n, _0n, CURVE_ORDER); // 0 <= scalar < L\r\n      if (n === _0n) return Point.ZERO;\r\n      if (this.is0() || n === _1n) return this;\r\n      return wnaf.unsafe(this, n, (p) => normalizeZ(Point, p), acc);\r\n    }\r\n\r\n    // Checks if point is of small order.\r\n    // If you add something to small order point, you will have \"dirty\"\r\n    // point with torsion component.\r\n    // Multiplies point by cofactor and checks if the result is 0.\r\n    isSmallOrder(): boolean {\r\n      return this.multiplyUnsafe(cofactor).is0();\r\n    }\r\n\r\n    // Multiplies point by curve order and checks if the result is 0.\r\n    // Returns `false` is the point is dirty.\r\n    isTorsionFree(): boolean {\r\n      return wnaf.unsafe(this, CURVE_ORDER).is0();\r\n    }\r\n\r\n    // Converts Extended point to default (x, y) coordinates.\r\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\r\n    toAffine(invertedZ?: bigint): AffinePoint<bigint> {\r\n      return toAffineMemo(this, invertedZ);\r\n    }\r\n\r\n    clearCofactor(): Point {\r\n      if (cofactor === _1n) return this;\r\n      return this.multiplyUnsafe(cofactor);\r\n    }\r\n\r\n    static fromBytes(bytes: Uint8Array, zip215 = false): Point {\r\n      abytes(bytes);\r\n      return Point.fromHex(bytes, zip215);\r\n    }\r\n\r\n    // Converts hash string or Uint8Array to Point.\r\n    // Uses algo from RFC8032 5.1.3.\r\n    static fromHex(hex: Hex, zip215 = false): Point {\r\n      const { d, a } = CURVE;\r\n      const len = Fp.BYTES;\r\n      hex = ensureBytes('pointHex', hex, len); // copy hex to a new array\r\n      abool('zip215', zip215);\r\n      const normed = hex.slice(); // copy again, we'll manipulate it\r\n      const lastByte = hex[len - 1]; // select last byte\r\n      normed[len - 1] = lastByte & ~0x80; // clear last bit\r\n      const y = bytesToNumberLE(normed);\r\n\r\n      // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\r\n      // RFC8032 prohibits >= p, but ZIP215 doesn't\r\n      // zip215=true:  0 <= y < MASK (2^256 for ed25519)\r\n      // zip215=false: 0 <= y < P (2^255-19 for ed25519)\r\n      const max = zip215 ? MASK : Fp.ORDER;\r\n      aInRange('pointHex.y', y, _0n, max);\r\n\r\n      // Ed25519: x² = (y²-1)/(dy²+1) mod p. Ed448: x² = (y²-1)/(dy²-1) mod p. Generic case:\r\n      // ax²+y²=1+dx²y² => y²-1=dx²y²-ax² => y²-1=x²(dy²-a) => x²=(y²-1)/(dy²-a)\r\n      const y2 = modP(y * y); // denominator is always non-0 mod p.\r\n      const u = modP(y2 - _1n); // u = y² - 1\r\n      const v = modP(d * y2 - a); // v = d y² + 1.\r\n      let { isValid, value: x } = uvRatio(u, v); // √(u/v)\r\n      if (!isValid) throw new Error('Point.fromHex: invalid y coordinate');\r\n      const isXOdd = (x & _1n) === _1n; // There are 2 square roots. Use x_0 bit to select proper\r\n      const isLastByteOdd = (lastByte & 0x80) !== 0; // x_0, last bit\r\n      if (!zip215 && x === _0n && isLastByteOdd)\r\n        // if x=0 and x_0 = 1, fail\r\n        throw new Error('Point.fromHex: x=0 and x_0=1');\r\n      if (isLastByteOdd !== isXOdd) x = modP(-x); // if x_0 != x mod 2, set x = p-x\r\n      return Point.fromAffine({ x, y });\r\n    }\r\n    toBytes(): Uint8Array {\r\n      const { x, y } = this.toAffine();\r\n      const bytes = numberToBytesLE(y, Fp.BYTES); // each y has 2 x values (x, -y)\r\n      bytes[bytes.length - 1] |= x & _1n ? 0x80 : 0; // when compressing, it's enough to store y\r\n      return bytes; // and use the last byte to encode sign of x\r\n    }\r\n    /** @deprecated use `toBytes` */\r\n    toRawBytes(): Uint8Array {\r\n      return this.toBytes();\r\n    }\r\n    toHex(): string {\r\n      return bytesToHex(this.toBytes());\r\n    }\r\n\r\n    toString() {\r\n      return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\r\n    }\r\n  }\r\n  const wnaf = new wNAF(Point, Fn.BYTES * 8); // Fn.BITS?\r\n  return Point;\r\n}\r\n\r\n/**\r\n * Base class for prime-order points like Ristretto255 and Decaf448.\r\n * These points eliminate cofactor issues by representing equivalence classes\r\n * of Edwards curve points.\r\n */\r\nexport abstract class PrimeEdwardsPoint<T extends PrimeEdwardsPoint<T>>\r\n  implements CurvePoint<bigint, T>\r\n{\r\n  static BASE: PrimeEdwardsPoint<any>;\r\n  static ZERO: PrimeEdwardsPoint<any>;\r\n  static Fp: IField<bigint>;\r\n  static Fn: IField<bigint>;\r\n\r\n  protected readonly ep: EdwardsPoint;\r\n\r\n  constructor(ep: EdwardsPoint) {\r\n    this.ep = ep;\r\n  }\r\n\r\n  // Abstract methods that must be implemented by subclasses\r\n  abstract toBytes(): Uint8Array;\r\n  abstract equals(other: T): boolean;\r\n\r\n  // Static methods that must be implemented by subclasses\r\n  static fromBytes(_bytes: Uint8Array): any {\r\n    throw new Error('fromBytes must be implemented by subclass');\r\n  }\r\n\r\n  static fromHex(_hex: Hex): any {\r\n    throw new Error('fromHex must be implemented by subclass');\r\n  }\r\n\r\n  get x(): bigint {\r\n    return this.toAffine().x;\r\n  }\r\n  get y(): bigint {\r\n    return this.toAffine().y;\r\n  }\r\n\r\n  // Common implementations\r\n  clearCofactor(): T {\r\n    // no-op for prime-order groups\r\n    return this as any;\r\n  }\r\n\r\n  assertValidity(): void {\r\n    this.ep.assertValidity();\r\n  }\r\n\r\n  toAffine(invertedZ?: bigint): AffinePoint<bigint> {\r\n    return this.ep.toAffine(invertedZ);\r\n  }\r\n\r\n  /** @deprecated use `toBytes` */\r\n  toRawBytes(): Uint8Array {\r\n    return this.toBytes();\r\n  }\r\n\r\n  toHex(): string {\r\n    return bytesToHex(this.toBytes());\r\n  }\r\n\r\n  toString(): string {\r\n    return this.toHex();\r\n  }\r\n\r\n  isTorsionFree(): boolean {\r\n    return true;\r\n  }\r\n\r\n  isSmallOrder(): boolean {\r\n    return false;\r\n  }\r\n\r\n  add(other: T): T {\r\n    this.assertSame(other);\r\n    return this.init(this.ep.add(other.ep));\r\n  }\r\n\r\n  subtract(other: T): T {\r\n    this.assertSame(other);\r\n    return this.init(this.ep.subtract(other.ep));\r\n  }\r\n\r\n  multiply(scalar: bigint): T {\r\n    return this.init(this.ep.multiply(scalar));\r\n  }\r\n\r\n  multiplyUnsafe(scalar: bigint): T {\r\n    return this.init(this.ep.multiplyUnsafe(scalar));\r\n  }\r\n\r\n  double(): T {\r\n    return this.init(this.ep.double());\r\n  }\r\n\r\n  negate(): T {\r\n    return this.init(this.ep.negate());\r\n  }\r\n\r\n  precompute(windowSize?: number, isLazy?: boolean): T {\r\n    return this.init(this.ep.precompute(windowSize, isLazy));\r\n  }\r\n\r\n  // Helper methods\r\n  abstract is0(): boolean;\r\n  protected abstract assertSame(other: T): void;\r\n  protected abstract init(ep: EdwardsPoint): T;\r\n}\r\n\r\n/**\r\n * Initializes EdDSA signatures over given Edwards curve.\r\n */\r\nexport function eddsa(Point: EdwardsPointCons, cHash: FHash, eddsaOpts: EdDSAOpts): EdDSA {\r\n  if (typeof cHash !== 'function') throw new Error('\"hash\" function param is required');\r\n  _validateObject(\r\n    eddsaOpts,\r\n    {},\r\n    {\r\n      adjustScalarBytes: 'function',\r\n      randomBytes: 'function',\r\n      domain: 'function',\r\n      prehash: 'function',\r\n      mapToCurve: 'function',\r\n    }\r\n  );\r\n\r\n  const { prehash } = eddsaOpts;\r\n  const { BASE: G, Fp, Fn } = Point;\r\n  const CURVE_ORDER = Fn.ORDER;\r\n\r\n  const randomBytes_ = eddsaOpts.randomBytes || randomBytes;\r\n  const adjustScalarBytes = eddsaOpts.adjustScalarBytes || ((bytes: Uint8Array) => bytes); // NOOP\r\n  const domain =\r\n    eddsaOpts.domain ||\r\n    ((data: Uint8Array, ctx: Uint8Array, phflag: boolean) => {\r\n      abool('phflag', phflag);\r\n      if (ctx.length || phflag) throw new Error('Contexts/pre-hash are not supported');\r\n      return data;\r\n    }); // NOOP\r\n\r\n  function modN(a: bigint) {\r\n    return Fn.create(a);\r\n  }\r\n\r\n  // Little-endian SHA512 with modulo n\r\n  function modN_LE(hash: Uint8Array): bigint {\r\n    // Not using Fn.fromBytes: hash can be 2*Fn.BYTES\r\n    return modN(bytesToNumberLE(hash));\r\n  }\r\n\r\n  // Get the hashed private scalar per RFC8032 5.1.5\r\n  function getPrivateScalar(key: Hex) {\r\n    const len = Fp.BYTES;\r\n    key = ensureBytes('private key', key, len);\r\n    // Hash private key with curve's hash function to produce uniformingly random input\r\n    // Check byte lengths: ensure(64, h(ensure(32, key)))\r\n    const hashed = ensureBytes('hashed private key', cHash(key), 2 * len);\r\n    const head = adjustScalarBytes(hashed.slice(0, len)); // clear first half bits, produce FE\r\n    const prefix = hashed.slice(len, 2 * len); // second half is called key prefix (5.1.6)\r\n    const scalar = modN_LE(head); // The actual private scalar\r\n    return { head, prefix, scalar };\r\n  }\r\n\r\n  /** Convenience method that creates public key from scalar. RFC8032 5.1.5 */\r\n  function getExtendedPublicKey(secretKey: Hex) {\r\n    const { head, prefix, scalar } = getPrivateScalar(secretKey);\r\n    const point = G.multiply(scalar); // Point on Edwards curve aka public key\r\n    const pointBytes = point.toBytes();\r\n    return { head, prefix, scalar, point, pointBytes };\r\n  }\r\n\r\n  /** Calculates EdDSA pub key. RFC8032 5.1.5. */\r\n  function getPublicKey(secretKey: Hex): Uint8Array {\r\n    return getExtendedPublicKey(secretKey).pointBytes;\r\n  }\r\n\r\n  // int('LE', SHA512(dom2(F, C) || msgs)) mod N\r\n  function hashDomainToScalar(context: Hex = Uint8Array.of(), ...msgs: Uint8Array[]) {\r\n    const msg = concatBytes(...msgs);\r\n    return modN_LE(cHash(domain(msg, ensureBytes('context', context), !!prehash)));\r\n  }\r\n\r\n  /** Signs message with privateKey. RFC8032 5.1.6 */\r\n  function sign(msg: Hex, secretKey: Hex, options: { context?: Hex } = {}): Uint8Array {\r\n    msg = ensureBytes('message', msg);\r\n    if (prehash) msg = prehash(msg); // for ed25519ph etc.\r\n    const { prefix, scalar, pointBytes } = getExtendedPublicKey(secretKey);\r\n    const r = hashDomainToScalar(options.context, prefix, msg); // r = dom2(F, C) || prefix || PH(M)\r\n    const R = G.multiply(r).toBytes(); // R = rG\r\n    const k = hashDomainToScalar(options.context, R, pointBytes, msg); // R || A || PH(M)\r\n    const s = modN(r + k * scalar); // S = (r + k * s) mod L\r\n    aInRange('signature.s', s, _0n, CURVE_ORDER); // 0 <= s < l\r\n    const L = Fp.BYTES;\r\n    const res = concatBytes(R, numberToBytesLE(s, L));\r\n    return ensureBytes('result', res, L * 2); // 64-byte signature\r\n  }\r\n\r\n  // verification rule is either zip215 or rfc8032 / nist186-5. Consult fromHex:\r\n  const verifyOpts: { context?: Hex; zip215?: boolean } = { zip215: true };\r\n\r\n  /**\r\n   * Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\r\n   * An extended group equation is checked.\r\n   */\r\n  function verify(sig: Hex, msg: Hex, publicKey: Hex, options = verifyOpts): boolean {\r\n    const { context, zip215 } = options;\r\n    const len = Fp.BYTES; // Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\r\n    sig = ensureBytes('signature', sig, 2 * len); // An extended group equation is checked.\r\n    msg = ensureBytes('message', msg);\r\n    publicKey = ensureBytes('publicKey', publicKey, len);\r\n    if (zip215 !== undefined) abool('zip215', zip215);\r\n    if (prehash) msg = prehash(msg); // for ed25519ph, etc\r\n\r\n    const s = bytesToNumberLE(sig.slice(len, 2 * len));\r\n    let A, R, SB;\r\n    try {\r\n      // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\r\n      // zip215=true:  0 <= y < MASK (2^256 for ed25519)\r\n      // zip215=false: 0 <= y < P (2^255-19 for ed25519)\r\n      A = Point.fromHex(publicKey, zip215);\r\n      R = Point.fromHex(sig.slice(0, len), zip215);\r\n      SB = G.multiplyUnsafe(s); // 0 <= s < l is done inside\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n    if (!zip215 && A.isSmallOrder()) return false;\r\n\r\n    const k = hashDomainToScalar(context, R.toBytes(), A.toBytes(), msg);\r\n    const RkA = R.add(A.multiplyUnsafe(k));\r\n    // Extended group equation\r\n    // [8][S]B = [8]R + [8][k]A'\r\n    return RkA.subtract(SB).clearCofactor().is0();\r\n  }\r\n\r\n  G.precompute(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\r\n\r\n  const size = Fp.BYTES;\r\n  const lengths = {\r\n    secret: size,\r\n    public: size,\r\n    signature: 2 * size,\r\n    seed: size,\r\n  };\r\n  function randomSecretKey(seed = randomBytes_!(lengths.seed)): Uint8Array {\r\n    return seed;\r\n  }\r\n\r\n  const utils = {\r\n    getExtendedPublicKey,\r\n    /** ed25519 priv keys are uniform 32b. No need to check for modulo bias, like in secp256k1. */\r\n    randomSecretKey,\r\n\r\n    isValidSecretKey,\r\n    isValidPublicKey,\r\n\r\n    randomPrivateKey: randomSecretKey,\r\n\r\n    /**\r\n     * Converts ed public key to x public key. Uses formula:\r\n     * - ed25519:\r\n     *   - `(u, v) = ((1+y)/(1-y), sqrt(-486664)*u/x)`\r\n     *   - `(x, y) = (sqrt(-486664)*u/v, (u-1)/(u+1))`\r\n     * - ed448:\r\n     *   - `(u, v) = ((y-1)/(y+1), sqrt(156324)*u/x)`\r\n     *   - `(x, y) = (sqrt(156324)*u/v, (1+u)/(1-u))`\r\n     *\r\n     * There is NO `fromMontgomery`:\r\n     * - There are 2 valid ed25519 points for every x25519, with flipped coordinate\r\n     * - Sometimes there are 0 valid ed25519 points, because x25519 *additionally*\r\n     *   accepts inputs on the quadratic twist, which can't be moved to ed25519\r\n     */\r\n    toMontgomery(publicKey: Uint8Array): Uint8Array {\r\n      const { y } = Point.fromBytes(publicKey);\r\n      const is25519 = size === 32;\r\n      if (!is25519 && size !== 57) throw new Error('only defined for 25519 and 448');\r\n      const u = is25519 ? Fp.div(_1n + y, _1n - y) : Fp.div(y - _1n, y + _1n);\r\n      return Fp.toBytes(u);\r\n    },\r\n\r\n    toMontgomeryPriv(privateKey: Uint8Array): Uint8Array {\r\n      abytes(privateKey, size);\r\n      const hashed = cHash(privateKey.subarray(0, size));\r\n      return adjustScalarBytes(hashed).subarray(0, size);\r\n    },\r\n\r\n    /**\r\n     * We're doing scalar multiplication (used in getPublicKey etc) with precomputed BASE_POINT\r\n     * values. This slows down first getPublicKey() by milliseconds (see Speed section),\r\n     * but allows to speed-up subsequent getPublicKey() calls up to 20x.\r\n     * @param windowSize 2, 4, 8, 16\r\n     */\r\n    precompute(windowSize = 8, point: EdwardsPoint = Point.BASE): EdwardsPoint {\r\n      return point.precompute(windowSize, false);\r\n    },\r\n  };\r\n\r\n  function keygen(seed?: Uint8Array) {\r\n    const secretKey = utils.randomSecretKey(seed);\r\n    return { secretKey, publicKey: getPublicKey(secretKey) };\r\n  }\r\n\r\n  function isValidSecretKey(key: Uint8Array): boolean {\r\n    try {\r\n      return !!Fn.fromBytes(key, false);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function isValidPublicKey(key: Uint8Array, zip215?: boolean): boolean {\r\n    try {\r\n      return !!Point.fromBytes(key, zip215);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return Object.freeze({\r\n    keygen,\r\n    getPublicKey,\r\n    sign,\r\n    verify,\r\n    utils,\r\n    Point,\r\n    info: { type: 'edwards' as const, lengths },\r\n  });\r\n}\r\n\r\n// TODO: remove\r\nexport type EdComposed = {\r\n  CURVE: EdwardsOpts;\r\n  curveOpts: EdwardsExtraOpts;\r\n  hash: FHash;\r\n  eddsaOpts: EdDSAOpts;\r\n};\r\n// TODO: remove\r\nfunction _eddsa_legacy_opts_to_new(c: CurveTypeWithLength): EdComposed {\r\n  const CURVE: EdwardsOpts = {\r\n    a: c.a,\r\n    d: c.d,\r\n    p: c.Fp.ORDER,\r\n    n: c.n,\r\n    h: c.h,\r\n    Gx: c.Gx,\r\n    Gy: c.Gy,\r\n  };\r\n  const Fp = c.Fp;\r\n  const Fn = Field(CURVE.n, c.nBitLength, true);\r\n  const curveOpts: EdwardsExtraOpts = { Fp, Fn, uvRatio: c.uvRatio };\r\n  const eddsaOpts: EdDSAOpts = {\r\n    randomBytes: c.randomBytes,\r\n    adjustScalarBytes: c.adjustScalarBytes,\r\n    domain: c.domain,\r\n    prehash: c.prehash,\r\n    mapToCurve: c.mapToCurve,\r\n  };\r\n  return { CURVE, curveOpts, hash: c.hash, eddsaOpts };\r\n}\r\n// TODO: remove\r\nfunction _eddsa_new_output_to_legacy(c: CurveTypeWithLength, eddsa: EdDSA): CurveFn {\r\n  const legacy = Object.assign({}, eddsa, { ExtendedPoint: eddsa.Point, CURVE: c });\r\n  return legacy;\r\n}\r\n// TODO: remove. Use eddsa\r\nexport function twistedEdwards(c: CurveTypeWithLength): CurveFn {\r\n  const { CURVE, curveOpts, hash, eddsaOpts } = _eddsa_legacy_opts_to_new(c);\r\n  const Point = edwards(CURVE, curveOpts);\r\n  const EDDSA = eddsa(Point, hash, eddsaOpts);\r\n  return _eddsa_new_output_to_legacy(c, EDDSA);\r\n}\r\n", "/**\r\n * hash-to-curve from RFC 9380.\r\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\r\n * https://www.rfc-editor.org/rfc/rfc9380\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport type { CHash } from '../utils.ts';\r\nimport {\r\n  _validateObject,\r\n  abytes,\r\n  bytesToNumberBE,\r\n  concatBytes,\r\n  isBytes,\r\n  isHash,\r\n  utf8ToBytes,\r\n} from '../utils.ts';\r\nimport type { AffinePoint, Group, GroupConstructor } from './curve.ts';\r\nimport { FpInvertBatch, mod, type IField } from './modular.ts';\r\n\r\nexport type UnicodeOrBytes = string | Uint8Array;\r\n\r\n/**\r\n * * `DST` is a domain separation tag, defined in section 2.2.5\r\n * * `p` characteristic of F, where F is a finite field of characteristic p and order q = p^m\r\n * * `m` is extension degree (1 for prime fields)\r\n * * `k` is the target security target in bits (e.g. 128), from section 5.1\r\n * * `expand` is `xmd` (SHA2, SHA3, BLAKE) or `xof` (SHAKE, BLAKE-XOF)\r\n * * `hash` conforming to `utils.CHash` interface, with `outputLen` / `blockLen` props\r\n */\r\nexport type H2COpts = {\r\n  DST: UnicodeOrBytes;\r\n  expand: 'xmd' | 'xof';\r\n  hash: CHash;\r\n  p: bigint;\r\n  m: number;\r\n  k: number;\r\n};\r\nexport type H2CHashOpts = {\r\n  expand: 'xmd' | 'xof';\r\n  hash: CHash;\r\n};\r\n// todo: remove\r\nexport type Opts = H2COpts;\r\n\r\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\r\nconst os2ip = bytesToNumberBE;\r\n\r\n// Integer to Octet Stream (numberToBytesBE)\r\nfunction i2osp(value: number, length: number): Uint8Array {\r\n  anum(value);\r\n  anum(length);\r\n  if (value < 0 || value >= 1 << (8 * length)) throw new Error('invalid I2OSP input: ' + value);\r\n  const res = Array.from({ length }).fill(0) as number[];\r\n  for (let i = length - 1; i >= 0; i--) {\r\n    res[i] = value & 0xff;\r\n    value >>>= 8;\r\n  }\r\n  return new Uint8Array(res);\r\n}\r\n\r\nfunction strxor(a: Uint8Array, b: Uint8Array): Uint8Array {\r\n  const arr = new Uint8Array(a.length);\r\n  for (let i = 0; i < a.length; i++) {\r\n    arr[i] = a[i] ^ b[i];\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction anum(item: unknown): void {\r\n  if (!Number.isSafeInteger(item)) throw new Error('number expected');\r\n}\r\n\r\nfunction normDST(DST: UnicodeOrBytes): Uint8Array {\r\n  if (!isBytes(DST) && typeof DST !== 'string') throw new Error('DST must be Uint8Array or string');\r\n  return typeof DST === 'string' ? utf8ToBytes(DST) : DST;\r\n}\r\n\r\n/**\r\n * Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits.\r\n * [RFC 9380 5.3.1](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.1).\r\n */\r\nexport function expand_message_xmd(\r\n  msg: Uint8Array,\r\n  DST: UnicodeOrBytes,\r\n  lenInBytes: number,\r\n  H: CHash\r\n): Uint8Array {\r\n  abytes(msg);\r\n  anum(lenInBytes);\r\n  DST = normDST(DST);\r\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\r\n  if (DST.length > 255) DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\r\n  const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\r\n  const ell = Math.ceil(lenInBytes / b_in_bytes);\r\n  if (lenInBytes > 65535 || ell > 255) throw new Error('expand_message_xmd: invalid lenInBytes');\r\n  const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\r\n  const Z_pad = i2osp(0, r_in_bytes);\r\n  const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\r\n  const b = new Array<Uint8Array>(ell);\r\n  const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\r\n  b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\r\n  for (let i = 1; i <= ell; i++) {\r\n    const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\r\n    b[i] = H(concatBytes(...args));\r\n  }\r\n  const pseudo_random_bytes = concatBytes(...b);\r\n  return pseudo_random_bytes.slice(0, lenInBytes);\r\n}\r\n\r\n/**\r\n * Produces a uniformly random byte string using an extendable-output function (XOF) H.\r\n * 1. The collision resistance of H MUST be at least k bits.\r\n * 2. H MUST be an XOF that has been proved indifferentiable from\r\n *    a random oracle under a reasonable cryptographic assumption.\r\n * [RFC 9380 5.3.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.2).\r\n */\r\nexport function expand_message_xof(\r\n  msg: Uint8Array,\r\n  DST: UnicodeOrBytes,\r\n  lenInBytes: number,\r\n  k: number,\r\n  H: CHash\r\n): Uint8Array {\r\n  abytes(msg);\r\n  anum(lenInBytes);\r\n  DST = normDST(DST);\r\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\r\n  // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\r\n  if (DST.length > 255) {\r\n    const dkLen = Math.ceil((2 * k) / 8);\r\n    DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\r\n  }\r\n  if (lenInBytes > 65535 || DST.length > 255)\r\n    throw new Error('expand_message_xof: invalid lenInBytes');\r\n  return (\r\n    H.create({ dkLen: lenInBytes })\r\n      .update(msg)\r\n      .update(i2osp(lenInBytes, 2))\r\n      // 2. DST_prime = DST || I2OSP(len(DST), 1)\r\n      .update(DST)\r\n      .update(i2osp(DST.length, 1))\r\n      .digest()\r\n  );\r\n}\r\n\r\n/**\r\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\r\n * [RFC 9380 5.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.2).\r\n * @param msg a byte string containing the message to hash\r\n * @param count the number of elements of F to output\r\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\r\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\r\n */\r\nexport function hash_to_field(msg: Uint8Array, count: number, options: H2COpts): bigint[][] {\r\n  _validateObject(options, {\r\n    p: 'bigint',\r\n    m: 'number',\r\n    k: 'number',\r\n    hash: 'function',\r\n  });\r\n  const { p, k, m, hash, expand, DST } = options;\r\n  if (!isHash(options.hash)) throw new Error('expected valid hash');\r\n  abytes(msg);\r\n  anum(count);\r\n  const log2p = p.toString(2).length;\r\n  const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\r\n  const len_in_bytes = count * m * L;\r\n  let prb; // pseudo_random_bytes\r\n  if (expand === 'xmd') {\r\n    prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\r\n  } else if (expand === 'xof') {\r\n    prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\r\n  } else if (expand === '_internal_pass') {\r\n    // for internal tests only\r\n    prb = msg;\r\n  } else {\r\n    throw new Error('expand must be \"xmd\" or \"xof\"');\r\n  }\r\n  const u = new Array(count);\r\n  for (let i = 0; i < count; i++) {\r\n    const e = new Array(m);\r\n    for (let j = 0; j < m; j++) {\r\n      const elm_offset = L * (j + i * m);\r\n      const tv = prb.subarray(elm_offset, elm_offset + L);\r\n      e[j] = mod(os2ip(tv), p);\r\n    }\r\n    u[i] = e;\r\n  }\r\n  return u;\r\n}\r\n\r\nexport type XY<T> = (x: T, y: T) => { x: T; y: T };\r\nexport type XYRatio<T> = [T[], T[], T[], T[]]; // xn/xd, yn/yd\r\nexport function isogenyMap<T, F extends IField<T>>(field: F, map: XYRatio<T>): XY<T> {\r\n  // Make same order as in spec\r\n  const coeff = map.map((i) => Array.from(i).reverse());\r\n  return (x: T, y: T) => {\r\n    const [xn, xd, yn, yd] = coeff.map((val) =>\r\n      val.reduce((acc, i) => field.add(field.mul(acc, x), i))\r\n    );\r\n    // 6.6.3\r\n    // Exceptional cases of iso_map are inputs that cause the denominator of\r\n    // either rational function to evaluate to zero; such cases MUST return\r\n    // the identity point on E.\r\n    const [xd_inv, yd_inv] = FpInvertBatch(field, [xd, yd], true);\r\n    x = field.mul(xn, xd_inv); // xNum / xDen\r\n    y = field.mul(y, field.mul(yn, yd_inv)); // y * (yNum / yDev)\r\n    return { x, y };\r\n  };\r\n}\r\n\r\n/** Point interface, which curves must implement to work correctly with the module. */\r\nexport interface H2CPoint<T> extends Group<H2CPoint<T>> {\r\n  add(rhs: H2CPoint<T>): H2CPoint<T>;\r\n  toAffine(iz?: bigint): AffinePoint<T>;\r\n  clearCofactor(): H2CPoint<T>;\r\n  assertValidity(): void;\r\n}\r\n\r\nexport interface H2CPointConstructor<T> extends GroupConstructor<H2CPoint<T>> {\r\n  fromAffine(ap: AffinePoint<T>): H2CPoint<T>;\r\n}\r\n\r\nexport type MapToCurve<T> = (scalar: bigint[]) => AffinePoint<T>;\r\n\r\n// Separated from initialization opts, so users won't accidentally change per-curve parameters\r\n// (changing DST is ok!)\r\nexport type htfBasicOpts = { DST: UnicodeOrBytes };\r\nexport type H2CMethod<T> = (msg: Uint8Array, options?: htfBasicOpts) => H2CPoint<T>;\r\n// TODO: remove\r\nexport type HTFMethod<T> = H2CMethod<T>;\r\nexport type MapMethod<T> = (scalars: bigint[]) => H2CPoint<T>;\r\nexport type H2CHasherBase<T> = {\r\n  hashToCurve: H2CMethod<T>;\r\n  hashToScalar: (msg: Uint8Array, options: htfBasicOpts) => bigint;\r\n};\r\n/**\r\n * RFC 9380 methods, with cofactor clearing. See https://www.rfc-editor.org/rfc/rfc9380#section-3.\r\n *\r\n * * hashToCurve: `map(hash(input))`, encodes RANDOM bytes to curve (WITH hashing)\r\n * * encodeToCurve: `map(hash(input))`, encodes NON-UNIFORM bytes to curve (WITH hashing)\r\n * * mapToCurve: `map(scalars)`, encodes NON-UNIFORM scalars to curve (NO hashing)\r\n */\r\nexport type H2CHasher<T> = H2CHasherBase<T> & {\r\n  encodeToCurve: H2CMethod<T>;\r\n  mapToCurve: MapMethod<T>;\r\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes };\r\n};\r\n// TODO: remove\r\nexport type Hasher<T> = H2CHasher<T>;\r\n\r\nexport const _DST_scalar: Uint8Array = utf8ToBytes('HashToScalar-');\r\n\r\n/** Creates hash-to-curve methods from EC Point and mapToCurve function. See {@link H2CHasher}. */\r\nexport function createHasher<T>(\r\n  Point: H2CPointConstructor<T>,\r\n  mapToCurve: MapToCurve<T>,\r\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes }\r\n): H2CHasher<T> {\r\n  if (typeof mapToCurve !== 'function') throw new Error('mapToCurve() must be defined');\r\n  function map(num: bigint[]) {\r\n    return Point.fromAffine(mapToCurve(num));\r\n  }\r\n  function clear(initial: H2CPoint<T>) {\r\n    const P = initial.clearCofactor();\r\n    if (P.equals(Point.ZERO)) return Point.ZERO; // zero will throw in assert\r\n    P.assertValidity();\r\n    return P;\r\n  }\r\n\r\n  return {\r\n    defaults,\r\n\r\n    hashToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\r\n      const opts = Object.assign({}, defaults, options);\r\n      const u = hash_to_field(msg, 2, opts);\r\n      const u0 = map(u[0]);\r\n      const u1 = map(u[1]);\r\n      return clear(u0.add(u1));\r\n    },\r\n    encodeToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\r\n      const optsDst = defaults.encodeDST ? { DST: defaults.encodeDST } : {};\r\n      const opts = Object.assign({}, defaults, optsDst, options);\r\n      const u = hash_to_field(msg, 1, opts);\r\n      const u0 = map(u[0]);\r\n      return clear(u0);\r\n    },\r\n    /** See {@link H2CHasher} */\r\n    mapToCurve(scalars: bigint[]): H2CPoint<T> {\r\n      if (!Array.isArray(scalars)) throw new Error('expected array of bigints');\r\n      for (const i of scalars)\r\n        if (typeof i !== 'bigint') throw new Error('expected array of bigints');\r\n      return clear(map(scalars));\r\n    },\r\n\r\n    // hash_to_scalar can produce 0: https://www.rfc-editor.org/errata/eid8393\r\n    // RFC 9380, draft-irtf-cfrg-bbs-signatures-08\r\n    hashToScalar(msg: Uint8Array, options?: htfBasicOpts): bigint {\r\n      // @ts-ignore\r\n      const N = Point.Fn.ORDER;\r\n      const opts = Object.assign({}, defaults, { p: N, m: 1, DST: _DST_scalar }, options);\r\n      return hash_to_field(msg, 1, opts)[0][0];\r\n    },\r\n  };\r\n}\r\n", "/**\r\n * Montgomery curve methods. It's not really whole montgomery curve,\r\n * just bunch of very specific methods for X25519 / X448 from\r\n * [RFC 7748](https://www.rfc-editor.org/rfc/rfc7748)\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport {\r\n  _validateObject,\r\n  aInRange,\r\n  bytesToNumberLE,\r\n  ensureBytes,\r\n  numberToBytesLE,\r\n  randomBytes,\r\n} from '../utils.ts';\r\nimport type { CurveInfo } from './curve.ts';\r\nimport { mod } from './modular.ts';\r\n\r\nconst _0n = BigInt(0);\r\nconst _1n = BigInt(1);\r\nconst _2n = BigInt(2);\r\ntype Hex = string | Uint8Array;\r\n\r\nexport type CurveType = {\r\n  P: bigint; // finite field prime\r\n  type: 'x25519' | 'x448';\r\n  adjustScalarBytes: (bytes: Uint8Array) => Uint8Array;\r\n  powPminus2: (x: bigint) => bigint;\r\n  randomBytes?: (bytesLength?: number) => Uint8Array;\r\n};\r\n\r\nexport type MontgomeryECDH = {\r\n  scalarMult: (scalar: Hex, u: Hex) => Uint8Array;\r\n  scalarMultBase: (scalar: Hex) => Uint8Array;\r\n  getSharedSecret: (secretKeyA: Hex, publicKeyB: Hex) => Uint8Array;\r\n  getPublicKey: (secretKey: Hex) => Uint8Array;\r\n  utils: {\r\n    randomSecretKey: () => Uint8Array;\r\n    /** @deprecated use `randomSecretKey` */\r\n    randomPrivateKey: () => Uint8Array;\r\n  };\r\n  GuBytes: Uint8Array;\r\n  info: {\r\n    type: 'montgomery';\r\n    lengths: Omit<CurveInfo['lengths'], 'signature'>;\r\n    publicKeyHasPrefix?: boolean;\r\n  };\r\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\r\n};\r\nexport type CurveFn = MontgomeryECDH;\r\n\r\nfunction validateOpts(curve: CurveType) {\r\n  _validateObject(curve, {\r\n    adjustScalarBytes: 'function',\r\n    powPminus2: 'function',\r\n  });\r\n  return Object.freeze({ ...curve } as const);\r\n}\r\n\r\nexport function montgomery(curveDef: CurveType): MontgomeryECDH {\r\n  const CURVE = validateOpts(curveDef);\r\n  const { P, type, adjustScalarBytes, powPminus2, randomBytes: rand } = CURVE;\r\n  const is25519 = type === 'x25519';\r\n  if (!is25519 && type !== 'x448') throw new Error('invalid type');\r\n  const randomBytes_ = rand || randomBytes;\r\n\r\n  const montgomeryBits = is25519 ? 255 : 448;\r\n  const fieldLen = is25519 ? 32 : 56;\r\n  const Gu = is25519 ? BigInt(9) : BigInt(5);\r\n  // RFC 7748 #5:\r\n  // The constant a24 is (486662 - 2) / 4 = 121665 for curve25519/X25519 and\r\n  // (156326 - 2) / 4 = 39081 for curve448/X448\r\n  // const a = is25519 ? 156326n : 486662n;\r\n  const a24 = is25519 ? BigInt(121665) : BigInt(39081);\r\n  // RFC: x25519 \"the resulting integer is of the form 2^254 plus\r\n  // eight times a value between 0 and 2^251 - 1 (inclusive)\"\r\n  // x448: \"2^447 plus four times a value between 0 and 2^445 - 1 (inclusive)\"\r\n  const minScalar = is25519 ? _2n ** BigInt(254) : _2n ** BigInt(447);\r\n  const maxAdded = is25519\r\n    ? BigInt(8) * _2n ** BigInt(251) - _1n\r\n    : BigInt(4) * _2n ** BigInt(445) - _1n;\r\n  const maxScalar = minScalar + maxAdded + _1n; // (inclusive)\r\n  const modP = (n: bigint) => mod(n, P);\r\n  const GuBytes = encodeU(Gu);\r\n  function encodeU(u: bigint): Uint8Array {\r\n    return numberToBytesLE(modP(u), fieldLen);\r\n  }\r\n  function decodeU(u: Hex): bigint {\r\n    const _u = ensureBytes('u coordinate', u, fieldLen);\r\n    // RFC: When receiving such an array, implementations of X25519\r\n    // (but not X448) MUST mask the most significant bit in the final byte.\r\n    if (is25519) _u[31] &= 127; // 0b0111_1111\r\n    // RFC: Implementations MUST accept non-canonical values and process them as\r\n    // if they had been reduced modulo the field prime.  The non-canonical\r\n    // values are 2^255 - 19 through 2^255 - 1 for X25519 and 2^448 - 2^224\r\n    // - 1 through 2^448 - 1 for X448.\r\n    return modP(bytesToNumberLE(_u));\r\n  }\r\n  function decodeScalar(scalar: Hex): bigint {\r\n    return bytesToNumberLE(adjustScalarBytes(ensureBytes('scalar', scalar, fieldLen)));\r\n  }\r\n  function scalarMult(scalar: Hex, u: Hex): Uint8Array {\r\n    const pu = montgomeryLadder(decodeU(u), decodeScalar(scalar));\r\n    // Some public keys are useless, of low-order. Curve author doesn't think\r\n    // it needs to be validated, but we do it nonetheless.\r\n    // https://cr.yp.to/ecdh.html#validate\r\n    if (pu === _0n) throw new Error('invalid private or public key received');\r\n    return encodeU(pu);\r\n  }\r\n  // Computes public key from private. By doing scalar multiplication of base point.\r\n  function scalarMultBase(scalar: Hex): Uint8Array {\r\n    return scalarMult(scalar, GuBytes);\r\n  }\r\n\r\n  // cswap from RFC7748 \"example code\"\r\n  function cswap(swap: bigint, x_2: bigint, x_3: bigint): { x_2: bigint; x_3: bigint } {\r\n    // dummy = mask(swap) AND (x_2 XOR x_3)\r\n    // Where mask(swap) is the all-1 or all-0 word of the same length as x_2\r\n    // and x_3, computed, e.g., as mask(swap) = 0 - swap.\r\n    const dummy = modP(swap * (x_2 - x_3));\r\n    x_2 = modP(x_2 - dummy); // x_2 = x_2 XOR dummy\r\n    x_3 = modP(x_3 + dummy); // x_3 = x_3 XOR dummy\r\n    return { x_2, x_3 };\r\n  }\r\n\r\n  /**\r\n   * Montgomery x-only multiplication ladder.\r\n   * @param pointU u coordinate (x) on Montgomery Curve 25519\r\n   * @param scalar by which the point would be multiplied\r\n   * @returns new Point on Montgomery curve\r\n   */\r\n  function montgomeryLadder(u: bigint, scalar: bigint): bigint {\r\n    aInRange('u', u, _0n, P);\r\n    aInRange('scalar', scalar, minScalar, maxScalar);\r\n    const k = scalar;\r\n    const x_1 = u;\r\n    let x_2 = _1n;\r\n    let z_2 = _0n;\r\n    let x_3 = u;\r\n    let z_3 = _1n;\r\n    let swap = _0n;\r\n    for (let t = BigInt(montgomeryBits - 1); t >= _0n; t--) {\r\n      const k_t = (k >> t) & _1n;\r\n      swap ^= k_t;\r\n      ({ x_2, x_3 } = cswap(swap, x_2, x_3));\r\n      ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\r\n      swap = k_t;\r\n\r\n      const A = x_2 + z_2;\r\n      const AA = modP(A * A);\r\n      const B = x_2 - z_2;\r\n      const BB = modP(B * B);\r\n      const E = AA - BB;\r\n      const C = x_3 + z_3;\r\n      const D = x_3 - z_3;\r\n      const DA = modP(D * A);\r\n      const CB = modP(C * B);\r\n      const dacb = DA + CB;\r\n      const da_cb = DA - CB;\r\n      x_3 = modP(dacb * dacb);\r\n      z_3 = modP(x_1 * modP(da_cb * da_cb));\r\n      x_2 = modP(AA * BB);\r\n      z_2 = modP(E * (AA + modP(a24 * E)));\r\n    }\r\n    ({ x_2, x_3 } = cswap(swap, x_2, x_3));\r\n    ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\r\n    const z2 = powPminus2(z_2); // `Fp.pow(x, P - _2n)` is much slower equivalent\r\n    return modP(x_2 * z2); // Return x_2 * (z_2^(p - 2))\r\n  }\r\n  const randomSecretKey = (seed = randomBytes_(fieldLen)) => seed;\r\n  const utils = {\r\n    randomSecretKey,\r\n    randomPrivateKey: randomSecretKey,\r\n  };\r\n  function keygen(seed?: Uint8Array) {\r\n    const secretKey = utils.randomSecretKey(seed);\r\n    return { secretKey, publicKey: scalarMultBase(secretKey) };\r\n  }\r\n  const lengths = {\r\n    secret: fieldLen,\r\n    public: fieldLen,\r\n    seed: fieldLen,\r\n  };\r\n  return {\r\n    keygen,\r\n    getSharedSecret: (secretKey: Hex, publicKey: Hex) => scalarMult(secretKey, publicKey),\r\n    getPublicKey: (secretKey: Hex): Uint8Array => scalarMultBase(secretKey),\r\n    scalarMult,\r\n    scalarMultBase,\r\n    utils,\r\n    GuBytes: GuBytes.slice(),\r\n    info: { type: 'montgomery' as const, lengths },\r\n  };\r\n}\r\n", "/**\r\n * ed25519 Twisted Edwards curve with following addons:\r\n * - X25519 ECDH\r\n * - Ristretto cofactor elimination\r\n * - Elligator hash-to-group / point indistinguishability\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { sha512 } from '@noble/hashes/sha2.js';\r\nimport { abytes, concatBytes, utf8ToBytes } from '@noble/hashes/utils.js';\r\nimport { pippenger, type AffinePoint } from './abstract/curve.ts';\r\nimport {\r\n  PrimeEdwardsPoint,\r\n  twistedEdwards,\r\n  type CurveFn,\r\n  type EdwardsOpts,\r\n  type EdwardsPoint,\r\n} from './abstract/edwards.ts';\r\nimport {\r\n  _DST_scalar,\r\n  createHasher,\r\n  expand_message_xmd,\r\n  type H2CHasher,\r\n  type H2CHasherBase,\r\n  type H2CMethod,\r\n  type htfBasicOpts,\r\n} from './abstract/hash-to-curve.ts';\r\nimport {\r\n  Field,\r\n  FpInvertBatch,\r\n  FpSqrtEven,\r\n  isNegativeLE,\r\n  mod,\r\n  pow2,\r\n  type IField,\r\n} from './abstract/modular.ts';\r\nimport { montgomery, type MontgomeryECDH as XCurveFn } from './abstract/montgomery.ts';\r\nimport { bytesToNumberLE, ensureBytes, equalBytes, numberToBytesLE, type Hex } from './utils.ts';\r\n\r\n// prettier-ignore\r\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\r\n// prettier-ignore\r\nconst _5n = BigInt(5), _8n = BigInt(8);\r\n\r\n// P = 2n**255n - 19n\r\n// N = 2n**252n + 27742317777372353535851937790883648493n\r\n// a = Fp.create(BigInt(-1))\r\n// d = -121665/121666 a.k.a. Fp.neg(121665 * Fp.inv(121666))\r\nconst ed25519_CURVE: EdwardsOpts = {\r\n  p: BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed'),\r\n  n: BigInt('0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed'),\r\n  h: _8n,\r\n  a: BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec'),\r\n  d: BigInt('0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3'),\r\n  Gx: BigInt('0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a'),\r\n  Gy: BigInt('0x6666666666666666666666666666666666666666666666666666666666666658'),\r\n};\r\n\r\nfunction ed25519_pow_2_252_3(x: bigint) {\r\n  // prettier-ignore\r\n  const _10n = BigInt(10), _20n = BigInt(20), _40n = BigInt(40), _80n = BigInt(80);\r\n  const P = ed25519_CURVE.p;\r\n  const x2 = (x * x) % P;\r\n  const b2 = (x2 * x) % P; // x^3, 11\r\n  const b4 = (pow2(b2, _2n, P) * b2) % P; // x^15, 1111\r\n  const b5 = (pow2(b4, _1n, P) * x) % P; // x^31\r\n  const b10 = (pow2(b5, _5n, P) * b5) % P;\r\n  const b20 = (pow2(b10, _10n, P) * b10) % P;\r\n  const b40 = (pow2(b20, _20n, P) * b20) % P;\r\n  const b80 = (pow2(b40, _40n, P) * b40) % P;\r\n  const b160 = (pow2(b80, _80n, P) * b80) % P;\r\n  const b240 = (pow2(b160, _80n, P) * b80) % P;\r\n  const b250 = (pow2(b240, _10n, P) * b10) % P;\r\n  const pow_p_5_8 = (pow2(b250, _2n, P) * x) % P;\r\n  // ^ To pow to (p+3)/8, multiply it by x.\r\n  return { pow_p_5_8, b2 };\r\n}\r\n\r\nfunction adjustScalarBytes(bytes: Uint8Array): Uint8Array {\r\n  // Section 5: For X25519, in order to decode 32 random bytes as an integer scalar,\r\n  // set the three least significant bits of the first byte\r\n  bytes[0] &= 248; // 0b1111_1000\r\n  // and the most significant bit of the last to zero,\r\n  bytes[31] &= 127; // 0b0111_1111\r\n  // set the second most significant bit of the last byte to 1\r\n  bytes[31] |= 64; // 0b0100_0000\r\n  return bytes;\r\n}\r\n\r\n// √(-1) aka √(a) aka 2^((p-1)/4)\r\n// Fp.sqrt(Fp.neg(1))\r\nconst ED25519_SQRT_M1 = /* @__PURE__ */ BigInt(\r\n  '19681161376707505956807079304988542015446066515923890162744021073123829784752'\r\n);\r\n// sqrt(u/v)\r\nfunction uvRatio(u: bigint, v: bigint): { isValid: boolean; value: bigint } {\r\n  const P = ed25519_CURVE.p;\r\n  const v3 = mod(v * v * v, P); // v³\r\n  const v7 = mod(v3 * v3 * v, P); // v⁷\r\n  // (p+3)/8 and (p-5)/8\r\n  const pow = ed25519_pow_2_252_3(u * v7).pow_p_5_8;\r\n  let x = mod(u * v3 * pow, P); // (uv³)(uv⁷)^(p-5)/8\r\n  const vx2 = mod(v * x * x, P); // vx²\r\n  const root1 = x; // First root candidate\r\n  const root2 = mod(x * ED25519_SQRT_M1, P); // Second root candidate\r\n  const useRoot1 = vx2 === u; // If vx² = u (mod p), x is a square root\r\n  const useRoot2 = vx2 === mod(-u, P); // If vx² = -u, set x <-- x * 2^((p-1)/4)\r\n  const noRoot = vx2 === mod(-u * ED25519_SQRT_M1, P); // There is no valid root, vx² = -u√(-1)\r\n  if (useRoot1) x = root1;\r\n  if (useRoot2 || noRoot) x = root2; // We return root2 anyway, for const-time\r\n  if (isNegativeLE(x, P)) x = mod(-x, P);\r\n  return { isValid: useRoot1 || useRoot2, value: x };\r\n}\r\n\r\nconst Fp = /* @__PURE__ */ (() => Field(ed25519_CURVE.p, { isLE: true }))();\r\nconst Fn = /* @__PURE__ */ (() => Field(ed25519_CURVE.n, { isLE: true }))();\r\n\r\nconst ed25519Defaults = /* @__PURE__ */ (() => ({\r\n  ...ed25519_CURVE,\r\n  Fp,\r\n  hash: sha512,\r\n  adjustScalarBytes,\r\n  // dom2\r\n  // Ratio of u to v. Allows us to combine inversion and square root. Uses algo from RFC8032 5.1.3.\r\n  // Constant-time, u/√v\r\n  uvRatio,\r\n}))();\r\n\r\n/**\r\n * ed25519 curve with EdDSA signatures.\r\n * @example\r\n * import { ed25519 } from '@noble/curves/ed25519';\r\n * const { secretKey, publicKey } = ed25519.keygen();\r\n * const msg = new TextEncoder().encode('hello');\r\n * const sig = ed25519.sign(msg, priv);\r\n * ed25519.verify(sig, msg, pub); // Default mode: follows ZIP215\r\n * ed25519.verify(sig, msg, pub, { zip215: false }); // RFC8032 / FIPS 186-5\r\n */\r\nexport const ed25519: CurveFn = /* @__PURE__ */ (() => twistedEdwards(ed25519Defaults))();\r\n\r\nfunction ed25519_domain(data: Uint8Array, ctx: Uint8Array, phflag: boolean) {\r\n  if (ctx.length > 255) throw new Error('Context is too big');\r\n  return concatBytes(\r\n    utf8ToBytes('SigEd25519 no Ed25519 collisions'),\r\n    new Uint8Array([phflag ? 1 : 0, ctx.length]),\r\n    ctx,\r\n    data\r\n  );\r\n}\r\n\r\n/** Context of ed25519. Uses context for domain separation. */\r\nexport const ed25519ctx: CurveFn = /* @__PURE__ */ (() =>\r\n  twistedEdwards({\r\n    ...ed25519Defaults,\r\n    domain: ed25519_domain,\r\n  }))();\r\n\r\n/** Prehashed version of ed25519. Accepts already-hashed messages in sign() and verify(). */\r\nexport const ed25519ph: CurveFn = /* @__PURE__ */ (() =>\r\n  twistedEdwards(\r\n    Object.assign({}, ed25519Defaults, {\r\n      domain: ed25519_domain,\r\n      prehash: sha512,\r\n    })\r\n  ))();\r\n\r\n/**\r\n * ECDH using curve25519 aka x25519.\r\n * @example\r\n * import { x25519 } from '@noble/curves/ed25519';\r\n * const priv = 'a546e36bf0527c9d3b16154b82465edd62144c0ac1fc5a18506a2244ba449ac4';\r\n * const pub = 'e6db6867583030db3594c1a424b15f7c726624ec26b3353b10a903a6d0ab1c4c';\r\n * x25519.getSharedSecret(priv, pub) === x25519.scalarMult(priv, pub); // aliases\r\n * x25519.getPublicKey(priv) === x25519.scalarMultBase(priv);\r\n * x25519.getPublicKey(x25519.utils.randomSecretKey());\r\n */\r\nexport const x25519: XCurveFn = /* @__PURE__ */ (() => {\r\n  const P = ed25519_CURVE.p;\r\n  return montgomery({\r\n    P,\r\n    type: 'x25519',\r\n    powPminus2: (x: bigint): bigint => {\r\n      // x^(p-2) aka x^(2^255-21)\r\n      const { pow_p_5_8, b2 } = ed25519_pow_2_252_3(x);\r\n      return mod(pow2(pow_p_5_8, _3n, P) * b2, P);\r\n    },\r\n    adjustScalarBytes,\r\n  });\r\n})();\r\n\r\n/** @deprecated use `ed25519.utils.toMontgomery` */\r\nexport function edwardsToMontgomeryPub(edwardsPub: Hex): Uint8Array {\r\n  return ed25519.utils.toMontgomery(ensureBytes('pub', edwardsPub));\r\n}\r\n/** @deprecated use `ed25519.utils.toMontgomery` */\r\nexport const edwardsToMontgomery: typeof edwardsToMontgomeryPub = edwardsToMontgomeryPub;\r\n\r\n/** @deprecated use `ed25519.utils.toMontgomeryPriv` */\r\nexport function edwardsToMontgomeryPriv(edwardsPriv: Uint8Array): Uint8Array {\r\n  return ed25519.utils.toMontgomeryPriv(ensureBytes('pub', edwardsPriv));\r\n}\r\n\r\n// Hash To Curve Elligator2 Map (NOTE: different from ristretto255 elligator)\r\n// NOTE: very important part is usage of FpSqrtEven for ELL2_C1_EDWARDS, since\r\n// SageMath returns different root first and everything falls apart\r\n\r\nconst ELL2_C1 = /* @__PURE__ */ (() => (Fp.ORDER + _3n) / _8n)(); // 1. c1 = (q + 3) / 8       # Integer arithmetic\r\nconst ELL2_C2 = /* @__PURE__ */ (() => Fp.pow(_2n, ELL2_C1))(); // 2. c2 = 2^c1\r\nconst ELL2_C3 = /* @__PURE__ */ (() => Fp.sqrt(Fp.neg(Fp.ONE)))(); // 3. c3 = sqrt(-1)\r\n\r\n// prettier-ignore\r\nfunction map_to_curve_elligator2_curve25519(u: bigint) {\r\n  const ELL2_C4 = (Fp.ORDER - _5n) / _8n; // 4. c4 = (q - 5) / 8       # Integer arithmetic\r\n  const ELL2_J = BigInt(486662);\r\n\r\n  let tv1 = Fp.sqr(u);          //  1.  tv1 = u^2\r\n  tv1 = Fp.mul(tv1, _2n);       //  2.  tv1 = 2 * tv1\r\n  let xd = Fp.add(tv1, Fp.ONE); //  3.   xd = tv1 + 1         # Nonzero: -1 is square (mod p), tv1 is not\r\n  let x1n = Fp.neg(ELL2_J);     //  4.  x1n = -J              # x1 = x1n / xd = -J / (1 + 2 * u^2)\r\n  let tv2 = Fp.sqr(xd);         //  5.  tv2 = xd^2\r\n  let gxd = Fp.mul(tv2, xd);    //  6.  gxd = tv2 * xd        # gxd = xd^3\r\n  let gx1 = Fp.mul(tv1, ELL2_J);//  7.  gx1 = J * tv1         # x1n + J * xd\r\n  gx1 = Fp.mul(gx1, x1n);       //  8.  gx1 = gx1 * x1n       # x1n^2 + J * x1n * xd\r\n  gx1 = Fp.add(gx1, tv2);       //  9.  gx1 = gx1 + tv2       # x1n^2 + J * x1n * xd + xd^2\r\n  gx1 = Fp.mul(gx1, x1n);       //  10. gx1 = gx1 * x1n       # x1n^3 + J * x1n^2 * xd + x1n * xd^2\r\n  let tv3 = Fp.sqr(gxd);        //  11. tv3 = gxd^2\r\n  tv2 = Fp.sqr(tv3);            //  12. tv2 = tv3^2           # gxd^4\r\n  tv3 = Fp.mul(tv3, gxd);       //  13. tv3 = tv3 * gxd       # gxd^3\r\n  tv3 = Fp.mul(tv3, gx1);       //  14. tv3 = tv3 * gx1       # gx1 * gxd^3\r\n  tv2 = Fp.mul(tv2, tv3);       //  15. tv2 = tv2 * tv3       # gx1 * gxd^7\r\n  let y11 = Fp.pow(tv2, ELL2_C4); //  16. y11 = tv2^c4        # (gx1 * gxd^7)^((p - 5) / 8)\r\n  y11 = Fp.mul(y11, tv3);       //  17. y11 = y11 * tv3       # gx1*gxd^3*(gx1*gxd^7)^((p-5)/8)\r\n  let y12 = Fp.mul(y11, ELL2_C3); //  18. y12 = y11 * c3\r\n  tv2 = Fp.sqr(y11);            //  19. tv2 = y11^2\r\n  tv2 = Fp.mul(tv2, gxd);       //  20. tv2 = tv2 * gxd\r\n  let e1 = Fp.eql(tv2, gx1);    //  21.  e1 = tv2 == gx1\r\n  let y1 = Fp.cmov(y12, y11, e1); //  22.  y1 = CMOV(y12, y11, e1)  # If g(x1) is square, this is its sqrt\r\n  let x2n = Fp.mul(x1n, tv1);   //  23. x2n = x1n * tv1       # x2 = x2n / xd = 2 * u^2 * x1n / xd\r\n  let y21 = Fp.mul(y11, u);     //  24. y21 = y11 * u\r\n  y21 = Fp.mul(y21, ELL2_C2);   //  25. y21 = y21 * c2\r\n  let y22 = Fp.mul(y21, ELL2_C3); //  26. y22 = y21 * c3\r\n  let gx2 = Fp.mul(gx1, tv1);   //  27. gx2 = gx1 * tv1       # g(x2) = gx2 / gxd = 2 * u^2 * g(x1)\r\n  tv2 = Fp.sqr(y21);            //  28. tv2 = y21^2\r\n  tv2 = Fp.mul(tv2, gxd);       //  29. tv2 = tv2 * gxd\r\n  let e2 = Fp.eql(tv2, gx2);    //  30.  e2 = tv2 == gx2\r\n  let y2 = Fp.cmov(y22, y21, e2); //  31.  y2 = CMOV(y22, y21, e2)  # If g(x2) is square, this is its sqrt\r\n  tv2 = Fp.sqr(y1);             //  32. tv2 = y1^2\r\n  tv2 = Fp.mul(tv2, gxd);       //  33. tv2 = tv2 * gxd\r\n  let e3 = Fp.eql(tv2, gx1);    //  34.  e3 = tv2 == gx1\r\n  let xn = Fp.cmov(x2n, x1n, e3); //  35.  xn = CMOV(x2n, x1n, e3)  # If e3, x = x1, else x = x2\r\n  let y = Fp.cmov(y2, y1, e3);  //  36.   y = CMOV(y2, y1, e3)    # If e3, y = y1, else y = y2\r\n  let e4 = Fp.isOdd(y);         //  37.  e4 = sgn0(y) == 1        # Fix sign of y\r\n  y = Fp.cmov(y, Fp.neg(y), e3 !== e4); //  38.   y = CMOV(y, -y, e3 XOR e4)\r\n  return { xMn: xn, xMd: xd, yMn: y, yMd: _1n }; //  39. return (xn, xd, y, 1)\r\n}\r\n\r\nconst ELL2_C1_EDWARDS = /* @__PURE__ */ (() => FpSqrtEven(Fp, Fp.neg(BigInt(486664))))(); // sgn0(c1) MUST equal 0\r\nfunction map_to_curve_elligator2_edwards25519(u: bigint) {\r\n  const { xMn, xMd, yMn, yMd } = map_to_curve_elligator2_curve25519(u); //  1.  (xMn, xMd, yMn, yMd) =\r\n  // map_to_curve_elligator2_curve25519(u)\r\n  let xn = Fp.mul(xMn, yMd); //  2.  xn = xMn * yMd\r\n  xn = Fp.mul(xn, ELL2_C1_EDWARDS); //  3.  xn = xn * c1\r\n  let xd = Fp.mul(xMd, yMn); //  4.  xd = xMd * yMn    # xn / xd = c1 * xM / yM\r\n  let yn = Fp.sub(xMn, xMd); //  5.  yn = xMn - xMd\r\n  let yd = Fp.add(xMn, xMd); //  6.  yd = xMn + xMd    # (n / d - 1) / (n / d + 1) = (n - d) / (n + d)\r\n  let tv1 = Fp.mul(xd, yd); //  7. tv1 = xd * yd\r\n  let e = Fp.eql(tv1, Fp.ZERO); //  8.   e = tv1 == 0\r\n  xn = Fp.cmov(xn, Fp.ZERO, e); //  9.  xn = CMOV(xn, 0, e)\r\n  xd = Fp.cmov(xd, Fp.ONE, e); //  10. xd = CMOV(xd, 1, e)\r\n  yn = Fp.cmov(yn, Fp.ONE, e); //  11. yn = CMOV(yn, 1, e)\r\n  yd = Fp.cmov(yd, Fp.ONE, e); //  12. yd = CMOV(yd, 1, e)\r\n  const [xd_inv, yd_inv] = FpInvertBatch(Fp, [xd, yd], true); // batch division\r\n  return { x: Fp.mul(xn, xd_inv), y: Fp.mul(yn, yd_inv) }; //  13. return (xn, xd, yn, yd)\r\n}\r\n\r\n/** Hashing to ed25519 points / field. RFC 9380 methods. */\r\nexport const ed25519_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() =>\r\n  createHasher(\r\n    ed25519.Point,\r\n    (scalars: bigint[]) => map_to_curve_elligator2_edwards25519(scalars[0]),\r\n    {\r\n      DST: 'edwards25519_XMD:SHA-512_ELL2_RO_',\r\n      encodeDST: 'edwards25519_XMD:SHA-512_ELL2_NU_',\r\n      p: Fp.ORDER,\r\n      m: 1,\r\n      k: 128,\r\n      expand: 'xmd',\r\n      hash: sha512,\r\n    }\r\n  ))();\r\n\r\n// √(-1) aka √(a) aka 2^((p-1)/4)\r\nconst SQRT_M1 = ED25519_SQRT_M1;\r\n// √(ad - 1)\r\nconst SQRT_AD_MINUS_ONE = /* @__PURE__ */ BigInt(\r\n  '25063068953384623474111414158702152701244531502492656460079210482610430750235'\r\n);\r\n// 1 / √(a-d)\r\nconst INVSQRT_A_MINUS_D = /* @__PURE__ */ BigInt(\r\n  '54469307008909316920995813868745141605393597292927456921205312896311721017578'\r\n);\r\n// 1-d²\r\nconst ONE_MINUS_D_SQ = /* @__PURE__ */ BigInt(\r\n  '1159843021668779879193775521855586647937357759715417654439879720876111806838'\r\n);\r\n// (d-1)²\r\nconst D_MINUS_ONE_SQ = /* @__PURE__ */ BigInt(\r\n  '40440834346308536858101042469323190826248399146238708352240133220865137265952'\r\n);\r\n// Calculates 1/√(number)\r\nconst invertSqrt = (number: bigint) => uvRatio(_1n, number);\r\n\r\nconst MAX_255B = /* @__PURE__ */ BigInt(\r\n  '0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\r\n);\r\nconst bytes255ToNumberLE = (bytes: Uint8Array) =>\r\n  ed25519.CURVE.Fp.create(bytesToNumberLE(bytes) & MAX_255B);\r\n\r\ntype ExtendedPoint = EdwardsPoint;\r\n\r\n/**\r\n * Computes Elligator map for Ristretto255.\r\n * Described in [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#appendix-B) and on\r\n * the [website](https://ristretto.group/formulas/elligator.html).\r\n */\r\nfunction calcElligatorRistrettoMap(r0: bigint): ExtendedPoint {\r\n  const { d } = ed25519.CURVE;\r\n  const P = ed25519.CURVE.Fp.ORDER;\r\n  const mod = ed25519.CURVE.Fp.create;\r\n  const r = mod(SQRT_M1 * r0 * r0); // 1\r\n  const Ns = mod((r + _1n) * ONE_MINUS_D_SQ); // 2\r\n  let c = BigInt(-1); // 3\r\n  const D = mod((c - d * r) * mod(r + d)); // 4\r\n  let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D); // 5\r\n  let s_ = mod(s * r0); // 6\r\n  if (!isNegativeLE(s_, P)) s_ = mod(-s_);\r\n  if (!Ns_D_is_sq) s = s_; // 7\r\n  if (!Ns_D_is_sq) c = r; // 8\r\n  const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D); // 9\r\n  const s2 = s * s;\r\n  const W0 = mod((s + s) * D); // 10\r\n  const W1 = mod(Nt * SQRT_AD_MINUS_ONE); // 11\r\n  const W2 = mod(_1n - s2); // 12\r\n  const W3 = mod(_1n + s2); // 13\r\n  return new ed25519.Point(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\r\n}\r\n\r\nfunction ristretto255_map(bytes: Uint8Array): _RistrettoPoint {\r\n  abytes(bytes, 64);\r\n  const r1 = bytes255ToNumberLE(bytes.subarray(0, 32));\r\n  const R1 = calcElligatorRistrettoMap(r1);\r\n  const r2 = bytes255ToNumberLE(bytes.subarray(32, 64));\r\n  const R2 = calcElligatorRistrettoMap(r2);\r\n  return new _RistrettoPoint(R1.add(R2));\r\n}\r\n\r\n/**\r\n * Wrapper over Edwards Point for ristretto255.\r\n *\r\n * Each ed25519/ExtendedPoint has 8 different equivalent points. This can be\r\n * a source of bugs for protocols like ring signatures. Ristretto was created to solve this.\r\n * Ristretto point operates in X:Y:Z:T extended coordinates like ExtendedPoint,\r\n * but it should work in its own namespace: do not combine those two.\r\n * See [RFC9496](https://www.rfc-editor.org/rfc/rfc9496).\r\n */\r\nclass _RistrettoPoint extends PrimeEdwardsPoint<_RistrettoPoint> {\r\n  // Do NOT change syntax: the following gymnastics is done,\r\n  // because typescript strips comments, which makes bundlers disable tree-shaking.\r\n  // prettier-ignore\r\n  static BASE: _RistrettoPoint =\r\n    /* @__PURE__ */ (() => new _RistrettoPoint(ed25519.Point.BASE))();\r\n  // prettier-ignore\r\n  static ZERO: _RistrettoPoint =\r\n    /* @__PURE__ */ (() => new _RistrettoPoint(ed25519.Point.ZERO))();\r\n  // prettier-ignore\r\n  static Fp: IField<bigint> =\r\n    /* @__PURE__ */ Fp;\r\n  // prettier-ignore\r\n  static Fn: IField<bigint> =\r\n    /* @__PURE__ */ Fn;\r\n\r\n  constructor(ep: ExtendedPoint) {\r\n    super(ep);\r\n  }\r\n\r\n  static fromAffine(ap: AffinePoint<bigint>): _RistrettoPoint {\r\n    return new _RistrettoPoint(ed25519.Point.fromAffine(ap));\r\n  }\r\n\r\n  protected assertSame(other: _RistrettoPoint): void {\r\n    if (!(other instanceof _RistrettoPoint)) throw new Error('RistrettoPoint expected');\r\n  }\r\n\r\n  protected init(ep: EdwardsPoint): _RistrettoPoint {\r\n    return new _RistrettoPoint(ep);\r\n  }\r\n\r\n  /** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\r\n  static hashToCurve(hex: Hex): _RistrettoPoint {\r\n    return ristretto255_map(ensureBytes('ristrettoHash', hex, 64));\r\n  }\r\n\r\n  static fromBytes(bytes: Uint8Array): _RistrettoPoint {\r\n    abytes(bytes, 32);\r\n    const { a, d } = ed25519.CURVE;\r\n    const P = Fp.ORDER;\r\n    const mod = Fp.create;\r\n    const s = bytes255ToNumberLE(bytes);\r\n    // 1. Check that s_bytes is the canonical encoding of a field element, or else abort.\r\n    // 3. Check that s is non-negative, or else abort\r\n    if (!equalBytes(numberToBytesLE(s, 32), bytes) || isNegativeLE(s, P))\r\n      throw new Error('invalid ristretto255 encoding 1');\r\n    const s2 = mod(s * s);\r\n    const u1 = mod(_1n + a * s2); // 4 (a is -1)\r\n    const u2 = mod(_1n - a * s2); // 5\r\n    const u1_2 = mod(u1 * u1);\r\n    const u2_2 = mod(u2 * u2);\r\n    const v = mod(a * d * u1_2 - u2_2); // 6\r\n    const { isValid, value: I } = invertSqrt(mod(v * u2_2)); // 7\r\n    const Dx = mod(I * u2); // 8\r\n    const Dy = mod(I * Dx * v); // 9\r\n    let x = mod((s + s) * Dx); // 10\r\n    if (isNegativeLE(x, P)) x = mod(-x); // 10\r\n    const y = mod(u1 * Dy); // 11\r\n    const t = mod(x * y); // 12\r\n    if (!isValid || isNegativeLE(t, P) || y === _0n)\r\n      throw new Error('invalid ristretto255 encoding 2');\r\n    return new _RistrettoPoint(new ed25519.Point(x, y, _1n, t));\r\n  }\r\n\r\n  /**\r\n   * Converts ristretto-encoded string to ristretto point.\r\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-decode).\r\n   * @param hex Ristretto-encoded 32 bytes. Not every 32-byte string is valid ristretto encoding\r\n   */\r\n  static fromHex(hex: Hex): _RistrettoPoint {\r\n    return _RistrettoPoint.fromBytes(ensureBytes('ristrettoHex', hex, 32));\r\n  }\r\n\r\n  static msm(points: _RistrettoPoint[], scalars: bigint[]): _RistrettoPoint {\r\n    return pippenger(_RistrettoPoint, ed25519.Point.Fn, points, scalars);\r\n  }\r\n\r\n  /**\r\n   * Encodes ristretto point to Uint8Array.\r\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-encode).\r\n   */\r\n  toBytes(): Uint8Array {\r\n    let { X, Y, Z, T } = this.ep;\r\n    const P = Fp.ORDER;\r\n    const mod = Fp.create;\r\n    const u1 = mod(mod(Z + Y) * mod(Z - Y)); // 1\r\n    const u2 = mod(X * Y); // 2\r\n    // Square root always exists\r\n    const u2sq = mod(u2 * u2);\r\n    const { value: invsqrt } = invertSqrt(mod(u1 * u2sq)); // 3\r\n    const D1 = mod(invsqrt * u1); // 4\r\n    const D2 = mod(invsqrt * u2); // 5\r\n    const zInv = mod(D1 * D2 * T); // 6\r\n    let D: bigint; // 7\r\n    if (isNegativeLE(T * zInv, P)) {\r\n      let _x = mod(Y * SQRT_M1);\r\n      let _y = mod(X * SQRT_M1);\r\n      X = _x;\r\n      Y = _y;\r\n      D = mod(D1 * INVSQRT_A_MINUS_D);\r\n    } else {\r\n      D = D2; // 8\r\n    }\r\n    if (isNegativeLE(X * zInv, P)) Y = mod(-Y); // 9\r\n    let s = mod((Z - Y) * D); // 10 (check footer's note, no sqrt(-a))\r\n    if (isNegativeLE(s, P)) s = mod(-s);\r\n    return numberToBytesLE(s, 32); // 11\r\n  }\r\n\r\n  /**\r\n   * Compares two Ristretto points.\r\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-equals).\r\n   */\r\n  equals(other: _RistrettoPoint): boolean {\r\n    this.assertSame(other);\r\n    const { X: X1, Y: Y1 } = this.ep;\r\n    const { X: X2, Y: Y2 } = other.ep;\r\n    const mod = Fp.create;\r\n    // (x1 * y2 == y1 * x2) | (y1 * y2 == x1 * x2)\r\n    const one = mod(X1 * Y2) === mod(Y1 * X2);\r\n    const two = mod(Y1 * Y2) === mod(X1 * X2);\r\n    return one || two;\r\n  }\r\n\r\n  is0(): boolean {\r\n    return this.equals(_RistrettoPoint.ZERO);\r\n  }\r\n}\r\n\r\n/** @deprecated use `ristretto255.Point` */\r\nexport const RistrettoPoint: typeof _RistrettoPoint = _RistrettoPoint;\r\n\r\nexport const ristretto255: {\r\n  Point: typeof _RistrettoPoint;\r\n} = { Point: _RistrettoPoint };\r\n\r\n/** Hashing to ristretto255 points / field. RFC 9380 methods. */\r\nexport const ristretto255_hasher: H2CHasherBase<bigint> = {\r\n  hashToCurve(msg: Uint8Array, options?: htfBasicOpts): _RistrettoPoint {\r\n    const DST = options?.DST || 'ristretto255_XMD:SHA-512_R255MAP_RO_';\r\n    return ristretto255_map(expand_message_xmd(msg, DST, 64, sha512));\r\n  },\r\n  hashToScalar(msg: Uint8Array, options: htfBasicOpts = { DST: _DST_scalar }) {\r\n    return Fn.create(bytesToNumberLE(expand_message_xmd(msg, options.DST, 64, sha512)));\r\n  },\r\n};\r\n\r\n// export const ristretto255_oprf: OPRF = createORPF({\r\n//   name: 'ristretto255-SHA512',\r\n//   Point: RistrettoPoint,\r\n//   hash: sha512,\r\n//   hashToGroup: ristretto255_hasher.hashToCurve,\r\n//   hashToScalar: ristretto255_hasher.hashToScalar,\r\n// });\r\n\r\n/** @deprecated use `import { ed25519_hasher } from '@noble/curves/ed25519.js';` */\r\nexport const hashToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() => ed25519_hasher.hashToCurve)();\r\n/** @deprecated use `import { ed25519_hasher } from '@noble/curves/ed25519.js';` */\r\nexport const encodeToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\r\n  ed25519_hasher.encodeToCurve)();\r\ntype RistHasher = (msg: Uint8Array, options: htfBasicOpts) => _RistrettoPoint;\r\n/** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\r\nexport const hashToRistretto255: RistHasher = /* @__PURE__ */ (() =>\r\n  ristretto255_hasher.hashToCurve as RistHasher)();\r\n/** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\r\nexport const hash_to_ristretto255: RistHasher = /* @__PURE__ */ (() =>\r\n  ristretto255_hasher.hashToCurve as RistHasher)();\r\n\r\n/**\r\n * Weird / bogus points, useful for debugging.\r\n * All 8 ed25519 points of 8-torsion subgroup can be generated from the point\r\n * T = `26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05`.\r\n * ⟨T⟩ = { O, T, 2T, 3T, 4T, 5T, 6T, 7T }\r\n */\r\nexport const ED25519_TORSION_SUBGROUP: string[] = [\r\n  '0100000000000000000000000000000000000000000000000000000000000000',\r\n  'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\r\n  '0000000000000000000000000000000000000000000000000000000000000080',\r\n  '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\r\n  'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\r\n  '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\r\n  '0000000000000000000000000000000000000000000000000000000000000000',\r\n  'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\r\n];\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bcs } from '../bcs/index.js';\n\nexport type IntentScope = Exclude<keyof typeof bcs.IntentScope.$inferType, '$kind'>;\n/**\n * Inserts a domain separator for a message that is being signed\n */\nexport function messageWithIntent(scope: IntentScope, message: Uint8Array) {\n\treturn bcs\n\t\t.IntentMessage(bcs.bytes(message.length))\n\t\t.serialize({\n\t\t\tintent: {\n\t\t\t\tscope: { [scope as 'PersonalMessage']: true },\n\t\t\t\tversion: { V0: true },\n\t\t\t\tappId: { Sui: true },\n\t\t\t},\n\t\t\tvalue: message,\n\t\t})\n\t\t.toBytes();\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport const SIGNATURE_SCHEME_TO_FLAG = {\n\tED25519: 0x00,\n\tSecp256k1: 0x01,\n\tSecp256r1: 0x02,\n\tMultiSig: 0x03,\n\tZkLogin: 0x05,\n\tPasskey: 0x06,\n} as const;\n\nexport const SIGNATURE_SCHEME_TO_SIZE = {\n\tED25519: 32,\n\tSecp256k1: 33,\n\tSecp256r1: 33,\n\tPasskey: 33,\n};\n\nexport const SIGNATURE_FLAG_TO_SCHEME = {\n\t0x00: 'ED25519',\n\t0x01: 'Secp256k1',\n\t0x02: 'Secp256r1',\n\t0x03: 'MultiSig',\n\t0x05: 'ZkLogin',\n\t0x06: 'Passkey',\n} as const;\n\nexport type SignatureScheme =\n\t| 'ED25519'\n\t| 'Secp256k1'\n\t| 'Secp256r1'\n\t| 'MultiSig'\n\t| 'ZkLogin'\n\t| 'Passkey';\n\nexport type SignatureFlag = keyof typeof SIGNATURE_FLAG_TO_SCHEME;\n", "/**\r\n * HMAC: RFC2104 message authentication code.\r\n * @module\r\n */\r\nimport { abytes, aexists, ahash, clean, Hash, toBytes, type CHash, type Input } from './utils.ts';\r\n\r\nexport class HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\r\n  oHash: T;\r\n  iHash: T;\r\n  blockLen: number;\r\n  outputLen: number;\r\n  private finished = false;\r\n  private destroyed = false;\r\n\r\n  constructor(hash: CHash, _key: Input) {\r\n    super();\r\n    ahash(hash);\r\n    const key = toBytes(_key);\r\n    this.iHash = hash.create() as T;\r\n    if (typeof this.iHash.update !== 'function')\r\n      throw new Error('Expected instance of class which extends utils.Hash');\r\n    this.blockLen = this.iHash.blockLen;\r\n    this.outputLen = this.iHash.outputLen;\r\n    const blockLen = this.blockLen;\r\n    const pad = new Uint8Array(blockLen);\r\n    // blockLen can be bigger than outputLen\r\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\r\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\r\n    this.iHash.update(pad);\r\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\r\n    this.oHash = hash.create() as T;\r\n    // Undo internal XOR && apply outer XOR\r\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\r\n    this.oHash.update(pad);\r\n    clean(pad);\r\n  }\r\n  update(buf: Input): this {\r\n    aexists(this);\r\n    this.iHash.update(buf);\r\n    return this;\r\n  }\r\n  digestInto(out: Uint8Array): void {\r\n    aexists(this);\r\n    abytes(out, this.outputLen);\r\n    this.finished = true;\r\n    this.iHash.digestInto(out);\r\n    this.oHash.update(out);\r\n    this.oHash.digestInto(out);\r\n    this.destroy();\r\n  }\r\n  digest(): Uint8Array {\r\n    const out = new Uint8Array(this.oHash.outputLen);\r\n    this.digestInto(out);\r\n    return out;\r\n  }\r\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\r\n    // Create new instance without calling constructor since key already in state and we don't know it.\r\n    to ||= Object.create(Object.getPrototypeOf(this), {});\r\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\r\n    to = to as this;\r\n    to.finished = finished;\r\n    to.destroyed = destroyed;\r\n    to.blockLen = blockLen;\r\n    to.outputLen = outputLen;\r\n    to.oHash = oHash._cloneInto(to.oHash);\r\n    to.iHash = iHash._cloneInto(to.iHash);\r\n    return to;\r\n  }\r\n  clone(): HMAC<T> {\r\n    return this._cloneInto();\r\n  }\r\n  destroy(): void {\r\n    this.destroyed = true;\r\n    this.oHash.destroy();\r\n    this.iHash.destroy();\r\n  }\r\n}\r\n\r\n/**\r\n * HMAC: RFC2104 message authentication code.\r\n * @param hash - function that would be used e.g. sha256\r\n * @param key - message key\r\n * @param message - message data\r\n * @example\r\n * import { hmac } from '@noble/hashes/hmac';\r\n * import { sha256 } from '@noble/hashes/sha2';\r\n * const mac1 = hmac(sha256, 'key', 'message');\r\n */\r\nexport const hmac: {\r\n  (hash: CHash, key: Input, message: Input): Uint8Array;\r\n  create(hash: CHash, key: Input): HMAC<any>;\r\n} = (hash: CHash, key: Input, message: Input): Uint8Array =>\r\n  new HMAC<any>(hash, key).update(message).digest();\r\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\r\n", "/**\r\n * Short Weierstrass curve methods. The formula is: y² = x³ + ax + b.\r\n *\r\n * ### Design rationale for types\r\n *\r\n * * Interaction between classes from different curves should fail:\r\n *   `k256.Point.BASE.add(p256.Point.BASE)`\r\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\r\n * * Different calls of `curve()` would return different classes -\r\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\r\n *   it won't affect others\r\n *\r\n * TypeScript can't infer types for classes created inside a function. Classes is one instance\r\n * of nominative types in TypeScript and interfaces only check for shape, so it's hard to create\r\n * unique type for every function call.\r\n *\r\n * We can use generic types via some param, like curve opts, but that would:\r\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\r\n *     which is hard to debug.\r\n *     2. Params can be generic and we can't enforce them to be constant value:\r\n *     if somebody creates curve from non-constant params,\r\n *     it would be allowed to interact with other curves with non-constant params\r\n *\r\n * @todo https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { hmac } from '@noble/hashes/hmac.js';\r\nimport { ahash } from '@noble/hashes/utils';\r\nimport {\r\n  _validateObject,\r\n  abool,\r\n  abytes,\r\n  aInRange,\r\n  bitLen,\r\n  bitMask,\r\n  bytesToHex,\r\n  bytesToNumberBE,\r\n  concatBytes,\r\n  createHmacDrbg,\r\n  ensureBytes,\r\n  hexToBytes,\r\n  inRange,\r\n  isBytes,\r\n  memoized,\r\n  numberToHexUnpadded,\r\n  randomBytes,\r\n  type CHash,\r\n  type Hex,\r\n  type PrivKey,\r\n} from '../utils.ts';\r\nimport {\r\n  _createCurveFields,\r\n  mulEndoUnsafe,\r\n  negateCt,\r\n  normalizeZ,\r\n  pippenger,\r\n  wNAF,\r\n  type AffinePoint,\r\n  type BasicCurve,\r\n  type CurveInfo,\r\n  type CurvePoint,\r\n  type CurvePointCons,\r\n} from './curve.ts';\r\nimport {\r\n  Field,\r\n  FpInvertBatch,\r\n  getMinHashLength,\r\n  mapHashToField,\r\n  validateField,\r\n  type IField,\r\n  type NLength,\r\n} from './modular.ts';\r\n\r\nexport type { AffinePoint };\r\nexport type HmacFnSync = (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array;\r\n\r\ntype EndoBasis = [[bigint, bigint], [bigint, bigint]];\r\n/**\r\n * When Weierstrass curve has `a=0`, it becomes Koblitz curve.\r\n * Koblitz curves allow using **efficiently-computable GLV endomorphism ψ**.\r\n * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\r\n * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\r\n *\r\n * Endomorphism consists of beta, lambda and splitScalar:\r\n *\r\n * 1. GLV endomorphism ψ transforms a point: `P = (x, y) ↦ ψ(P) = (β·x mod p, y)`\r\n * 2. GLV scalar decomposition transforms a scalar: `k ≡ k₁ + k₂·λ (mod n)`\r\n * 3. Then these are combined: `k·P = k₁·P + k₂·ψ(P)`\r\n * 4. Two 128-bit point-by-scalar multiplications + one point addition is faster than\r\n *    one 256-bit multiplication.\r\n *\r\n * where\r\n * * beta: β ∈ Fₚ with β³ = 1, β ≠ 1\r\n * * lambda: λ ∈ Fₙ with λ³ = 1, λ ≠ 1\r\n * * splitScalar decomposes k ↦ k₁, k₂, by using reduced basis vectors.\r\n *   Gauss lattice reduction calculates them from initial basis vectors `(n, 0), (-λ, 0)`\r\n *\r\n * Check out `test/misc/endomorphism.js` and\r\n * [gist](https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066).\r\n */\r\nexport type EndomorphismOpts = {\r\n  beta: bigint;\r\n  basises?: EndoBasis;\r\n  splitScalar?: (k: bigint) => { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\r\n};\r\nexport type BasicWCurve<T> = BasicCurve<T> & {\r\n  // Params: a, b\r\n  a: T;\r\n  b: T;\r\n\r\n  // Optional params\r\n  allowedPrivateKeyLengths?: readonly number[]; // for P521\r\n  wrapPrivateKey?: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\r\n  endo?: EndomorphismOpts;\r\n  // When a cofactor != 1, there can be an effective methods to:\r\n  // 1. Determine whether a point is torsion-free\r\n  isTorsionFree?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\r\n  // 2. Clear torsion component\r\n  clearCofactor?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\r\n};\r\n\r\n// We construct basis in such way that den is always positive and equals n, but num sign depends on basis (not on secret value)\r\nconst divNearest = (num: bigint, den: bigint) => (num + (num >= 0 ? den : -den) / _2n) / den;\r\n\r\nexport type ScalarEndoParts = { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\r\n\r\n/**\r\n * Splits scalar for GLV endomorphism.\r\n */\r\nexport function _splitEndoScalar(k: bigint, basis: EndoBasis, n: bigint): ScalarEndoParts {\r\n  // Split scalar into two such that part is ~half bits: `abs(part) < sqrt(N)`\r\n  // Since part can be negative, we need to do this on point.\r\n  // TODO: verifyScalar function which consumes lambda\r\n  const [[a1, b1], [a2, b2]] = basis;\r\n  const c1 = divNearest(b2 * k, n);\r\n  const c2 = divNearest(-b1 * k, n);\r\n  // |k1|/|k2| is < sqrt(N), but can be negative.\r\n  // If we do `k1 mod N`, we'll get big scalar (`> sqrt(N)`): so, we do cheaper negation instead.\r\n  let k1 = k - c1 * a1 - c2 * a2;\r\n  let k2 = -c1 * b1 - c2 * b2;\r\n  const k1neg = k1 < _0n;\r\n  const k2neg = k2 < _0n;\r\n  if (k1neg) k1 = -k1;\r\n  if (k2neg) k2 = -k2;\r\n  // Double check that resulting scalar less than half bits of N: otherwise wNAF will fail.\r\n  // This should only happen on wrong basises. Also, math inside is too complex and I don't trust it.\r\n  const MAX_NUM = bitMask(Math.ceil(bitLen(n) / 2)) + _1n; // Half bits of N\r\n  if (k1 < _0n || k1 >= MAX_NUM || k2 < _0n || k2 >= MAX_NUM) {\r\n    throw new Error('splitScalar (endomorphism): failed, k=' + k);\r\n  }\r\n  return { k1neg, k1, k2neg, k2 };\r\n}\r\n\r\nexport type ECDSASigFormat = 'compact' | 'der';\r\nexport type Entropy = Hex | boolean;\r\nexport type SignOpts = Partial<{\r\n  lowS: boolean;\r\n  extraEntropy: Entropy;\r\n  prehash: boolean;\r\n  format: ECDSASigFormat | 'js';\r\n}>;\r\nexport type VerOpts = Partial<{\r\n  lowS: boolean;\r\n  prehash: boolean;\r\n  format: ECDSASigFormat | 'js' | undefined;\r\n}>;\r\n\r\nfunction validateSigVerOpts(opts: SignOpts | VerOpts) {\r\n  if (opts.lowS !== undefined) abool('lowS', opts.lowS);\r\n  if (opts.prehash !== undefined) abool('prehash', opts.prehash);\r\n}\r\n\r\n/** Instance methods for 3D XYZ projective points. */\r\nexport interface WeierstrassPoint<T> extends CurvePoint<T, WeierstrassPoint<T>> {\r\n  /** projective X coordinate. Different from affine x. */\r\n  readonly X: T;\r\n  /** projective Y coordinate. Different from affine y. */\r\n  readonly Y: T;\r\n  /** projective z coordinate */\r\n  readonly Z: T;\r\n  /** affine x coordinate. Different from projective X. */\r\n  get x(): T;\r\n  /** affine y coordinate. Different from projective Y. */\r\n  get y(): T;\r\n  /** Encodes point using IEEE P1363 (DER) encoding. First byte is 2/3/4. Default = isCompressed. */\r\n  toBytes(isCompressed?: boolean): Uint8Array;\r\n  toHex(isCompressed?: boolean): string;\r\n\r\n  /** @deprecated use .X */\r\n  readonly px: T;\r\n  /** @deprecated use .Y */\r\n  readonly py: T;\r\n  /** @deprecated use .Z */\r\n  readonly pz: T;\r\n  /** @deprecated use `toBytes` */\r\n  toRawBytes(isCompressed?: boolean): Uint8Array;\r\n  /** @deprecated use `multiplyUnsafe` */\r\n  multiplyAndAddUnsafe(\r\n    Q: WeierstrassPoint<T>,\r\n    a: bigint,\r\n    b: bigint\r\n  ): WeierstrassPoint<T> | undefined;\r\n  /** @deprecated use `p.y % 2n === 0n` */\r\n  hasEvenY(): boolean;\r\n  /** @deprecated use `p.precompute(windowSize)` */\r\n  _setWindowSize(windowSize: number): void;\r\n}\r\n\r\n/** Static methods for 3D XYZ projective points. */\r\nexport interface WeierstrassPointCons<T> extends CurvePointCons<T, WeierstrassPoint<T>> {\r\n  /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\r\n  new (X: T, Y: T, Z: T): WeierstrassPoint<T>;\r\n  /** @deprecated use `Point.BASE.multiply(Point.Fn.fromBytes(privateKey))` */\r\n  fromPrivateKey(privateKey: PrivKey): WeierstrassPoint<T>;\r\n  /** @deprecated use `import { normalizeZ } from '@noble/curves/abstract/curve.js';` */\r\n  normalizeZ(points: WeierstrassPoint<T>[]): WeierstrassPoint<T>[];\r\n  /** @deprecated use `import { pippenger } from '@noble/curves/abstract/curve.js';` */\r\n  msm(points: WeierstrassPoint<T>[], scalars: bigint[]): WeierstrassPoint<T>;\r\n}\r\n\r\n/** @deprecated use WeierstrassPoint */\r\nexport type ProjPointType<T> = WeierstrassPoint<T>;\r\n/** @deprecated use WeierstrassPointCons */\r\nexport type ProjConstructor<T> = WeierstrassPointCons<T>;\r\n\r\n// TODO: remove\r\nexport type CurvePointsType<T> = BasicWCurve<T> & {\r\n  fromBytes?: (bytes: Uint8Array) => AffinePoint<T>;\r\n  toBytes?: (\r\n    c: WeierstrassPointCons<T>,\r\n    point: WeierstrassPoint<T>,\r\n    isCompressed: boolean\r\n  ) => Uint8Array;\r\n};\r\n\r\n// LegacyWeierstrassOpts\r\nexport type CurvePointsTypeWithLength<T> = Readonly<CurvePointsType<T> & Partial<NLength>>;\r\n\r\n// LegacyWeierstrass\r\nexport type CurvePointsRes<T> = {\r\n  Point: WeierstrassPointCons<T>;\r\n\r\n  /** @deprecated the property will be removed in next release */\r\n  CURVE: CurvePointsType<T>;\r\n  /** @deprecated use `Point` */\r\n  ProjectivePoint: WeierstrassPointCons<T>;\r\n  /** @deprecated use `Point.Fn.fromBytes(privateKey)` */\r\n  normPrivateKeyToScalar: (key: PrivKey) => bigint;\r\n  /** @deprecated */\r\n  weierstrassEquation: (x: T) => T;\r\n  /** @deprecated use `Point.Fn.isValidNot0(num)` */\r\n  isWithinCurveOrder: (num: bigint) => boolean;\r\n};\r\n\r\n// Aliases to legacy types\r\n// export type CurveType = LegacyECDSAOpts;\r\n// export type CurveFn = LegacyECDSA;\r\n// export type CurvePointsRes<T> = LegacyWeierstrass<T>;\r\n// export type CurvePointsType<T> = LegacyWeierstrassOpts<T>;\r\n// export type CurvePointsTypeWithLength<T> = LegacyWeierstrassOpts<T>;\r\n// export type BasicWCurve<T> = LegacyWeierstrassOpts<T>;\r\n\r\n/**\r\n * Weierstrass curve options.\r\n *\r\n * * p: prime characteristic (order) of finite field, in which arithmetics is done\r\n * * n: order of prime subgroup a.k.a total amount of valid curve points\r\n * * h: cofactor, usually 1. h*n is group order; n is subgroup order\r\n * * a: formula param, must be in field of p\r\n * * b: formula param, must be in field of p\r\n * * Gx: x coordinate of generator point a.k.a. base point\r\n * * Gy: y coordinate of generator point\r\n */\r\nexport type WeierstrassOpts<T> = Readonly<{\r\n  p: bigint;\r\n  n: bigint;\r\n  h: bigint;\r\n  a: T;\r\n  b: T;\r\n  Gx: T;\r\n  Gy: T;\r\n}>;\r\n\r\n// When a cofactor != 1, there can be an effective methods to:\r\n// 1. Determine whether a point is torsion-free\r\n// 2. Clear torsion component\r\n// wrapPrivateKey: bls12-381 requires mod(n) instead of rejecting keys >= n\r\nexport type WeierstrassExtraOpts<T> = Partial<{\r\n  Fp: IField<T>;\r\n  Fn: IField<bigint>;\r\n  allowInfinityPoint: boolean;\r\n  endo: EndomorphismOpts;\r\n  isTorsionFree: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\r\n  clearCofactor: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\r\n  fromBytes: (bytes: Uint8Array) => AffinePoint<T>;\r\n  toBytes: (\r\n    c: WeierstrassPointCons<T>,\r\n    point: WeierstrassPoint<T>,\r\n    isCompressed: boolean\r\n  ) => Uint8Array;\r\n}>;\r\n\r\n/**\r\n * Options for ECDSA signatures over a Weierstrass curve.\r\n */\r\nexport type ECDSAOpts = Partial<{\r\n  lowS: boolean;\r\n  hmac: HmacFnSync;\r\n  randomBytes: (bytesLength?: number) => Uint8Array;\r\n  bits2int: (bytes: Uint8Array) => bigint;\r\n  bits2int_modN: (bytes: Uint8Array) => bigint;\r\n}>;\r\n\r\n/** ECDSA is only supported for prime fields, not Fp2 (extension fields). */\r\nexport interface ECDSA {\r\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\r\n  getPublicKey: (secretKey: PrivKey, isCompressed?: boolean) => Uint8Array;\r\n  sign: (msgHash: Hex, secretKey: PrivKey, opts?: SignOpts) => ECDSASigRecovered;\r\n  verify: (signature: Hex | SignatureLike, msgHash: Hex, publicKey: Hex, opts?: VerOpts) => boolean;\r\n  getSharedSecret: (secretKeyA: PrivKey, publicKeyB: Hex, isCompressed?: boolean) => Uint8Array;\r\n  Point: WeierstrassPointCons<bigint>;\r\n  Signature: ECDSASignatureCons;\r\n  utils: {\r\n    isValidSecretKey: (secretKey: PrivKey) => boolean;\r\n    isValidPublicKey: (publicKey: Uint8Array, isCompressed?: boolean) => boolean;\r\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\r\n\r\n    /** @deprecated use `randomSecretKey` */\r\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\r\n    /** @deprecated use `isValidSecretKey` */\r\n    isValidPrivateKey: (secretKey: PrivKey) => boolean;\r\n    /** @deprecated use `Point.Fn.fromBytes()` */\r\n    normPrivateKeyToScalar: (key: PrivKey) => bigint;\r\n    /** @deprecated use `point.precompute()` */\r\n    precompute: (windowSize?: number, point?: WeierstrassPoint<bigint>) => WeierstrassPoint<bigint>;\r\n  };\r\n  info: CurveInfo;\r\n}\r\nexport class DERErr extends Error {\r\n  constructor(m = '') {\r\n    super(m);\r\n  }\r\n}\r\nexport type IDER = {\r\n  // asn.1 DER encoding utils\r\n  Err: typeof DERErr;\r\n  // Basic building block is TLV (Tag-Length-Value)\r\n  _tlv: {\r\n    encode: (tag: number, data: string) => string;\r\n    // v - value, l - left bytes (unparsed)\r\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array };\r\n  };\r\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\r\n  // since we always use positive integers here. It must always be empty:\r\n  // - add zero byte if exists\r\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\r\n  _int: {\r\n    encode(num: bigint): string;\r\n    decode(data: Uint8Array): bigint;\r\n  };\r\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint };\r\n  hexFromSig(sig: { r: bigint; s: bigint }): string;\r\n};\r\n/**\r\n * ASN.1 DER encoding utilities. ASN is very complex & fragile. Format:\r\n *\r\n *     [0x30 (SEQUENCE), bytelength, 0x02 (INTEGER), intLength, R, 0x02 (INTEGER), intLength, S]\r\n *\r\n * Docs: https://letsencrypt.org/docs/a-warm-welcome-to-asn1-and-der/, https://luca.ntop.org/Teaching/Appunti/asn1.html\r\n */\r\nexport const DER: IDER = {\r\n  // asn.1 DER encoding utils\r\n  Err: DERErr,\r\n  // Basic building block is TLV (Tag-Length-Value)\r\n  _tlv: {\r\n    encode: (tag: number, data: string): string => {\r\n      const { Err: E } = DER;\r\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\r\n      if (data.length & 1) throw new E('tlv.encode: unpadded data');\r\n      const dataLen = data.length / 2;\r\n      const len = numberToHexUnpadded(dataLen);\r\n      if ((len.length / 2) & 0b1000_0000) throw new E('tlv.encode: long form length too big');\r\n      // length of length with long form flag\r\n      const lenLen = dataLen > 127 ? numberToHexUnpadded((len.length / 2) | 0b1000_0000) : '';\r\n      const t = numberToHexUnpadded(tag);\r\n      return t + lenLen + len + data;\r\n    },\r\n    // v - value, l - left bytes (unparsed)\r\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array } {\r\n      const { Err: E } = DER;\r\n      let pos = 0;\r\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\r\n      if (data.length < 2 || data[pos++] !== tag) throw new E('tlv.decode: wrong tlv');\r\n      const first = data[pos++];\r\n      const isLong = !!(first & 0b1000_0000); // First bit of first length byte is flag for short/long form\r\n      let length = 0;\r\n      if (!isLong) length = first;\r\n      else {\r\n        // Long form: [longFlag(1bit), lengthLength(7bit), length (BE)]\r\n        const lenLen = first & 0b0111_1111;\r\n        if (!lenLen) throw new E('tlv.decode(long): indefinite length not supported');\r\n        if (lenLen > 4) throw new E('tlv.decode(long): byte length is too big'); // this will overflow u32 in js\r\n        const lengthBytes = data.subarray(pos, pos + lenLen);\r\n        if (lengthBytes.length !== lenLen) throw new E('tlv.decode: length bytes not complete');\r\n        if (lengthBytes[0] === 0) throw new E('tlv.decode(long): zero leftmost byte');\r\n        for (const b of lengthBytes) length = (length << 8) | b;\r\n        pos += lenLen;\r\n        if (length < 128) throw new E('tlv.decode(long): not minimal encoding');\r\n      }\r\n      const v = data.subarray(pos, pos + length);\r\n      if (v.length !== length) throw new E('tlv.decode: wrong value length');\r\n      return { v, l: data.subarray(pos + length) };\r\n    },\r\n  },\r\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\r\n  // since we always use positive integers here. It must always be empty:\r\n  // - add zero byte if exists\r\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\r\n  _int: {\r\n    encode(num: bigint): string {\r\n      const { Err: E } = DER;\r\n      if (num < _0n) throw new E('integer: negative integers are not allowed');\r\n      let hex = numberToHexUnpadded(num);\r\n      // Pad with zero byte if negative flag is present\r\n      if (Number.parseInt(hex[0], 16) & 0b1000) hex = '00' + hex;\r\n      if (hex.length & 1) throw new E('unexpected DER parsing assertion: unpadded hex');\r\n      return hex;\r\n    },\r\n    decode(data: Uint8Array): bigint {\r\n      const { Err: E } = DER;\r\n      if (data[0] & 0b1000_0000) throw new E('invalid signature integer: negative');\r\n      if (data[0] === 0x00 && !(data[1] & 0b1000_0000))\r\n        throw new E('invalid signature integer: unnecessary leading zero');\r\n      return bytesToNumberBE(data);\r\n    },\r\n  },\r\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint } {\r\n    // parse DER signature\r\n    const { Err: E, _int: int, _tlv: tlv } = DER;\r\n    const data = ensureBytes('signature', hex);\r\n    const { v: seqBytes, l: seqLeftBytes } = tlv.decode(0x30, data);\r\n    if (seqLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\r\n    const { v: rBytes, l: rLeftBytes } = tlv.decode(0x02, seqBytes);\r\n    const { v: sBytes, l: sLeftBytes } = tlv.decode(0x02, rLeftBytes);\r\n    if (sLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\r\n    return { r: int.decode(rBytes), s: int.decode(sBytes) };\r\n  },\r\n  hexFromSig(sig: { r: bigint; s: bigint }): string {\r\n    const { _tlv: tlv, _int: int } = DER;\r\n    const rs = tlv.encode(0x02, int.encode(sig.r));\r\n    const ss = tlv.encode(0x02, int.encode(sig.s));\r\n    const seq = rs + ss;\r\n    return tlv.encode(0x30, seq);\r\n  },\r\n};\r\n\r\n// Be friendly to bad ECMAScript parsers by not using bigint literals\r\n// prettier-ignore\r\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\r\n\r\n// TODO: remove\r\nexport function _legacyHelperEquat<T>(Fp: IField<T>, a: T, b: T): (x: T) => T {\r\n  /**\r\n   * y² = x³ + ax + b: Short weierstrass curve formula. Takes x, returns y².\r\n   * @returns y²\r\n   */\r\n  function weierstrassEquation(x: T): T {\r\n    const x2 = Fp.sqr(x); // x * x\r\n    const x3 = Fp.mul(x2, x); // x² * x\r\n    return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x³ + a * x + b\r\n  }\r\n  return weierstrassEquation;\r\n}\r\nexport function _normFnElement(Fn: IField<bigint>, key: PrivKey): bigint {\r\n  const { BYTES: expected } = Fn;\r\n  let num: bigint;\r\n  if (typeof key === 'bigint') {\r\n    num = key;\r\n  } else {\r\n    let bytes = ensureBytes('private key', key);\r\n    try {\r\n      num = Fn.fromBytes(bytes);\r\n    } catch (error) {\r\n      throw new Error(`invalid private key: expected ui8a of size ${expected}, got ${typeof key}`);\r\n    }\r\n  }\r\n  if (!Fn.isValidNot0(num)) throw new Error('invalid private key: out of range [1..N-1]');\r\n  return num;\r\n}\r\n\r\nexport function weierstrassN<T>(\r\n  CURVE: WeierstrassOpts<T>,\r\n  curveOpts: WeierstrassExtraOpts<T> = {}\r\n): WeierstrassPointCons<T> {\r\n  const { Fp, Fn } = _createCurveFields('weierstrass', CURVE, curveOpts);\r\n  const { h: cofactor, n: CURVE_ORDER } = CURVE;\r\n  _validateObject(\r\n    curveOpts,\r\n    {},\r\n    {\r\n      allowInfinityPoint: 'boolean',\r\n      clearCofactor: 'function',\r\n      isTorsionFree: 'function',\r\n      fromBytes: 'function',\r\n      toBytes: 'function',\r\n      endo: 'object',\r\n      wrapPrivateKey: 'boolean',\r\n    }\r\n  );\r\n\r\n  const { endo } = curveOpts;\r\n  if (endo) {\r\n    // validateObject(endo, { beta: 'bigint', splitScalar: 'function' });\r\n    if (!Fp.is0(CURVE.a) || typeof endo.beta !== 'bigint' || !Array.isArray(endo.basises)) {\r\n      throw new Error('invalid endo: expected \"beta\": bigint and \"basises\": array');\r\n    }\r\n  }\r\n\r\n  function assertCompressionIsSupported() {\r\n    if (!Fp.isOdd) throw new Error('compression is not supported: Field does not have .isOdd()');\r\n  }\r\n\r\n  // Implements IEEE P1363 point encoding\r\n  function pointToBytes(\r\n    _c: WeierstrassPointCons<T>,\r\n    point: WeierstrassPoint<T>,\r\n    isCompressed: boolean\r\n  ): Uint8Array {\r\n    const { x, y } = point.toAffine();\r\n    const bx = Fp.toBytes(x);\r\n    abool('isCompressed', isCompressed);\r\n    if (isCompressed) {\r\n      assertCompressionIsSupported();\r\n      const hasEvenY = !Fp.isOdd!(y);\r\n      return concatBytes(pprefix(hasEvenY), bx);\r\n    } else {\r\n      return concatBytes(Uint8Array.of(0x04), bx, Fp.toBytes(y));\r\n    }\r\n  }\r\n  function pointFromBytes(bytes: Uint8Array) {\r\n    abytes(bytes);\r\n    const L = Fp.BYTES;\r\n    const LC = L + 1; // length compressed, e.g. 33 for 32-byte field\r\n    const LU = 2 * L + 1; // length uncompressed, e.g. 65 for 32-byte field\r\n    const length = bytes.length;\r\n    const head = bytes[0];\r\n    const tail = bytes.subarray(1);\r\n    // No actual validation is done here: use .assertValidity()\r\n    if (length === LC && (head === 0x02 || head === 0x03)) {\r\n      const x = Fp.fromBytes(tail);\r\n      if (!Fp.isValid(x)) throw new Error('bad point: is not on curve, wrong x');\r\n      const y2 = weierstrassEquation(x); // y² = x³ + ax + b\r\n      let y: T;\r\n      try {\r\n        y = Fp.sqrt(y2); // y = y² ^ (p+1)/4\r\n      } catch (sqrtError) {\r\n        const err = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\r\n        throw new Error('bad point: is not on curve, sqrt error' + err);\r\n      }\r\n      assertCompressionIsSupported();\r\n      const isYOdd = Fp.isOdd!(y); // (y & _1n) === _1n;\r\n      const isHeadOdd = (head & 1) === 1; // ECDSA-specific\r\n      if (isHeadOdd !== isYOdd) y = Fp.neg(y);\r\n      return { x, y };\r\n    } else if (length === LU && head === 0x04) {\r\n      // TODO: more checks\r\n      const x = Fp.fromBytes(tail.subarray(L * 0, L * 1));\r\n      const y = Fp.fromBytes(tail.subarray(L * 1, L * 2));\r\n      if (!isValidXY(x, y)) throw new Error('bad point: is not on curve');\r\n      return { x, y };\r\n    } else {\r\n      throw new Error(\r\n        `bad point: got length ${length}, expected compressed=${LC} or uncompressed=${LU}`\r\n      );\r\n    }\r\n  }\r\n\r\n  const toBytes = curveOpts.toBytes || pointToBytes;\r\n  const fromBytes = curveOpts.fromBytes || pointFromBytes;\r\n  const weierstrassEquation = _legacyHelperEquat(Fp, CURVE.a, CURVE.b);\r\n\r\n  // TODO: move top-level\r\n  /** Checks whether equation holds for given x, y: y² == x³ + ax + b */\r\n  function isValidXY(x: T, y: T): boolean {\r\n    const left = Fp.sqr(y); // y²\r\n    const right = weierstrassEquation(x); // x³ + ax + b\r\n    return Fp.eql(left, right);\r\n  }\r\n\r\n  // Validate whether the passed curve params are valid.\r\n  // Test 1: equation y² = x³ + ax + b should work for generator point.\r\n  if (!isValidXY(CURVE.Gx, CURVE.Gy)) throw new Error('bad curve params: generator point');\r\n\r\n  // Test 2: discriminant Δ part should be non-zero: 4a³ + 27b² != 0.\r\n  // Guarantees curve is genus-1, smooth (non-singular).\r\n  const _4a3 = Fp.mul(Fp.pow(CURVE.a, _3n), _4n);\r\n  const _27b2 = Fp.mul(Fp.sqr(CURVE.b), BigInt(27));\r\n  if (Fp.is0(Fp.add(_4a3, _27b2))) throw new Error('bad curve params: a or b');\r\n\r\n  /** Asserts coordinate is valid: 0 <= n < Fp.ORDER. */\r\n  function acoord(title: string, n: T, banZero = false) {\r\n    if (!Fp.isValid(n) || (banZero && Fp.is0(n))) throw new Error(`bad point coordinate ${title}`);\r\n    return n;\r\n  }\r\n\r\n  function aprjpoint(other: unknown) {\r\n    if (!(other instanceof Point)) throw new Error('ProjectivePoint expected');\r\n  }\r\n\r\n  function splitEndoScalarN(k: bigint) {\r\n    if (!endo || !endo.basises) throw new Error('no endo');\r\n    return _splitEndoScalar(k, endo.basises, Fn.ORDER);\r\n  }\r\n\r\n  // Memoized toAffine / validity check. They are heavy. Points are immutable.\r\n\r\n  // Converts Projective point to affine (x, y) coordinates.\r\n  // Can accept precomputed Z^-1 - for example, from invertBatch.\r\n  // (X, Y, Z) ∋ (x=X/Z, y=Y/Z)\r\n  const toAffineMemo = memoized((p: Point, iz?: T): AffinePoint<T> => {\r\n    const { X, Y, Z } = p;\r\n    // Fast-path for normalized points\r\n    if (Fp.eql(Z, Fp.ONE)) return { x: X, y: Y };\r\n    const is0 = p.is0();\r\n    // If invZ was 0, we return zero point. However we still want to execute\r\n    // all operations, so we replace invZ with a random number, 1.\r\n    if (iz == null) iz = is0 ? Fp.ONE : Fp.inv(Z);\r\n    const x = Fp.mul(X, iz);\r\n    const y = Fp.mul(Y, iz);\r\n    const zz = Fp.mul(Z, iz);\r\n    if (is0) return { x: Fp.ZERO, y: Fp.ZERO };\r\n    if (!Fp.eql(zz, Fp.ONE)) throw new Error('invZ was invalid');\r\n    return { x, y };\r\n  });\r\n  // NOTE: on exception this will crash 'cached' and no value will be set.\r\n  // Otherwise true will be return\r\n  const assertValidMemo = memoized((p: Point) => {\r\n    if (p.is0()) {\r\n      // (0, 1, 0) aka ZERO is invalid in most contexts.\r\n      // In BLS, ZERO can be serialized, so we allow it.\r\n      // (0, 0, 0) is invalid representation of ZERO.\r\n      if (curveOpts.allowInfinityPoint && !Fp.is0(p.Y)) return;\r\n      throw new Error('bad point: ZERO');\r\n    }\r\n    // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\r\n    const { x, y } = p.toAffine();\r\n    if (!Fp.isValid(x) || !Fp.isValid(y)) throw new Error('bad point: x or y not field elements');\r\n    if (!isValidXY(x, y)) throw new Error('bad point: equation left != right');\r\n    if (!p.isTorsionFree()) throw new Error('bad point: not in prime-order subgroup');\r\n    return true;\r\n  });\r\n\r\n  function finishEndo(\r\n    endoBeta: EndomorphismOpts['beta'],\r\n    k1p: Point,\r\n    k2p: Point,\r\n    k1neg: boolean,\r\n    k2neg: boolean\r\n  ) {\r\n    k2p = new Point(Fp.mul(k2p.X, endoBeta), k2p.Y, k2p.Z);\r\n    k1p = negateCt(k1neg, k1p);\r\n    k2p = negateCt(k2neg, k2p);\r\n    return k1p.add(k2p);\r\n  }\r\n\r\n  /**\r\n   * Projective Point works in 3d / projective (homogeneous) coordinates:(X, Y, Z) ∋ (x=X/Z, y=Y/Z).\r\n   * Default Point works in 2d / affine coordinates: (x, y).\r\n   * We're doing calculations in projective, because its operations don't require costly inversion.\r\n   */\r\n  class Point implements WeierstrassPoint<T> {\r\n    // base / generator point\r\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\r\n    // zero / infinity / identity point\r\n    static readonly ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO); // 0, 1, 0\r\n    // fields\r\n    static readonly Fp = Fp;\r\n    static readonly Fn = Fn;\r\n\r\n    readonly X: T;\r\n    readonly Y: T;\r\n    readonly Z: T;\r\n\r\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\r\n    constructor(X: T, Y: T, Z: T) {\r\n      this.X = acoord('x', X);\r\n      this.Y = acoord('y', Y, true);\r\n      this.Z = acoord('z', Z);\r\n      Object.freeze(this);\r\n    }\r\n\r\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\r\n    static fromAffine(p: AffinePoint<T>): Point {\r\n      const { x, y } = p || {};\r\n      if (!p || !Fp.isValid(x) || !Fp.isValid(y)) throw new Error('invalid affine point');\r\n      if (p instanceof Point) throw new Error('projective point not allowed');\r\n      // (0, 0) would've produced (0, 0, 1) - instead, we need (0, 1, 0)\r\n      if (Fp.is0(x) && Fp.is0(y)) return Point.ZERO;\r\n      return new Point(x, y, Fp.ONE);\r\n    }\r\n\r\n    get x(): T {\r\n      return this.toAffine().x;\r\n    }\r\n    get y(): T {\r\n      return this.toAffine().y;\r\n    }\r\n\r\n    // TODO: remove\r\n    get px(): T {\r\n      return this.X;\r\n    }\r\n    get py(): T {\r\n      return this.X;\r\n    }\r\n    get pz(): T {\r\n      return this.Z;\r\n    }\r\n    static normalizeZ(points: Point[]): Point[] {\r\n      return normalizeZ(Point, points);\r\n    }\r\n\r\n    static fromBytes(bytes: Uint8Array): Point {\r\n      abytes(bytes);\r\n      return Point.fromHex(bytes);\r\n    }\r\n\r\n    /** Converts hash string or Uint8Array to Point. */\r\n    static fromHex(hex: Hex): Point {\r\n      const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\r\n      P.assertValidity();\r\n      return P;\r\n    }\r\n\r\n    /** Multiplies generator point by privateKey. */\r\n    static fromPrivateKey(privateKey: PrivKey) {\r\n      return Point.BASE.multiply(_normFnElement(Fn, privateKey));\r\n    }\r\n\r\n    // TODO: remove\r\n    static msm(points: Point[], scalars: bigint[]): Point {\r\n      return pippenger(Point, Fn, points, scalars);\r\n    }\r\n    _setWindowSize(windowSize: number) {\r\n      this.precompute(windowSize);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param windowSize\r\n     * @param isLazy true will defer table computation until the first multiplication\r\n     * @returns\r\n     */\r\n    precompute(windowSize: number = 8, isLazy = true): Point {\r\n      wnaf.createCache(this, windowSize);\r\n      if (!isLazy) this.multiply(_3n); // random number\r\n      return this;\r\n    }\r\n\r\n    // TODO: return `this`\r\n    /** A point on curve is valid if it conforms to equation. */\r\n    assertValidity(): void {\r\n      assertValidMemo(this);\r\n    }\r\n\r\n    hasEvenY(): boolean {\r\n      const { y } = this.toAffine();\r\n      if (!Fp.isOdd) throw new Error(\"Field doesn't support isOdd\");\r\n      return !Fp.isOdd(y);\r\n    }\r\n\r\n    /** Compare one point to another. */\r\n    equals(other: Point): boolean {\r\n      aprjpoint(other);\r\n      const { X: X1, Y: Y1, Z: Z1 } = this;\r\n      const { X: X2, Y: Y2, Z: Z2 } = other;\r\n      const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\r\n      const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\r\n      return U1 && U2;\r\n    }\r\n\r\n    /** Flips point to one corresponding to (x, -y) in Affine coordinates. */\r\n    negate(): Point {\r\n      return new Point(this.X, Fp.neg(this.Y), this.Z);\r\n    }\r\n\r\n    // Renes-Costello-Batina exception-free doubling formula.\r\n    // There is 30% faster Jacobian formula, but it is not complete.\r\n    // https://eprint.iacr.org/2015/1060, algorithm 3\r\n    // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\r\n    double() {\r\n      const { a, b } = CURVE;\r\n      const b3 = Fp.mul(b, _3n);\r\n      const { X: X1, Y: Y1, Z: Z1 } = this;\r\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\r\n      let t0 = Fp.mul(X1, X1); // step 1\r\n      let t1 = Fp.mul(Y1, Y1);\r\n      let t2 = Fp.mul(Z1, Z1);\r\n      let t3 = Fp.mul(X1, Y1);\r\n      t3 = Fp.add(t3, t3); // step 5\r\n      Z3 = Fp.mul(X1, Z1);\r\n      Z3 = Fp.add(Z3, Z3);\r\n      X3 = Fp.mul(a, Z3);\r\n      Y3 = Fp.mul(b3, t2);\r\n      Y3 = Fp.add(X3, Y3); // step 10\r\n      X3 = Fp.sub(t1, Y3);\r\n      Y3 = Fp.add(t1, Y3);\r\n      Y3 = Fp.mul(X3, Y3);\r\n      X3 = Fp.mul(t3, X3);\r\n      Z3 = Fp.mul(b3, Z3); // step 15\r\n      t2 = Fp.mul(a, t2);\r\n      t3 = Fp.sub(t0, t2);\r\n      t3 = Fp.mul(a, t3);\r\n      t3 = Fp.add(t3, Z3);\r\n      Z3 = Fp.add(t0, t0); // step 20\r\n      t0 = Fp.add(Z3, t0);\r\n      t0 = Fp.add(t0, t2);\r\n      t0 = Fp.mul(t0, t3);\r\n      Y3 = Fp.add(Y3, t0);\r\n      t2 = Fp.mul(Y1, Z1); // step 25\r\n      t2 = Fp.add(t2, t2);\r\n      t0 = Fp.mul(t2, t3);\r\n      X3 = Fp.sub(X3, t0);\r\n      Z3 = Fp.mul(t2, t1);\r\n      Z3 = Fp.add(Z3, Z3); // step 30\r\n      Z3 = Fp.add(Z3, Z3);\r\n      return new Point(X3, Y3, Z3);\r\n    }\r\n\r\n    // Renes-Costello-Batina exception-free addition formula.\r\n    // There is 30% faster Jacobian formula, but it is not complete.\r\n    // https://eprint.iacr.org/2015/1060, algorithm 1\r\n    // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\r\n    add(other: Point): Point {\r\n      aprjpoint(other);\r\n      const { X: X1, Y: Y1, Z: Z1 } = this;\r\n      const { X: X2, Y: Y2, Z: Z2 } = other;\r\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\r\n      const a = CURVE.a;\r\n      const b3 = Fp.mul(CURVE.b, _3n);\r\n      let t0 = Fp.mul(X1, X2); // step 1\r\n      let t1 = Fp.mul(Y1, Y2);\r\n      let t2 = Fp.mul(Z1, Z2);\r\n      let t3 = Fp.add(X1, Y1);\r\n      let t4 = Fp.add(X2, Y2); // step 5\r\n      t3 = Fp.mul(t3, t4);\r\n      t4 = Fp.add(t0, t1);\r\n      t3 = Fp.sub(t3, t4);\r\n      t4 = Fp.add(X1, Z1);\r\n      let t5 = Fp.add(X2, Z2); // step 10\r\n      t4 = Fp.mul(t4, t5);\r\n      t5 = Fp.add(t0, t2);\r\n      t4 = Fp.sub(t4, t5);\r\n      t5 = Fp.add(Y1, Z1);\r\n      X3 = Fp.add(Y2, Z2); // step 15\r\n      t5 = Fp.mul(t5, X3);\r\n      X3 = Fp.add(t1, t2);\r\n      t5 = Fp.sub(t5, X3);\r\n      Z3 = Fp.mul(a, t4);\r\n      X3 = Fp.mul(b3, t2); // step 20\r\n      Z3 = Fp.add(X3, Z3);\r\n      X3 = Fp.sub(t1, Z3);\r\n      Z3 = Fp.add(t1, Z3);\r\n      Y3 = Fp.mul(X3, Z3);\r\n      t1 = Fp.add(t0, t0); // step 25\r\n      t1 = Fp.add(t1, t0);\r\n      t2 = Fp.mul(a, t2);\r\n      t4 = Fp.mul(b3, t4);\r\n      t1 = Fp.add(t1, t2);\r\n      t2 = Fp.sub(t0, t2); // step 30\r\n      t2 = Fp.mul(a, t2);\r\n      t4 = Fp.add(t4, t2);\r\n      t0 = Fp.mul(t1, t4);\r\n      Y3 = Fp.add(Y3, t0);\r\n      t0 = Fp.mul(t5, t4); // step 35\r\n      X3 = Fp.mul(t3, X3);\r\n      X3 = Fp.sub(X3, t0);\r\n      t0 = Fp.mul(t3, t1);\r\n      Z3 = Fp.mul(t5, Z3);\r\n      Z3 = Fp.add(Z3, t0); // step 40\r\n      return new Point(X3, Y3, Z3);\r\n    }\r\n\r\n    subtract(other: Point) {\r\n      return this.add(other.negate());\r\n    }\r\n\r\n    is0(): boolean {\r\n      return this.equals(Point.ZERO);\r\n    }\r\n\r\n    /**\r\n     * Constant time multiplication.\r\n     * Uses wNAF method. Windowed method may be 10% faster,\r\n     * but takes 2x longer to generate and consumes 2x memory.\r\n     * Uses precomputes when available.\r\n     * Uses endomorphism for Koblitz curves.\r\n     * @param scalar by which the point would be multiplied\r\n     * @returns New point\r\n     */\r\n    multiply(scalar: bigint): Point {\r\n      const { endo } = curveOpts;\r\n      if (!Fn.isValidNot0(scalar)) throw new Error('invalid scalar: out of range'); // 0 is invalid\r\n      let point: Point, fake: Point; // Fake point is used to const-time mult\r\n      const mul = (n: bigint) => wnaf.cached(this, n, (p) => normalizeZ(Point, p));\r\n      /** See docs for {@link EndomorphismOpts} */\r\n      if (endo) {\r\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(scalar);\r\n        const { p: k1p, f: k1f } = mul(k1);\r\n        const { p: k2p, f: k2f } = mul(k2);\r\n        fake = k1f.add(k2f);\r\n        point = finishEndo(endo.beta, k1p, k2p, k1neg, k2neg);\r\n      } else {\r\n        const { p, f } = mul(scalar);\r\n        point = p;\r\n        fake = f;\r\n      }\r\n      // Normalize `z` for both points, but return only real one\r\n      return normalizeZ(Point, [point, fake])[0];\r\n    }\r\n\r\n    /**\r\n     * Non-constant-time multiplication. Uses double-and-add algorithm.\r\n     * It's faster, but should only be used when you don't care about\r\n     * an exposed secret key e.g. sig verification, which works over *public* keys.\r\n     */\r\n    multiplyUnsafe(sc: bigint): Point {\r\n      const { endo } = curveOpts;\r\n      const p = this;\r\n      if (!Fn.isValid(sc)) throw new Error('invalid scalar: out of range'); // 0 is valid\r\n      if (sc === _0n || p.is0()) return Point.ZERO;\r\n      if (sc === _1n) return p; // fast-path\r\n      if (wnaf.hasCache(this)) return this.multiply(sc);\r\n      if (endo) {\r\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(sc);\r\n        const { p1, p2 } = mulEndoUnsafe(Point, p, k1, k2); // 30% faster vs wnaf.unsafe\r\n        return finishEndo(endo.beta, p1, p2, k1neg, k2neg);\r\n      } else {\r\n        return wnaf.unsafe(p, sc);\r\n      }\r\n    }\r\n\r\n    multiplyAndAddUnsafe(Q: Point, a: bigint, b: bigint): Point | undefined {\r\n      const sum = this.multiplyUnsafe(a).add(Q.multiplyUnsafe(b));\r\n      return sum.is0() ? undefined : sum;\r\n    }\r\n\r\n    /**\r\n     * Converts Projective point to affine (x, y) coordinates.\r\n     * @param invertedZ Z^-1 (inverted zero) - optional, precomputation is useful for invertBatch\r\n     */\r\n    toAffine(invertedZ?: T): AffinePoint<T> {\r\n      return toAffineMemo(this, invertedZ);\r\n    }\r\n\r\n    /**\r\n     * Checks whether Point is free of torsion elements (is in prime subgroup).\r\n     * Always torsion-free for cofactor=1 curves.\r\n     */\r\n    isTorsionFree(): boolean {\r\n      const { isTorsionFree } = curveOpts;\r\n      if (cofactor === _1n) return true;\r\n      if (isTorsionFree) return isTorsionFree(Point, this);\r\n      return wnaf.unsafe(this, CURVE_ORDER).is0();\r\n    }\r\n\r\n    clearCofactor(): Point {\r\n      const { clearCofactor } = curveOpts;\r\n      if (cofactor === _1n) return this; // Fast-path\r\n      if (clearCofactor) return clearCofactor(Point, this) as Point;\r\n      return this.multiplyUnsafe(cofactor);\r\n    }\r\n\r\n    isSmallOrder(): boolean {\r\n      // can we use this.clearCofactor()?\r\n      return this.multiplyUnsafe(cofactor).is0();\r\n    }\r\n\r\n    toBytes(isCompressed = true): Uint8Array {\r\n      abool('isCompressed', isCompressed);\r\n      this.assertValidity();\r\n      return toBytes(Point, this, isCompressed);\r\n    }\r\n\r\n    /** @deprecated use `toBytes` */\r\n    toRawBytes(isCompressed = true): Uint8Array {\r\n      return this.toBytes(isCompressed);\r\n    }\r\n\r\n    toHex(isCompressed = true): string {\r\n      return bytesToHex(this.toBytes(isCompressed));\r\n    }\r\n\r\n    toString() {\r\n      return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\r\n    }\r\n  }\r\n  const bits = Fn.BITS;\r\n  const wnaf = new wNAF(Point, curveOpts.endo ? Math.ceil(bits / 2) : bits);\r\n  return Point;\r\n}\r\n\r\n// _legacyWeierstrass\r\n// TODO: remove\r\n/** @deprecated use `weierstrass` in newer releases */\r\nexport function weierstrassPoints<T>(c: CurvePointsTypeWithLength<T>): CurvePointsRes<T> {\r\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\r\n  const Point = weierstrassN(CURVE, curveOpts);\r\n  return _weierstrass_new_output_to_legacy(c, Point);\r\n}\r\n\r\n// Instance\r\nexport interface ECDSASignature {\r\n  readonly r: bigint;\r\n  readonly s: bigint;\r\n  readonly recovery?: number;\r\n  addRecoveryBit(recovery: number): ECDSASigRecovered;\r\n  hasHighS(): boolean;\r\n  normalizeS(): ECDSASignature;\r\n  recoverPublicKey(msgHash: Hex): WeierstrassPoint<bigint>;\r\n  toBytes(format?: string): Uint8Array;\r\n  toHex(format?: string): string;\r\n\r\n  /** @deprecated */\r\n  assertValidity(): void;\r\n  /** @deprecated use `.toBytes('compact')` */\r\n  toCompactRawBytes(): Uint8Array;\r\n  /** @deprecated use `.toBytes('compact')` */\r\n  toCompactHex(): string;\r\n  /** @deprecated use `.toBytes('der')` */\r\n  toDERRawBytes(): Uint8Array;\r\n  /** @deprecated use `.toBytes('der')` */\r\n  toDERHex(): string;\r\n}\r\nexport type SignatureType = ECDSASignature;\r\nexport type ECDSASigRecovered = ECDSASignature & {\r\n  readonly recovery: number;\r\n};\r\nexport type RecoveredSignatureType = ECDSASigRecovered;\r\n// Static methods\r\nexport type ECDSASignatureCons = {\r\n  new (r: bigint, s: bigint, recovery?: number): ECDSASignature;\r\n  fromBytes(bytes: Uint8Array, format?: ECDSASigFormat): ECDSASignature;\r\n  fromHex(hex: string, format?: ECDSASigFormat): ECDSASignature;\r\n\r\n  /** @deprecated use `.fromBytes(bytes, 'compact')` */\r\n  fromCompact(hex: Hex): ECDSASignature;\r\n  /** @deprecated use `.fromBytes(bytes, 'der')` */\r\n  fromDER(hex: Hex): ECDSASignature;\r\n};\r\nexport type SignatureLike = { r: bigint; s: bigint };\r\n// TODO: remove\r\nexport type PubKey = Hex | WeierstrassPoint<bigint>;\r\n\r\n// TODO: remove\r\nexport type CurveType = BasicWCurve<bigint> & {\r\n  hash: CHash; // CHash not FHash because we need outputLen for DRBG\r\n  hmac?: HmacFnSync;\r\n  randomBytes?: (bytesLength?: number) => Uint8Array;\r\n  lowS?: boolean;\r\n  bits2int?: (bytes: Uint8Array) => bigint;\r\n  bits2int_modN?: (bytes: Uint8Array) => bigint;\r\n};\r\n\r\n// Points start with byte 0x02 when y is even; otherwise 0x03\r\nfunction pprefix(hasEvenY: boolean): Uint8Array {\r\n  return Uint8Array.of(hasEvenY ? 0x02 : 0x03);\r\n}\r\n\r\n// TODO: remove\r\nexport type CurveFn = {\r\n  /** @deprecated the property will be removed in next release */\r\n  CURVE: CurvePointsType<bigint>;\r\n  keygen: ECDSA['keygen'];\r\n  getPublicKey: ECDSA['getPublicKey'];\r\n  getSharedSecret: ECDSA['getSharedSecret'];\r\n  sign: ECDSA['sign'];\r\n  verify: ECDSA['verify'];\r\n  Point: WeierstrassPointCons<bigint>;\r\n  /** @deprecated use `Point` */\r\n  ProjectivePoint: WeierstrassPointCons<bigint>;\r\n  Signature: ECDSASignatureCons;\r\n  utils: ECDSA['utils'];\r\n  info: CurveInfo;\r\n};\r\n\r\n/**\r\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\r\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\r\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\r\n * b = False and y = sqrt(Z * (u / v)) otherwise.\r\n * @param Fp\r\n * @param Z\r\n * @returns\r\n */\r\nexport function SWUFpSqrtRatio<T>(\r\n  Fp: IField<T>,\r\n  Z: T\r\n): (u: T, v: T) => { isValid: boolean; value: T } {\r\n  // Generic implementation\r\n  const q = Fp.ORDER;\r\n  let l = _0n;\r\n  for (let o = q - _1n; o % _2n === _0n; o /= _2n) l += _1n;\r\n  const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\r\n  // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\r\n  // 2n ** c1 == 2n << (c1-1)\r\n  const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\r\n  const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\r\n  const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\r\n  const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\r\n  const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\r\n  const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\r\n  const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\r\n  const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\r\n  let sqrtRatio = (u: T, v: T): { isValid: boolean; value: T } => {\r\n    let tv1 = c6; // 1. tv1 = c6\r\n    let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\r\n    let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\r\n    tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\r\n    let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\r\n    tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\r\n    tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\r\n    tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\r\n    tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\r\n    let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\r\n    tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\r\n    let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\r\n    tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\r\n    tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\r\n    tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\r\n    tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\r\n    // 17. for i in (c1, c1 - 1, ..., 2):\r\n    for (let i = c1; i > _1n; i--) {\r\n      let tv5 = i - _2n; // 18.    tv5 = i - 2\r\n      tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\r\n      let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\r\n      const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\r\n      tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\r\n      tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\r\n      tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\r\n      tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\r\n      tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\r\n    }\r\n    return { isValid: isQR, value: tv3 };\r\n  };\r\n  if (Fp.ORDER % _4n === _3n) {\r\n    // sqrt_ratio_3mod4(u, v)\r\n    const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\r\n    const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\r\n    sqrtRatio = (u: T, v: T) => {\r\n      let tv1 = Fp.sqr(v); // 1. tv1 = v^2\r\n      const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\r\n      tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\r\n      let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\r\n      y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\r\n      const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\r\n      const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\r\n      const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\r\n      let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\r\n      return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\r\n    };\r\n  }\r\n  // No curves uses that\r\n  // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\r\n  return sqrtRatio;\r\n}\r\n/**\r\n * Simplified Shallue-van de Woestijne-Ulas Method\r\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\r\n */\r\nexport function mapToCurveSimpleSWU<T>(\r\n  Fp: IField<T>,\r\n  opts: {\r\n    A: T;\r\n    B: T;\r\n    Z: T;\r\n  }\r\n): (u: T) => { x: T; y: T } {\r\n  validateField(Fp);\r\n  const { A, B, Z } = opts;\r\n  if (!Fp.isValid(A) || !Fp.isValid(B) || !Fp.isValid(Z))\r\n    throw new Error('mapToCurveSimpleSWU: invalid opts');\r\n  const sqrtRatio = SWUFpSqrtRatio(Fp, Z);\r\n  if (!Fp.isOdd) throw new Error('Field does not have .isOdd()');\r\n  // Input: u, an element of F.\r\n  // Output: (x, y), a point on E.\r\n  return (u: T): { x: T; y: T } => {\r\n    // prettier-ignore\r\n    let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\r\n    tv1 = Fp.sqr(u); // 1.  tv1 = u^2\r\n    tv1 = Fp.mul(tv1, Z); // 2.  tv1 = Z * tv1\r\n    tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\r\n    tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\r\n    tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\r\n    tv3 = Fp.mul(tv3, B); // 6.  tv3 = B * tv3\r\n    tv4 = Fp.cmov(Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\r\n    tv4 = Fp.mul(tv4, A); // 8.  tv4 = A * tv4\r\n    tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\r\n    tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\r\n    tv5 = Fp.mul(tv6, A); // 11. tv5 = A * tv6\r\n    tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\r\n    tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\r\n    tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\r\n    tv5 = Fp.mul(tv6, B); // 15. tv5 = B * tv6\r\n    tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\r\n    x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\r\n    const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\r\n    y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\r\n    y = Fp.mul(y, value); // 20.   y = y * y1\r\n    x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\r\n    y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\r\n    const e1 = Fp.isOdd!(u) === Fp.isOdd!(y); // 23.  e1 = sgn0(u) == sgn0(y)\r\n    y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\r\n    const tv4_inv = FpInvertBatch(Fp, [tv4], true)[0];\r\n    x = Fp.mul(x, tv4_inv); // 25.   x = x / tv4\r\n    return { x, y };\r\n  };\r\n}\r\n\r\n/**\r\n * Creates ECDSA for given elliptic curve Point and hash function.\r\n */\r\nexport function ecdsa(\r\n  Point: WeierstrassPointCons<bigint>,\r\n  hash: CHash,\r\n  ecdsaOpts: ECDSAOpts = {}\r\n): ECDSA {\r\n  ahash(hash);\r\n  _validateObject(\r\n    ecdsaOpts,\r\n    {},\r\n    {\r\n      hmac: 'function',\r\n      lowS: 'boolean',\r\n      randomBytes: 'function',\r\n      bits2int: 'function',\r\n      bits2int_modN: 'function',\r\n    }\r\n  );\r\n\r\n  const randomBytes_ = ecdsaOpts.randomBytes || randomBytes;\r\n  const hmac_: HmacFnSync =\r\n    ecdsaOpts.hmac ||\r\n    (((key, ...msgs) => hmac(hash, key, concatBytes(...msgs))) satisfies HmacFnSync);\r\n\r\n  const { Fp, Fn } = Point;\r\n  const { ORDER: CURVE_ORDER, BITS: fnBits } = Fn;\r\n\r\n  const seedLen = getMinHashLength(CURVE_ORDER);\r\n  const lengths = {\r\n    secret: Fn.BYTES,\r\n    public: 1 + Fp.BYTES,\r\n    publicUncompressed: 1 + 2 * Fp.BYTES,\r\n    signature: 2 * Fn.BYTES,\r\n    seed: seedLen,\r\n  };\r\n\r\n  function isBiggerThanHalfOrder(number: bigint) {\r\n    const HALF = CURVE_ORDER >> _1n;\r\n    return number > HALF;\r\n  }\r\n\r\n  function normalizeS(s: bigint) {\r\n    return isBiggerThanHalfOrder(s) ? Fn.neg(s) : s;\r\n  }\r\n  function aValidRS(title: string, num: bigint) {\r\n    if (!Fn.isValidNot0(num))\r\n      throw new Error(`invalid signature ${title}: out of range 1..CURVE.n`);\r\n  }\r\n\r\n  /**\r\n   * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\r\n   */\r\n  class Signature implements ECDSASignature {\r\n    readonly r: bigint;\r\n    readonly s: bigint;\r\n    readonly recovery?: number;\r\n    constructor(r: bigint, s: bigint, recovery?: number) {\r\n      aValidRS('r', r); // r in [1..N-1]\r\n      aValidRS('s', s); // s in [1..N-1]\r\n      this.r = r;\r\n      this.s = s;\r\n      if (recovery != null) this.recovery = recovery;\r\n      Object.freeze(this);\r\n    }\r\n\r\n    static fromBytes(bytes: Uint8Array, format: ECDSASigFormat = 'compact') {\r\n      if (format === 'compact') {\r\n        const L = Fn.BYTES;\r\n        abytes(bytes, L * 2);\r\n        const r = bytes.subarray(0, L);\r\n        const s = bytes.subarray(L, L * 2);\r\n        return new Signature(Fn.fromBytes(r), Fn.fromBytes(s));\r\n      }\r\n      if (format === 'der') {\r\n        abytes(bytes);\r\n        const { r, s } = DER.toSig(bytes);\r\n        return new Signature(r, s);\r\n      }\r\n      throw new Error('invalid format');\r\n    }\r\n\r\n    static fromHex(hex: string, format?: ECDSASigFormat) {\r\n      return this.fromBytes(hexToBytes(hex), format);\r\n    }\r\n\r\n    addRecoveryBit(recovery: number): RecoveredSignature {\r\n      return new Signature(this.r, this.s, recovery) as RecoveredSignature;\r\n    }\r\n\r\n    // ProjPointType<bigint>\r\n    recoverPublicKey(msgHash: Hex): typeof Point.BASE {\r\n      const FIELD_ORDER = Fp.ORDER;\r\n      const { r, s, recovery: rec } = this;\r\n      if (rec == null || ![0, 1, 2, 3].includes(rec)) throw new Error('recovery id invalid');\r\n\r\n      // ECDSA recovery is hard for cofactor > 1 curves.\r\n      // In sign, `r = q.x mod n`, and here we recover q.x from r.\r\n      // While recovering q.x >= n, we need to add r+n for cofactor=1 curves.\r\n      // However, for cofactor>1, r+n may not get q.x:\r\n      // r+n*i would need to be done instead where i is unknown.\r\n      // To easily get i, we either need to:\r\n      // a. increase amount of valid recid values (4, 5...); OR\r\n      // b. prohibit non-prime-order signatures (recid > 1).\r\n      const hasCofactor = CURVE_ORDER * _2n < FIELD_ORDER;\r\n      if (hasCofactor && rec > 1) throw new Error('recovery id is ambiguous for h>1 curve');\r\n\r\n      const radj = rec === 2 || rec === 3 ? r + CURVE_ORDER : r;\r\n      if (!Fp.isValid(radj)) throw new Error('recovery id 2 or 3 invalid');\r\n      const x = Fp.toBytes(radj);\r\n      const R = Point.fromHex(concatBytes(pprefix((rec & 1) === 0), x));\r\n      const ir = Fn.inv(radj); // r^-1\r\n      const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\r\n      const u1 = Fn.create(-h * ir); // -hr^-1\r\n      const u2 = Fn.create(s * ir); // sr^-1\r\n      // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1). unsafe is fine: there is no private data.\r\n      const Q = Point.BASE.multiplyUnsafe(u1).add(R.multiplyUnsafe(u2));\r\n      if (Q.is0()) throw new Error('point at infinify');\r\n      Q.assertValidity();\r\n      return Q;\r\n    }\r\n\r\n    // Signatures should be low-s, to prevent malleability.\r\n    hasHighS(): boolean {\r\n      return isBiggerThanHalfOrder(this.s);\r\n    }\r\n\r\n    normalizeS() {\r\n      return this.hasHighS() ? new Signature(this.r, Fn.neg(this.s), this.recovery) : this;\r\n    }\r\n\r\n    toBytes(format: ECDSASigFormat = 'compact') {\r\n      if (format === 'compact') return concatBytes(Fn.toBytes(this.r), Fn.toBytes(this.s));\r\n      if (format === 'der') return hexToBytes(DER.hexFromSig(this));\r\n      throw new Error('invalid format');\r\n    }\r\n\r\n    toHex(format?: ECDSASigFormat) {\r\n      return bytesToHex(this.toBytes(format));\r\n    }\r\n\r\n    // TODO: remove\r\n    assertValidity(): void {}\r\n    static fromCompact(hex: Hex) {\r\n      return Signature.fromBytes(ensureBytes('sig', hex), 'compact');\r\n    }\r\n    static fromDER(hex: Hex) {\r\n      return Signature.fromBytes(ensureBytes('sig', hex), 'der');\r\n    }\r\n    toDERRawBytes() {\r\n      return this.toBytes('der');\r\n    }\r\n    toDERHex() {\r\n      return bytesToHex(this.toBytes('der'));\r\n    }\r\n    toCompactRawBytes() {\r\n      return this.toBytes('compact');\r\n    }\r\n    toCompactHex() {\r\n      return bytesToHex(this.toBytes('compact'));\r\n    }\r\n  }\r\n  type RecoveredSignature = Signature & { recovery: number };\r\n\r\n  function isValidSecretKey(privateKey: PrivKey) {\r\n    try {\r\n      return !!_normFnElement(Fn, privateKey);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n  function isValidPublicKey(publicKey: Uint8Array, isCompressed?: boolean): boolean {\r\n    try {\r\n      const l = publicKey.length;\r\n      if (isCompressed === true && l !== lengths.public) return false;\r\n      if (isCompressed === false && l !== lengths.publicUncompressed) return false;\r\n      return !!Point.fromBytes(publicKey);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n  /**\r\n   * Produces cryptographically secure secret key from random of size\r\n   * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\r\n   */\r\n  function randomSecretKey(seed = randomBytes_(seedLen)): Uint8Array {\r\n    return mapHashToField(seed, CURVE_ORDER);\r\n  }\r\n\r\n  const utils = {\r\n    isValidSecretKey,\r\n    isValidPublicKey,\r\n    randomSecretKey,\r\n\r\n    // TODO: remove\r\n    isValidPrivateKey: isValidSecretKey,\r\n    randomPrivateKey: randomSecretKey,\r\n    normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\r\n    precompute(windowSize = 8, point = Point.BASE): WeierstrassPoint<bigint> {\r\n      return point.precompute(windowSize, false);\r\n    },\r\n  };\r\n\r\n  /**\r\n   * Computes public key for a secret key. Checks for validity of the secret key.\r\n   * @param isCompressed whether to return compact (default), or full key\r\n   * @returns Public key, full when isCompressed=false; short when isCompressed=true\r\n   */\r\n  function getPublicKey(secretKey: PrivKey, isCompressed = true): Uint8Array {\r\n    return Point.BASE.multiply(_normFnElement(Fn, secretKey)).toBytes(isCompressed);\r\n  }\r\n\r\n  /**\r\n   * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\r\n   */\r\n  function isProbPub(item: PrivKey | PubKey): boolean | undefined {\r\n    // TODO: remove\r\n    if (typeof item === 'bigint') return false;\r\n    // TODO: remove\r\n    if (item instanceof Point) return true;\r\n    if (Fn.allowedLengths || lengths.secret === lengths.public) return undefined;\r\n    const l = ensureBytes('key', item).length;\r\n    return l === lengths.public || l === lengths.publicUncompressed;\r\n  }\r\n\r\n  /**\r\n   * ECDH (Elliptic Curve Diffie Hellman).\r\n   * Computes shared public key from secret key A and public key B.\r\n   * Checks: 1) secret key validity 2) shared key is on-curve.\r\n   * Does NOT hash the result.\r\n   * @param isCompressed whether to return compact (default), or full key\r\n   * @returns shared public key\r\n   */\r\n  function getSharedSecret(secretKeyA: PrivKey, publicKeyB: Hex, isCompressed = true): Uint8Array {\r\n    if (isProbPub(secretKeyA) === true) throw new Error('first arg must be private key');\r\n    if (isProbPub(publicKeyB) === false) throw new Error('second arg must be public key');\r\n    const s = _normFnElement(Fn, secretKeyA);\r\n    const b = Point.fromHex(publicKeyB); // checks for being on-curve\r\n    return b.multiply(s).toBytes(isCompressed);\r\n  }\r\n\r\n  // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\r\n  // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\r\n  // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\r\n  // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\r\n  const bits2int =\r\n    ecdsaOpts.bits2int ||\r\n    function (bytes: Uint8Array): bigint {\r\n      // Our custom check \"just in case\", for protection against DoS\r\n      if (bytes.length > 8192) throw new Error('input is too large');\r\n      // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\r\n      // for some cases, since bytes.length * 8 is not actual bitLength.\r\n      const num = bytesToNumberBE(bytes); // check for == u8 done here\r\n      const delta = bytes.length * 8 - fnBits; // truncate to nBitLength leftmost bits\r\n      return delta > 0 ? num >> BigInt(delta) : num;\r\n    };\r\n  const bits2int_modN =\r\n    ecdsaOpts.bits2int_modN ||\r\n    function (bytes: Uint8Array): bigint {\r\n      return Fn.create(bits2int(bytes)); // can't use bytesToNumberBE here\r\n    };\r\n  // NOTE: pads output with zero as per spec\r\n  const ORDER_MASK = bitMask(fnBits);\r\n  /**\r\n   * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\r\n   */\r\n  function int2octets(num: bigint): Uint8Array {\r\n    // IMPORTANT: the check ensures working for case `Fn.BYTES != Fn.BITS * 8`\r\n    aInRange('num < 2^' + fnBits, num, _0n, ORDER_MASK);\r\n    return Fn.toBytes(num);\r\n  }\r\n\r\n  // Steps A, D of RFC6979 3.2\r\n  // Creates RFC6979 seed; converts msg/privKey to numbers.\r\n  // Used only in sign, not in verify.\r\n  // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order,\r\n  // this will be invalid at least for P521. Also it can be bigger for P224 + SHA256\r\n  function prepSig(msgHash: Hex, privateKey: PrivKey, opts = defaultSigOpts) {\r\n    if (['recovered', 'canonical'].some((k) => k in opts))\r\n      throw new Error('sign() legacy options not supported');\r\n    let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\r\n    if (lowS == null) lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\r\n    msgHash = ensureBytes('msgHash', msgHash);\r\n    validateSigVerOpts(opts);\r\n    if (prehash) msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\r\n\r\n    // We can't later call bits2octets, since nested bits2int is broken for curves\r\n    // with fnBits % 8 !== 0. Because of that, we unwrap it here as int2octets call.\r\n    // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\r\n    const h1int = bits2int_modN(msgHash);\r\n    const d = _normFnElement(Fn, privateKey); // validate secret key, convert to bigint\r\n    const seedArgs = [int2octets(d), int2octets(h1int)];\r\n    // extraEntropy. RFC6979 3.6: additional k' (optional).\r\n    if (ent != null && ent !== false) {\r\n      // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\r\n      const e = ent === true ? randomBytes_(lengths.secret) : ent; // gen random bytes OR pass as-is\r\n      seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\r\n    }\r\n    const seed = concatBytes(...seedArgs); // Step D of RFC6979 3.2\r\n    const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\r\n    // Converts signature params into point w r/s, checks result for validity.\r\n    // To transform k => Signature:\r\n    // q = k⋅G\r\n    // r = q.x mod n\r\n    // s = k^-1(m + rd) mod n\r\n    // Can use scalar blinding b^-1(bm + bdr) where b ∈ [1,q−1] according to\r\n    // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\r\n    // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\r\n    function k2sig(kBytes: Uint8Array): RecoveredSignature | undefined {\r\n      // RFC 6979 Section 3.2, step 3: k = bits2int(T)\r\n      // Important: all mod() calls here must be done over N\r\n      const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\r\n      if (!Fn.isValidNot0(k)) return; // Valid scalars (including k) must be in 1..N-1\r\n      const ik = Fn.inv(k); // k^-1 mod n\r\n      const q = Point.BASE.multiply(k).toAffine(); // q = k⋅G\r\n      const r = Fn.create(q.x); // r = q.x mod n\r\n      if (r === _0n) return;\r\n      const s = Fn.create(ik * Fn.create(m + r * d)); // Not using blinding here, see comment above\r\n      if (s === _0n) return;\r\n      let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\r\n      let normS = s;\r\n      if (lowS && isBiggerThanHalfOrder(s)) {\r\n        normS = normalizeS(s); // if lowS was passed, ensure s is always\r\n        recovery ^= 1; // // in the bottom half of N\r\n      }\r\n      return new Signature(r, normS, recovery) as RecoveredSignature; // use normS, not s\r\n    }\r\n    return { seed, k2sig };\r\n  }\r\n  const defaultSigOpts: SignOpts = { lowS: ecdsaOpts.lowS, prehash: false };\r\n  const defaultVerOpts: VerOpts = { lowS: ecdsaOpts.lowS, prehash: false };\r\n\r\n  /**\r\n   * Signs message hash with a secret key.\r\n   * ```\r\n   * sign(m, d, k) where\r\n   *   (x, y) = G × k\r\n   *   r = x mod n\r\n   *   s = (m + dr)/k mod n\r\n   * ```\r\n   */\r\n  function sign(msgHash: Hex, secretKey: PrivKey, opts = defaultSigOpts): RecoveredSignature {\r\n    const { seed, k2sig } = prepSig(msgHash, secretKey, opts); // Steps A, D of RFC6979 3.2.\r\n    const drbg = createHmacDrbg<RecoveredSignature>(hash.outputLen, Fn.BYTES, hmac_);\r\n    return drbg(seed, k2sig); // Steps B, C, D, E, F, G\r\n  }\r\n\r\n  // Enable precomputes. Slows down first publicKey computation by 20ms.\r\n  Point.BASE.precompute(8);\r\n\r\n  /**\r\n   * Verifies a signature against message hash and public key.\r\n   * Rejects lowS signatures by default: to override,\r\n   * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\r\n   *\r\n   * ```\r\n   * verify(r, s, h, P) where\r\n   *   U1 = hs^-1 mod n\r\n   *   U2 = rs^-1 mod n\r\n   *   R = U1⋅G - U2⋅P\r\n   *   mod(R.x, n) == r\r\n   * ```\r\n   */\r\n  function verify(\r\n    signature: Hex | SignatureLike,\r\n    msgHash: Hex,\r\n    publicKey: Hex,\r\n    opts = defaultVerOpts\r\n  ): boolean {\r\n    const sg = signature;\r\n    msgHash = ensureBytes('msgHash', msgHash);\r\n    publicKey = ensureBytes('publicKey', publicKey);\r\n\r\n    // Verify opts\r\n    validateSigVerOpts(opts);\r\n    const { lowS, prehash, format } = opts;\r\n\r\n    // TODO: remove\r\n    if ('strict' in opts) throw new Error('options.strict was renamed to lowS');\r\n\r\n    let _sig: Signature | undefined = undefined;\r\n    let P: WeierstrassPoint<bigint>;\r\n\r\n    if (format === undefined) {\r\n      // Try to deduce format\r\n      const isHex = typeof sg === 'string' || isBytes(sg);\r\n      const isObj =\r\n        !isHex &&\r\n        sg !== null &&\r\n        typeof sg === 'object' &&\r\n        typeof sg.r === 'bigint' &&\r\n        typeof sg.s === 'bigint';\r\n      if (!isHex && !isObj)\r\n        throw new Error('invalid signature, expected Uint8Array, hex string or Signature instance');\r\n      if (isObj) {\r\n        _sig = new Signature(sg.r, sg.s);\r\n      } else if (isHex) {\r\n        // TODO: remove this malleable check\r\n        // Signature can be represented in 2 ways: compact (2*Fn.BYTES) & DER (variable-length).\r\n        // Since DER can also be 2*Fn.BYTES bytes, we check for it first.\r\n        try {\r\n          _sig = Signature.fromDER(sg);\r\n        } catch (derError) {\r\n          if (!(derError instanceof DER.Err)) throw derError;\r\n        }\r\n        if (!_sig) {\r\n          try {\r\n            _sig = Signature.fromCompact(sg);\r\n          } catch (error) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (format === 'compact' || format === 'der') {\r\n        if (typeof sg !== 'string' && !isBytes(sg))\r\n          throw new Error('\"der\" / \"compact\" format expects Uint8Array signature');\r\n        _sig = Signature.fromBytes(ensureBytes('sig', sg), format);\r\n      } else if (format === 'js') {\r\n        if (!(sg instanceof Signature)) throw new Error('\"js\" format expects Signature instance');\r\n        _sig = sg;\r\n      } else {\r\n        throw new Error('format must be \"compact\", \"der\" or \"js\"');\r\n      }\r\n    }\r\n\r\n    if (!_sig) return false;\r\n    try {\r\n      P = Point.fromHex(publicKey);\r\n      if (lowS && _sig.hasHighS()) return false;\r\n      // todo: optional.hash => hash\r\n      if (prehash) msgHash = hash(msgHash);\r\n      const { r, s } = _sig;\r\n      const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\r\n      const is = Fn.inv(s); // s^-1\r\n      const u1 = Fn.create(h * is); // u1 = hs^-1 mod n\r\n      const u2 = Fn.create(r * is); // u2 = rs^-1 mod n\r\n      const R = Point.BASE.multiplyUnsafe(u1).add(P.multiplyUnsafe(u2));\r\n      if (R.is0()) return false;\r\n      const v = Fn.create(R.x); // v = r.x mod n\r\n      return v === r;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function keygen(seed?: Uint8Array) {\r\n    const secretKey = utils.randomSecretKey(seed);\r\n    return { secretKey, publicKey: getPublicKey(secretKey) };\r\n  }\r\n\r\n  return Object.freeze({\r\n    keygen,\r\n    getPublicKey,\r\n    sign,\r\n    verify,\r\n    getSharedSecret,\r\n    utils,\r\n    Point,\r\n    Signature,\r\n    info: { type: 'weierstrass' as const, lengths, publicKeyHasPrefix: true },\r\n  });\r\n}\r\n\r\n// TODO: remove\r\nexport type WsPointComposed<T> = {\r\n  CURVE: WeierstrassOpts<T>;\r\n  curveOpts: WeierstrassExtraOpts<T>;\r\n};\r\n// TODO: remove\r\nexport type WsComposed = {\r\n  CURVE: WeierstrassOpts<bigint>;\r\n  hash: CHash;\r\n  curveOpts: WeierstrassExtraOpts<bigint>;\r\n  ecdsaOpts: ECDSAOpts;\r\n};\r\n// TODO: remove\r\nfunction _weierstrass_legacy_opts_to_new<T>(c: CurvePointsType<T>): WsPointComposed<T> {\r\n  const CURVE: WeierstrassOpts<T> = {\r\n    a: c.a,\r\n    b: c.b,\r\n    p: c.Fp.ORDER,\r\n    n: c.n,\r\n    h: c.h,\r\n    Gx: c.Gx,\r\n    Gy: c.Gy,\r\n  };\r\n  const Fp = c.Fp;\r\n  let allowedLengths = c.allowedPrivateKeyLengths\r\n    ? Array.from(new Set(c.allowedPrivateKeyLengths.map((l) => Math.ceil(l / 2))))\r\n    : undefined;\r\n  const Fn = Field(CURVE.n, {\r\n    BITS: c.nBitLength,\r\n    allowedLengths: allowedLengths,\r\n    modOnDecode: c.wrapPrivateKey,\r\n  });\r\n  const curveOpts: WeierstrassExtraOpts<T> = {\r\n    Fp,\r\n    Fn,\r\n    allowInfinityPoint: c.allowInfinityPoint,\r\n    endo: c.endo,\r\n    isTorsionFree: c.isTorsionFree,\r\n    clearCofactor: c.clearCofactor,\r\n    fromBytes: c.fromBytes,\r\n    toBytes: c.toBytes,\r\n  };\r\n  return { CURVE, curveOpts };\r\n}\r\nfunction _ecdsa_legacy_opts_to_new(c: CurveType): WsComposed {\r\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\r\n  const ecdsaOpts: ECDSAOpts = {\r\n    hmac: c.hmac,\r\n    randomBytes: c.randomBytes,\r\n    lowS: c.lowS,\r\n    bits2int: c.bits2int,\r\n    bits2int_modN: c.bits2int_modN,\r\n  };\r\n  return { CURVE, curveOpts, hash: c.hash, ecdsaOpts };\r\n}\r\n// TODO: remove\r\nfunction _weierstrass_new_output_to_legacy<T>(\r\n  c: CurvePointsType<T>,\r\n  Point: WeierstrassPointCons<T>\r\n): CurvePointsRes<T> {\r\n  const { Fp, Fn } = Point;\r\n  // TODO: remove\r\n  function isWithinCurveOrder(num: bigint): boolean {\r\n    return inRange(num, _1n, Fn.ORDER);\r\n  }\r\n  const weierstrassEquation = _legacyHelperEquat(Fp, c.a, c.b);\r\n  return Object.assign(\r\n    {},\r\n    {\r\n      CURVE: c,\r\n      Point: Point,\r\n      ProjectivePoint: Point,\r\n      normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\r\n      weierstrassEquation,\r\n      isWithinCurveOrder,\r\n    }\r\n  );\r\n}\r\n// TODO: remove\r\nfunction _ecdsa_new_output_to_legacy(c: CurveType, ecdsa: ECDSA): CurveFn {\r\n  return Object.assign({}, ecdsa, {\r\n    ProjectivePoint: ecdsa.Point,\r\n    CURVE: c,\r\n  });\r\n}\r\n\r\n// _ecdsa_legacy\r\nexport function weierstrass(c: CurveType): CurveFn {\r\n  const { CURVE, curveOpts, hash, ecdsaOpts } = _ecdsa_legacy_opts_to_new(c);\r\n  const Point = weierstrassN(CURVE, curveOpts);\r\n  const signs = ecdsa(Point, hash, ecdsaOpts);\r\n  return _ecdsa_new_output_to_legacy(c, signs);\r\n}\r\n", "/**\r\n * Utilities for short weierstrass curves, combined with noble-hashes.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { type CurveFn, type CurveType, weierstrass } from './abstract/weierstrass.ts';\r\nimport type { CHash } from './utils.ts';\r\n\r\n/** connects noble-curves to noble-hashes */\r\nexport function getHash(hash: CHash): { hash: CHash } {\r\n  return { hash };\r\n}\r\n/** Same API as @noble/hashes, with ability to create curve with custom hash */\r\nexport type CurveDef = Readonly<Omit<CurveType, 'hash'>>;\r\nexport type CurveFnWithCreate = CurveFn & { create: (hash: CHash) => CurveFn };\r\n\r\n/** @deprecated use new `weierstrass()` and `ecdsa()` methods */\r\nexport function createCurve(curveDef: CurveDef, defHash: CHash): CurveFnWithCreate {\r\n  const create = (hash: CHash): CurveFn => weierstrass({ ...curveDef, hash: hash });\r\n  return { ...create(defHash), create };\r\n}\r\n", "/**\r\n * Internal module for NIST P256, P384, P521 curves.\r\n * Do not use for now.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { sha256, sha384, sha512 } from '@noble/hashes/sha2.js';\r\nimport { createCurve, type CurveFnWithCreate } from './_shortw_utils.ts';\r\nimport { createHasher, type H2CHasher } from './abstract/hash-to-curve.ts';\r\nimport { Field } from './abstract/modular.ts';\r\nimport {\r\n  mapToCurveSimpleSWU,\r\n  type WeierstrassOpts,\r\n  type WeierstrassPointCons,\r\n} from './abstract/weierstrass.ts';\r\n\r\n// p = 2n**224n * (2n**32n-1n) + 2n**192n + 2n**96n - 1n\r\n// a = Fp256.create(BigInt('-3'));\r\nconst p256_CURVE: WeierstrassOpts<bigint> = {\r\n  p: BigInt('0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff'),\r\n  n: BigInt('0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551'),\r\n  h: BigInt(1),\r\n  a: BigInt('0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc'),\r\n  b: BigInt('0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b'),\r\n  Gx: BigInt('0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296'),\r\n  Gy: BigInt('0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5'),\r\n};\r\n\r\n// p = 2n**384n - 2n**128n - 2n**96n + 2n**32n - 1n\r\nconst p384_CURVE: WeierstrassOpts<bigint> = {\r\n  p: BigInt(\r\n    '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff'\r\n  ),\r\n  n: BigInt(\r\n    '0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973'\r\n  ),\r\n  h: BigInt(1),\r\n  a: BigInt(\r\n    '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc'\r\n  ),\r\n  b: BigInt(\r\n    '0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef'\r\n  ),\r\n  Gx: BigInt(\r\n    '0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7'\r\n  ),\r\n  Gy: BigInt(\r\n    '0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f'\r\n  ),\r\n};\r\n\r\n// p = 2n**521n - 1n\r\nconst p521_CURVE: WeierstrassOpts<bigint> = {\r\n  p: BigInt(\r\n    '0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\r\n  ),\r\n  n: BigInt(\r\n    '0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409'\r\n  ),\r\n  h: BigInt(1),\r\n  a: BigInt(\r\n    '0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc'\r\n  ),\r\n  b: BigInt(\r\n    '0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00'\r\n  ),\r\n  Gx: BigInt(\r\n    '0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66'\r\n  ),\r\n  Gy: BigInt(\r\n    '0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650'\r\n  ),\r\n};\r\n\r\nconst Fp256 = Field(p256_CURVE.p);\r\nconst Fp384 = Field(p384_CURVE.p);\r\nconst Fp521 = Field(p521_CURVE.p);\r\ntype SwuOpts = {\r\n  A: bigint;\r\n  B: bigint;\r\n  Z: bigint;\r\n};\r\nfunction createSWU(Point: WeierstrassPointCons<bigint>, opts: SwuOpts) {\r\n  const map = mapToCurveSimpleSWU(Point.Fp, opts);\r\n  return (scalars: bigint[]) => map(scalars[0]);\r\n}\r\n\r\n/** NIST P256 (aka secp256r1, prime256v1) curve, ECDSA and ECDH methods. */\r\nexport const p256: CurveFnWithCreate = createCurve(\r\n  { ...p256_CURVE, Fp: Fp256, lowS: false },\r\n  sha256\r\n);\r\n/** Hashing / encoding to p256 points / field. RFC 9380 methods. */\r\nexport const p256_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() => {\r\n  return createHasher(\r\n    p256.Point,\r\n    createSWU(p256.Point, {\r\n      A: p256_CURVE.a,\r\n      B: p256_CURVE.b,\r\n      Z: p256.Point.Fp.create(BigInt('-10')),\r\n    }),\r\n    {\r\n      DST: 'P256_XMD:SHA-256_SSWU_RO_',\r\n      encodeDST: 'P256_XMD:SHA-256_SSWU_NU_',\r\n      p: p256_CURVE.p,\r\n      m: 1,\r\n      k: 128,\r\n      expand: 'xmd',\r\n      hash: sha256,\r\n    }\r\n  );\r\n})();\r\n\r\n// export const p256_oprf: OPRF = createORPF({\r\n//   name: 'P256-SHA256',\r\n//   Point: p256.Point,\r\n//   hash: sha256,\r\n//   hashToGroup: p256_hasher.hashToCurve,\r\n//   hashToScalar: p256_hasher.hashToScalar,\r\n// });\r\n\r\n/** NIST P384 (aka secp384r1) curve, ECDSA and ECDH methods. */\r\nexport const p384: CurveFnWithCreate = createCurve(\r\n  { ...p384_CURVE, Fp: Fp384, lowS: false },\r\n  sha384\r\n);\r\n/** Hashing / encoding to p384 points / field. RFC 9380 methods. */\r\nexport const p384_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() => {\r\n  return createHasher(\r\n    p384.Point,\r\n    createSWU(p384.Point, {\r\n      A: p384_CURVE.a,\r\n      B: p384_CURVE.b,\r\n      Z: p384.Point.Fp.create(BigInt('-12')),\r\n    }),\r\n    {\r\n      DST: 'P384_XMD:SHA-384_SSWU_RO_',\r\n      encodeDST: 'P384_XMD:SHA-384_SSWU_NU_',\r\n      p: p384_CURVE.p,\r\n      m: 1,\r\n      k: 192,\r\n      expand: 'xmd',\r\n      hash: sha384,\r\n    }\r\n  );\r\n})();\r\n\r\n// export const p384_oprf: OPRF = createORPF({\r\n//   name: 'P384-SHA384',\r\n//   Point: p384.Point,\r\n//   hash: sha384,\r\n//   hashToGroup: p384_hasher.hashToCurve,\r\n//   hashToScalar: p384_hasher.hashToScalar,\r\n// });\r\n\r\n// const Fn521 = Field(p521_CURVE.n, { allowedScalarLengths: [65, 66] });\r\n/** NIST P521 (aka secp521r1) curve, ECDSA and ECDH methods. */\r\nexport const p521: CurveFnWithCreate = createCurve(\r\n  { ...p521_CURVE, Fp: Fp521, lowS: false, allowedPrivateKeyLengths: [130, 131, 132] },\r\n  sha512\r\n);\r\n\r\n/** Hashing / encoding to p521 points / field. RFC 9380 methods. */\r\nexport const p521_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() => {\r\n  return createHasher(\r\n    p521.Point,\r\n    createSWU(p521.Point, {\r\n      A: p521_CURVE.a,\r\n      B: p521_CURVE.b,\r\n      Z: p521.Point.Fp.create(BigInt('-4')),\r\n    }),\r\n    {\r\n      DST: 'P521_XMD:SHA-512_SSWU_RO_',\r\n      encodeDST: 'P521_XMD:SHA-512_SSWU_NU_',\r\n      p: p521_CURVE.p,\r\n      m: 1,\r\n      k: 256,\r\n      expand: 'xmd',\r\n      hash: sha512,\r\n    }\r\n  );\r\n})();\r\n\r\n// export const p521_oprf: OPRF = createORPF({\r\n//   name: 'P521-SHA512',\r\n//   Point: p521.Point,\r\n//   hash: sha512,\r\n//   hashToGroup: p521_hasher.hashToCurve,\r\n//   hashToScalar: p521_hasher.hashToScalar, // produces L=98 just like in RFC\r\n// });\r\n", "/**\r\n * NIST secp256r1 aka p256.\r\n * @module\r\n */\r\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\r\nimport { type H2CMethod } from './abstract/hash-to-curve.ts';\r\nimport { p256_hasher, p256 as p256n } from './nist.ts';\r\n/** @deprecated use `import { p256 } from '@noble/curves/nist.js';` */\r\nexport const p256: typeof p256n = p256n;\r\n/** @deprecated use `import { p256 } from '@noble/curves/nist.js';` */\r\nexport const secp256r1: typeof p256n = p256n;\r\n/** @deprecated use `import { p256_hasher } from '@noble/curves/nist.js';` */\r\nexport const hashToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() => p256_hasher.hashToCurve)();\r\n/** @deprecated use `import { p256_hasher } from '@noble/curves/nist.js';` */\r\nexport const encodeToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() => p256_hasher.encodeToCurve)();\r\n", "/**\r\n * SHA2-256 a.k.a. sha256. In JS, it is the fastest hash, even faster than Blake3.\r\n *\r\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\r\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\r\n *\r\n * Check out [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\r\n * @module\r\n * @deprecated\r\n */\r\nimport {\r\n  SHA224 as SHA224n,\r\n  sha224 as sha224n,\r\n  SHA256 as SHA256n,\r\n  sha256 as sha256n,\r\n} from './sha2.ts';\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA256: typeof SHA256n = SHA256n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha256: typeof sha256n = sha256n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA224: typeof SHA224n = SHA224n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha224: typeof sha224n = sha224n;\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64, toBase64 } from '@mysten/bcs';\nimport { blake2b } from '@noble/hashes/blake2b';\nimport { bytesToHex } from '@noble/hashes/utils';\n\nimport { bcs } from '../bcs/index.js';\nimport { normalizeSuiAddress, SUI_ADDRESS_LENGTH } from '../utils/sui-types.js';\nimport type { IntentScope } from './intent.js';\nimport { messageWithIntent } from './intent.js';\nimport { SIGNATURE_FLAG_TO_SCHEME, SIGNATURE_SCHEME_TO_SIZE } from './signature-scheme.js';\n\n/**\n * Value to be converted into public key.\n */\nexport type PublicKeyInitData = string | Uint8Array | Iterable<number>;\n\nexport function bytesEqual(a: Uint8Array, b: Uint8Array) {\n\tif (a === b) return true;\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * A public key\n */\nexport abstract class PublicKey {\n\t/**\n\t * Checks if two public keys are equal\n\t */\n\tequals(publicKey: PublicKey) {\n\t\treturn bytesEqual(this.toRawBytes(), publicKey.toRawBytes());\n\t}\n\n\t/**\n\t * Return the base-64 representation of the public key\n\t */\n\ttoBase64() {\n\t\treturn toBase64(this.toRawBytes());\n\t}\n\n\ttoString(): never {\n\t\tthrow new Error(\n\t\t\t'`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.',\n\t\t);\n\t}\n\n\t/**\n\t * Return the Sui representation of the public key encoded in\n\t * base-64. A Sui public key is formed by the concatenation\n\t * of the scheme flag with the raw bytes of the public key\n\t */\n\ttoSuiPublicKey(): string {\n\t\tconst bytes = this.toSuiBytes();\n\t\treturn toBase64(bytes);\n\t}\n\n\tverifyWithIntent(\n\t\tbytes: Uint8Array,\n\t\tsignature: Uint8Array | string,\n\t\tintent: IntentScope,\n\t): Promise<boolean> {\n\t\tconst intentMessage = messageWithIntent(intent, bytes);\n\t\tconst digest = blake2b(intentMessage, { dkLen: 32 });\n\n\t\treturn this.verify(digest, signature);\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided PersonalMessage\n\t */\n\tverifyPersonalMessage(message: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\treturn this.verifyWithIntent(\n\t\t\tbcs.byteVector().serialize(message).toBytes(),\n\t\t\tsignature,\n\t\t\t'PersonalMessage',\n\t\t);\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided Transaction\n\t */\n\tverifyTransaction(transaction: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\treturn this.verifyWithIntent(transaction, signature, 'TransactionData');\n\t}\n\n\t/**\n\t * Verifies that the public key is associated with the provided address\n\t */\n\tverifyAddress(address: string): boolean {\n\t\treturn this.toSuiAddress() === address;\n\t}\n\n\t/**\n\t * Returns the bytes representation of the public key\n\t * prefixed with the signature scheme flag\n\t */\n\ttoSuiBytes(): Uint8Array<ArrayBuffer> {\n\t\tconst rawBytes = this.toRawBytes();\n\t\tconst suiBytes = new Uint8Array(rawBytes.length + 1);\n\t\tsuiBytes.set([this.flag()]);\n\t\tsuiBytes.set(rawBytes, 1);\n\n\t\treturn suiBytes;\n\t}\n\n\t/**\n\t * Return the Sui address associated with this Ed25519 public key\n\t */\n\ttoSuiAddress(): string {\n\t\t// Each hex char represents half a byte, hence hex address doubles the length\n\t\treturn normalizeSuiAddress(\n\t\t\tbytesToHex(blake2b(this.toSuiBytes(), { dkLen: 32 })).slice(0, SUI_ADDRESS_LENGTH * 2),\n\t\t);\n\t}\n\n\t/**\n\t * Return the byte array representation of the public key\n\t */\n\tabstract toRawBytes(): Uint8Array<ArrayBuffer>;\n\n\t/**\n\t * Return signature scheme flag of the public key\n\t */\n\tabstract flag(): number;\n\n\t/**\n\t * Verifies that the signature is valid for for the provided message\n\t */\n\tabstract verify(data: Uint8Array, signature: Uint8Array | string): Promise<boolean>;\n}\n\nexport function parseSerializedKeypairSignature(serializedSignature: string) {\n\tconst bytes = fromBase64(serializedSignature);\n\n\tconst signatureScheme =\n\t\tSIGNATURE_FLAG_TO_SCHEME[bytes[0] as keyof typeof SIGNATURE_FLAG_TO_SCHEME];\n\n\tswitch (signatureScheme) {\n\t\tcase 'ED25519':\n\t\tcase 'Secp256k1':\n\t\tcase 'Secp256r1':\n\t\t\tconst size =\n\t\t\t\tSIGNATURE_SCHEME_TO_SIZE[signatureScheme as keyof typeof SIGNATURE_SCHEME_TO_SIZE];\n\t\t\tconst signature = bytes.slice(1, bytes.length - size);\n\t\t\tconst publicKey = bytes.slice(1 + signature.length);\n\n\t\t\treturn {\n\t\t\t\tserializedSignature,\n\t\t\t\tsignatureScheme,\n\t\t\t\tsignature,\n\t\t\t\tpublicKey,\n\t\t\t\tbytes,\n\t\t\t};\n\t\tdefault:\n\t\t\tthrow new Error('Unsupported signature scheme');\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64, toBase64 } from '@mysten/bcs';\nimport { secp256r1 } from '@noble/curves/p256';\nimport { sha256 } from '@noble/hashes/sha256';\n\nimport { PasskeyAuthenticator } from '../../bcs/bcs.js';\nimport { bytesEqual, PublicKey } from '../../cryptography/publickey.js';\nimport type { PublicKeyInitData } from '../../cryptography/publickey.js';\nimport { SIGNATURE_SCHEME_TO_FLAG } from '../../cryptography/signature-scheme.js';\n\nexport const PASSKEY_PUBLIC_KEY_SIZE = 33;\nexport const PASSKEY_UNCOMPRESSED_PUBLIC_KEY_SIZE = 65;\nexport const PASSKEY_SIGNATURE_SIZE = 64;\n/** Fixed DER header for secp256r1 SubjectPublicKeyInfo\nDER structure for P-256 SPKI:\n30 -- SEQUENCE\n  59 -- length (89 bytes)\n  30 -- SEQUENCE\n    13 -- length (19 bytes)\n    06 -- OBJECT IDENTIFIER\n      07 -- length\n      2A 86 48 CE 3D 02 01 -- id-ecPublicKey\n    06 -- OBJECT IDENTIFIER\n      08 -- length\n      2A 86 48 CE 3D 03 01 07 -- secp256r1/prime256v1\n  03 -- BIT STRING\n    42 -- length (66 bytes)\n    00 -- padding\n\t===== above bytes are considered header =====\n    04 || x || y -- uncompressed point (65 bytes: 0x04 || 32-byte x || 32-byte y)\n*/\nexport const SECP256R1_SPKI_HEADER = new Uint8Array([\n\t0x30,\n\t0x59, // SEQUENCE, length 89\n\t0x30,\n\t0x13, // SEQUENCE, length 19\n\t0x06,\n\t0x07, // OID, length 7\n\t0x2a,\n\t0x86,\n\t0x48,\n\t0xce,\n\t0x3d,\n\t0x02,\n\t0x01, // OID: 1.2.840.10045.2.1 (ecPublicKey)\n\t0x06,\n\t0x08, // OID, length 8\n\t0x2a,\n\t0x86,\n\t0x48,\n\t0xce,\n\t0x3d,\n\t0x03,\n\t0x01,\n\t0x07, // OID: 1.2.840.10045.3.1.7 (prime256v1/secp256r1)\n\t0x03,\n\t0x42, // BIT STRING, length 66\n\t0x00, // no unused bits\n] as const);\n\n/**\n * A passkey public key\n */\nexport class PasskeyPublicKey extends PublicKey {\n\tstatic SIZE = PASSKEY_PUBLIC_KEY_SIZE;\n\tprivate data: Uint8Array<ArrayBuffer>;\n\n\t/**\n\t * Create a new PasskeyPublicKey object\n\t * @param value passkey public key as buffer or base-64 encoded string\n\t */\n\tconstructor(value: PublicKeyInitData) {\n\t\tsuper();\n\n\t\tif (typeof value === 'string') {\n\t\t\tthis.data = fromBase64(value);\n\t\t} else if (value instanceof Uint8Array) {\n\t\t\tthis.data = value as Uint8Array<ArrayBuffer>;\n\t\t} else {\n\t\t\tthis.data = Uint8Array.from(value);\n\t\t}\n\n\t\tif (this.data.length !== PASSKEY_PUBLIC_KEY_SIZE) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid public key input. Expected ${PASSKEY_PUBLIC_KEY_SIZE} bytes, got ${this.data.length}`,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if two passkey public keys are equal\n\t */\n\toverride equals(publicKey: PasskeyPublicKey): boolean {\n\t\treturn super.equals(publicKey);\n\t}\n\n\t/**\n\t * Return the byte array representation of the Secp256r1 public key\n\t */\n\ttoRawBytes(): Uint8Array<ArrayBuffer> {\n\t\treturn this.data;\n\t}\n\n\t/**\n\t * Return the Sui address associated with this Secp256r1 public key\n\t */\n\tflag(): number {\n\t\treturn SIGNATURE_SCHEME_TO_FLAG['Passkey'];\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided message\n\t */\n\tasync verify(message: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\tconst parsed = parseSerializedPasskeySignature(signature);\n\t\tconst clientDataJSON = JSON.parse(parsed.clientDataJson);\n\n\t\tif (clientDataJSON.type !== 'webauthn.get') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// parse challenge from base64 url\n\t\tconst parsedChallenge = fromBase64(\n\t\t\tclientDataJSON.challenge.replace(/-/g, '+').replace(/_/g, '/'),\n\t\t);\n\t\tif (!bytesEqual(message, parsedChallenge)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pk = parsed.userSignature.slice(1 + PASSKEY_SIGNATURE_SIZE);\n\t\tif (!bytesEqual(this.toRawBytes(), pk)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst payload = new Uint8Array([...parsed.authenticatorData, ...sha256(parsed.clientDataJson)]);\n\t\tconst sig = parsed.userSignature.slice(1, PASSKEY_SIGNATURE_SIZE + 1);\n\t\treturn secp256r1.verify(sig, sha256(payload), pk);\n\t}\n}\n\n/**\n * Parses a DER SubjectPublicKeyInfo into an uncompressed public key. This also verifies\n * that the curve used is P-256 (secp256r1).\n *\n * @param data: DER SubjectPublicKeyInfo\n * @returns uncompressed public key (`0x04 || x || y`)\n */\nexport function parseDerSPKI(derBytes: Uint8Array): Uint8Array {\n\t// Verify length and header bytes are expected\n\tif (derBytes.length !== SECP256R1_SPKI_HEADER.length + PASSKEY_UNCOMPRESSED_PUBLIC_KEY_SIZE) {\n\t\tthrow new Error('Invalid DER length');\n\t}\n\tfor (let i = 0; i < SECP256R1_SPKI_HEADER.length; i++) {\n\t\tif (derBytes[i] !== SECP256R1_SPKI_HEADER[i]) {\n\t\t\tthrow new Error('Invalid spki header');\n\t\t}\n\t}\n\n\tif (derBytes[SECP256R1_SPKI_HEADER.length] !== 0x04) {\n\t\tthrow new Error('Invalid point marker');\n\t}\n\n\t// Returns the last 65 bytes `04 || x || y`\n\treturn derBytes.slice(SECP256R1_SPKI_HEADER.length);\n}\n\n/**\n * Parse signature from bytes or base64 string into the following fields.\n */\nexport function parseSerializedPasskeySignature(signature: Uint8Array | string) {\n\tconst bytes = typeof signature === 'string' ? fromBase64(signature) : signature;\n\n\tif (bytes[0] !== SIGNATURE_SCHEME_TO_FLAG.Passkey) {\n\t\tthrow new Error('Invalid signature scheme');\n\t}\n\tconst dec = PasskeyAuthenticator.parse(bytes.slice(1));\n\treturn {\n\t\tsignatureScheme: 'Passkey' as const,\n\t\tserializedSignature: toBase64(bytes),\n\t\tsignature: bytes,\n\t\tauthenticatorData: dec.authenticatorData,\n\t\tclientDataJson: dec.clientDataJson,\n\t\tuserSignature: new Uint8Array(dec.userSignature),\n\t\tpublicKey: new Uint8Array(dec.userSignature.slice(1 + PASSKEY_SIGNATURE_SIZE)),\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n/* eslint-disable */\n\nimport { MoveTypeLayout } from '../types.js';\nimport { MoveTypeSignature } from '../types.js';\nimport { OpenMoveTypeSignature } from '../types.js';\nimport { DocumentTypeDecoration } from '@graphql-typed-document-node/core';\nexport type Maybe<T> = T | null;\nexport type InputMaybe<T> = Maybe<T>;\nexport type Exact<T extends { [key: string]: unknown }> = { [K in keyof T]: T[K] };\nexport type MakeOptional<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]?: Maybe<T[SubKey]> };\nexport type MakeMaybe<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]: Maybe<T[SubKey]> };\nexport type MakeEmpty<T extends { [key: string]: unknown }, K extends keyof T> = { [_ in K]?: never };\nexport type Incremental<T> = T | { [P in keyof T]?: P extends ' $fragmentName' | '__typename' ? T[P] : never };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: { input: string; output: string; }\n  String: { input: string; output: string; }\n  Boolean: { input: boolean; output: boolean; }\n  Int: { input: number; output: number; }\n  Float: { input: number; output: number; }\n  /** String containing Base64-encoded binary data. */\n  Base64: { input: string; output: string; }\n  /** String representation of an arbitrary width, possibly signed integer */\n  BigInt: { input: string; output: string; }\n  /** ISO-8601 Date and Time: RFC3339 in UTC with format: YYYY-MM-DDTHH:MM:SS.mmmZ. Note that the milliseconds part is optional, and it may be omitted if its value is 0. */\n  DateTime: { input: string; output: string; }\n  /** Arbitrary JSON data. */\n  JSON: { input: unknown; output: unknown; }\n  /**\n   * The shape of a concrete Move Type (a type with all its type parameters instantiated with concrete types), corresponding to the following recursive type:\n   *\n   * type MoveTypeLayout =\n   *     \"address\"\n   *   | \"bool\"\n   *   | \"u8\" | \"u16\" | ... | \"u256\"\n   *   | { vector: MoveTypeLayout }\n   *   | {\n   *       struct: {\n   *         type: string,\n   *         fields: [{ name: string, layout: MoveTypeLayout }],\n   *       }\n   *     }\n   *   | { enum: [{\n   *           type: string,\n   *           variants: [{\n   *               name: string,\n   *               fields: [{ name: string, layout: MoveTypeLayout }],\n   *           }]\n   *       }]\n   *   }\n   */\n  MoveTypeLayout: { input: MoveTypeLayout; output: MoveTypeLayout; }\n  /**\n   * The signature of a concrete Move Type (a type with all its type parameters instantiated with concrete types, that contains no references), corresponding to the following recursive type:\n   *\n   * type MoveTypeSignature =\n   *     \"address\"\n   *   | \"bool\"\n   *   | \"u8\" | \"u16\" | ... | \"u256\"\n   *   | { vector: MoveTypeSignature }\n   *   | {\n   *       datatype: {\n   *         package: string,\n   *         module: string,\n   *         type: string,\n   *         typeParameters: [MoveTypeSignature],\n   *       }\n   *     }\n   */\n  MoveTypeSignature: { input: MoveTypeSignature; output: MoveTypeSignature; }\n  /**\n   * The shape of an abstract Move Type (a type that can contain free type parameters, and can optionally be taken by reference), corresponding to the following recursive type:\n   *\n   * type OpenMoveTypeSignature = {\n   *   ref: (\"&\" | \"&mut\")?,\n   *   body: OpenMoveTypeSignatureBody,\n   * }\n   *\n   * type OpenMoveTypeSignatureBody =\n   *     \"address\"\n   *   | \"bool\"\n   *   | \"u8\" | \"u16\" | ... | \"u256\"\n   *   | { vector: OpenMoveTypeSignatureBody }\n   *   | {\n   *       datatype {\n   *         package: string,\n   *         module: string,\n   *         type: string,\n   *         typeParameters: [OpenMoveTypeSignatureBody]\n   *       }\n   *     }\n   *   | { typeParameter: number }\n   */\n  OpenMoveTypeSignature: { input: OpenMoveTypeSignature; output: OpenMoveTypeSignature; }\n  /** String containing 32 byte hex-encoded address, with a leading '0x'. Leading zeroes can be omitted on input but will always appear in outputs (SuiAddress in output is guaranteed to be 66 characters long). */\n  SuiAddress: { input: string; output: string; }\n  /** An unsigned integer that can hold values up to 2^53 - 1. This can be treated similarly to `Int`, but it is guaranteed to be non-negative, and it may be larger than 2^32 - 1. */\n  UInt53: { input: number; output: number; }\n};\n\n/** System transaction for creating the accumulator root. */\nexport type AccumulatorRootCreateTransaction = {\n  __typename?: 'AccumulatorRootCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\nexport type ActiveJwk = {\n  __typename?: 'ActiveJwk';\n  /** The JWK algorithm parameter, (RFC 7517, Section 4.4). */\n  alg?: Maybe<Scalars['String']['output']>;\n  /** The JWK RSA public exponent, (RFC 7517, Section 9.3). */\n  e?: Maybe<Scalars['String']['output']>;\n  /** The most recent epoch in which the JWK was validated. */\n  epoch?: Maybe<Epoch>;\n  /** The string (Issuing Authority) that identifies the OIDC provider. */\n  iss?: Maybe<Scalars['String']['output']>;\n  /** The string (Key ID) that identifies the JWK among a set of JWKs, (RFC 7517, Section 4.5). */\n  kid?: Maybe<Scalars['String']['output']>;\n  /** The JWK key type parameter, (RFC 7517, Section 4.1). */\n  kty?: Maybe<Scalars['String']['output']>;\n  /** The JWK RSA modulus, (RFC 7517, Section 9.3). */\n  n?: Maybe<Scalars['String']['output']>;\n};\n\nexport type ActiveJwkConnection = {\n  __typename?: 'ActiveJwkConnection';\n  /** A list of edges. */\n  edges: Array<ActiveJwkEdge>;\n  /** A list of nodes. */\n  nodes: Array<ActiveJwk>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type ActiveJwkEdge = {\n  __typename?: 'ActiveJwkEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: ActiveJwk;\n};\n\nexport type Address = IAddressable & {\n  __typename?: 'Address';\n  /** The Address' identifier, a 32-byte number represented as a 64-character hex string, with a lead \"0x\". */\n  address: Scalars['SuiAddress']['output'];\n  /** Attempts to fetch the object at this address. */\n  asObject?: Maybe<Object>;\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to the object with this address.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /**\n   * Dynamic fields owned by this address.\n   *\n   * The address must correspond to an object (account addresses cannot own dynamic fields), but that object may be wrapped.\n   */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to the object with this address.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n  /** Objects owned by this address, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /**\n   * Transactions associated with this address.\n   *\n   * Similar behavior to the `transactions` in Query but supporting the additional `AddressTransactionRelationship` filter, which defaults to `SENT`.\n   */\n  transactions?: Maybe<TransactionConnection>;\n};\n\n\nexport type AddressBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\nexport type AddressBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type AddressDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\nexport type AddressDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type AddressDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\nexport type AddressMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\nexport type AddressMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\nexport type AddressMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\nexport type AddressObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type AddressTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n  relation?: InputMaybe<AddressTransactionRelationship>;\n};\n\n/** Object is exclusively owned by a single address, and is mutable. */\nexport type AddressOwner = {\n  __typename?: 'AddressOwner';\n  /** The owner's address. */\n  address?: Maybe<Address>;\n};\n\n/** The possible relationship types for a transaction: sent or affected. */\nexport enum AddressTransactionRelationship {\n  /** Transactions that this address was involved in, either as the sender, sponsor, or as the owner of some object that was created, modified or transferred. */\n  Affected = 'AFFECTED',\n  /** Transactions this address has sent. */\n  Sent = 'SENT'\n}\n\n/** System transaction for creating the on-chain state used by zkLogin. */\nexport type AuthenticatorStateCreateTransaction = {\n  __typename?: 'AuthenticatorStateCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** System transaction that is executed at the end of an epoch to expire JSON Web Keys (JWKs) that are no longer valid, based on their associated epoch. This is part of the on-chain state management for zkLogin and authentication. */\nexport type AuthenticatorStateExpireTransaction = {\n  __typename?: 'AuthenticatorStateExpireTransaction';\n  /** The initial version that the AuthenticatorStateUpdate was shared at. */\n  authenticatorObjInitialSharedVersion?: Maybe<Scalars['UInt53']['output']>;\n  /** Expire JWKs that have a lower epoch than this. */\n  minEpoch?: Maybe<Epoch>;\n};\n\nexport type AuthenticatorStateUpdateTransaction = {\n  __typename?: 'AuthenticatorStateUpdateTransaction';\n  /** The initial version of the authenticator object that it was shared at. */\n  authenticatorObjInitialSharedVersion?: Maybe<Scalars['UInt53']['output']>;\n  /** Epoch of the authenticator state update transaction. */\n  epoch?: Maybe<Epoch>;\n  /** Newly active JWKs (JSON Web Keys). */\n  newActiveJwks?: Maybe<ActiveJwkConnection>;\n  /** Consensus round of the authenticator state update. */\n  round?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\nexport type AuthenticatorStateUpdateTransactionNewActiveJwksArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** Checkpoint range for which data is available. */\nexport type AvailableRange = {\n  __typename?: 'AvailableRange';\n  /** Inclusive lower checkpoint for which data is available. */\n  first?: Maybe<Checkpoint>;\n  /** Inclusive upper checkpoint for which data is available. */\n  last?: Maybe<Checkpoint>;\n};\n\n/** The total balance for a particular coin type. */\nexport type Balance = {\n  __typename?: 'Balance';\n  /** Coin type for the balance, such as `0x2::sui::SUI`. */\n  coinType?: Maybe<MoveType>;\n  /** The total balance across all coin objects of this coin type. */\n  totalBalance?: Maybe<Scalars['BigInt']['output']>;\n};\n\n/** Effects to the balance (sum of coin values per coin type) of addresses and objects. */\nexport type BalanceChange = {\n  __typename?: 'BalanceChange';\n  /** The signed balance change. */\n  amount?: Maybe<Scalars['BigInt']['output']>;\n  /** The inner type of the coin whose balance has changed (e.g. `0x2::sui::SUI`). */\n  coinType?: Maybe<MoveType>;\n  /** The address or object whose balance has changed. */\n  owner?: Maybe<Address>;\n};\n\nexport type BalanceChangeConnection = {\n  __typename?: 'BalanceChangeConnection';\n  /** A list of edges. */\n  edges: Array<BalanceChangeEdge>;\n  /** A list of nodes. */\n  nodes: Array<BalanceChange>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type BalanceChangeEdge = {\n  __typename?: 'BalanceChangeEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: BalanceChange;\n};\n\nexport type BalanceConnection = {\n  __typename?: 'BalanceConnection';\n  /** A list of edges. */\n  edges: Array<BalanceEdge>;\n  /** A list of nodes. */\n  nodes: Array<Balance>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type BalanceEdge = {\n  __typename?: 'BalanceEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Balance;\n};\n\n/** System transaction for initializing bridge committee. */\nexport type BridgeCommitteeInitTransaction = {\n  __typename?: 'BridgeCommitteeInitTransaction';\n  /** The initial shared version of the bridge object. */\n  bridgeObjectVersion?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** System transaction for creating bridge state for cross-chain operations. */\nexport type BridgeStateCreateTransaction = {\n  __typename?: 'BridgeStateCreateTransaction';\n  /** The chain identifier for which this bridge state is being created. */\n  chainIdentifier?: Maybe<Scalars['String']['output']>;\n};\n\n/**\n * A system transaction that updates epoch information on-chain (increments the current epoch). Executed by the system once per epoch, without using gas. Epoch change transactions cannot be submitted by users, because validators will refuse to sign them.\n *\n * This transaction kind is deprecated in favour of `EndOfEpochTransaction`.\n */\nexport type ChangeEpochTransaction = {\n  __typename?: 'ChangeEpochTransaction';\n  /** The total amount of gas charged for computation during the epoch. */\n  computationCharge?: Maybe<Scalars['UInt53']['output']>;\n  /** The next (to become) epoch. */\n  epoch?: Maybe<Epoch>;\n  /** Unix timestamp when epoch started. */\n  epochStartTimestamp?: Maybe<Scalars['DateTime']['output']>;\n  /** The non-refundable storage fee. */\n  nonRefundableStorageFee?: Maybe<Scalars['UInt53']['output']>;\n  /** The epoch's corresponding protocol configuration. */\n  protocolConfigs?: Maybe<ProtocolConfigs>;\n  /** The total amount of gas charged for storage during the epoch. */\n  storageCharge?: Maybe<Scalars['UInt53']['output']>;\n  /** The amount of storage rebate refunded to the transaction senders. */\n  storageRebate?: Maybe<Scalars['UInt53']['output']>;\n  /** System packages that will be written by validators before the new epoch starts, to upgrade them on-chain. These objects do not have a \"previous transaction\" because they are not written on-chain yet. Consult `effects.objectChanges` for this transaction to see the actual objects written. */\n  systemPackages?: Maybe<MovePackageConnection>;\n};\n\n\n/**\n * A system transaction that updates epoch information on-chain (increments the current epoch). Executed by the system once per epoch, without using gas. Epoch change transactions cannot be submitted by users, because validators will refuse to sign them.\n *\n * This transaction kind is deprecated in favour of `EndOfEpochTransaction`.\n */\nexport type ChangeEpochTransactionSystemPackagesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** Checkpoints contain finalized transactions and are used for node synchronization and global transaction ordering. */\nexport type Checkpoint = {\n  __typename?: 'Checkpoint';\n  /**\n   * A commitment by the committee at each checkpoint on the artifacts of the checkpoint.\n   * e.g., object checkpoint states\n   */\n  artifactsDigest?: Maybe<Scalars['String']['output']>;\n  /** The Base64 serialized BCS bytes of this checkpoint's contents. */\n  contentBcs?: Maybe<Scalars['Base64']['output']>;\n  /** A 32-byte hash that uniquely identifies the checkpoint's content, encoded in Base58. */\n  contentDigest?: Maybe<Scalars['String']['output']>;\n  /** A 32-byte hash that uniquely identifies the checkpoint, encoded in Base58. This is a hash of the checkpoint's summary. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /** The epoch that this checkpoint is part of. */\n  epoch?: Maybe<Epoch>;\n  /** The total number of transactions in the network by the end of this checkpoint. */\n  networkTotalTransactions?: Maybe<Scalars['UInt53']['output']>;\n  /** The digest of the previous checkpoint's summary. */\n  previousCheckpointDigest?: Maybe<Scalars['String']['output']>;\n  /** Query the RPC as if this checkpoint were the latest checkpoint. */\n  query?: Maybe<Query>;\n  /** The computation cost, storage cost, storage rebate, and non-refundable storage fee accumulated during this epoch, up to and including this checkpoint. These values increase monotonically across checkpoints in the same epoch, and reset on epoch boundaries. */\n  rollingGasSummary?: Maybe<GasCostSummary>;\n  /** The checkpoint's position in the total order of finalized checkpoints, agreed upon by consensus. */\n  sequenceNumber: Scalars['UInt53']['output'];\n  /** The Base64 serialized BCS bytes of this checkpoint's summary. */\n  summaryBcs?: Maybe<Scalars['Base64']['output']>;\n  /** The timestamp at which the checkpoint is agreed to have happened according to consensus. Transactions that access time in this checkpoint will observe this timestamp. */\n  timestamp?: Maybe<Scalars['DateTime']['output']>;\n  transactions?: Maybe<TransactionConnection>;\n  /** The aggregation of signatures from a quorum of validators for the checkpoint proposal. */\n  validatorSignatures?: Maybe<ValidatorAggregatedSignature>;\n};\n\n\n/** Checkpoints contain finalized transactions and are used for node synchronization and global transaction ordering. */\nexport type CheckpointTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type CheckpointConnection = {\n  __typename?: 'CheckpointConnection';\n  /** A list of edges. */\n  edges: Array<CheckpointEdge>;\n  /** A list of nodes. */\n  nodes: Array<Checkpoint>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type CheckpointEdge = {\n  __typename?: 'CheckpointEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Checkpoint;\n};\n\nexport type CheckpointFilter = {\n  /** Limit query results to checkpoints that occured strictly after the given checkpoint. */\n  afterCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Limit query results to checkpoints that occured at the given checkpoint. */\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Limit query results to checkpoints at this epoch. */\n  atEpoch?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Limit query results to checkpoints that occured strictly before the given checkpoint. */\n  beforeCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n/** System transaction for creating the coin deny list state. */\nexport type CoinDenyListStateCreateTransaction = {\n  __typename?: 'CoinDenyListStateCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadata = IAddressable & IMoveObject & IObject & {\n  __typename?: 'CoinMetadata';\n  /** The CoinMetadata's ID. */\n  address: Scalars['SuiAddress']['output'];\n  /** Whether the `DenyCap` can be used to enable a global pause that behaves as if all addresses were added to the deny list. `null` indicates that it is not known whether the currency can be paused or not. This field is only populated on currencies held in the Coin Registry. To determine whether a legacy currency can be paused, check the contents of its `DenyCap`, if it can be found. */\n  allowGlobalPause?: Maybe<Scalars['Boolean']['output']>;\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The structured representation of the object's contents. */\n  contents?: Maybe<MoveValue>;\n  /** Number of decimal places the coin uses. */\n  decimals?: Maybe<Scalars['Int']['output']>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** If the currency is regulated, this object represents the capability to modify the deny list. If a capability is known but wrapped, its address can be fetched but other fields will not be accessible. */\n  denyCap?: Maybe<MoveObject>;\n  /** Description of the coin. */\n  description?: Maybe<Scalars['String']['output']>;\n  /** 32-byte hash that identifies the object's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to this object.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /**\n   * Dynamic fields owned by this object.\n   *\n   * Dynamic fields on wrapped objects can be accessed using `Address.dynamicFields`.\n   */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to this object.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Whether this object can be transfered using the `TransferObjects` Programmable Transaction Command or `sui::transfer::public_transfer`.\n   *\n   * Both these operations require the object to have both the `key` and `store` abilities.\n   */\n  hasPublicTransfer?: Maybe<Scalars['Boolean']['output']>;\n  /** URL for the coin logo. */\n  iconUrl?: Maybe<Scalars['String']['output']>;\n  /** The Base64-encoded BCS serialize of this object, as a `MoveObject`. */\n  moveObjectBcs?: Maybe<Scalars['Base64']['output']>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n  /** Name for the coin. */\n  name?: Maybe<Scalars['String']['output']>;\n  /** Fetch the object with the same ID, at a different version, root version bound, or checkpoint. */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this object, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this object after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this object before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** Objects owned by this object, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /** The transaction that created this version of the object. */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object. */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** Whether the currency is regulated or not. `null` indicates that the regulatory status is unknown. */\n  regulatedState?: Maybe<RegulatedState>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** The overall balance of coins issued. */\n  supply?: Maybe<Scalars['BigInt']['output']>;\n  /** Future behavior of the supply. `null` indicates that the future behavior of the supply is not known because the currency's treasury still exists. */\n  supplyState?: Maybe<SupplyState>;\n  /** Symbol for the coin. */\n  symbol?: Maybe<Scalars['String']['output']>;\n  /** The version of this object that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** An object representing metadata about a coin type. */\nexport type CoinMetadataReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** System transaction for creating the coin registry. */\nexport type CoinRegistryCreateTransaction = {\n  __typename?: 'CoinRegistryCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** A single command in the programmable transaction. */\nexport type Command = MakeMoveVecCommand | MergeCoinsCommand | MoveCallCommand | OtherCommand | PublishCommand | SplitCoinsCommand | TransferObjectsCommand | UpgradeCommand;\n\nexport type CommandConnection = {\n  __typename?: 'CommandConnection';\n  /** A list of edges. */\n  edges: Array<CommandEdge>;\n  /** A list of nodes. */\n  nodes: Array<Command>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type CommandEdge = {\n  __typename?: 'CommandEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Command;\n};\n\n/**\n * A value produced or modified during command execution.\n *\n * This can represent either a return value from a command or an argument that was mutated by reference.\n */\nexport type CommandOutput = {\n  __typename?: 'CommandOutput';\n  /** The transaction argument that this value corresponds to (if any). */\n  argument?: Maybe<TransactionArgument>;\n  /** The structured Move value, if available. */\n  value?: Maybe<MoveValue>;\n};\n\n/** The intermediate results for each command of a transaction simulation. */\nexport type CommandResult = {\n  __typename?: 'CommandResult';\n  /** Changes made to arguments that were mutably borrowed by each command in this transaction. */\n  mutatedReferences?: Maybe<Array<CommandOutput>>;\n  /** Return results of each command in this transaction. */\n  returnValues?: Maybe<Array<CommandOutput>>;\n};\n\n/** Object is exclusively owned by a single adderss and sequenced via consensus. */\nexport type ConsensusAddressOwner = {\n  __typename?: 'ConsensusAddressOwner';\n  /** The owner's address. */\n  address?: Maybe<Address>;\n  /** The version at which the object most recently bcame a consensus object. This serves the same function as `Shared.initialSharedVersion`, except it may change if the object's `owner` type changes. */\n  startVersion?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** System transaction that runs at the beginning of a checkpoint, and is responsible for setting the current value of the clock, based on the timestamp from consensus. */\nexport type ConsensusCommitPrologueTransaction = {\n  __typename?: 'ConsensusCommitPrologueTransaction';\n  /**\n   * Digest of any additional state computed by the consensus handler.\n   * Used to detect forking bugs as early as possible.\n   *\n   * Present in V4.\n   */\n  additionalStateDigest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Unix timestamp from consensus.\n   *\n   * Present in V1, V2, V3, V4.\n   */\n  commitTimestamp?: Maybe<Scalars['DateTime']['output']>;\n  /**\n   * Digest of consensus output, encoded as a Base58 string.\n   *\n   * Present in V2, V3, V4.\n   */\n  consensusCommitDigest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Epoch of the commit prologue transaction.\n   *\n   * Present in V1, V2, V3, V4.\n   */\n  epoch?: Maybe<Epoch>;\n  /**\n   * Consensus round of the commit.\n   *\n   * Present in V1, V2, V3, V4.\n   */\n  round?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * The sub DAG index of the consensus commit. This field is populated if there\n   * are multiple consensus commits per round.\n   *\n   * Present in V3, V4.\n   */\n  subDagIndex?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** Reason why a transaction that attempted to access a consensus-managed object was cancelled. */\nexport enum ConsensusObjectCancellationReason {\n  /** Read operation was cancelled. */\n  CancelledRead = 'CANCELLED_READ',\n  /** Object congestion prevented execution. */\n  Congested = 'CONGESTED',\n  /** Randomness service was unavailable. */\n  RandomnessUnavailable = 'RANDOMNESS_UNAVAILABLE',\n  /** Internal use only. */\n  Unknown = 'UNKNOWN'\n}\n\n/** A transaction that was cancelled before it could access the consensus-managed object, so the object was an input but remained unchanged. */\nexport type ConsensusObjectCancelled = {\n  __typename?: 'ConsensusObjectCancelled';\n  /** The ID of the consensus-managed object that the transaction intended to access. */\n  address?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Reason why the transaction was cancelled. */\n  cancellationReason?: Maybe<ConsensusObjectCancellationReason>;\n};\n\nexport type ConsensusObjectRead = {\n  __typename?: 'ConsensusObjectRead';\n  /** The version of the consensus-managed object that was read by this transaction. */\n  object?: Maybe<Object>;\n};\n\n/** A rendered JSON blob based on an on-chain template. */\nexport type Display = {\n  __typename?: 'Display';\n  /** If any fields failed to render, this will contain a mapping from failed field names to error messages. If all fields succeed, this will be `null`. */\n  errors?: Maybe<Scalars['JSON']['output']>;\n  /** Output for all successfully substituted display fields. Unsuccessful fields will be `null`, and will be accompanied by a field in `errors`, explaining the error. */\n  output?: Maybe<Scalars['JSON']['output']>;\n};\n\n/** System transaction for creating the display registry. */\nexport type DisplayRegistryCreateTransaction = {\n  __typename?: 'DisplayRegistryCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicField = IAddressable & IMoveObject & IObject & {\n  __typename?: 'DynamicField';\n  /** The DynamicField's ID. */\n  address: Scalars['SuiAddress']['output'];\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The structured representation of the object's contents. */\n  contents?: Maybe<MoveValue>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** 32-byte hash that identifies the object's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to this object.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /**\n   * Dynamic fields owned by this object.\n   *\n   * Dynamic fields on wrapped objects can be accessed using `Address.dynamicFields`.\n   */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to this object.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Whether this object can be transfered using the `TransferObjects` Programmable Transaction Command or `sui::transfer::public_transfer`.\n   *\n   * Both these operations require the object to have both the `key` and `store` abilities.\n   */\n  hasPublicTransfer?: Maybe<Scalars['Boolean']['output']>;\n  /** The Base64-encoded BCS serialize of this object, as a `MoveObject`. */\n  moveObjectBcs?: Maybe<Scalars['Base64']['output']>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n  /** The dynamic field's name, as a Move value. */\n  name?: Maybe<MoveValue>;\n  /** Fetch the object with the same ID, at a different version, root version bound, or checkpoint. */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this object, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this object after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this object before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** Objects owned by this object, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /** The transaction that created this version of the object. */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object. */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** The dynamic field's value, as a Move value for dynamic fields and as a MoveObject for dynamic object fields. */\n  value?: Maybe<DynamicFieldValue>;\n  /** The version of this object that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Dynamic fields are heterogenous fields that can be added or removed from an object at runtime. Their names are arbitrary Move values that have `copy`, `drop`, and `store`.\n *\n * There are two sub-types of dynamic fields:\n *\n * - Dynamic fields can store any value that has `store`. Objects stored in this kind of field will be considered wrapped (not accessible via its ID by external tools like explorers, wallets, etc. accessing storage).\n * - Dynamic object fields can only store objects (values that have the `key` ability, and an `id: UID` as its first field) that have `store`, but they will still be directly accessible off-chain via their ID after being attached as a field.\n */\nexport type DynamicFieldReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type DynamicFieldConnection = {\n  __typename?: 'DynamicFieldConnection';\n  /** A list of edges. */\n  edges: Array<DynamicFieldEdge>;\n  /** A list of nodes. */\n  nodes: Array<DynamicField>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type DynamicFieldEdge = {\n  __typename?: 'DynamicFieldEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: DynamicField;\n};\n\n/** A description of a dynamic field's name. */\nexport type DynamicFieldName = {\n  /** The Base64-encoded BCS serialization of the dynamic field's 'name'. */\n  bcs: Scalars['Base64']['input'];\n  /** The type of the dynamic field's name, like 'u64' or '0x2::kiosk::Listing'. */\n  type: Scalars['String']['input'];\n};\n\n/** The value of a dynamic field (`MoveValue`) or dynamic object field (`MoveObject`). */\nexport type DynamicFieldValue = MoveObject | MoveValue;\n\n/** System transaction that supersedes `ChangeEpochTransaction` as the new way to run transactions at the end of an epoch. Behaves similarly to `ChangeEpochTransaction` but can accommodate other optional transactions to run at the end of the epoch. */\nexport type EndOfEpochTransaction = {\n  __typename?: 'EndOfEpochTransaction';\n  /** The list of system transactions that are allowed to run at the end of the epoch. */\n  transactions?: Maybe<EndOfEpochTransactionKindConnection>;\n};\n\n\n/** System transaction that supersedes `ChangeEpochTransaction` as the new way to run transactions at the end of an epoch. Behaves similarly to `ChangeEpochTransaction` but can accommodate other optional transactions to run at the end of the epoch. */\nexport type EndOfEpochTransactionTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type EndOfEpochTransactionKind = AccumulatorRootCreateTransaction | AuthenticatorStateCreateTransaction | AuthenticatorStateExpireTransaction | BridgeCommitteeInitTransaction | BridgeStateCreateTransaction | ChangeEpochTransaction | CoinDenyListStateCreateTransaction | CoinRegistryCreateTransaction | DisplayRegistryCreateTransaction | RandomnessStateCreateTransaction | StoreExecutionTimeObservationsTransaction;\n\nexport type EndOfEpochTransactionKindConnection = {\n  __typename?: 'EndOfEpochTransactionKindConnection';\n  /** A list of edges. */\n  edges: Array<EndOfEpochTransactionKindEdge>;\n  /** A list of nodes. */\n  nodes: Array<EndOfEpochTransactionKind>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type EndOfEpochTransactionKindEdge = {\n  __typename?: 'EndOfEpochTransactionKindEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: EndOfEpochTransactionKind;\n};\n\n/**\n * Activity on Sui is partitioned in time, into epochs.\n *\n * Epoch changes are opportunities for the network to reconfigure itself (perform protocol or system package upgrades, or change the committee) and distribute staking rewards. The network aims to keep epochs roughly the same duration as each other.\n *\n * During a particular epoch the following data is fixed:\n *\n * - protocol version,\n * - reference gas price,\n * - system package versions,\n * - validators in the committee.\n */\nexport type Epoch = {\n  __typename?: 'Epoch';\n  /** The epoch's corresponding checkpoints. */\n  checkpoints?: Maybe<CheckpointConnection>;\n  /**\n   * State of the Coin DenyList object (0x403) at the start of this epoch.\n   *\n   * The DenyList controls access to Regulated Coins. Writes to the DenyList are accumulated and only take effect on the next epoch boundary. Consequently, it's possible to determine the state of the DenyList for a transaction by reading it at the start of the epoch the transaction is in.\n   */\n  coinDenyList?: Maybe<Object>;\n  /** The timestamp associated with the last checkpoint in the epoch (or `null` if the epoch has not finished yet). */\n  endTimestamp?: Maybe<Scalars['DateTime']['output']>;\n  /** The epoch's id as a sequence number that starts at 0 and is incremented by one at every epoch change. */\n  epochId: Scalars['UInt53']['output'];\n  /** The storage fees paid for transactions executed during the epoch (or `null` if the epoch has not finished yet). */\n  fundInflow?: Maybe<Scalars['BigInt']['output']>;\n  /** The storage fee rebates paid to users who deleted the data associated with past transactions (or `null` if the epoch has not finished yet). */\n  fundOutflow?: Maybe<Scalars['BigInt']['output']>;\n  /**\n   * The storage fund available in this epoch (or `null` if the epoch has not finished yet).\n   * This fund is used to redistribute storage fees from past transactions to future validators.\n   */\n  fundSize?: Maybe<Scalars['BigInt']['output']>;\n  /**\n   * A commitment by the committee at the end of epoch on the contents of the live object set at that time.\n   * This can be used to verify state snapshots.\n   */\n  liveObjectSetDigest?: Maybe<Scalars['String']['output']>;\n  /** The difference between the fund inflow and outflow, representing the net amount of storage fees accumulated in this epoch (or `null` if the epoch has not finished yet). */\n  netInflow?: Maybe<Scalars['BigInt']['output']>;\n  /** The epoch's corresponding protocol configuration, including the feature flags and the configuration options. */\n  protocolConfigs?: Maybe<ProtocolConfigs>;\n  /** The minimum gas price that a quorum of validators are guaranteed to sign a transaction for in this epoch. */\n  referenceGasPrice?: Maybe<Scalars['BigInt']['output']>;\n  /** Information about whether this epoch was started in safe mode, which happens if the full epoch change logic fails. */\n  safeMode?: Maybe<SafeMode>;\n  /** The timestamp associated with the first checkpoint in the epoch. */\n  startTimestamp?: Maybe<Scalars['DateTime']['output']>;\n  /**\n   * SUI set aside to account for objects stored on-chain, at the start of the epoch.\n   * This is also used for storage rebates.\n   */\n  storageFund?: Maybe<StorageFund>;\n  /** The system packages used by all transactions in this epoch. */\n  systemPackages?: Maybe<MovePackageConnection>;\n  /** Details of the system that are decided during genesis. */\n  systemParameters?: Maybe<SystemParameters>;\n  /** Parameters related to the subsidy that supplements staking rewards */\n  systemStakeSubsidy?: Maybe<StakeSubsidy>;\n  /**\n   * The value of the `version` field of `0x5`, the `0x3::sui::SuiSystemState` object.\n   * This version changes whenever the fields contained in the system state object (held in a dynamic field attached to `0x5`) change.\n   */\n  systemStateVersion?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * The total number of checkpoints in this epoch.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   */\n  totalCheckpoints?: Maybe<Scalars['UInt53']['output']>;\n  /** The total amount of gas fees (in MIST) that were paid in this epoch (or `null` if the epoch has not finished yet). */\n  totalGasFees?: Maybe<Scalars['BigInt']['output']>;\n  /** The total MIST rewarded as stake (or `null` if the epoch has not finished yet). */\n  totalStakeRewards?: Maybe<Scalars['BigInt']['output']>;\n  /** The amount added to total gas fees to make up the total stake rewards (or `null` if the epoch has not finished yet). */\n  totalStakeSubsidies?: Maybe<Scalars['BigInt']['output']>;\n  /** The total number of transaction blocks in this epoch (or `null` if the epoch has not finished yet). */\n  totalTransactions?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * The transactions in this epoch, optionally filtered by transaction filters.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   */\n  transactions?: Maybe<TransactionConnection>;\n  /** Validator-related properties, including the active validators. */\n  validatorSet?: Maybe<ValidatorSet>;\n};\n\n\n/**\n * Activity on Sui is partitioned in time, into epochs.\n *\n * Epoch changes are opportunities for the network to reconfigure itself (perform protocol or system package upgrades, or change the committee) and distribute staking rewards. The network aims to keep epochs roughly the same duration as each other.\n *\n * During a particular epoch the following data is fixed:\n *\n * - protocol version,\n * - reference gas price,\n * - system package versions,\n * - validators in the committee.\n */\nexport type EpochCheckpointsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<CheckpointFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Activity on Sui is partitioned in time, into epochs.\n *\n * Epoch changes are opportunities for the network to reconfigure itself (perform protocol or system package upgrades, or change the committee) and distribute staking rewards. The network aims to keep epochs roughly the same duration as each other.\n *\n * During a particular epoch the following data is fixed:\n *\n * - protocol version,\n * - reference gas price,\n * - system package versions,\n * - validators in the committee.\n */\nexport type EpochSystemPackagesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Activity on Sui is partitioned in time, into epochs.\n *\n * Epoch changes are opportunities for the network to reconfigure itself (perform protocol or system package upgrades, or change the committee) and distribute staking rewards. The network aims to keep epochs roughly the same duration as each other.\n *\n * During a particular epoch the following data is fixed:\n *\n * - protocol version,\n * - reference gas price,\n * - system package versions,\n * - validators in the committee.\n */\nexport type EpochTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type EpochConnection = {\n  __typename?: 'EpochConnection';\n  /** A list of edges. */\n  edges: Array<EpochEdge>;\n  /** A list of nodes. */\n  nodes: Array<Epoch>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type EpochEdge = {\n  __typename?: 'EpochEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Epoch;\n};\n\nexport type Event = {\n  __typename?: 'Event';\n  /** The Move value emitted for this event. */\n  contents?: Maybe<MoveValue>;\n  /**\n   * The Base64 encoded BCS serialized bytes of the entire Event structure from sui-types.\n   * This includes: package_id, transaction_module, sender, type, and contents (which itself contains the BCS-serialized Move struct data).\n   */\n  eventBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Address of the sender of the transaction that emitted this event. */\n  sender?: Maybe<Address>;\n  /** The position of the event among the events from the same transaction. */\n  sequenceNumber: Scalars['UInt53']['output'];\n  /**\n   * Timestamp corresponding to the checkpoint this event's transaction was finalized in.\n   * All events from the same transaction share the same timestamp.\n   */\n  timestamp?: Maybe<Scalars['DateTime']['output']>;\n  /** The transaction that emitted this event. This information is only available for events from indexed transactions, and not from transactions that have just been executed or dry-run. */\n  transaction?: Maybe<Transaction>;\n  /** The module containing the function that was called in the programmable transaction, that resulted in this event being emitted. */\n  transactionModule?: Maybe<MoveModule>;\n};\n\nexport type EventConnection = {\n  __typename?: 'EventConnection';\n  /** A list of edges. */\n  edges: Array<EventEdge>;\n  /** A list of nodes. */\n  nodes: Array<Event>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type EventEdge = {\n  __typename?: 'EventEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Event;\n};\n\nexport type EventFilter = {\n  /** Limit to events that occured strictly after the given checkpoint. */\n  afterCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Limit to events in the given checkpoint. */\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Limit to event that occured strictly before the given checkpoint. */\n  beforeCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /**\n   * Events emitted by a particular module. An event is emitted by a particular module if some function in the module is called by a PTB and emits an event.\n   *\n   * Modules can be filtered by their package, or package::module. We currently do not support filtering by emitting module and event type at the same time so if both are provided in one filter, the query will error.\n   */\n  module?: InputMaybe<Scalars['String']['input']>;\n  /** Filter on events by transaction sender address. */\n  sender?: InputMaybe<Scalars['SuiAddress']['input']>;\n  /**\n   * This field is used to specify the type of event emitted.\n   *\n   * Events can be filtered by their type's package, package::module, or their fully qualified type name.\n   *\n   * Generic types can be queried by either the generic type name, e.g. `0x2::coin::Coin`, or by the full type name, such as `0x2::coin::Coin<0x2::sui::SUI>`.\n   */\n  type?: InputMaybe<Scalars['String']['input']>;\n};\n\n/** Represents execution error information for failed transactions. */\nexport type ExecutionError = {\n  __typename?: 'ExecutionError';\n  /**\n   * The error code of the Move abort, populated if this transaction failed with a Move abort.\n   *\n   * Returns the explicit code if the abort used `code` annotation (e.g., `abort(ERR, code = 5)` returns 5), otherwise returns the raw abort code containing encoded error information.\n   */\n  abortCode?: Maybe<Scalars['BigInt']['output']>;\n  /**\n   * An associated constant for the error. Only populated for clever errors.\n   *\n   * Constants are returned as human-readable strings when possible. Complex types are returned as Base64-encoded bytes.\n   */\n  constant?: Maybe<Scalars['String']['output']>;\n  /** The function that the abort originated from. Only populated for Move aborts and primitive runtime errors that have function name information. */\n  function?: Maybe<MoveFunction>;\n  /** The error's name. Only populated for clever errors. */\n  identifier?: Maybe<Scalars['String']['output']>;\n  /** The instruction offset in the Move bytecode where the error occurred. Populated for Move aborts and primitive runtime errors. */\n  instructionOffset?: Maybe<Scalars['Int']['output']>;\n  /**\n   * Human readable explanation of why the transaction failed.\n   *\n   * For Move aborts, the error message will be resolved to a human-readable form if possible, otherwise it will fall back to displaying the abort code and location.\n   */\n  message: Scalars['String']['output'];\n  /** The module that the abort originated from. Only populated for Move aborts and primitive runtime errors. */\n  module?: Maybe<MoveModule>;\n  /** The source line number for the abort. Only populated for clever errors. */\n  sourceLineNumber?: Maybe<Scalars['Int']['output']>;\n};\n\n/** The execution result of a transaction, including the transaction effects and any potential errors due to signing or quorum-driving. */\nexport type ExecutionResult = {\n  __typename?: 'ExecutionResult';\n  /** The effects of the transaction execution, if successful. */\n  effects?: Maybe<TransactionEffects>;\n  /**\n   * Errors that occurred during execution (e.g., network errors, validation failures).\n   * These are distinct from execution failures within the transaction itself.\n   */\n  errors?: Maybe<Array<Scalars['String']['output']>>;\n};\n\n/** The execution status of this transaction: success or failure. */\nexport enum ExecutionStatus {\n  /** The transaction could not be executed. */\n  Failure = 'FAILURE',\n  /** The transaction was successfully executed. */\n  Success = 'SUCCESS'\n}\n\n/** A boolean protocol configuration. */\nexport type FeatureFlag = {\n  __typename?: 'FeatureFlag';\n  /** Feature flag name. */\n  key: Scalars['String']['output'];\n  /** Feature flag value. */\n  value: Scalars['Boolean']['output'];\n};\n\n/** Access to the gas inputs, after they have been smashed into one coin. The gas coin can only be used by reference, except for with `TransferObjectsTransaction` that can accept it by value. */\nexport type GasCoin = {\n  __typename?: 'GasCoin';\n  /** Placeholder field (gas coin has no additional data) */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/**\n * Summary of charges from transactions.\n *\n * Storage is charged in three parts -- `storage_cost`, `-storage_rebate`, and `non_refundable_storage_fee` -- independently of `computation_cost`.\n *\n * The overall cost of a transaction, deducted from its gas coins, is its `computation_cost + storage_cost - storage_rebate`. `non_refundable_storage_fee` is collected from objects being mutated or deleted and accumulated by the system in storage funds, the remaining storage costs of previous object versions are what become the `storage_rebate`. The ratio between `non_refundable_storage_fee` and `storage_rebate` is set by the protocol.\n */\nexport type GasCostSummary = {\n  __typename?: 'GasCostSummary';\n  /** The sum cost of computation/execution */\n  computationCost?: Maybe<Scalars['UInt53']['output']>;\n  /** Amount that is retained by the system in the storage fund from the cost of the previous versions of objects being mutated or deleted. */\n  nonRefundableStorageFee?: Maybe<Scalars['UInt53']['output']>;\n  /** Cost for storage at the time the transaction is executed, calculated as the size of the objects being mutated in bytes multiplied by a storage cost per byte (part of the protocol). */\n  storageCost?: Maybe<Scalars['UInt53']['output']>;\n  /** Amount the user gets back from the storage cost of the previous versions of objects being mutated or deleted. */\n  storageRebate?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** Effects related to gas (costs incurred and the identity of the smashed gas object returned). */\nexport type GasEffects = {\n  __typename?: 'GasEffects';\n  /** The gas object used to pay for this transaction. If multiple gas coins were provided, this represents the combined coin after smashing. */\n  gasObject?: Maybe<Object>;\n  /** Breakdown of the gas costs for this transaction. */\n  gasSummary?: Maybe<GasCostSummary>;\n};\n\nexport type GasInput = {\n  __typename?: 'GasInput';\n  /** The maximum SUI that can be expended by executing this transaction */\n  gasBudget?: Maybe<Scalars['BigInt']['output']>;\n  /** Objects used to pay for a transaction's execution and storage */\n  gasPayment?: Maybe<ObjectConnection>;\n  /** An unsigned integer specifying the number of native tokens per gas unit this transaction will pay (in MIST). */\n  gasPrice?: Maybe<Scalars['BigInt']['output']>;\n  /** Address of the owner of the gas object(s) used. */\n  gasSponsor?: Maybe<Address>;\n};\n\n\nexport type GasInputGasPaymentArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** System transaction that initializes the network and writes the initial set of objects on-chain. */\nexport type GenesisTransaction = {\n  __typename?: 'GenesisTransaction';\n  /** Objects to be created during genesis. */\n  objects?: Maybe<ObjectConnection>;\n};\n\n\n/** System transaction that initializes the network and writes the initial set of objects on-chain. */\nexport type GenesisTransactionObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/**\n * Interface implemented by GraphQL types representing entities that are identified by an address.\n *\n * An address uniquely represents either the public key of an account, or an object's ID, but never both. It is not possible to determine which type an address represents up-front. If an object is wrapped, its contents will not be accessible via its address, but it will still be possible to access other objects it owns.\n */\nexport type IAddressable = {\n  address: Scalars['SuiAddress']['output'];\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * Returns `null` when no checkpoint is set in scope (e.g. execution scope). If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /** Objects owned by this address, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n};\n\n\n/**\n * Interface implemented by GraphQL types representing entities that are identified by an address.\n *\n * An address uniquely represents either the public key of an account, or an object's ID, but never both. It is not possible to determine which type an address represents up-front. If an object is wrapped, its contents will not be accessible via its address, but it will still be possible to access other objects it owns.\n */\nexport type IAddressableBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/**\n * Interface implemented by GraphQL types representing entities that are identified by an address.\n *\n * An address uniquely represents either the public key of an account, or an object's ID, but never both. It is not possible to determine which type an address represents up-front. If an object is wrapped, its contents will not be accessible via its address, but it will still be possible to access other objects it owns.\n */\nexport type IAddressableBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Interface implemented by GraphQL types representing entities that are identified by an address.\n *\n * An address uniquely represents either the public key of an account, or an object's ID, but never both. It is not possible to determine which type an address represents up-front. If an object is wrapped, its contents will not be accessible via its address, but it will still be possible to access other objects it owns.\n */\nexport type IAddressableMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/**\n * Interface implemented by GraphQL types representing entities that are identified by an address.\n *\n * An address uniquely represents either the public key of an account, or an object's ID, but never both. It is not possible to determine which type an address represents up-front. If an object is wrapped, its contents will not be accessible via its address, but it will still be possible to access other objects it owns.\n */\nexport type IAddressableObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/**\n * Interface implemented by all GraphQL types that represent a Move datatype definition (either a struct or an enum definition).\n *\n * This interface is used to provide a way to access fields that are shared by both structs and enums, e.g., the module that the datatype belongs to, the name of the datatype, type parameters etc.\n */\nexport type IMoveDatatype = {\n  /** Abilities on this datatype definition. */\n  abilities?: Maybe<Array<MoveAbility>>;\n  /** The module that this datatype is defined in */\n  module: MoveModule;\n  /** The datatype's unqualified name */\n  name: Scalars['String']['output'];\n  /**\n   * Constraints on the datatype's formal type parameters\n   *\n   * Move bytecode does not name type parameters, so when they are referenced (e.g. in field types), they are identified by their index in this list.\n   */\n  typeParameters?: Maybe<Array<MoveDatatypeTypeParameter>>;\n};\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObject = {\n  /** The structured representation of the object's contents. */\n  contents?: Maybe<MoveValue>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to this object.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /**\n   * Dynamic fields and dynamic object fields owned by this object.\n   *\n   * Dynamic fields on wrapped objects can be accessed using `Address.dynamicFields`.\n   */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to this object.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Whether this object can be transfered using the `TransferObjects` Programmable Transaction Command or `sui::transfer::public_transfer`.\n   *\n   * Both these operations require the object to have both the `key` and `store` abilities.\n   */\n  hasPublicTransfer?: Maybe<Scalars['Boolean']['output']>;\n  /** The Base64-encoded BCS serialize of this object, as a `MoveObject`. */\n  moveObjectBcs?: Maybe<Scalars['Base64']['output']>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n};\n\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObjectDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObjectDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObjectDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObjectMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/** Interface implemented by types that represent a Move object on-chain (A Move value whose type has `key`). */\nexport type IMoveObjectMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n/** Interface implemented by versioned on-chain values that are addressable by an ID (also referred to as its address). This includes Move objects and packages. */\nexport type IObject = {\n  /** 32-byte hash that identifies the object's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /** Fetch the object with the same ID, at a different version, root version bound, or checkpoint. */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this object, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this object after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this object before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /** The transaction that created this version of the object */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object. */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** The version of this object that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/** Interface implemented by versioned on-chain values that are addressable by an ID (also referred to as its address). This includes Move objects and packages. */\nexport type IObjectObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/** Interface implemented by versioned on-chain values that are addressable by an ID (also referred to as its address). This includes Move objects and packages. */\nexport type IObjectObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** Interface implemented by versioned on-chain values that are addressable by an ID (also referred to as its address). This includes Move objects and packages. */\nexport type IObjectObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** Interface implemented by versioned on-chain values that are addressable by an ID (also referred to as its address). This includes Move objects and packages. */\nexport type IObjectReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** Object is accessible to all addresses, and is immutable. */\nexport type Immutable = {\n  __typename?: 'Immutable';\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\nexport type Input = {\n  __typename?: 'Input';\n  /** The index of the input. */\n  ix?: Maybe<Scalars['Int']['output']>;\n};\n\n/** Information used by a package to link to a specific version of its dependency. */\nexport type Linkage = {\n  __typename?: 'Linkage';\n  /** The ID on-chain of the first version of the dependency. */\n  originalId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** The ID on-chain of the version of the dependency that this package depends on. */\n  upgradedId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** The version of the dependency that this package depends on. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** Create a vector (can be empty). */\nexport type MakeMoveVecCommand = {\n  __typename?: 'MakeMoveVecCommand';\n  /** The values to pack into the vector, all of the same type. */\n  elements?: Maybe<Array<TransactionArgument>>;\n  /** If the elements are not objects, or the vector is empty, a type must be supplied. */\n  type?: Maybe<MoveType>;\n};\n\n/** Merges `coins` into the first `coin` (produces no results). */\nexport type MergeCoinsCommand = {\n  __typename?: 'MergeCoinsCommand';\n  /** The coin to merge into. */\n  coin?: Maybe<TransactionArgument>;\n  /** The coins to be merged. */\n  coins: Array<TransactionArgument>;\n};\n\n/** Abilities are keywords in Sui Move that define how types behave at the compiler level. */\nexport enum MoveAbility {\n  /** Enables values to be copied. */\n  Copy = 'COPY',\n  /** Enables values to be popped/dropped. */\n  Drop = 'DROP',\n  /** Enables values to be held directly in global storage. */\n  Key = 'KEY',\n  /** Enables values to be held inside a struct in global storage. */\n  Store = 'STORE'\n}\n\nexport type MoveCallCommand = {\n  __typename?: 'MoveCallCommand';\n  /** The actual function parameters passed in for this move call. */\n  arguments: Array<TransactionArgument>;\n  /** The function being called. */\n  function: MoveFunction;\n};\n\n/** Description of a datatype, defined in a Move module. */\nexport type MoveDatatype = IMoveDatatype & {\n  __typename?: 'MoveDatatype';\n  /** Abilities on this datatype definition. */\n  abilities?: Maybe<Array<MoveAbility>>;\n  /** Attempts to convert the `MoveDatatype` to a `MoveEnum`. */\n  asMoveEnum?: Maybe<MoveEnum>;\n  /** Attempts to convert the `MoveDatatype` to a `MoveStruct`. */\n  asMoveStruct?: Maybe<MoveStruct>;\n  /** The module that this datatype is defined in. */\n  module: MoveModule;\n  /** The datatype's unqualified name. */\n  name: Scalars['String']['output'];\n  /**\n   * Constraints on the datatype's formal type parameters.\n   *\n   * Move bytecode does not name type parameters, so when they are referenced (e.g. in field types), they are identified by their index in this list.\n   */\n  typeParameters?: Maybe<Array<MoveDatatypeTypeParameter>>;\n};\n\nexport type MoveDatatypeConnection = {\n  __typename?: 'MoveDatatypeConnection';\n  /** A list of edges. */\n  edges: Array<MoveDatatypeEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveDatatype>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveDatatypeEdge = {\n  __typename?: 'MoveDatatypeEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveDatatype;\n};\n\n/** Declaration of a type parameter on a Move struct. */\nexport type MoveDatatypeTypeParameter = {\n  __typename?: 'MoveDatatypeTypeParameter';\n  /** Ability constraints on this type parameter. */\n  constraints: Array<MoveAbility>;\n  /**\n   * Whether this type parameter is marked `phantom` or not.\n   *\n   * Phantom type parameters are not referenced in the struct's fields.\n   */\n  isPhantom: Scalars['Boolean']['output'];\n};\n\n/** Description of an enum type, defined in a Move module. */\nexport type MoveEnum = IMoveDatatype & {\n  __typename?: 'MoveEnum';\n  /** Abilities on this enum definition. */\n  abilities?: Maybe<Array<MoveAbility>>;\n  /** The module that this enum is defined in. */\n  module: MoveModule;\n  /** The enum's unqualified name. */\n  name: Scalars['String']['output'];\n  /**\n   * Constraints on the enum's formal type parameters.\n   *\n   * Move bytecode does not name type parameters, so when they are referenced (e.g. in field types), they are identified by their index in this list.\n   */\n  typeParameters?: Maybe<Array<MoveDatatypeTypeParameter>>;\n  /**\n   * The names and fields of the enum's variants\n   *\n   * Field types reference type parameters by their index in the defining enum's `typeParameters` list.\n   */\n  variants?: Maybe<Array<MoveEnumVariant>>;\n};\n\nexport type MoveEnumConnection = {\n  __typename?: 'MoveEnumConnection';\n  /** A list of edges. */\n  edges: Array<MoveEnumEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveEnum>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveEnumEdge = {\n  __typename?: 'MoveEnumEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveEnum;\n};\n\nexport type MoveEnumVariant = {\n  __typename?: 'MoveEnumVariant';\n  /**\n   * The names and types of the variant's fields.\n   *\n   * Field types reference type parameters by their index in the defining struct's `typeParameters` list.\n   */\n  fields?: Maybe<Array<MoveField>>;\n  /** The variant's name. */\n  name?: Maybe<Scalars['String']['output']>;\n};\n\nexport type MoveField = {\n  __typename?: 'MoveField';\n  /** The field's name. */\n  name?: Maybe<Scalars['String']['output']>;\n  /**\n   * The field's type.\n   *\n   * This type can reference type parameters introduced by the defining struct (see `typeParameters`).\n   */\n  type?: Maybe<OpenMoveType>;\n};\n\n/** A function defined in a Move module. */\nexport type MoveFunction = {\n  __typename?: 'MoveFunction';\n  /** Whether the function is marked `entry` or not. */\n  isEntry?: Maybe<Scalars['Boolean']['output']>;\n  /** The module that this function is defined in. */\n  module: MoveModule;\n  /** The function's unqualified name. */\n  name: Scalars['String']['output'];\n  /** The function's parameter types. These types can reference type parameters introduced by this function (see `typeParameters`). */\n  parameters?: Maybe<Array<OpenMoveType>>;\n  /** The function's return types. There can be multiple because functions in Move can return multiple values. These types can reference type parameters introduced by this function (see `typeParameters`). */\n  return?: Maybe<Array<OpenMoveType>>;\n  /**\n   * Constraints on the function's formal type parameters.\n   *\n   * Move bytecode does not name type parameters, so when they are referenced (e.g. in parameter and return types), they are identified by their index in this list.\n   */\n  typeParameters?: Maybe<Array<MoveFunctionTypeParameter>>;\n  /** The function's visibility: `public`, `public(friend)`, or `private`. */\n  visibility?: Maybe<MoveVisibility>;\n};\n\nexport type MoveFunctionConnection = {\n  __typename?: 'MoveFunctionConnection';\n  /** A list of edges. */\n  edges: Array<MoveFunctionEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveFunction>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveFunctionEdge = {\n  __typename?: 'MoveFunctionEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveFunction;\n};\n\n/** Declaration of a type parameter on a Move function. */\nexport type MoveFunctionTypeParameter = {\n  __typename?: 'MoveFunctionTypeParameter';\n  /** Ability constraints on this type parameter. */\n  constraints: Array<MoveAbility>;\n};\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModule = {\n  __typename?: 'MoveModule';\n  /** Base64 encoded bytes of the serialized CompiledModule. */\n  bytes?: Maybe<Scalars['Base64']['output']>;\n  /** The datatype (struct or enum) named `name` in this module. */\n  datatype?: Maybe<MoveDatatype>;\n  /** Paginate through this module's datatype definitions. */\n  datatypes?: Maybe<MoveDatatypeConnection>;\n  /** Textual representation of the module's bytecode. */\n  disassembly?: Maybe<Scalars['String']['output']>;\n  /** The enum named `name` in this module. */\n  enum?: Maybe<MoveEnum>;\n  /** Paginate through this module's enum definitions. */\n  enums?: Maybe<MoveEnumConnection>;\n  /** Bytecode format version. */\n  fileFormatVersion?: Maybe<Scalars['Int']['output']>;\n  /** Modules that this module considers friends. These modules can call `public(package)` functions in this module. */\n  friends?: Maybe<MoveModuleConnection>;\n  /** The function named `name` in this module. */\n  function?: Maybe<MoveFunction>;\n  /** Paginate through this module's function definitions. */\n  functions?: Maybe<MoveFunctionConnection>;\n  /** The module's unqualified name. */\n  name: Scalars['String']['output'];\n  /** The package that this module was defined in. */\n  package?: Maybe<MovePackage>;\n  /** The struct named `name` in this module. */\n  struct?: Maybe<MoveStruct>;\n  /** Paginate through this module's struct definitions. */\n  structs?: Maybe<MoveStructConnection>;\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleDatatypeArgs = {\n  name: Scalars['String']['input'];\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleDatatypesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleEnumArgs = {\n  name: Scalars['String']['input'];\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleEnumsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleFriendsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleFunctionArgs = {\n  name: Scalars['String']['input'];\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleFunctionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleStructArgs = {\n  name: Scalars['String']['input'];\n};\n\n\n/**\n * Modules are a unit of code organization in Move.\n *\n * Modules belong to packages, and contain type and function definitions.\n */\nexport type MoveModuleStructsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type MoveModuleConnection = {\n  __typename?: 'MoveModuleConnection';\n  /** A list of edges. */\n  edges: Array<MoveModuleEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveModule>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveModuleEdge = {\n  __typename?: 'MoveModuleEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveModule;\n};\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObject = IAddressable & IMoveObject & IObject & {\n  __typename?: 'MoveObject';\n  /** The MoveObject's ID. */\n  address: Scalars['SuiAddress']['output'];\n  /** Attempts to convert the object into a CoinMetadata. */\n  asCoinMetadata?: Maybe<CoinMetadata>;\n  /** Attempts to convert the object into a DynamicField. */\n  asDynamicField?: Maybe<DynamicField>;\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The structured representation of the object's contents. */\n  contents?: Maybe<MoveValue>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** 32-byte hash that identifies the object's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to this object.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /**\n   * Dynamic fields owned by this object.\n   *\n   * Dynamic fields on wrapped objects can be accessed using `Address.dynamicFields`.\n   */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to this object.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Whether this object can be transfered using the `TransferObjects` Programmable Transaction Command or `sui::transfer::public_transfer`.\n   *\n   * Both these operations require the object to have both the `key` and `store` abilities.\n   */\n  hasPublicTransfer?: Maybe<Scalars['Boolean']['output']>;\n  /** The Base64-encoded BCS serialize of this object, as a `MoveObject`. */\n  moveObjectBcs?: Maybe<Scalars['Base64']['output']>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n  /**\n   * Fetch the object with the same ID, at a different version, root version bound, or checkpoint.\n   *\n   * If no additional bound is provided, the latest version of this object is fetched at the latest checkpoint.\n   */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this object, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this object after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this object before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** Objects owned by this object, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /** The transaction that created this version of the object. */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object. */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** The version of this object that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MoveObject is a kind of Object that reprsents data stored on-chain. */\nexport type MoveObjectReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type MoveObjectConnection = {\n  __typename?: 'MoveObjectConnection';\n  /** A list of edges. */\n  edges: Array<MoveObjectEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveObject>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveObjectEdge = {\n  __typename?: 'MoveObjectEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveObject;\n};\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackage = IAddressable & IObject & {\n  __typename?: 'MovePackage';\n  /** The MovePackage's ID. */\n  address: Scalars['SuiAddress']['output'];\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** 32-byte hash that identifies the package's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /** The transitive dependencies of this package. */\n  linkage?: Maybe<Array<Linkage>>;\n  /** The module named `name` in this package. */\n  module?: Maybe<MoveModule>;\n  /** BCS representation of the package's modules.  Modules appear as a sequence of pairs (module name, followed by module bytes), in alphabetic order by module name. */\n  moduleBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate through this package's modules. */\n  modules?: Maybe<MoveModuleConnection>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Fetch the package as an object with the same ID, at a different version, root version bound, or checkpoint.\n   *\n   * If no additional bound is provided, the latest version of this object is fetched at the latest checkpoint.\n   */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this package, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this package treated as an object, after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this package treated as an object, before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** Objects owned by this package, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /**\n   * Fetch the package with the same original ID, at a different version, root version bound, or checkpoint.\n   *\n   * If no additional bound is provided, the latest version of this package is fetched at the latest checkpoint.\n   */\n  packageAt?: Maybe<MovePackage>;\n  /** The Base64-encoded BCS serialization of this package, as a `MovePackage`. */\n  packageBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this package after this one. */\n  packageVersionsAfter?: Maybe<MovePackageConnection>;\n  /** Paginate all versions of this package before this one. */\n  packageVersionsBefore?: Maybe<MovePackageConnection>;\n  /** The transaction that created this version of the object. */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object. */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** A table identifying which versions of a package introduced each of its types. */\n  typeOrigins?: Maybe<Array<TypeOrigin>>;\n  /** The version of this package that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageModuleArgs = {\n  name: Scalars['String']['input'];\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageModulesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackagePackageAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackagePackageVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackagePackageVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** A MovePackage is a kind of Object that represents code that has been published on-chain. It exposes information about its modules, type definitions, functions, and dependencies. */\nexport type MovePackageReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type MovePackageConnection = {\n  __typename?: 'MovePackageConnection';\n  /** A list of edges. */\n  edges: Array<MovePackageEdge>;\n  /** A list of nodes. */\n  nodes: Array<MovePackage>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MovePackageEdge = {\n  __typename?: 'MovePackageEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MovePackage;\n};\n\n/** Description of a struct type, defined in a Move module. */\nexport type MoveStruct = IMoveDatatype & {\n  __typename?: 'MoveStruct';\n  /** Abilities on this struct definition. */\n  abilities?: Maybe<Array<MoveAbility>>;\n  /**\n   * The names and types of the struct's fields.\n   *\n   * Field types reference type parameters by their index in the defining struct's `typeParameters` list.\n   */\n  fields?: Maybe<Array<MoveField>>;\n  /** The module that this struct is defined in. */\n  module: MoveModule;\n  /** The struct's unqualified name. */\n  name: Scalars['String']['output'];\n  /**\n   * Constraints on the struct's formal type parameters.\n   *\n   * Move bytecode does not name type parameters, so when they are referenced (e.g. in field types), they are identified by their index in this list.\n   */\n  typeParameters?: Maybe<Array<MoveDatatypeTypeParameter>>;\n};\n\nexport type MoveStructConnection = {\n  __typename?: 'MoveStructConnection';\n  /** A list of edges. */\n  edges: Array<MoveStructEdge>;\n  /** A list of nodes. */\n  nodes: Array<MoveStruct>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type MoveStructEdge = {\n  __typename?: 'MoveStructEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: MoveStruct;\n};\n\n/** Represents instances of concrete types (no type parameters, no references). */\nexport type MoveType = {\n  __typename?: 'MoveType';\n  /** The abilities this concrete type has. Returns no abilities if the type is invalid. */\n  abilities?: Maybe<Array<MoveAbility>>;\n  /**\n   * Structured representation of the \"shape\" of values that match this type. May return no\n   * layout if the type is invalid.\n   */\n  layout?: Maybe<Scalars['MoveTypeLayout']['output']>;\n  /** Flat representation of the type signature, as a displayable string. */\n  repr: Scalars['String']['output'];\n  /** Structured representation of the type signature. */\n  signature: Scalars['MoveTypeSignature']['output'];\n};\n\nexport type MoveValue = {\n  __typename?: 'MoveValue';\n  /** The BCS representation of this value, Base64-encoded. */\n  bcs?: Maybe<Scalars['Base64']['output']>;\n  /**\n   * A rendered JSON blob based on an on-chain template, substituted with data from this value.\n   *\n   * Returns `null` if the value's type does not have an associated `Display` template.\n   */\n  display?: Maybe<Display>;\n  /**\n   * Representation of a Move value in JSON, where:\n   *\n   * - Addresses, IDs, and UIDs are represented in canonical form, as JSON strings.\n   * - Bools are represented by JSON boolean literals.\n   * - u8, u16, and u32 are represented as JSON numbers.\n   * - u64, u128, and u256 are represented as JSON strings.\n   * - Balances, Strings, and Urls are represented as JSON strings.\n   * - Vectors of bytes are represented as Base64 blobs, and other vectors are represented by JSON arrays.\n   * - Structs are represented by JSON objects.\n   * - Enums are represented by JSON objects, with a field named `@variant` containing the variant name.\n   * - Empty optional values are represented by `null`.\n   */\n  json?: Maybe<Scalars['JSON']['output']>;\n  /** The value's type. */\n  type?: Maybe<MoveType>;\n};\n\n/**\n * The visibility modifier describes which modules can access this module member.\n *\n * By default, a module member can be called only within the same module.\n */\nexport enum MoveVisibility {\n  /** A friend member can be accessed in the module it is defined in and any other module in its package that is explicitly specified in its friend list. */\n  Friend = 'FRIEND',\n  /** A private member can be accessed in the module it is defined in. */\n  Private = 'PRIVATE',\n  /** A public member can be accessed by any module. */\n  Public = 'PUBLIC'\n}\n\n/** A transaction that wanted to mutate a consensus-managed object but couldn't because it became not-consensus-managed before the transaction executed (for example, it was deleted, turned into an owned object, or wrapped). */\nexport type MutateConsensusStreamEnded = {\n  __typename?: 'MutateConsensusStreamEnded';\n  /** The ID of the consensus-managed object. */\n  address?: Maybe<Scalars['SuiAddress']['output']>;\n  /** The sequence number associated with the consensus stream ending. */\n  sequenceNumber?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** Mutations are used to write to the Sui network. */\nexport type Mutation = {\n  __typename?: 'Mutation';\n  /**\n   * Execute a transaction, committing its effects on chain.\n   *\n   * - `transactionDataBcs` contains the BCS-encoded transaction data (Base64-encoded).\n   * - `signatures` are a list of `flag || signature || pubkey` bytes, Base64-encoded.\n   *\n   * Waits until the transaction has reached finality on chain to return its transaction digest, or returns the error that prevented finality if that was not possible. A transaction is final when its effects are guaranteed on chain (it cannot be revoked).\n   *\n   * There may be a delay between transaction finality and when GraphQL requests (including the request that issued the transaction) reflect its effects. As a result, queries that depend on indexing the state of the chain (e.g. contents of output objects, address-level balance information at the time of the transaction), must wait for indexing to catch up by polling for the transaction digest using `Query.transaction`.\n   */\n  executeTransaction: ExecutionResult;\n};\n\n\n/** Mutations are used to write to the Sui network. */\nexport type MutationExecuteTransactionArgs = {\n  signatures: Array<Scalars['Base64']['input']>;\n  transactionDataBcs: Scalars['Base64']['input'];\n};\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type Object = IAddressable & IObject & {\n  __typename?: 'Object';\n  /** The Object's ID. */\n  address: Scalars['SuiAddress']['output'];\n  /** Attempts to convert the object into a MoveObject. */\n  asMoveObject?: Maybe<MoveObject>;\n  /** Attempts to convert the object into a MovePackage. */\n  asMovePackage?: Maybe<MovePackage>;\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** 32-byte hash that identifies the object's contents, encoded in Base58. */\n  digest?: Maybe<Scalars['String']['output']>;\n  /**\n   * Access a dynamic field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic field with that name could not be found attached to this object.\n   */\n  dynamicField?: Maybe<DynamicField>;\n  /** Dynamic fields owned by this object. */\n  dynamicFields?: Maybe<DynamicFieldConnection>;\n  /**\n   * Access a dynamic object field on an object using its type and BCS-encoded name.\n   *\n   * Returns `null` if a dynamic object field with that name could not be found attached to this object.\n   */\n  dynamicObjectField?: Maybe<DynamicField>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /**\n   * Access dynamic fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic fields that is guaranteed to be the same length as `keys`. If a dynamic field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicFields: Array<Maybe<DynamicField>>;\n  /**\n   * Access dynamic object fields on an object using their types and BCS-encoded names.\n   *\n   * Returns a list of dynamic object fields that is guaranteed to be the same length as `keys`. If a dynamic object field in `keys` could not be found in the store, its corresponding entry in the result will be `null`.\n   */\n  multiGetDynamicObjectFields: Array<Maybe<DynamicField>>;\n  /**\n   * Fetch the object with the same ID, at a different version, root version bound, or checkpoint.\n   *\n   * If no additional bound is provided, the latest version of this object is fetched at the latest checkpoint.\n   */\n  objectAt?: Maybe<Object>;\n  /** The Base64-encoded BCS serialization of this object, as an `Object`. */\n  objectBcs?: Maybe<Scalars['Base64']['output']>;\n  /** Paginate all versions of this object after this one. */\n  objectVersionsAfter?: Maybe<ObjectConnection>;\n  /** Paginate all versions of this object before this one. */\n  objectVersionsBefore?: Maybe<ObjectConnection>;\n  /** Objects owned by this object, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /** The object's owner kind. */\n  owner?: Maybe<Owner>;\n  /** The transaction that created this version of the object. */\n  previousTransaction?: Maybe<Transaction>;\n  /** The transactions that sent objects to this object */\n  receivedTransactions?: Maybe<TransactionConnection>;\n  /** The SUI returned to the sponsor or sender of the transaction that modifies or deletes this object. */\n  storageRebate?: Maybe<Scalars['BigInt']['output']>;\n  /** The version of this object that this content comes from. */\n  version?: Maybe<Scalars['UInt53']['output']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectDynamicFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectDynamicFieldsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectDynamicObjectFieldArgs = {\n  name: DynamicFieldName;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectMultiGetDynamicFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectMultiGetDynamicObjectFieldsArgs = {\n  keys: Array<DynamicFieldName>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectObjectAtArgs = {\n  checkpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectObjectVersionsAfterArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectObjectVersionsBeforeArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/**\n * An Object on Sui is either a typed value (a Move Object) or a Package (modules containing functions and types).\n *\n * Every object on Sui is identified by a unique address, and has a version number that increases with every modification. Objects also hold metadata detailing their current owner (who can sign for access to the object and whether that access can modify and/or delete the object), and the digest of the last transaction that modified the object.\n */\nexport type ObjectReceivedTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type ObjectChange = {\n  __typename?: 'ObjectChange';\n  /** The address of the object that has changed. */\n  address: Scalars['SuiAddress']['output'];\n  /** Whether the ID was created in this transaction. */\n  idCreated?: Maybe<Scalars['Boolean']['output']>;\n  /** Whether the ID was deleted in this transaction. */\n  idDeleted?: Maybe<Scalars['Boolean']['output']>;\n  /** The contents of the object immediately before the transaction. */\n  inputState?: Maybe<Object>;\n  /** The contents of the object immediately after the transaction. */\n  outputState?: Maybe<Object>;\n};\n\nexport type ObjectChangeConnection = {\n  __typename?: 'ObjectChangeConnection';\n  /** A list of edges. */\n  edges: Array<ObjectChangeEdge>;\n  /** A list of nodes. */\n  nodes: Array<ObjectChange>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type ObjectChangeEdge = {\n  __typename?: 'ObjectChangeEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: ObjectChange;\n};\n\nexport type ObjectConnection = {\n  __typename?: 'ObjectConnection';\n  /** A list of edges. */\n  edges: Array<ObjectEdge>;\n  /** A list of nodes. */\n  nodes: Array<Object>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type ObjectEdge = {\n  __typename?: 'ObjectEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Object;\n};\n\n/**\n * A filter over the live object set, the filter can be one of:\n *\n * - A filter on type (all live objects whose type matches that filter).\n * - Fetching all objects owned by an address or object, optionally filtered by type.\n * - Fetching all shared or immutable objects, filtered by type.\n */\nexport type ObjectFilter = {\n  /**\n   * Specifies the address of the owning address or object.\n   *\n   * This field is required if `ownerKind` is \"ADDRESS\" or \"OBJECT\". If provided without `ownerKind`, `ownerKind` defaults to \"ADDRESS\".\n   */\n  owner?: InputMaybe<Scalars['SuiAddress']['input']>;\n  /**\n   * Filter on whether the object is address-owned, object-owned, shared, or immutable.\n   *\n   * - If this field is set to \"ADDRESS\" or \"OBJECT\", then an owner filter must also be provided.\n   * - If this field is set to \"SHARED\" or \"IMMUTABLE\", then a type filter must also be provided.\n   */\n  ownerKind?: InputMaybe<OwnerKind>;\n  /**\n   * Filter on the object's type.\n   *\n   * The filter can be one of:\n   *\n   * - A package address: `0x2`,\n   * - A module: `0x2::coin`,\n   * - A fully-qualified name: `0x2::coin::Coin`,\n   * - A type instantiation: `0x2::coin::Coin<0x2::sui::SUI>`.\n   */\n  type?: InputMaybe<Scalars['String']['input']>;\n};\n\n/**\n * Identifies a specific version of an object.\n *\n * The `address` field must be specified, as well as at most one of `version`, `rootVersion`, or `atCheckpoint`. If none are provided, the object is fetched at the current checkpoint.\n *\n * Specifying a `version` or a `rootVersion` disables nested queries for paginating owned objects or dynamic fields (these queries are only supported at checkpoint boundaries).\n *\n * See `Query.object` for more details.\n */\nexport type ObjectKey = {\n  /** The object's ID. */\n  address: Scalars['SuiAddress']['input'];\n  /** If specified, tries to fetch the latest version as of this checkpoint. Fails if the checkpoint is later than the RPC's latest checkpoint. */\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /**\n   * If specified, tries to fetch the latest version of the object at or before this version. Nested dynamic field accesses will also be subject to this bound.\n   *\n   * This can be used to fetch a child or ancestor object bounded by its root object's version. For any wrapped or child (object-owned) object, its root object can be defined recursively as:\n   *\n   * - The root object of the object it is wrapped in, if it is wrapped.\n   * - The root object of its owner, if it is owned by another object.\n   * - The object itself, if it is not object-owned or wrapped.\n   */\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  /** If specified, tries to fetch the object at this exact version. */\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n/** Object is exclusively owned by a single object, and is mutable. Note that the owning object may be inaccessible because it is wrapped. */\nexport type ObjectOwner = {\n  __typename?: 'ObjectOwner';\n  /** The owner's address. */\n  address?: Maybe<Address>;\n};\n\n/**\n * Represents types that could contain references or free type parameters.  Such types can appear\n * as function parameters, in fields of structs, or as actual type parameter.\n */\nexport type OpenMoveType = {\n  __typename?: 'OpenMoveType';\n  /** Flat representation of the type signature, as a displayable string. */\n  repr: Scalars['String']['output'];\n  /** Structured representation of the type signature. */\n  signature: Scalars['OpenMoveTypeSignature']['output'];\n};\n\n/** Placeholder for unimplemented command types */\nexport type OtherCommand = {\n  __typename?: 'OtherCommand';\n  /** Placeholder field for unimplemented commands */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** A Move object, either immutable, or owned mutable. */\nexport type OwnedOrImmutable = {\n  __typename?: 'OwnedOrImmutable';\n  object?: Maybe<Object>;\n};\n\n/** The object's owner kind. */\nexport type Owner = AddressOwner | ConsensusAddressOwner | Immutable | ObjectOwner | Shared;\n\n/** Filter on who owns an object. */\nexport enum OwnerKind {\n  /** Object is owned by an address. */\n  Address = 'ADDRESS',\n  /** Object is frozen. */\n  Immutable = 'IMMUTABLE',\n  /** Object is a child of another object (e.g. a dynamic field or dynamic object field). */\n  Object = 'OBJECT',\n  /** Object is shared among multiple owners. */\n  Shared = 'SHARED'\n}\n\n/** Filter for paginating packages published within a range of checkpoints. */\nexport type PackageCheckpointFilter = {\n  /** Filter to packages that were published strictly after this checkpoint, defaults to fetching from the earliest checkpoint known to this RPC (this could be the genesis checkpoint, or some later checkpoint if data has been pruned). */\n  afterCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Filter to packages published strictly before this checkpoint, defaults to fetching up to the latest checkpoint (inclusive). */\n  beforeCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n/**\n * Identifies a specific version of a package.\n *\n * The `address` field must be specified, as well as at most one of `version`, or `atCheckpoint`. If neither is provided, the package is fetched at the current checkpoint.\n *\n * See `Query.package` for more details.\n */\nexport type PackageKey = {\n  /** The object's ID. */\n  address: Scalars['SuiAddress']['input'];\n  /** If specified, tries to fetch the latest version as of this checkpoint. */\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** If specified, tries to fetch the package at this exact version. */\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n/** Information about pagination in a connection */\nexport type PageInfo = {\n  __typename?: 'PageInfo';\n  /** When paginating forwards, the cursor to continue. */\n  endCursor?: Maybe<Scalars['String']['output']>;\n  /** When paginating forwards, are there more items? */\n  hasNextPage: Scalars['Boolean']['output'];\n  /** When paginating backwards, are there more items? */\n  hasPreviousPage: Scalars['Boolean']['output'];\n  /** When paginating backwards, the cursor to continue. */\n  startCursor?: Maybe<Scalars['String']['output']>;\n};\n\nexport type PerEpochConfig = {\n  __typename?: 'PerEpochConfig';\n  /** The per-epoch configuration object as of when the transaction was executed. */\n  object?: Maybe<Object>;\n};\n\n/** ProgrammableSystemTransaction is identical to ProgrammableTransaction, but GraphQL does not allow multiple variants with the same type. */\nexport type ProgrammableSystemTransaction = {\n  __typename?: 'ProgrammableSystemTransaction';\n  /** The transaction commands, executed sequentially. */\n  commands?: Maybe<CommandConnection>;\n  /** Input objects or primitive values. */\n  inputs?: Maybe<TransactionInputConnection>;\n};\n\n\n/** ProgrammableSystemTransaction is identical to ProgrammableTransaction, but GraphQL does not allow multiple variants with the same type. */\nexport type ProgrammableSystemTransactionCommandsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** ProgrammableSystemTransaction is identical to ProgrammableTransaction, but GraphQL does not allow multiple variants with the same type. */\nexport type ProgrammableSystemTransactionInputsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type ProgrammableTransaction = {\n  __typename?: 'ProgrammableTransaction';\n  /** The transaction commands, executed sequentially. */\n  commands?: Maybe<CommandConnection>;\n  /** Input objects or primitive values. */\n  inputs?: Maybe<TransactionInputConnection>;\n};\n\n\nexport type ProgrammableTransactionCommandsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type ProgrammableTransactionInputsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** A protocol configuration that can hold an arbitrary value (or no value at all). */\nexport type ProtocolConfig = {\n  __typename?: 'ProtocolConfig';\n  /** Configuration name. */\n  key: Scalars['String']['output'];\n  /** Configuration value. */\n  value?: Maybe<Scalars['String']['output']>;\n};\n\n/**\n * Constants that control how the chain operates.\n *\n * These can only change during protocol upgrades which happen on epoch boundaries. Configuration is split into feature flags (which are just booleans), and configs which can take any value (including no value at all), and will be represented by a string.\n */\nexport type ProtocolConfigs = {\n  __typename?: 'ProtocolConfigs';\n  /** Query for the value of the configuration with name `key`. */\n  config?: Maybe<ProtocolConfig>;\n  /** List all available configurations and their values. */\n  configs: Array<ProtocolConfig>;\n  /** Query for the state of the feature flag with name `key`. */\n  featureFlag?: Maybe<FeatureFlag>;\n  /** List all available feature flags and their values. */\n  featureFlags: Array<FeatureFlag>;\n  protocolVersion: Scalars['UInt53']['output'];\n};\n\n\n/**\n * Constants that control how the chain operates.\n *\n * These can only change during protocol upgrades which happen on epoch boundaries. Configuration is split into feature flags (which are just booleans), and configs which can take any value (including no value at all), and will be represented by a string.\n */\nexport type ProtocolConfigsConfigArgs = {\n  key: Scalars['String']['input'];\n};\n\n\n/**\n * Constants that control how the chain operates.\n *\n * These can only change during protocol upgrades which happen on epoch boundaries. Configuration is split into feature flags (which are just booleans), and configs which can take any value (including no value at all), and will be represented by a string.\n */\nexport type ProtocolConfigsFeatureFlagArgs = {\n  key: Scalars['String']['input'];\n};\n\n/** Publishes a Move Package. */\nexport type PublishCommand = {\n  __typename?: 'PublishCommand';\n  /** IDs of the transitive dependencies of the package to be published. */\n  dependencies?: Maybe<Array<Scalars['SuiAddress']['output']>>;\n  /** Bytecode for the modules to be published, BCS serialized and Base64 encoded. */\n  modules?: Maybe<Array<Scalars['Base64']['output']>>;\n};\n\n/** BCS encoded primitive value (not an object or Move struct). */\nexport type Pure = {\n  __typename?: 'Pure';\n  /** BCS serialized and Base64 encoded primitive value. */\n  bytes?: Maybe<Scalars['Base64']['output']>;\n};\n\nexport type Query = {\n  __typename?: 'Query';\n  /**\n   * Look-up an account by its SuiAddress.\n   *\n   * If `rootVersion` is specified, nested dynamic field accesses will be fetched at or before this version. This can be used to fetch a child or ancestor object bounded by its root object's version, when its immediate parent is wrapped, or a value in a dynamic object field. For any wrapped or child (object-owned) object, its root object can be defined recursively as:\n   *\n   * - The root object of the object it is wrapped in, if it is wrapped.\n   * - The root object of its owner, if it is owned by another object.\n   * - The object itself, if it is not object-owned or wrapped.\n   *\n   * Specifying a `rootVersion` disables nested queries for paginating owned objects or dynamic fields (these queries are only supported at checkpoint boundaries).\n   */\n  address: Address;\n  /** First four bytes of the network's genesis checkpoint digest (uniquely identifies the network), hex-encoded. */\n  chainIdentifier: Scalars['String']['output'];\n  /**\n   * Fetch a checkpoint by its sequence number, or the latest checkpoint if no sequence number is provided.\n   *\n   * Returns `null` if the checkpoint does not exist in the store, either because it never existed or because it was pruned.\n   */\n  checkpoint?: Maybe<Checkpoint>;\n  /** Paginate checkpoints in the network, optionally bounded to checkpoints in the given epoch. */\n  checkpoints?: Maybe<CheckpointConnection>;\n  /**\n   * Fetch the CoinMetadata for a given coin type.\n   *\n   * Returns `null` if no CoinMetadata object exists for the given coin type.\n   */\n  coinMetadata?: Maybe<CoinMetadata>;\n  /**\n   * Fetch an epoch by its ID, or fetch the latest epoch if no ID is provided.\n   *\n   * Returns `null` if the epoch does not exist yet, or was pruned.\n   */\n  epoch?: Maybe<Epoch>;\n  /** Paginate epochs that are in the network. */\n  epochs?: Maybe<EpochConnection>;\n  /** Paginate events that are emitted in the network, optionally filtered by event filters. */\n  events?: Maybe<EventConnection>;\n  /**\n   * Fetch checkpoints by their sequence numbers.\n   *\n   * Returns a list of checkpoints that is guaranteed to be the same length as `keys`. If a checkpoint in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because the checkpoint does not exist yet, or because it was pruned.\n   */\n  multiGetCheckpoints: Array<Maybe<Checkpoint>>;\n  /**\n   * Fetch epochs by their IDs.\n   *\n   * Returns a list of epochs that is guaranteed to be the same length as `keys`. If an epoch in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because the epoch does not exist yet, or because it was pruned.\n   */\n  multiGetEpochs: Array<Maybe<Epoch>>;\n  /**\n   * Fetch objects by their keys.\n   *\n   * Returns a list of objects that is guaranteed to be the same length as `keys`. If an object in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because the object never existed, or because it was pruned.\n   */\n  multiGetObjects: Array<Maybe<Object>>;\n  /**\n   * Fetch packages by their keys.\n   *\n   * Returns a list of packages that is guaranteed to be the same length as `keys`. If a package in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because that address never pointed to a package, or because the package was pruned.\n   */\n  multiGetPackages: Array<Maybe<MovePackage>>;\n  /**\n   * Fetch transaction effects by their transactions' digests.\n   *\n   * Returns a list of transaction effects that is guaranteed to be the same length as `keys`. If a digest in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because the transaction effects never existed, or because it was pruned.\n   */\n  multiGetTransactionEffects: Array<Maybe<TransactionEffects>>;\n  /**\n   * Fetch transactions by their digests.\n   *\n   * Returns a list of transactions that is guaranteed to be the same length as `keys`. If a digest in `keys` could not be found in the store, its corresponding entry in the result will be `null`. This could be because the transaction never existed, or because it was pruned.\n   */\n  multiGetTransactions: Array<Maybe<Transaction>>;\n  /**\n   * Fetch types by their string representations.\n   *\n   * Types are canonicalized: In the input they can be at any package address at or after the package that first defines them, and in the output they will be relocated to the package that first defines them.\n   *\n   * Returns a list of types that is guaranteed to be the same length as `keys`. If a type in `keys` could not be found, its corresponding entry in the result will be `null`.\n   */\n  multiGetTypes: Array<Maybe<MoveType>>;\n  /**\n   * Fetch an object by its address.\n   *\n   * If `version` is specified, the object will be fetched at that exact version.\n   *\n   * If `rootVersion` is specified, the object will be fetched at the latest version at or before this version. Nested dynamic field accesses will also be subject to this bound. This can be used to fetch a child or ancestor object bounded by its root object's version. For any wrapped or child (object-owned) object, its root object can be defined recursively as:\n   *\n   * - The root object of the object it is wrapped in, if it is wrapped.\n   * - The root object of its owner, if it is owned by another object.\n   * - The object itself, if it is not object-owned or wrapped.\n   *\n   * Specifying a `version` or a `rootVersion` disables nested queries for paginating owned objects or dynamic fields (these queries are only supported at checkpoint boundaries).\n   *\n   * If `atCheckpoint` is specified, the object will be fetched at the latest version as of this checkpoint. This will fail if the provided checkpoint is after the RPC's latest checkpoint.\n   *\n   * If none of the above are specified, the object is fetched at the latest checkpoint.\n   *\n   * It is an error to specify more than one of `version`, `rootVersion`, or `atCheckpoint`.\n   *\n   * Returns `null` if an object cannot be found that meets this criteria.\n   */\n  object?: Maybe<Object>;\n  /** Paginate all versions of an object at `address`, optionally bounding the versions exclusively from below with `filter.afterVersion` or from above with `filter.beforeVersion`. */\n  objectVersions?: Maybe<ObjectConnection>;\n  /**\n   * Paginate objects in the live object set, optionally filtered by owner and/or type. `filter` can be one of:\n   *\n   * - A filter on type (all live objects whose type matches that filter).\n   * - Fetching all objects owned by an address or object, optionally filtered by type.\n   * - Fetching all shared or immutable objects, filtered by type.\n   */\n  objects?: Maybe<ObjectConnection>;\n  /**\n   * Fetch a package by its address.\n   *\n   * If `version` is specified, the package loaded is the one that shares its original ID with the package at `address`, but whose version is `version`.\n   *\n   * If `atCheckpoint` is specified, the package loaded is the one with the largest version among all packages sharing an original ID with the package at `address` and was published at or before `atCheckpoint`.\n   *\n   * If neither are specified, the package is fetched at the latest checkpoint.\n   *\n   * It is an error to specify both `version` and `atCheckpoint`, and `null` will be returned if the package cannot be found as of the latest checkpoint, or the address points to an object that is not a package.\n   *\n   * Note that this interpretation of `version` and \"latest\" differs from the one used by `Query.object`, because non-system package upgrades generate objects with different IDs. To fetch a package using the versioning semantics of objects, use `Object.asMovePackage` nested under `Query.object`.\n   */\n  package?: Maybe<MovePackage>;\n  /**\n   * Paginate all versions of a package at `address`, optionally bounding the versions exclusively from below with `filter.afterVersion` or from above with `filter.beforeVersion`.\n   *\n   * Different versions of a package will have different object IDs, unless they are system packages, but will share the same original ID.\n   */\n  packageVersions?: Maybe<MovePackageConnection>;\n  /** Paginate all packages published on-chain, optionally bounded to packages published strictly after `filter.afterCheckpoint` and/or strictly before `filter.beforeCheckpoint`. */\n  packages?: Maybe<MovePackageConnection>;\n  /** Fetch the protocol config by protocol version, or the latest protocol config used on chain if no version is provided. */\n  protocolConfigs?: Maybe<ProtocolConfigs>;\n  /** Configuration for this RPC service. */\n  serviceConfig: ServiceConfig;\n  /**\n   * Simulate a transaction to preview its effects without executing it on chain.\n   *\n   * Accepts a JSON transaction matching the [Sui gRPC API schema](https://docs.sui.io/references/fullnode-protocol#sui-rpc-v2-Transaction).\n   * The JSON format allows for partial transaction specification where certain fields can be automatically resolved by the server.\n   *\n   * Alternatively, for already serialized transactions, you can pass BCS-encoded data:\n   * `{\"bcs\": {\"value\": \"<base64>\"}}`\n   *\n   * Unlike `executeTransaction`, this does not require signatures since the transaction is not committed to the blockchain. This allows for previewing transaction effects, estimating gas costs, and testing transaction logic without spending gas or requiring valid signatures.\n   */\n  simulateTransaction: SimulationResult;\n  /** Look-up an account by its SuiNS name, assuming it has a valid, unexpired name registration. */\n  suinsName?: Maybe<Address>;\n  /**\n   * Fetch a transaction by its digest.\n   *\n   * Returns `null` if the transaction does not exist in the store, either because it never existed or because it was pruned.\n   */\n  transaction?: Maybe<Transaction>;\n  /**\n   * Fetch transaction effects by its transaction's digest.\n   *\n   * Returns `null` if the transaction effects do not exist in the store, either because that transaction was not executed, or it was pruned.\n   */\n  transactionEffects?: Maybe<TransactionEffects>;\n  /** The transactions that exist in the network, optionally filtered by transaction filters. */\n  transactions?: Maybe<TransactionConnection>;\n  /**\n   * Fetch a structured representation of a concrete type, including its layout information.\n   *\n   * Types are canonicalized: In the input they can be at any package address at or after the package that first defines them, and in the output they will be relocated to the package that first defines them.\n   *\n   * Fails if the type is malformed, returns `null` if a type mentioned does not exist.\n   */\n  type?: Maybe<MoveType>;\n  /**\n   * Verify a zkLogin signature os from the given `author`.\n   *\n   * Returns a `ZkLoginVerifyResult` where `success` is `true` and `error` is empty if the signature is valid. If the signature is invalid, `success` is `false` and `error` contains the relevant error message.\n   *\n   * - `bytes` are either the bytes of a serialized personal message, or `TransactionData`, Base64-encoded.\n   * - `signature` is a serialized zkLogin signature, also Base64-encoded.\n   * - `intentScope` indicates whether `bytes` are to be parsed as a personal message or `TransactionData`.\n   * - `author` is the signer's address.\n   */\n  verifyZkLoginSignature: ZkLoginVerifyResult;\n};\n\n\nexport type QueryAddressArgs = {\n  address: Scalars['SuiAddress']['input'];\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryCheckpointArgs = {\n  sequenceNumber?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryCheckpointsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<CheckpointFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryCoinMetadataArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\nexport type QueryEpochArgs = {\n  epochId?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryEpochsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryEventsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<EventFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryMultiGetCheckpointsArgs = {\n  keys: Array<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryMultiGetEpochsArgs = {\n  keys: Array<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryMultiGetObjectsArgs = {\n  keys: Array<ObjectKey>;\n};\n\n\nexport type QueryMultiGetPackagesArgs = {\n  keys: Array<PackageKey>;\n};\n\n\nexport type QueryMultiGetTransactionEffectsArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\nexport type QueryMultiGetTransactionsArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\nexport type QueryMultiGetTypesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\nexport type QueryObjectArgs = {\n  address: Scalars['SuiAddress']['input'];\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryObjectVersionsArgs = {\n  address: Scalars['SuiAddress']['input'];\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter: ObjectFilter;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryPackageArgs = {\n  address: Scalars['SuiAddress']['input'];\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryPackageVersionsArgs = {\n  address: Scalars['SuiAddress']['input'];\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<VersionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryPackagesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<PackageCheckpointFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryProtocolConfigsArgs = {\n  version?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QuerySimulateTransactionArgs = {\n  transaction: Scalars['JSON']['input'];\n};\n\n\nexport type QuerySuinsNameArgs = {\n  address: Scalars['String']['input'];\n  rootVersion?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n\nexport type QueryTransactionArgs = {\n  digest: Scalars['String']['input'];\n};\n\n\nexport type QueryTransactionEffectsArgs = {\n  digest: Scalars['String']['input'];\n};\n\n\nexport type QueryTransactionsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<TransactionFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type QueryTypeArgs = {\n  type: Scalars['String']['input'];\n};\n\n\nexport type QueryVerifyZkLoginSignatureArgs = {\n  author: Scalars['SuiAddress']['input'];\n  bytes: Scalars['Base64']['input'];\n  intentScope: ZkLoginIntentScope;\n  signature: Scalars['Base64']['input'];\n};\n\n/** System transaction for creating the on-chain randomness state. */\nexport type RandomnessStateCreateTransaction = {\n  __typename?: 'RandomnessStateCreateTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** System transaction to update the source of on-chain randomness. */\nexport type RandomnessStateUpdateTransaction = {\n  __typename?: 'RandomnessStateUpdateTransaction';\n  /** Epoch of the randomness state update transaction. */\n  epoch?: Maybe<Scalars['Int']['output']>;\n  /** Updated random bytes, Base64 encoded. */\n  randomBytes?: Maybe<Scalars['Base64']['output']>;\n  /** The initial version of the randomness object that it was shared at. */\n  randomnessObjInitialSharedVersion?: Maybe<Scalars['Int']['output']>;\n  /** Randomness round of the update. */\n  randomnessRound?: Maybe<Scalars['Int']['output']>;\n};\n\n/** A transaction that wanted to read a consensus-managed object but couldn't because it became not-consensus-managed before the transaction executed (for example, it was deleted, turned into an owned object, or wrapped). */\nexport type ReadConsensusStreamEnded = {\n  __typename?: 'ReadConsensusStreamEnded';\n  /** The ID of the consensus-managed object. */\n  address?: Maybe<Scalars['SuiAddress']['output']>;\n  /** The sequence number associated with the consensus stream ending. */\n  sequenceNumber?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** A Move object that can be received in this transaction. */\nexport type Receiving = {\n  __typename?: 'Receiving';\n  object?: Maybe<Object>;\n};\n\n/** Whether the currency is regulated or not. */\nexport enum RegulatedState {\n  /** A `DenyCap` or a `RegulatedCoinMetadata` exists for this currency. */\n  Regulated = 'REGULATED',\n  /** The currency was created without a deny list. */\n  Unregulated = 'UNREGULATED'\n}\n\nexport type SafeMode = {\n  __typename?: 'SafeMode';\n  /**\n   * Whether safe mode was used for the last epoch change.\n   * The system will retry a full epoch change on every epoch boundary and automatically reset this flag if so.\n   */\n  enabled?: Maybe<Scalars['Boolean']['output']>;\n  /** Accumulated fees for computation and cost that have not been added to the various reward pools, because the full epoch change did not happen. */\n  gasSummary?: Maybe<GasCostSummary>;\n};\n\nexport type ServiceConfig = {\n  __typename?: 'ServiceConfig';\n  /** Range of checkpoints for which data is available for a query type, field and optional filter. If filter is not provided, the strictest retention range for the query and type is returned. */\n  availableRange: AvailableRange;\n  /**\n   * Number of elements a paginated connection will return if a page size is not supplied.\n   *\n   * Accepts `type` and `field` arguments which identify the connection that is being queried. If the field in question is paginated, its default page size is returned. If it does not exist or is not paginated, `null` is returned.\n   */\n  defaultPageSize?: Maybe<Scalars['Int']['output']>;\n  /** Maximum output size of a disassembled MoveModule, in bytes. */\n  maxDisassembledModuleSize?: Maybe<Scalars['Int']['output']>;\n  /** Maximum depth of nested field access supported in display outputs. */\n  maxDisplayFieldDepth?: Maybe<Scalars['Int']['output']>;\n  /** Maximum output size of a display output. */\n  maxDisplayOutputSize?: Maybe<Scalars['Int']['output']>;\n  /** Maximum budget in bytes to spend when outputting a structured `MoveValue`. */\n  maxMoveValueBound?: Maybe<Scalars['Int']['output']>;\n  /** Maximum nesting allowed in datatype fields when calculating the layout of a single type. */\n  maxMoveValueDepth?: Maybe<Scalars['Int']['output']>;\n  /** Maximum number of elements that can be requested from a multi-get query. A request to fetch more keys will result in an error. */\n  maxMultiGetSize?: Maybe<Scalars['Int']['output']>;\n  /**\n   * Maximum number of estimated output nodes in a GraphQL response.\n   *\n   * The estimate is an upperbound of how many nodes there would be in the output assuming every requested field is present, paginated requests return full page sizes, and multi-get queries find all requested keys. Below is a worked example query:\n   *\n   * ```graphql\n   * |  0: query {                            # 514 = total\n   * |  1:   checkpoint {                     # 1\n   * |  2:     sequenceNumber                 # 1\n   * |  3:   }\n   * |  4:\n   * |  5:   multiGetObjects([$a, $b, $c]) {  # 1 (* 3)\n   * |  6:     address                        # 3\n   * |  7:     digest                         # 3\n   * |  8:   }\n   * |  9:\n   * | 10:   # default page size is 20\n   * | 11:   transactions {                   # 1 (* 20)\n   * | 12:     pageInfo {                     # 1\n   * | 13:       hasNextPage                  # 1\n   * | 14:       endCursor                    # 1\n   * | 15:     }\n   * | 16:\n   * | 17:     nodes                          # 1\n   * | 18:     {                              # 20\n   * | 19:       digest                       # 20\n   * | 20:       effects {                    # 20\n   * | 21:         objectChanges(first: 10) { # 20 (* 10)\n   * | 22:           nodes                    # 20\n   * | 23:           {                        # 200\n   * | 24:             address                # 200\n   * | 25:           }\n   * | 26:         }\n   * | 27:       }\n   * | 28:     }\n   * | 29:   }\n   * | 30: }\n   * ```\n   */\n  maxOutputNodes?: Maybe<Scalars['Int']['output']>;\n  /**\n   * Maximum number of elements that can be requested from a paginated connection. A request to fetch more elements will result in an error.\n   *\n   * Accepts `type` and `field` arguments which identify the connection that is being queried. If the field in question is paginated, its max page size is returned. If it does not exist or is not paginated, `null` is returned.\n   */\n  maxPageSize?: Maybe<Scalars['Int']['output']>;\n  /** Maximum depth of a GraphQL query that can be accepted by this service. */\n  maxQueryDepth?: Maybe<Scalars['Int']['output']>;\n  /** The maximum number of nodes (field names) the service will accept in a single query. */\n  maxQueryNodes?: Maybe<Scalars['Int']['output']>;\n  /** Maximum size in bytes of a single GraphQL request, excluding the elements covered by `maxTransactionPayloadSize`. */\n  maxQueryPayloadSize?: Maybe<Scalars['Int']['output']>;\n  /**\n   * Maximum size in bytes allowed for the `txBytes` and `signatures` parameters of an `executeTransaction` or `simulateTransaction` field, or the `bytes` and `signature` parameters of a `verifyZkLoginSignature` field.\n   *\n   * This is cumulative across all matching fields in a single GraphQL request.\n   */\n  maxTransactionPayloadSize?: Maybe<Scalars['Int']['output']>;\n  /** Maximum amount of nesting among type arguments (type arguments nest when a type argument is itself generic and has arguments). */\n  maxTypeArgumentDepth?: Maybe<Scalars['Int']['output']>;\n  /** Maximum number of type parameters a type can have. */\n  maxTypeArgumentWidth?: Maybe<Scalars['Int']['output']>;\n  /** Maximum number of datatypes that need to be processed when calculating the layout of a single type. */\n  maxTypeNodes?: Maybe<Scalars['Int']['output']>;\n  /** Maximum time in milliseconds spent waiting for a response from fullnode after issuing a transaction to execute. Note that the transaction may still succeed even in the case of a timeout. Transactions are idempotent, so a transaction that times out should be re-submitted until the network returns a definite response (success or failure, not timeout). */\n  mutationTimeoutMs?: Maybe<Scalars['Int']['output']>;\n  /** Maximum time in milliseconds that will be spent to serve one query request. */\n  queryTimeoutMs?: Maybe<Scalars['Int']['output']>;\n};\n\n\nexport type ServiceConfigAvailableRangeArgs = {\n  field?: InputMaybe<Scalars['String']['input']>;\n  filters?: InputMaybe<Array<Scalars['String']['input']>>;\n  type: Scalars['String']['input'];\n};\n\n\nexport type ServiceConfigDefaultPageSizeArgs = {\n  field: Scalars['String']['input'];\n  type: Scalars['String']['input'];\n};\n\n\nexport type ServiceConfigMaxPageSizeArgs = {\n  field: Scalars['String']['input'];\n  type: Scalars['String']['input'];\n};\n\n/** Object is shared, can be used by any address, and is mutable. */\nexport type Shared = {\n  __typename?: 'Shared';\n  /** The version at which the object became shared. */\n  initialSharedVersion?: Maybe<Scalars['UInt53']['output']>;\n};\n\n/** A Move object that's shared. */\nexport type SharedInput = {\n  __typename?: 'SharedInput';\n  /** The address of the shared object. */\n  address?: Maybe<Scalars['SuiAddress']['output']>;\n  /** The version that this object was shared at. */\n  initialSharedVersion?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * Controls whether the transaction block can reference the shared object as a mutable reference or by value.\n   *\n   * This has implications for scheduling: Transactions that just read shared objects at a certain version (mutable = false) can be executed concurrently, while transactions that write shared objects (mutable = true) must be executed serially with respect to each other.\n   */\n  mutable?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** The result of simulating a transaction, including the predicted effects, events, and any errors. */\nexport type SimulationResult = {\n  __typename?: 'SimulationResult';\n  /**\n   * The predicted effects of the transaction if it were executed.\n   *\n   * `None` if the simulation failed due to an error.\n   */\n  effects?: Maybe<TransactionEffects>;\n  /**\n   * Error message if the simulation failed.\n   *\n   * `None` if the simulation was successful.\n   */\n  error?: Maybe<Scalars['String']['output']>;\n  /**\n   * The events that would be emitted if the transaction were executed.\n   *\n   * `None` if the simulation failed or no events would be emitted.\n   */\n  events?: Maybe<Array<Event>>;\n  /** The intermediate outputs for each command of the transaction simulation, including contents of mutated references and return values. */\n  outputs?: Maybe<Array<CommandResult>>;\n};\n\n/** Splits off coins with denominations in `amounts` from `coin`, returning multiple results (as many as there are amounts.) */\nexport type SplitCoinsCommand = {\n  __typename?: 'SplitCoinsCommand';\n  /** The denominations to split off from the coin. */\n  amounts: Array<TransactionArgument>;\n  /** The coin to split. */\n  coin?: Maybe<TransactionArgument>;\n};\n\n/** Parameters that control the distribution of the stake subsidy. */\nexport type StakeSubsidy = {\n  __typename?: 'StakeSubsidy';\n  /** SUI set aside for stake subsidies -- reduces over time as stake subsidies are paid out over time. */\n  balance?: Maybe<Scalars['BigInt']['output']>;\n  /** Amount of stake subsidy deducted from the balance per distribution -- decays over time. */\n  currentDistributionAmount?: Maybe<Scalars['BigInt']['output']>;\n  /** Percentage of the current distribution amount to deduct at the end of the current subsidy period, expressed in basis points. */\n  decreaseRate?: Maybe<Scalars['Int']['output']>;\n  /**\n   * Number of times stake subsidies have been distributed.\n   * Subsidies are distributed with other staking rewards, at the end of the epoch.\n   */\n  distributionCounter?: Maybe<Scalars['Int']['output']>;\n  /** Maximum number of stake subsidy distributions that occur with the same distribution amount (before the amount is reduced). */\n  periodLength?: Maybe<Scalars['Int']['output']>;\n};\n\n/** SUI set aside to account for objects stored on-chain. */\nexport type StorageFund = {\n  __typename?: 'StorageFund';\n  /**\n   * The portion of the storage fund that will never be refunded through storage rebates.\n   * The system maintains an invariant that the sum of all storage fees into the storage fund is equal to the sum of all storage rebates out, the total storage rebates remaining, and the non-refundable balance.\n   */\n  nonRefundableBalance?: Maybe<Scalars['BigInt']['output']>;\n  /** Sum of storage rebates of live objects on chain. */\n  totalObjectStorageRebates?: Maybe<Scalars['BigInt']['output']>;\n};\n\n/** System transaction for storing execution time observations. */\nexport type StoreExecutionTimeObservationsTransaction = {\n  __typename?: 'StoreExecutionTimeObservationsTransaction';\n  /** A workaround to define an empty variant of a GraphQL union. */\n  _?: Maybe<Scalars['Boolean']['output']>;\n};\n\n/** Future behavior of a currency's supply. */\nexport enum SupplyState {\n  /** The supply can only decrease. */\n  BurnOnly = 'BURN_ONLY',\n  /** The supply can neither increase nor decrease. */\n  Fixed = 'FIXED'\n}\n\n/** Details of the system that are decided during genesis. */\nexport type SystemParameters = {\n  __typename?: 'SystemParameters';\n  /** Target duration of an epoch, in milliseconds. */\n  durationMs?: Maybe<Scalars['BigInt']['output']>;\n  /** The maximum number of active validators that the system supports. */\n  maxValidatorCount?: Maybe<Scalars['Int']['output']>;\n  /** The minimum number of active validators that the system supports. */\n  minValidatorCount?: Maybe<Scalars['Int']['output']>;\n  /** Minimum stake needed to become a new validator. */\n  minValidatorJoiningStake?: Maybe<Scalars['BigInt']['output']>;\n  /** The epoch at which stake subsidies start being paid out. */\n  stakeSubsidyStartEpoch?: Maybe<Scalars['UInt53']['output']>;\n  /** The number of epochs that a validator has to recover from having less than `validatorLowStakeThreshold` stake. */\n  validatorLowStakeGracePeriod?: Maybe<Scalars['BigInt']['output']>;\n  /** Validators with stake below this threshold will enter the grace period (see `validatorLowStakeGracePeriod`), after which they are removed from the active validator set. */\n  validatorLowStakeThreshold?: Maybe<Scalars['BigInt']['output']>;\n  /** Validators with stake below this threshold will be removed from the active validator set at the next epoch boundary, without a grace period. */\n  validatorVeryLowStakeThreshold?: Maybe<Scalars['BigInt']['output']>;\n};\n\n/** Description of a transaction, the unit of activity on Sui. */\nexport type Transaction = {\n  __typename?: 'Transaction';\n  /** A 32-byte hash that uniquely identifies the transaction contents, encoded in Base58. */\n  digest: Scalars['String']['output'];\n  /** The results to the chain of executing this transaction. */\n  effects?: Maybe<TransactionEffects>;\n  /** This field is set by senders of a transaction block. It is an epoch reference that sets a deadline after which validators will no longer consider the transaction valid. By default, there is no deadline for when a transaction must execute. */\n  expiration?: Maybe<Epoch>;\n  /** The gas input field provides information on what objects were used as gas as well as the owner of the gas object(s) and information on the gas price and budget. */\n  gasInput?: Maybe<GasInput>;\n  /** The type of this transaction as well as the commands and/or parameters comprising the transaction of this kind. */\n  kind?: Maybe<TransactionKind>;\n  /** The address corresponding to the public key that signed this transaction. System transactions do not have senders. */\n  sender?: Maybe<Address>;\n  /** User signatures for this transaction. */\n  signatures: Array<UserSignature>;\n  /** The Base64-encoded BCS serialization of this transaction, as a `TransactionData`. */\n  transactionBcs?: Maybe<Scalars['Base64']['output']>;\n};\n\n/** An argument to a programmable transaction command. */\nexport type TransactionArgument = GasCoin | Input | TxResult;\n\nexport type TransactionConnection = {\n  __typename?: 'TransactionConnection';\n  /** A list of edges. */\n  edges: Array<TransactionEdge>;\n  /** A list of nodes. */\n  nodes: Array<Transaction>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type TransactionEdge = {\n  __typename?: 'TransactionEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Transaction;\n};\n\n/** The results of executing a transaction. */\nexport type TransactionEffects = {\n  __typename?: 'TransactionEffects';\n  /** The effect this transaction had on the balances (sum of coin values per coin type) of addresses and objects. */\n  balanceChanges?: Maybe<BalanceChangeConnection>;\n  /** The checkpoint this transaction was finalized in. */\n  checkpoint?: Maybe<Checkpoint>;\n  /** Transactions whose outputs this transaction depends upon. */\n  dependencies?: Maybe<TransactionConnection>;\n  /**\n   * A 32-byte hash that uniquely identifies the transaction contents, encoded in Base58.\n   *\n   * Note that this is different from the execution digest, which is the unique hash of the transaction effects.\n   */\n  digest: Scalars['String']['output'];\n  /** The Base64-encoded BCS serialization of these effects, as `TransactionEffects`. */\n  effectsBcs?: Maybe<Scalars['Base64']['output']>;\n  /** A 32-byte hash that uniquely identifies the effects contents, encoded in Base58. */\n  effectsDigest?: Maybe<Scalars['String']['output']>;\n  /** The epoch this transaction was finalized in. */\n  epoch?: Maybe<Epoch>;\n  /** Events emitted by this transaction. */\n  events?: Maybe<EventConnection>;\n  /** Rich execution error information for failed transactions. */\n  executionError?: Maybe<ExecutionError>;\n  /** Effects related to the gas object used for the transaction (costs incurred and the identity of the smashed gas object returned). */\n  gasEffects?: Maybe<GasEffects>;\n  /** The latest version of all objects (apart from packages) that have been created or modified by this transaction, immediately following this transaction. */\n  lamportVersion?: Maybe<Scalars['UInt53']['output']>;\n  /** The before and after state of objects that were modified by this transaction. */\n  objectChanges?: Maybe<ObjectChangeConnection>;\n  /** Whether the transaction executed successfully or not. */\n  status?: Maybe<ExecutionStatus>;\n  /** Timestamp corresponding to the checkpoint this transaction was finalized in. */\n  timestamp?: Maybe<Scalars['DateTime']['output']>;\n  /** The transaction that ran to produce these effects. */\n  transaction?: Maybe<Transaction>;\n  /** The unchanged consensus-managed objects that were referenced by this transaction. */\n  unchangedConsensusObjects?: Maybe<UnchangedConsensusObjectConnection>;\n};\n\n\n/** The results of executing a transaction. */\nexport type TransactionEffectsBalanceChangesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** The results of executing a transaction. */\nexport type TransactionEffectsDependenciesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** The results of executing a transaction. */\nexport type TransactionEffectsEventsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** The results of executing a transaction. */\nexport type TransactionEffectsObjectChangesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\n/** The results of executing a transaction. */\nexport type TransactionEffectsUnchangedConsensusObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type TransactionFilter = {\n  /**\n   * Limit to transactions that interacted with the given address.\n   * The address could be a sender, sponsor, or recipient of the transaction.\n   */\n  affectedAddress?: InputMaybe<Scalars['SuiAddress']['input']>;\n  /**\n   * Limit to transactions that interacted with the given object.\n   * The object could have been created, read, modified, deleted, wrapped, or unwrapped by the transaction.\n   * Objects that were passed as a `Receiving` input are not considered to have been affected by a transaction unless they were actually received.\n   */\n  affectedObject?: InputMaybe<Scalars['SuiAddress']['input']>;\n  /** Filter to transactions that occurred strictly after the given checkpoint. */\n  afterCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Filter to transactions in the given checkpoint. */\n  atCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Filter to transaction that occurred strictly before the given checkpoint. */\n  beforeCheckpoint?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Filter transactions by move function called. Calls can be filtered by the `package`, `package::module`, or the `package::module::name` of their function. */\n  function?: InputMaybe<Scalars['String']['input']>;\n  /** An input filter selecting for either system or programmable transactions. */\n  kind?: InputMaybe<TransactionKindInput>;\n  /** Limit to transactions that were sent by the given address. */\n  sentAddress?: InputMaybe<Scalars['SuiAddress']['input']>;\n};\n\n/** Input argument to a Programmable Transaction Block (PTB) command. */\nexport type TransactionInput = OwnedOrImmutable | Pure | Receiving | SharedInput;\n\nexport type TransactionInputConnection = {\n  __typename?: 'TransactionInputConnection';\n  /** A list of edges. */\n  edges: Array<TransactionInputEdge>;\n  /** A list of nodes. */\n  nodes: Array<TransactionInput>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type TransactionInputEdge = {\n  __typename?: 'TransactionInputEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: TransactionInput;\n};\n\n/** Different types of transactions that can be executed on the Sui network. */\nexport type TransactionKind = AuthenticatorStateUpdateTransaction | ChangeEpochTransaction | ConsensusCommitPrologueTransaction | EndOfEpochTransaction | GenesisTransaction | ProgrammableSystemTransaction | ProgrammableTransaction | RandomnessStateUpdateTransaction;\n\n/** An input filter selecting for either system or programmable transactions. */\nexport enum TransactionKindInput {\n  /** A user submitted transaction block. */\n  ProgrammableTx = 'PROGRAMMABLE_TX',\n  /**\n   * A system transaction can be one of several types of transactions.\n   * See [unions/transaction-block-kind] for more details.\n   */\n  SystemTx = 'SYSTEM_TX'\n}\n\n/** Transfers `inputs` to `address`. All inputs must have the `store` ability (allows public transfer) and must not be previously immutable or shared. */\nexport type TransferObjectsCommand = {\n  __typename?: 'TransferObjectsCommand';\n  /** The address to transfer to. */\n  address?: Maybe<TransactionArgument>;\n  /** The objects to transfer. */\n  inputs: Array<TransactionArgument>;\n};\n\n/** The result of another command. */\nexport type TxResult = {\n  __typename?: 'TxResult';\n  /** The index of the command that produced this result. */\n  cmd?: Maybe<Scalars['Int']['output']>;\n  /** For nested results, the index within the result. */\n  ix?: Maybe<Scalars['Int']['output']>;\n};\n\n/** Information about which previous versions of a package introduced its types. */\nexport type TypeOrigin = {\n  __typename?: 'TypeOrigin';\n  /** The storage ID of the package that first defined this type. */\n  definingId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Module defining the type. */\n  module?: Maybe<Scalars['String']['output']>;\n  /** Name of the struct. */\n  struct?: Maybe<Scalars['String']['output']>;\n};\n\n/** Details pertaining to consensus-managed objects that are referenced by but not changed by a transaction. */\nexport type UnchangedConsensusObject = ConsensusObjectCancelled | ConsensusObjectRead | MutateConsensusStreamEnded | PerEpochConfig | ReadConsensusStreamEnded;\n\nexport type UnchangedConsensusObjectConnection = {\n  __typename?: 'UnchangedConsensusObjectConnection';\n  /** A list of edges. */\n  edges: Array<UnchangedConsensusObjectEdge>;\n  /** A list of nodes. */\n  nodes: Array<UnchangedConsensusObject>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** An edge in a connection. */\nexport type UnchangedConsensusObjectEdge = {\n  __typename?: 'UnchangedConsensusObjectEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: UnchangedConsensusObject;\n};\n\n/** Upgrades a Move Package. */\nexport type UpgradeCommand = {\n  __typename?: 'UpgradeCommand';\n  /** ID of the package being upgraded. */\n  currentPackage?: Maybe<Scalars['SuiAddress']['output']>;\n  /** IDs of the transitive dependencies of the package to be published. */\n  dependencies?: Maybe<Array<Scalars['SuiAddress']['output']>>;\n  /** Bytecode for the modules to be published, BCS serialized and Base64 encoded. */\n  modules?: Maybe<Array<Scalars['Base64']['output']>>;\n  /** The `UpgradeTicket` authorizing the upgrade. */\n  upgradeTicket?: Maybe<TransactionArgument>;\n};\n\nexport type UserSignature = {\n  __typename?: 'UserSignature';\n  /**\n   * The signature bytes, Base64-encoded.\n   * For simple signatures: flag || signature || pubkey\n   * For complex signatures: flag || bcs_serialized_struct\n   */\n  signatureBytes?: Maybe<Scalars['Base64']['output']>;\n};\n\nexport type Validator = IAddressable & {\n  __typename?: 'Validator';\n  /** The validator's address. */\n  address: Scalars['SuiAddress']['output'];\n  /** The number of epochs for which this validator has been below the low stake threshold. */\n  atRisk?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * Fetch the total balance for coins with marker type `coinType` (e.g. `0x2::sui::SUI`), owned by this address.\n   *\n   * If the address does not own any coins of that type, a balance of zero is returned.\n   */\n  balance?: Maybe<Balance>;\n  /** Total balance across coins owned by this address, grouped by coin type. */\n  balances?: Maybe<BalanceConnection>;\n  /** The fee charged by the validator for staking services. */\n  commissionRate?: Maybe<Scalars['Int']['output']>;\n  /** Validator's set of credentials such as public keys, network addresses and others. */\n  credentials?: Maybe<ValidatorCredentials>;\n  /** The domain explicitly configured as the default SuiNS name for this address. */\n  defaultSuinsName?: Maybe<Scalars['String']['output']>;\n  /** Validator's description. */\n  description?: Maybe<Scalars['String']['output']>;\n  /** Number of exchange rates in the table. */\n  exchangeRatesSize?: Maybe<Scalars['UInt53']['output']>;\n  /**\n   * A wrapped object containing the validator's exchange rates. This is a table from epoch number to `PoolTokenExchangeRate` value.\n   * The exchange rate is used to determine the amount of SUI tokens that each past SUI staker can withdraw in the future.\n   */\n  exchangeRatesTable?: Maybe<Address>;\n  /** The reference gas price for this epoch. */\n  gasPrice?: Maybe<Scalars['BigInt']['output']>;\n  /** Validator's url containing their custom image. */\n  imageUrl?: Maybe<Scalars['String']['output']>;\n  /**\n   * Fetch the total balances keyed by coin types (e.g. `0x2::sui::SUI`) owned by this address.\n   *\n   * Returns `None` when no checkpoint is set in scope (e.g. execution scope).\n   * If the address does not own any coins of a given type, a balance of zero is returned for that type.\n   */\n  multiGetBalances?: Maybe<Array<Balance>>;\n  /** Validator's name. */\n  name?: Maybe<Scalars['String']['output']>;\n  /** The proposed next epoch fee for the validator's staking services. */\n  nextEpochCommissionRate?: Maybe<Scalars['Int']['output']>;\n  /** Validator's set of credentials for the next epoch. */\n  nextEpochCredentials?: Maybe<ValidatorCredentials>;\n  /** The validator's gas price quote for the next epoch. */\n  nextEpochGasPrice?: Maybe<Scalars['BigInt']['output']>;\n  /** The total number of SUI tokens in this pool plus the pending stake amount for this epoch. */\n  nextEpochStake?: Maybe<Scalars['BigInt']['output']>;\n  /** Objects owned by this object, optionally filtered by type. */\n  objects?: Maybe<MoveObjectConnection>;\n  /**\n   * The validator's current valid `Cap` object. Validators can delegate the operation ability to another address.\n   * The address holding this `Cap` object can then update the reference gas price and tallying rule on behalf of the validator.\n   */\n  operationCap?: Maybe<MoveObject>;\n  /** Pending pool token withdrawn during the current epoch, emptied at epoch boundaries. */\n  pendingPoolTokenWithdraw?: Maybe<Scalars['BigInt']['output']>;\n  /** Pending stake amount for this epoch. */\n  pendingStake?: Maybe<Scalars['BigInt']['output']>;\n  /** Pending stake withdrawn during the current epoch, emptied at epoch boundaries. */\n  pendingTotalSuiWithdraw?: Maybe<Scalars['BigInt']['output']>;\n  /** Total number of pool tokens issued by the pool. */\n  poolTokenBalance?: Maybe<Scalars['BigInt']['output']>;\n  /** Validator's homepage URL. */\n  projectUrl?: Maybe<Scalars['String']['output']>;\n  /** Other validators this validator has reported. */\n  reportRecords?: Maybe<ValidatorConnection>;\n  /** The epoch stake rewards will be added here at the end of each epoch. */\n  rewardsPool?: Maybe<Scalars['BigInt']['output']>;\n  /** The epoch at which this pool became active. */\n  stakingPoolActivationEpoch?: Maybe<Scalars['UInt53']['output']>;\n  /** The ID of this validator's `0x3::staking_pool::StakingPool`. */\n  stakingPoolId: Scalars['SuiAddress']['output'];\n  /** The total number of SUI tokens in this pool. */\n  stakingPoolSuiBalance?: Maybe<Scalars['BigInt']['output']>;\n  /** The voting power of this validator in basis points (e.g., 100 = 1% voting power). */\n  votingPower?: Maybe<Scalars['Int']['output']>;\n};\n\n\nexport type ValidatorBalanceArgs = {\n  coinType: Scalars['String']['input'];\n};\n\n\nexport type ValidatorBalancesArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type ValidatorMultiGetBalancesArgs = {\n  keys: Array<Scalars['String']['input']>;\n};\n\n\nexport type ValidatorObjectsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n\nexport type ValidatorReportRecordsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\nexport type ValidatorAggregatedSignature = {\n  __typename?: 'ValidatorAggregatedSignature';\n  /** The epoch when this aggregate signature was produced. */\n  epoch?: Maybe<Epoch>;\n  /** The Base64 encoded BLS12381 aggregated signature. */\n  signature?: Maybe<Scalars['Base64']['output']>;\n  /** The indexes of validators that contributed to this signature. */\n  signersMap: Array<Scalars['Int']['output']>;\n};\n\nexport type ValidatorConnection = {\n  __typename?: 'ValidatorConnection';\n  /** A list of edges. */\n  edges: Array<ValidatorEdge>;\n  /** A list of nodes. */\n  nodes: Array<Validator>;\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n};\n\n/** The credentials related fields associated with a validator. */\nexport type ValidatorCredentials = {\n  __typename?: 'ValidatorCredentials';\n  netAddress?: Maybe<Scalars['String']['output']>;\n  networkPubKey?: Maybe<Scalars['Base64']['output']>;\n  p2PAddress?: Maybe<Scalars['String']['output']>;\n  primaryAddress?: Maybe<Scalars['String']['output']>;\n  proofOfPossession?: Maybe<Scalars['Base64']['output']>;\n  protocolPubKey?: Maybe<Scalars['Base64']['output']>;\n  workerAddress?: Maybe<Scalars['String']['output']>;\n  workerPubKey?: Maybe<Scalars['Base64']['output']>;\n};\n\n/** An edge in a connection. */\nexport type ValidatorEdge = {\n  __typename?: 'ValidatorEdge';\n  /** A cursor for use in pagination */\n  cursor: Scalars['String']['output'];\n  /** The item at the end of the edge */\n  node: Validator;\n};\n\n/** Representation of `0x3::validator_set::ValidatorSet`. */\nexport type ValidatorSet = {\n  __typename?: 'ValidatorSet';\n  /** The current list of active validators. */\n  activeValidators?: Maybe<ValidatorConnection>;\n  /** Object ID of the `Table` storing the inactive staking pools. */\n  inactivePoolsId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Size of the inactive pools `Table`. */\n  inactivePoolsSize?: Maybe<Scalars['Int']['output']>;\n  /** Object ID of the wrapped object `TableVec` storing the pending active validators. */\n  pendingActiveValidatorsId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Size of the pending active validators table. */\n  pendingActiveValidatorsSize?: Maybe<Scalars['Int']['output']>;\n  /** Validators that are pending removal from the active validator set, expressed as indices in to `activeValidators`. */\n  pendingRemovals?: Maybe<Array<Scalars['Int']['output']>>;\n  /**\n   * Object ID of the `Table` storing the mapping from staking pool ids to the addresses of the corresponding validators.\n   * This is needed because a validator's address can potentially change but the object ID of its pool will not.\n   */\n  stakingPoolMappingsId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Size of the stake pool mappings `Table`. */\n  stakingPoolMappingsSize?: Maybe<Scalars['Int']['output']>;\n  /** Total amount of stake for all active validators at the beginning of the epoch. */\n  totalStake?: Maybe<Scalars['BigInt']['output']>;\n  /** Object ID of the `Table` storing the validator candidates. */\n  validatorCandidatesId?: Maybe<Scalars['SuiAddress']['output']>;\n  /** Size of the validator candidates `Table`. */\n  validatorCandidatesSize?: Maybe<Scalars['Int']['output']>;\n};\n\n\n/** Representation of `0x3::validator_set::ValidatorSet`. */\nexport type ValidatorSetActiveValidatorsArgs = {\n  after?: InputMaybe<Scalars['String']['input']>;\n  before?: InputMaybe<Scalars['String']['input']>;\n  first?: InputMaybe<Scalars['Int']['input']>;\n  last?: InputMaybe<Scalars['Int']['input']>;\n};\n\n/** Filter for paginating the history of an Object or MovePackage. */\nexport type VersionFilter = {\n  /** Filter to versions that are strictly newer than this one, defaults to fetching from the earliest version known to this RPC (this could be the initial version, or some later version if the initial version has been pruned). */\n  afterVersion?: InputMaybe<Scalars['UInt53']['input']>;\n  /** Filter to versions that are strictly older than this one, defaults to fetching up to the latest version (inclusive). */\n  beforeVersion?: InputMaybe<Scalars['UInt53']['input']>;\n};\n\n/** An enum that specifies the intent scope to be used to parse the bytes for signature verification. */\nexport enum ZkLoginIntentScope {\n  /** Indicates that the bytes are to be parsed as a personal message. */\n  PersonalMessage = 'PERSONAL_MESSAGE',\n  /** Indicates that the bytes are to be parsed as transaction data bytes. */\n  TransactionData = 'TRANSACTION_DATA'\n}\n\n/** The result of the zkLogin signature verification. */\nexport type ZkLoginVerifyResult = {\n  __typename?: 'ZkLoginVerifyResult';\n  /** The error field capture reasons why the signature could not be verified, assuming the inputs are valid and there are no internal errors. */\n  error?: Maybe<Scalars['String']['output']>;\n  /** The boolean result of the verification. If true, errors should be empty. */\n  success?: Maybe<Scalars['Boolean']['output']>;\n};\n\nexport type GetAllBalancesQueryVariables = Exact<{\n  owner: Scalars['SuiAddress']['input'];\n  limit?: InputMaybe<Scalars['Int']['input']>;\n  cursor?: InputMaybe<Scalars['String']['input']>;\n}>;\n\n\nexport type GetAllBalancesQuery = { __typename?: 'Query', address: { __typename?: 'Address', balances?: { __typename?: 'BalanceConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean, endCursor?: string | null }, nodes: Array<{ __typename?: 'Balance', totalBalance?: string | null, coinType?: { __typename?: 'MoveType', repr: string } | null }> } | null } };\n\nexport type GetBalanceQueryVariables = Exact<{\n  owner: Scalars['SuiAddress']['input'];\n  coinType?: Scalars['String']['input'];\n}>;\n\n\nexport type GetBalanceQuery = { __typename?: 'Query', address: { __typename?: 'Address', balance?: { __typename?: 'Balance', totalBalance?: string | null, coinType?: { __typename?: 'MoveType', repr: string } | null } | null } };\n\nexport type GetCoinsQueryVariables = Exact<{\n  owner: Scalars['SuiAddress']['input'];\n  first?: InputMaybe<Scalars['Int']['input']>;\n  cursor?: InputMaybe<Scalars['String']['input']>;\n  type?: Scalars['String']['input'];\n}>;\n\n\nexport type GetCoinsQuery = { __typename?: 'Query', address: { __typename?: 'Address', address: string, objects?: { __typename?: 'MoveObjectConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean, endCursor?: string | null }, nodes: Array<{ __typename?: 'MoveObject', address: string, version?: number | null, digest?: string | null, owner?: { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Immutable' } | { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Shared', initialSharedVersion?: number | null } | null, contents?: { __typename?: 'MoveValue', bcs?: string | null, json?: unknown | null, type?: { __typename?: 'MoveType', repr: string } | null } | null, previousTransaction?: { __typename?: 'Transaction', digest: string } | null }> } | null } };\n\nexport type GetDynamicFieldsQueryVariables = Exact<{\n  parentId: Scalars['SuiAddress']['input'];\n  first?: InputMaybe<Scalars['Int']['input']>;\n  cursor?: InputMaybe<Scalars['String']['input']>;\n}>;\n\n\nexport type GetDynamicFieldsQuery = { __typename?: 'Query', address: { __typename?: 'Address', dynamicFields?: { __typename?: 'DynamicFieldConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean, endCursor?: string | null }, nodes: Array<{ __typename?: 'DynamicField', name?: { __typename?: 'MoveValue', bcs?: string | null, type?: { __typename?: 'MoveType', repr: string } | null } | null, value?: { __typename: 'MoveObject', contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | { __typename: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null }> } | null } };\n\nexport type GetMoveFunctionQueryVariables = Exact<{\n  package: Scalars['SuiAddress']['input'];\n  module: Scalars['String']['input'];\n  function: Scalars['String']['input'];\n}>;\n\n\nexport type GetMoveFunctionQuery = { __typename?: 'Query', package?: { __typename?: 'MovePackage', module?: { __typename?: 'MoveModule', function?: { __typename?: 'MoveFunction', name: string, visibility?: MoveVisibility | null, isEntry?: boolean | null, typeParameters?: Array<{ __typename?: 'MoveFunctionTypeParameter', constraints: Array<MoveAbility> }> | null, parameters?: Array<{ __typename?: 'OpenMoveType', signature: OpenMoveTypeSignature }> | null, return?: Array<{ __typename?: 'OpenMoveType', signature: OpenMoveTypeSignature }> | null } | null } | null } | null };\n\nexport type GetReferenceGasPriceQueryVariables = Exact<{ [key: string]: never; }>;\n\n\nexport type GetReferenceGasPriceQuery = { __typename?: 'Query', epoch?: { __typename?: 'Epoch', referenceGasPrice?: string | null } | null };\n\nexport type DefaultSuinsNameQueryVariables = Exact<{\n  address: Scalars['SuiAddress']['input'];\n}>;\n\n\nexport type DefaultSuinsNameQuery = { __typename?: 'Query', address: { __typename?: 'Address', defaultSuinsName?: string | null } };\n\nexport type GetOwnedObjectsQueryVariables = Exact<{\n  owner: Scalars['SuiAddress']['input'];\n  limit?: InputMaybe<Scalars['Int']['input']>;\n  cursor?: InputMaybe<Scalars['String']['input']>;\n  filter?: InputMaybe<ObjectFilter>;\n}>;\n\n\nexport type GetOwnedObjectsQuery = { __typename?: 'Query', address: { __typename?: 'Address', objects?: { __typename?: 'MoveObjectConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean, endCursor?: string | null }, nodes: Array<{ __typename?: 'MoveObject', address: string, digest?: string | null, version?: number | null, contents?: { __typename?: 'MoveValue', bcs?: string | null, type?: { __typename?: 'MoveType', repr: string } | null } | null, owner?: { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Immutable' } | { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Shared', initialSharedVersion?: number | null } | null, previousTransaction?: { __typename?: 'Transaction', digest: string } | null }> } | null } };\n\nexport type MultiGetObjectsQueryVariables = Exact<{\n  objectKeys: Array<ObjectKey> | ObjectKey;\n}>;\n\n\nexport type MultiGetObjectsQuery = { __typename?: 'Query', multiGetObjects: Array<{ __typename?: 'Object', address: string, digest?: string | null, version?: number | null, asMoveObject?: { __typename?: 'MoveObject', contents?: { __typename?: 'MoveValue', bcs?: string | null, type?: { __typename?: 'MoveType', repr: string } | null } | null } | null, owner?: { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Immutable' } | { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Shared', initialSharedVersion?: number | null } | null, previousTransaction?: { __typename?: 'Transaction', digest: string } | null } | null> };\n\nexport type Object_FieldsFragment = { __typename?: 'Object', address: string, digest?: string | null, version?: number | null, asMoveObject?: { __typename?: 'MoveObject', contents?: { __typename?: 'MoveValue', bcs?: string | null, type?: { __typename?: 'MoveType', repr: string } | null } | null } | null, owner?: { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Immutable' } | { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Shared', initialSharedVersion?: number | null } | null, previousTransaction?: { __typename?: 'Transaction', digest: string } | null };\n\nexport type Move_Object_FieldsFragment = { __typename?: 'MoveObject', address: string, digest?: string | null, version?: number | null, contents?: { __typename?: 'MoveValue', bcs?: string | null, type?: { __typename?: 'MoveType', repr: string } | null } | null, owner?: { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Immutable' } | { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null } | { __typename: 'Shared', initialSharedVersion?: number | null } | null, previousTransaction?: { __typename?: 'Transaction', digest: string } | null };\n\ntype Object_Owner_Fields_AddressOwner_Fragment = { __typename: 'AddressOwner', address?: { __typename?: 'Address', address: string } | null };\n\ntype Object_Owner_Fields_ConsensusAddressOwner_Fragment = { __typename: 'ConsensusAddressOwner', startVersion?: number | null, address?: { __typename?: 'Address', address: string } | null };\n\ntype Object_Owner_Fields_Immutable_Fragment = { __typename: 'Immutable' };\n\ntype Object_Owner_Fields_ObjectOwner_Fragment = { __typename: 'ObjectOwner', address?: { __typename?: 'Address', address: string } | null };\n\ntype Object_Owner_Fields_Shared_Fragment = { __typename: 'Shared', initialSharedVersion?: number | null };\n\nexport type Object_Owner_FieldsFragment = Object_Owner_Fields_AddressOwner_Fragment | Object_Owner_Fields_ConsensusAddressOwner_Fragment | Object_Owner_Fields_Immutable_Fragment | Object_Owner_Fields_ObjectOwner_Fragment | Object_Owner_Fields_Shared_Fragment;\n\nexport type SimulateTransactionQueryVariables = Exact<{\n  transaction: Scalars['JSON']['input'];\n}>;\n\n\nexport type SimulateTransactionQuery = { __typename?: 'Query', simulateTransaction: { __typename?: 'SimulationResult', error?: string | null, effects?: { __typename?: 'TransactionEffects', transaction?: { __typename?: 'Transaction', digest: string, transactionBcs?: string | null, signatures: Array<{ __typename?: 'UserSignature', signatureBytes?: string | null }>, effects?: { __typename?: 'TransactionEffects', effectsBcs?: string | null, epoch?: { __typename?: 'Epoch', epochId: number } | null, unchangedConsensusObjects?: { __typename?: 'UnchangedConsensusObjectConnection', nodes: Array<{ __typename: 'ConsensusObjectCancelled' } | { __typename: 'ConsensusObjectRead', object?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null } | { __typename: 'MutateConsensusStreamEnded' } | { __typename: 'PerEpochConfig' } | { __typename: 'ReadConsensusStreamEnded' }> } | null, objectChanges?: { __typename?: 'ObjectChangeConnection', nodes: Array<{ __typename?: 'ObjectChange', address: string, inputState?: { __typename?: 'Object', version?: number | null, asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null, outputState?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null }> } | null, balanceChanges?: { __typename?: 'BalanceChangeConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean }, nodes: Array<{ __typename?: 'BalanceChange', amount?: string | null, owner?: { __typename?: 'Address', address: string } | null, coinType?: { __typename?: 'MoveType', repr: string } | null }> } | null } | null } | null } | null } };\n\nexport type ExecuteTransactionMutationVariables = Exact<{\n  transactionDataBcs: Scalars['Base64']['input'];\n  signatures: Array<Scalars['Base64']['input']> | Scalars['Base64']['input'];\n}>;\n\n\nexport type ExecuteTransactionMutation = { __typename?: 'Mutation', executeTransaction: { __typename?: 'ExecutionResult', errors?: Array<string> | null, effects?: { __typename?: 'TransactionEffects', transaction?: { __typename?: 'Transaction', digest: string, transactionBcs?: string | null, signatures: Array<{ __typename?: 'UserSignature', signatureBytes?: string | null }>, effects?: { __typename?: 'TransactionEffects', effectsBcs?: string | null, epoch?: { __typename?: 'Epoch', epochId: number } | null, unchangedConsensusObjects?: { __typename?: 'UnchangedConsensusObjectConnection', nodes: Array<{ __typename: 'ConsensusObjectCancelled' } | { __typename: 'ConsensusObjectRead', object?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null } | { __typename: 'MutateConsensusStreamEnded' } | { __typename: 'PerEpochConfig' } | { __typename: 'ReadConsensusStreamEnded' }> } | null, objectChanges?: { __typename?: 'ObjectChangeConnection', nodes: Array<{ __typename?: 'ObjectChange', address: string, inputState?: { __typename?: 'Object', version?: number | null, asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null, outputState?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null }> } | null, balanceChanges?: { __typename?: 'BalanceChangeConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean }, nodes: Array<{ __typename?: 'BalanceChange', amount?: string | null, owner?: { __typename?: 'Address', address: string } | null, coinType?: { __typename?: 'MoveType', repr: string } | null }> } | null } | null } | null } | null } };\n\nexport type GetTransactionBlockQueryVariables = Exact<{\n  digest: Scalars['String']['input'];\n}>;\n\n\nexport type GetTransactionBlockQuery = { __typename?: 'Query', transaction?: { __typename?: 'Transaction', digest: string, transactionBcs?: string | null, signatures: Array<{ __typename?: 'UserSignature', signatureBytes?: string | null }>, effects?: { __typename?: 'TransactionEffects', effectsBcs?: string | null, epoch?: { __typename?: 'Epoch', epochId: number } | null, unchangedConsensusObjects?: { __typename?: 'UnchangedConsensusObjectConnection', nodes: Array<{ __typename: 'ConsensusObjectCancelled' } | { __typename: 'ConsensusObjectRead', object?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null } | { __typename: 'MutateConsensusStreamEnded' } | { __typename: 'PerEpochConfig' } | { __typename: 'ReadConsensusStreamEnded' }> } | null, objectChanges?: { __typename?: 'ObjectChangeConnection', nodes: Array<{ __typename?: 'ObjectChange', address: string, inputState?: { __typename?: 'Object', version?: number | null, asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null, outputState?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null }> } | null, balanceChanges?: { __typename?: 'BalanceChangeConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean }, nodes: Array<{ __typename?: 'BalanceChange', amount?: string | null, owner?: { __typename?: 'Address', address: string } | null, coinType?: { __typename?: 'MoveType', repr: string } | null }> } | null } | null } | null };\n\nexport type Transaction_FieldsFragment = { __typename?: 'Transaction', digest: string, transactionBcs?: string | null, signatures: Array<{ __typename?: 'UserSignature', signatureBytes?: string | null }>, effects?: { __typename?: 'TransactionEffects', effectsBcs?: string | null, epoch?: { __typename?: 'Epoch', epochId: number } | null, unchangedConsensusObjects?: { __typename?: 'UnchangedConsensusObjectConnection', nodes: Array<{ __typename: 'ConsensusObjectCancelled' } | { __typename: 'ConsensusObjectRead', object?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null } | { __typename: 'MutateConsensusStreamEnded' } | { __typename: 'PerEpochConfig' } | { __typename: 'ReadConsensusStreamEnded' }> } | null, objectChanges?: { __typename?: 'ObjectChangeConnection', nodes: Array<{ __typename?: 'ObjectChange', address: string, inputState?: { __typename?: 'Object', version?: number | null, asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null, outputState?: { __typename?: 'Object', asMoveObject?: { __typename?: 'MoveObject', address: string, contents?: { __typename?: 'MoveValue', type?: { __typename?: 'MoveType', repr: string } | null } | null } | null } | null }> } | null, balanceChanges?: { __typename?: 'BalanceChangeConnection', pageInfo: { __typename?: 'PageInfo', hasNextPage: boolean }, nodes: Array<{ __typename?: 'BalanceChange', amount?: string | null, owner?: { __typename?: 'Address', address: string } | null, coinType?: { __typename?: 'MoveType', repr: string } | null }> } | null } | null };\n\nexport type VerifyZkLoginSignatureQueryVariables = Exact<{\n  bytes: Scalars['Base64']['input'];\n  signature: Scalars['Base64']['input'];\n  intentScope: ZkLoginIntentScope;\n  author: Scalars['SuiAddress']['input'];\n}>;\n\n\nexport type VerifyZkLoginSignatureQuery = { __typename?: 'Query', verifyZkLoginSignature: { __typename?: 'ZkLoginVerifyResult', success?: boolean | null, error?: string | null } };\n\nexport class TypedDocumentString<TResult, TVariables>\n  extends String\n  implements DocumentTypeDecoration<TResult, TVariables>\n{\n  __apiType?: NonNullable<DocumentTypeDecoration<TResult, TVariables>['__apiType']>;\n  private value: string;\n  public __meta__?: Record<string, any> | undefined;\n\n  constructor(value: string, __meta__?: Record<string, any> | undefined) {\n    super(value);\n    this.value = value;\n    this.__meta__ = __meta__;\n  }\n\n  override toString(): string & DocumentTypeDecoration<TResult, TVariables> {\n    return this.value;\n  }\n}\nexport const Object_Owner_FieldsFragmentDoc = new TypedDocumentString(`\n    fragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}\n    `, {\"fragmentName\":\"OBJECT_OWNER_FIELDS\"}) as unknown as TypedDocumentString<Object_Owner_FieldsFragment, unknown>;\nexport const Object_FieldsFragmentDoc = new TypedDocumentString(`\n    fragment OBJECT_FIELDS on Object {\n  address\n  digest\n  version\n  asMoveObject {\n    contents {\n      bcs\n      type {\n        repr\n      }\n    }\n  }\n  owner {\n    ...OBJECT_OWNER_FIELDS\n  }\n  previousTransaction {\n    digest\n  }\n}\n    fragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}`, {\"fragmentName\":\"OBJECT_FIELDS\"}) as unknown as TypedDocumentString<Object_FieldsFragment, unknown>;\nexport const Move_Object_FieldsFragmentDoc = new TypedDocumentString(`\n    fragment MOVE_OBJECT_FIELDS on MoveObject {\n  address\n  digest\n  version\n  contents {\n    bcs\n    type {\n      repr\n    }\n  }\n  owner {\n    ...OBJECT_OWNER_FIELDS\n  }\n  previousTransaction {\n    digest\n  }\n}\n    fragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}`, {\"fragmentName\":\"MOVE_OBJECT_FIELDS\"}) as unknown as TypedDocumentString<Move_Object_FieldsFragment, unknown>;\nexport const Transaction_FieldsFragmentDoc = new TypedDocumentString(`\n    fragment TRANSACTION_FIELDS on Transaction {\n  digest\n  transactionBcs\n  signatures {\n    signatureBytes\n  }\n  effects {\n    effectsBcs\n    epoch {\n      epochId\n    }\n    unchangedConsensusObjects {\n      nodes {\n        __typename\n        ... on ConsensusObjectRead {\n          object {\n            asMoveObject {\n              address\n              contents {\n                type {\n                  repr\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    objectChanges {\n      nodes {\n        address\n        inputState {\n          version\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n        outputState {\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n      }\n    }\n    balanceChanges(first: 50) {\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        owner {\n          address\n        }\n        coinType {\n          repr\n        }\n        amount\n      }\n    }\n  }\n}\n    `, {\"fragmentName\":\"TRANSACTION_FIELDS\"}) as unknown as TypedDocumentString<Transaction_FieldsFragment, unknown>;\nexport const GetAllBalancesDocument = new TypedDocumentString(`\n    query getAllBalances($owner: SuiAddress!, $limit: Int, $cursor: String) {\n  address(address: $owner) {\n    balances(first: $limit, after: $cursor) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      nodes {\n        coinType {\n          repr\n        }\n        totalBalance\n      }\n    }\n  }\n}\n    `) as unknown as TypedDocumentString<GetAllBalancesQuery, GetAllBalancesQueryVariables>;\nexport const GetBalanceDocument = new TypedDocumentString(`\n    query getBalance($owner: SuiAddress!, $coinType: String! = \"0x2::sui::SUI\") {\n  address(address: $owner) {\n    balance(coinType: $coinType) {\n      coinType {\n        repr\n      }\n      totalBalance\n    }\n  }\n}\n    `) as unknown as TypedDocumentString<GetBalanceQuery, GetBalanceQueryVariables>;\nexport const GetCoinsDocument = new TypedDocumentString(`\n    query getCoins($owner: SuiAddress!, $first: Int, $cursor: String, $type: String! = \"0x2::coin::Coin<0x2::sui::SUI>\") {\n  address(address: $owner) {\n    address\n    objects(first: $first, after: $cursor, filter: {type: $type}) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      nodes {\n        owner {\n          ...OBJECT_OWNER_FIELDS\n        }\n        contents {\n          bcs\n          json\n          type {\n            repr\n          }\n        }\n        address\n        version\n        digest\n        previousTransaction {\n          digest\n        }\n      }\n    }\n  }\n}\n    fragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}`) as unknown as TypedDocumentString<GetCoinsQuery, GetCoinsQueryVariables>;\nexport const GetDynamicFieldsDocument = new TypedDocumentString(`\n    query getDynamicFields($parentId: SuiAddress!, $first: Int, $cursor: String) {\n  address(address: $parentId) {\n    dynamicFields(first: $first, after: $cursor) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      nodes {\n        name {\n          bcs\n          type {\n            repr\n          }\n        }\n        value {\n          __typename\n          ... on MoveValue {\n            type {\n              repr\n            }\n          }\n          ... on MoveObject {\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n    `) as unknown as TypedDocumentString<GetDynamicFieldsQuery, GetDynamicFieldsQueryVariables>;\nexport const GetMoveFunctionDocument = new TypedDocumentString(`\n    query getMoveFunction($package: SuiAddress!, $module: String!, $function: String!) {\n  package(address: $package) {\n    module(name: $module) {\n      function(name: $function) {\n        name\n        visibility\n        isEntry\n        typeParameters {\n          constraints\n        }\n        parameters {\n          signature\n        }\n        return {\n          signature\n        }\n      }\n    }\n  }\n}\n    `) as unknown as TypedDocumentString<GetMoveFunctionQuery, GetMoveFunctionQueryVariables>;\nexport const GetReferenceGasPriceDocument = new TypedDocumentString(`\n    query getReferenceGasPrice {\n  epoch {\n    referenceGasPrice\n  }\n}\n    `) as unknown as TypedDocumentString<GetReferenceGasPriceQuery, GetReferenceGasPriceQueryVariables>;\nexport const DefaultSuinsNameDocument = new TypedDocumentString(`\n    query defaultSuinsName($address: SuiAddress!) {\n  address(address: $address) {\n    defaultSuinsName\n  }\n}\n    `) as unknown as TypedDocumentString<DefaultSuinsNameQuery, DefaultSuinsNameQueryVariables>;\nexport const GetOwnedObjectsDocument = new TypedDocumentString(`\n    query getOwnedObjects($owner: SuiAddress!, $limit: Int, $cursor: String, $filter: ObjectFilter) {\n  address(address: $owner) {\n    objects(first: $limit, after: $cursor, filter: $filter) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      nodes {\n        ...MOVE_OBJECT_FIELDS\n      }\n    }\n  }\n}\n    fragment MOVE_OBJECT_FIELDS on MoveObject {\n  address\n  digest\n  version\n  contents {\n    bcs\n    type {\n      repr\n    }\n  }\n  owner {\n    ...OBJECT_OWNER_FIELDS\n  }\n  previousTransaction {\n    digest\n  }\n}\nfragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}`) as unknown as TypedDocumentString<GetOwnedObjectsQuery, GetOwnedObjectsQueryVariables>;\nexport const MultiGetObjectsDocument = new TypedDocumentString(`\n    query multiGetObjects($objectKeys: [ObjectKey!]!) {\n  multiGetObjects(keys: $objectKeys) {\n    ...OBJECT_FIELDS\n  }\n}\n    fragment OBJECT_FIELDS on Object {\n  address\n  digest\n  version\n  asMoveObject {\n    contents {\n      bcs\n      type {\n        repr\n      }\n    }\n  }\n  owner {\n    ...OBJECT_OWNER_FIELDS\n  }\n  previousTransaction {\n    digest\n  }\n}\nfragment OBJECT_OWNER_FIELDS on Owner {\n  __typename\n  ... on AddressOwner {\n    address {\n      address\n    }\n  }\n  ... on ObjectOwner {\n    address {\n      address\n    }\n  }\n  ... on Shared {\n    initialSharedVersion\n  }\n  ... on ConsensusAddressOwner {\n    startVersion\n    address {\n      address\n    }\n  }\n}`) as unknown as TypedDocumentString<MultiGetObjectsQuery, MultiGetObjectsQueryVariables>;\nexport const SimulateTransactionDocument = new TypedDocumentString(`\n    query simulateTransaction($transaction: JSON!) {\n  simulateTransaction(transaction: $transaction) {\n    error\n    effects {\n      transaction {\n        ...TRANSACTION_FIELDS\n      }\n    }\n  }\n}\n    fragment TRANSACTION_FIELDS on Transaction {\n  digest\n  transactionBcs\n  signatures {\n    signatureBytes\n  }\n  effects {\n    effectsBcs\n    epoch {\n      epochId\n    }\n    unchangedConsensusObjects {\n      nodes {\n        __typename\n        ... on ConsensusObjectRead {\n          object {\n            asMoveObject {\n              address\n              contents {\n                type {\n                  repr\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    objectChanges {\n      nodes {\n        address\n        inputState {\n          version\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n        outputState {\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n      }\n    }\n    balanceChanges(first: 50) {\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        owner {\n          address\n        }\n        coinType {\n          repr\n        }\n        amount\n      }\n    }\n  }\n}`) as unknown as TypedDocumentString<SimulateTransactionQuery, SimulateTransactionQueryVariables>;\nexport const ExecuteTransactionDocument = new TypedDocumentString(`\n    mutation executeTransaction($transactionDataBcs: Base64!, $signatures: [Base64!]!) {\n  executeTransaction(\n    transactionDataBcs: $transactionDataBcs\n    signatures: $signatures\n  ) {\n    errors\n    effects {\n      transaction {\n        ...TRANSACTION_FIELDS\n      }\n    }\n  }\n}\n    fragment TRANSACTION_FIELDS on Transaction {\n  digest\n  transactionBcs\n  signatures {\n    signatureBytes\n  }\n  effects {\n    effectsBcs\n    epoch {\n      epochId\n    }\n    unchangedConsensusObjects {\n      nodes {\n        __typename\n        ... on ConsensusObjectRead {\n          object {\n            asMoveObject {\n              address\n              contents {\n                type {\n                  repr\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    objectChanges {\n      nodes {\n        address\n        inputState {\n          version\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n        outputState {\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n      }\n    }\n    balanceChanges(first: 50) {\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        owner {\n          address\n        }\n        coinType {\n          repr\n        }\n        amount\n      }\n    }\n  }\n}`) as unknown as TypedDocumentString<ExecuteTransactionMutation, ExecuteTransactionMutationVariables>;\nexport const GetTransactionBlockDocument = new TypedDocumentString(`\n    query getTransactionBlock($digest: String!) {\n  transaction(digest: $digest) {\n    ...TRANSACTION_FIELDS\n  }\n}\n    fragment TRANSACTION_FIELDS on Transaction {\n  digest\n  transactionBcs\n  signatures {\n    signatureBytes\n  }\n  effects {\n    effectsBcs\n    epoch {\n      epochId\n    }\n    unchangedConsensusObjects {\n      nodes {\n        __typename\n        ... on ConsensusObjectRead {\n          object {\n            asMoveObject {\n              address\n              contents {\n                type {\n                  repr\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    objectChanges {\n      nodes {\n        address\n        inputState {\n          version\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n        outputState {\n          asMoveObject {\n            address\n            contents {\n              type {\n                repr\n              }\n            }\n          }\n        }\n      }\n    }\n    balanceChanges(first: 50) {\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        owner {\n          address\n        }\n        coinType {\n          repr\n        }\n        amount\n      }\n    }\n  }\n}`) as unknown as TypedDocumentString<GetTransactionBlockQuery, GetTransactionBlockQueryVariables>;\nexport const VerifyZkLoginSignatureDocument = new TypedDocumentString(`\n    query verifyZkLoginSignature($bytes: Base64!, $signature: Base64!, $intentScope: ZkLoginIntentScope!, $author: SuiAddress!) {\n  verifyZkLoginSignature(\n    bytes: $bytes\n    signature: $signature\n    intentScope: $intentScope\n    author: $author\n  ) {\n    success\n    error\n  }\n}\n    `) as unknown as TypedDocumentString<VerifyZkLoginSignatureQuery, VerifyZkLoginSignatureQueryVariables>;", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Experimental_CoreClient } from '../experimental/core.js';\nimport type { Experimental_SuiClientTypes } from '../experimental/types.js';\nimport type { GraphQLQueryOptions, SuiGraphQLClient } from './client.js';\nimport type {\n\tObject_Owner_FieldsFragment,\n\tTransaction_FieldsFragment,\n} from './generated/queries.js';\nimport {\n\tDefaultSuinsNameDocument,\n\tExecuteTransactionDocument,\n\tGetAllBalancesDocument,\n\tGetBalanceDocument,\n\tGetCoinsDocument,\n\tGetDynamicFieldsDocument,\n\tGetMoveFunctionDocument,\n\tGetOwnedObjectsDocument,\n\tGetReferenceGasPriceDocument,\n\tGetTransactionBlockDocument,\n\tMultiGetObjectsDocument,\n\tSimulateTransactionDocument,\n\tVerifyZkLoginSignatureDocument,\n\tZkLoginIntentScope,\n} from './generated/queries.js';\nimport { ObjectError } from '../experimental/errors.js';\nimport { chunk, fromBase64, toBase64 } from '@mysten/utils';\nimport { normalizeStructTag, normalizeSuiAddress } from '../utils/sui-types.js';\nimport { deriveDynamicFieldID } from '../utils/dynamic-fields.js';\nimport {\n\tparseTransactionBcs,\n\tparseTransactionEffectsBcs,\n} from '../experimental/transports/utils.js';\nimport type { OpenMoveTypeSignatureBody, OpenMoveTypeSignature } from './types.js';\n\nexport class GraphQLCoreClient extends Experimental_CoreClient {\n\t#graphqlClient: SuiGraphQLClient;\n\n\tconstructor({\n\t\tgraphqlClient,\n\t\tmvr,\n\t}: {\n\t\tgraphqlClient: SuiGraphQLClient;\n\t\tmvr?: Experimental_SuiClientTypes.MvrOptions;\n\t}) {\n\t\tsuper({ network: graphqlClient.network, base: graphqlClient, mvr });\n\t\tthis.#graphqlClient = graphqlClient;\n\t}\n\n\tasync #graphqlQuery<\n\t\tResult = Record<string, unknown>,\n\t\tVariables = Record<string, unknown>,\n\t\tData = Result,\n\t>(\n\t\toptions: GraphQLQueryOptions<Result, Variables>,\n\t\tgetData?: (result: Result) => Data,\n\t): Promise<NonNullable<Data>> {\n\t\tconst { data, errors } = await this.#graphqlClient.query(options);\n\n\t\thandleGraphQLErrors(errors);\n\n\t\tconst extractedData = data && (getData ? getData(data) : data);\n\n\t\tif (extractedData == null) {\n\t\t\tthrow new Error('Missing response data');\n\t\t}\n\n\t\treturn extractedData as NonNullable<Data>;\n\t}\n\n\tasync getObjects(\n\t\toptions: Experimental_SuiClientTypes.GetObjectsOptions,\n\t): Promise<Experimental_SuiClientTypes.GetObjectsResponse> {\n\t\tconst batches = chunk(options.objectIds, 50);\n\t\tconst results: Experimental_SuiClientTypes.GetObjectsResponse['objects'] = [];\n\n\t\tfor (const batch of batches) {\n\t\t\tconst page = await this.#graphqlQuery(\n\t\t\t\t{\n\t\t\t\t\tquery: MultiGetObjectsDocument,\n\t\t\t\t\tvariables: {\n\t\t\t\t\t\tobjectKeys: batch.map((address) => ({ address })),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t(result) => result.multiGetObjects,\n\t\t\t);\n\t\t\tresults.push(\n\t\t\t\t...batch\n\t\t\t\t\t.map((id) => normalizeSuiAddress(id))\n\t\t\t\t\t.map(\n\t\t\t\t\t\t(id) =>\n\t\t\t\t\t\t\tpage.find((obj) => obj?.address === id) ??\n\t\t\t\t\t\t\tnew ObjectError('notFound', `Object ${id} not found`),\n\t\t\t\t\t)\n\t\t\t\t\t.map((obj) => {\n\t\t\t\t\t\tif (obj instanceof ObjectError) {\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: obj.address,\n\t\t\t\t\t\t\tversion: obj.version?.toString()!,\n\t\t\t\t\t\t\tdigest: obj.digest!,\n\t\t\t\t\t\t\towner: mapOwner(obj.owner!),\n\t\t\t\t\t\t\ttype: obj.asMoveObject?.contents?.type?.repr!,\n\t\t\t\t\t\t\tcontent: Promise.resolve(\n\t\t\t\t\t\t\t\tobj.asMoveObject?.contents?.bcs\n\t\t\t\t\t\t\t\t\t? fromBase64(obj.asMoveObject.contents.bcs)\n\t\t\t\t\t\t\t\t\t: new Uint8Array(),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tpreviousTransaction: obj.previousTransaction?.digest ?? null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tobjects: results,\n\t\t};\n\t}\n\tasync getOwnedObjects(\n\t\toptions: Experimental_SuiClientTypes.GetOwnedObjectsOptions,\n\t): Promise<Experimental_SuiClientTypes.GetOwnedObjectsResponse> {\n\t\tconst objects = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetOwnedObjectsDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\towner: options.address,\n\t\t\t\t\tlimit: options.limit,\n\t\t\t\t\tcursor: options.cursor,\n\t\t\t\t\tfilter: options.type\n\t\t\t\t\t\t? { type: (await this.mvr.resolveType({ type: options.type })).type }\n\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.address?.objects,\n\t\t);\n\n\t\treturn {\n\t\t\tobjects: objects.nodes.map((obj) => ({\n\t\t\t\tid: obj.address,\n\t\t\t\tversion: obj.version?.toString()!,\n\t\t\t\tdigest: obj.digest!,\n\t\t\t\towner: mapOwner(obj.owner!),\n\t\t\t\ttype: obj.contents?.type?.repr!,\n\t\t\t\tcontent: Promise.resolve(\n\t\t\t\t\tobj.contents?.bcs ? fromBase64(obj.contents.bcs) : new Uint8Array(),\n\t\t\t\t),\n\t\t\t\tpreviousTransaction: obj.previousTransaction?.digest ?? null,\n\t\t\t})),\n\t\t\thasNextPage: objects.pageInfo.hasNextPage,\n\t\t\tcursor: objects.pageInfo.endCursor ?? null,\n\t\t};\n\t}\n\tasync getCoins(\n\t\toptions: Experimental_SuiClientTypes.GetCoinsOptions,\n\t): Promise<Experimental_SuiClientTypes.GetCoinsResponse> {\n\t\tconst coins = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetCoinsDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\towner: options.address,\n\t\t\t\t\tcursor: options.cursor,\n\t\t\t\t\tfirst: options.limit,\n\t\t\t\t\ttype: `0x2::coin::Coin<${(await this.mvr.resolveType({ type: options.coinType })).type}>`,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.address?.objects,\n\t\t);\n\n\t\treturn {\n\t\t\tcursor: coins.pageInfo.endCursor ?? null,\n\t\t\thasNextPage: coins.pageInfo.hasNextPage,\n\t\t\tobjects: coins.nodes.map((coin) => ({\n\t\t\t\tid: coin.address,\n\t\t\t\tversion: coin.version?.toString()!,\n\t\t\t\tdigest: coin.digest!,\n\t\t\t\towner: mapOwner(coin.owner!),\n\t\t\t\ttype: coin.contents?.type?.repr!,\n\t\t\t\tbalance: (coin.contents?.json as { balance: string })?.balance,\n\t\t\t\tcontent: Promise.resolve(\n\t\t\t\t\tcoin.contents?.bcs ? fromBase64(coin.contents.bcs) : new Uint8Array(),\n\t\t\t\t),\n\t\t\t\tpreviousTransaction: coin.previousTransaction?.digest ?? null,\n\t\t\t})),\n\t\t};\n\t}\n\n\tasync getBalance(\n\t\toptions: Experimental_SuiClientTypes.GetBalanceOptions,\n\t): Promise<Experimental_SuiClientTypes.GetBalanceResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetBalanceDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\towner: options.address,\n\t\t\t\t\ttype: (await this.mvr.resolveType({ type: options.coinType })).type,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.address?.balance,\n\t\t);\n\n\t\treturn {\n\t\t\tbalance: {\n\t\t\t\tcoinType: result.coinType?.repr!,\n\t\t\t\tbalance: result.totalBalance!,\n\t\t\t},\n\t\t};\n\t}\n\tasync getAllBalances(\n\t\toptions: Experimental_SuiClientTypes.GetAllBalancesOptions,\n\t): Promise<Experimental_SuiClientTypes.GetAllBalancesResponse> {\n\t\tconst balances = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetAllBalancesDocument,\n\t\t\t\tvariables: { owner: options.address },\n\t\t\t},\n\t\t\t(result) => result.address?.balances,\n\t\t);\n\n\t\treturn {\n\t\t\tcursor: balances.pageInfo.endCursor ?? null,\n\t\t\thasNextPage: balances.pageInfo.hasNextPage,\n\t\t\tbalances: balances.nodes.map((balance) => ({\n\t\t\t\tcoinType: balance.coinType?.repr!,\n\t\t\t\tbalance: balance.totalBalance!,\n\t\t\t})),\n\t\t};\n\t}\n\tasync getTransaction(\n\t\toptions: Experimental_SuiClientTypes.GetTransactionOptions,\n\t): Promise<Experimental_SuiClientTypes.GetTransactionResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetTransactionBlockDocument,\n\t\t\t\tvariables: { digest: options.digest },\n\t\t\t},\n\t\t\t(result) => result.transaction,\n\t\t);\n\n\t\treturn {\n\t\t\ttransaction: parseTransaction(result),\n\t\t};\n\t}\n\tasync executeTransaction(\n\t\toptions: Experimental_SuiClientTypes.ExecuteTransactionOptions,\n\t): Promise<Experimental_SuiClientTypes.ExecuteTransactionResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: ExecuteTransactionDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\ttransactionDataBcs: toBase64(options.transaction),\n\t\t\t\t\tsignatures: options.signatures,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.executeTransaction,\n\t\t);\n\n\t\tif (result.errors) {\n\t\t\tif (result.errors.length === 1) {\n\t\t\t\tthrow new Error(result.errors[0]);\n\t\t\t}\n\t\t\tthrow new AggregateError(result.errors.map((error) => new Error(error)));\n\t\t}\n\n\t\treturn {\n\t\t\ttransaction: parseTransaction(result.effects?.transaction!),\n\t\t};\n\t}\n\tasync dryRunTransaction(\n\t\toptions: Experimental_SuiClientTypes.DryRunTransactionOptions,\n\t): Promise<Experimental_SuiClientTypes.DryRunTransactionResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: SimulateTransactionDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\ttransaction: {\n\t\t\t\t\t\tbcs: {\n\t\t\t\t\t\t\tvalue: toBase64(options.transaction),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.simulateTransaction,\n\t\t);\n\n\t\tif (result.error) {\n\t\t\tthrow new Error(result.error);\n\t\t}\n\n\t\treturn {\n\t\t\ttransaction: parseTransaction(result.effects?.transaction!),\n\t\t};\n\t}\n\tasync getReferenceGasPrice(): Promise<Experimental_SuiClientTypes.GetReferenceGasPriceResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetReferenceGasPriceDocument,\n\t\t\t},\n\t\t\t(result) => result.epoch?.referenceGasPrice,\n\t\t);\n\n\t\treturn {\n\t\t\treferenceGasPrice: result,\n\t\t};\n\t}\n\n\tasync getDynamicFields(\n\t\toptions: Experimental_SuiClientTypes.GetDynamicFieldsOptions,\n\t): Promise<Experimental_SuiClientTypes.GetDynamicFieldsResponse> {\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetDynamicFieldsDocument,\n\t\t\t\tvariables: { parentId: options.parentId },\n\t\t\t},\n\t\t\t(result) => result.address?.dynamicFields,\n\t\t);\n\n\t\treturn {\n\t\t\tdynamicFields: result.nodes.map((dynamicField) => {\n\t\t\t\tconst valueType =\n\t\t\t\t\tdynamicField.value?.__typename === 'MoveObject'\n\t\t\t\t\t\t? dynamicField.value.contents?.type?.repr!\n\t\t\t\t\t\t: dynamicField.value?.type?.repr!;\n\t\t\t\treturn {\n\t\t\t\t\tid: deriveDynamicFieldID(\n\t\t\t\t\t\toptions.parentId,\n\t\t\t\t\t\tdynamicField.name?.type?.repr!,\n\t\t\t\t\t\tfromBase64(dynamicField.name?.bcs!),\n\t\t\t\t\t),\n\t\t\t\t\ttype: normalizeStructTag(\n\t\t\t\t\t\tdynamicField.value?.__typename === 'MoveObject'\n\t\t\t\t\t\t\t? `0x2::dynamic_field::Field<0x2::dynamic_object_field::Wrapper<${dynamicField.name?.type?.repr}>,0x2::object::ID>`\n\t\t\t\t\t\t\t: `0x2::dynamic_field::Field<${dynamicField.name?.type?.repr},${valueType}>`,\n\t\t\t\t\t),\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: dynamicField.name?.type?.repr!,\n\t\t\t\t\t\tbcs: fromBase64(dynamicField.name?.bcs!),\n\t\t\t\t\t},\n\t\t\t\t\tvalueType,\n\t\t\t\t};\n\t\t\t}),\n\t\t\tcursor: result.pageInfo.endCursor ?? null,\n\t\t\thasNextPage: result.pageInfo.hasNextPage,\n\t\t};\n\t}\n\n\tasync verifyZkLoginSignature(\n\t\toptions: Experimental_SuiClientTypes.VerifyZkLoginSignatureOptions,\n\t): Promise<Experimental_SuiClientTypes.ZkLoginVerifyResponse> {\n\t\tconst intentScope =\n\t\t\toptions.intentScope === 'TransactionData'\n\t\t\t\t? ZkLoginIntentScope.TransactionData\n\t\t\t\t: ZkLoginIntentScope.PersonalMessage;\n\n\t\tconst result = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: VerifyZkLoginSignatureDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\tbytes: options.bytes,\n\t\t\t\t\tsignature: options.signature,\n\t\t\t\t\tintentScope,\n\t\t\t\t\tauthor: options.author,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.verifyZkLoginSignature,\n\t\t);\n\n\t\treturn {\n\t\t\tsuccess: result.success ?? false,\n\t\t\terrors: result.error ? [result.error] : [],\n\t\t};\n\t}\n\n\tasync defaultNameServiceName(\n\t\toptions: Experimental_SuiClientTypes.DefaultNameServiceNameOptions,\n\t): Promise<Experimental_SuiClientTypes.DefaultNameServiceNameResponse> {\n\t\tconst name = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: DefaultSuinsNameDocument,\n\t\t\t\tsignal: options.signal,\n\t\t\t\tvariables: {\n\t\t\t\t\taddress: options.address,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.address?.defaultSuinsName ?? null,\n\t\t);\n\n\t\treturn {\n\t\t\tdata: { name: name },\n\t\t};\n\t}\n\n\tasync getMoveFunction(\n\t\toptions: Experimental_SuiClientTypes.GetMoveFunctionOptions,\n\t): Promise<Experimental_SuiClientTypes.GetMoveFunctionResponse> {\n\t\tconst moveFunction = await this.#graphqlQuery(\n\t\t\t{\n\t\t\t\tquery: GetMoveFunctionDocument,\n\t\t\t\tvariables: {\n\t\t\t\t\tpackage: (await this.mvr.resolvePackage({ package: options.packageId })).package,\n\t\t\t\t\tmodule: options.moduleName,\n\t\t\t\t\tfunction: options.name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t(result) => result.package?.module?.function,\n\t\t);\n\n\t\tlet visibility: 'public' | 'private' | 'friend' | 'unknown' = 'unknown';\n\n\t\tswitch (moveFunction.visibility) {\n\t\t\tcase 'PUBLIC':\n\t\t\t\tvisibility = 'public';\n\t\t\t\tbreak;\n\t\t\tcase 'PRIVATE':\n\t\t\t\tvisibility = 'private';\n\t\t\t\tbreak;\n\t\t\tcase 'FRIEND':\n\t\t\t\tvisibility = 'friend';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\tfunction: {\n\t\t\t\tpackageId: normalizeSuiAddress(options.packageId),\n\t\t\t\tmoduleName: options.moduleName,\n\t\t\t\tname: moveFunction.name,\n\t\t\t\tvisibility,\n\t\t\t\tisEntry: moveFunction.isEntry ?? false,\n\t\t\t\ttypeParameters:\n\t\t\t\t\tmoveFunction.typeParameters?.map(({ constraints }) => ({\n\t\t\t\t\t\tisPhantom: false,\n\t\t\t\t\t\tconstraints:\n\t\t\t\t\t\t\tconstraints.map((constraint) => {\n\t\t\t\t\t\t\t\tswitch (constraint) {\n\t\t\t\t\t\t\t\t\tcase 'COPY':\n\t\t\t\t\t\t\t\t\t\treturn 'copy';\n\t\t\t\t\t\t\t\t\tcase 'DROP':\n\t\t\t\t\t\t\t\t\t\treturn 'drop';\n\t\t\t\t\t\t\t\t\tcase 'STORE':\n\t\t\t\t\t\t\t\t\t\treturn 'store';\n\t\t\t\t\t\t\t\t\tcase 'KEY':\n\t\t\t\t\t\t\t\t\t\treturn 'key';\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\treturn 'unknown';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}) ?? [],\n\t\t\t\t\t})) ?? [],\n\t\t\t\tparameters:\n\t\t\t\t\tmoveFunction.parameters?.map((param) => parseNormalizedSuiMoveType(param.signature)) ??\n\t\t\t\t\t[],\n\t\t\t\treturns:\n\t\t\t\t\tmoveFunction.return?.map(({ signature }) => parseNormalizedSuiMoveType(signature)) ?? [],\n\t\t\t},\n\t\t};\n\t}\n\n\tresolveTransactionPlugin(): never {\n\t\tthrow new Error('GraphQL client does not support transaction resolution yet');\n\t}\n}\nexport type GraphQLResponseErrors = Array<{\n\tmessage: string;\n\tlocations?: { line: number; column: number }[];\n\tpath?: (string | number)[];\n}>;\n\nfunction handleGraphQLErrors(errors: GraphQLResponseErrors | undefined): void {\n\tif (!errors || errors.length === 0) return;\n\n\tconst errorInstances = errors.map((error) => new GraphQLResponseError(error));\n\n\tif (errorInstances.length === 1) {\n\t\tthrow errorInstances[0];\n\t}\n\n\tthrow new AggregateError(errorInstances);\n}\n\nclass GraphQLResponseError extends Error {\n\tlocations?: Array<{ line: number; column: number }>;\n\n\tconstructor(error: GraphQLResponseErrors[0]) {\n\t\tsuper(error.message);\n\t\tthis.locations = error.locations;\n\t}\n}\n\nfunction mapOwner(owner: Object_Owner_FieldsFragment): Experimental_SuiClientTypes.ObjectOwner {\n\tswitch (owner.__typename) {\n\t\tcase 'AddressOwner':\n\t\t\treturn { $kind: 'AddressOwner', AddressOwner: owner.address?.address! };\n\t\tcase 'ConsensusAddressOwner':\n\t\t\treturn {\n\t\t\t\t$kind: 'ConsensusAddressOwner',\n\t\t\t\tConsensusAddressOwner: {\n\t\t\t\t\towner: owner?.address?.address!,\n\t\t\t\t\tstartVersion: String(owner.startVersion),\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'ObjectOwner':\n\t\t\treturn { $kind: 'ObjectOwner', ObjectOwner: owner.address?.address! };\n\t\tcase 'Immutable':\n\t\t\treturn { $kind: 'Immutable', Immutable: true };\n\t\tcase 'Shared':\n\t\t\treturn {\n\t\t\t\t$kind: 'Shared',\n\t\t\t\tShared: { initialSharedVersion: String(owner.initialSharedVersion) },\n\t\t\t};\n\t}\n}\n\nfunction parseTransaction(\n\ttransaction: Transaction_FieldsFragment,\n): Experimental_SuiClientTypes.TransactionResponse {\n\tconst objectTypes: Record<string, string> = {};\n\n\ttransaction.effects?.unchangedConsensusObjects?.nodes.forEach((node) => {\n\t\tif (node.__typename === 'ConsensusObjectRead') {\n\t\t\tconst type = node.object?.asMoveObject?.contents?.type?.repr;\n\t\t\tconst address = node.object?.asMoveObject?.address;\n\n\t\t\tif (type && address) {\n\t\t\t\tobjectTypes[address] = type;\n\t\t\t}\n\t\t}\n\t});\n\n\ttransaction.effects?.objectChanges?.nodes.forEach((node) => {\n\t\tconst address = node.address;\n\t\tconst type =\n\t\t\tnode.inputState?.asMoveObject?.contents?.type?.repr ??\n\t\t\tnode.outputState?.asMoveObject?.contents?.type?.repr;\n\n\t\tif (address && type) {\n\t\t\tobjectTypes[address] = type;\n\t\t}\n\t});\n\n\tif (transaction.effects?.balanceChanges?.pageInfo.hasNextPage) {\n\t\tthrow new Error('Pagination for balance changes is not supported');\n\t}\n\n\treturn {\n\t\tdigest: transaction.digest!,\n\t\teffects: parseTransactionEffectsBcs(fromBase64(transaction.effects?.effectsBcs!)),\n\t\tepoch: transaction.effects?.epoch?.epochId?.toString() ?? null,\n\t\tobjectTypes: Promise.resolve(objectTypes),\n\t\ttransaction: parseTransactionBcs(fromBase64(transaction.transactionBcs!)),\n\t\tsignatures: transaction.signatures.map((sig) => sig.signatureBytes!),\n\t\tbalanceChanges:\n\t\t\ttransaction.effects?.balanceChanges?.nodes.map((change) => ({\n\t\t\t\tcoinType: change?.coinType?.repr!,\n\t\t\t\taddress: change.owner?.address!,\n\t\t\t\tamount: change.amount!,\n\t\t\t})) ?? [],\n\t\t// events: transaction.events?.pageInfo.hasNextPage\n\t};\n}\n\nfunction parseNormalizedSuiMoveType(\n\ttype: OpenMoveTypeSignature,\n): Experimental_SuiClientTypes.OpenSignature {\n\tlet reference: 'mutable' | 'immutable' | null = null;\n\n\tif (type.ref === '&') {\n\t\treference = 'immutable';\n\t} else if (type.ref === '&mut') {\n\t\treference = 'mutable';\n\t}\n\n\treturn {\n\t\treference,\n\t\tbody: parseNormalizedSuiMoveTypeBody(type.body),\n\t};\n}\n\nfunction parseNormalizedSuiMoveTypeBody(\n\ttype: OpenMoveTypeSignatureBody,\n): Experimental_SuiClientTypes.OpenSignatureBody {\n\tswitch (type) {\n\t\tcase 'address':\n\t\t\treturn { $kind: 'address' };\n\t\tcase 'bool':\n\t\t\treturn { $kind: 'bool' };\n\t\tcase 'u8':\n\t\t\treturn { $kind: 'u8' };\n\t\tcase 'u16':\n\t\t\treturn { $kind: 'u16' };\n\t\tcase 'u32':\n\t\t\treturn { $kind: 'u32' };\n\t\tcase 'u64':\n\t\t\treturn { $kind: 'u64' };\n\t\tcase 'u128':\n\t\t\treturn { $kind: 'u128' };\n\t\tcase 'u256':\n\t\t\treturn { $kind: 'u256' };\n\t}\n\n\tif (typeof type === 'string') {\n\t\tthrow new Error(`Unknown type: ${type}`);\n\t}\n\n\tif ('vector' in type) {\n\t\treturn {\n\t\t\t$kind: 'vector',\n\t\t\tvector: parseNormalizedSuiMoveTypeBody(type.vector),\n\t\t};\n\t}\n\n\tif ('datatype' in type) {\n\t\treturn {\n\t\t\t$kind: 'datatype',\n\t\t\tdatatype: {\n\t\t\t\ttypeName: `${normalizeSuiAddress(type.datatype.package)}::${type.datatype.module}::${type.datatype.type}`,\n\t\t\t\ttypeParameters: type.datatype.typeParameters.map((t) => parseNormalizedSuiMoveTypeBody(t)),\n\t\t\t},\n\t\t};\n\t}\n\n\tif ('typeParameter' in type) {\n\t\treturn {\n\t\t\t$kind: 'typeParameter',\n\t\t\tindex: type.typeParameter,\n\t\t};\n\t}\n\n\tthrow new Error(`Unknown type: ${JSON.stringify(type)}`);\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { TypedDocumentNode } from '@graphql-typed-document-node/core';\nimport type { TadaDocumentNode } from 'gql.tada';\nimport type { DocumentNode } from 'graphql';\nimport { print } from 'graphql';\nimport { Experimental_BaseClient } from '../experimental/index.js';\nimport type { Experimental_SuiClientTypes } from '../experimental/index.js';\nimport { GraphQLCoreClient } from './core.js';\nimport type { TypedDocumentString } from './generated/queries.js';\n\nexport type GraphQLDocument<\n\tResult = Record<string, unknown>,\n\tVariables = Record<string, unknown>,\n> =\n\t| string\n\t| DocumentNode\n\t| TypedDocumentString<Result, Variables>\n\t| TypedDocumentNode<Result, Variables>\n\t| TadaDocumentNode<Result, Variables>;\n\nexport type GraphQLQueryOptions<\n\tResult = Record<string, unknown>,\n\tVariables = Record<string, unknown>,\n> = {\n\tquery: GraphQLDocument<Result, Variables>;\n\toperationName?: string;\n\textensions?: Record<string, unknown>;\n\tsignal?: AbortSignal;\n} & (Variables extends { [key: string]: never }\n\t? { variables?: Variables }\n\t: {\n\t\t\tvariables: Variables;\n\t\t});\n\nexport type GraphQLQueryResult<Result = Record<string, unknown>> = {\n\tdata?: Result;\n\terrors?: GraphQLResponseErrors;\n\textensions?: Record<string, unknown>;\n};\n\nexport type GraphQLResponseErrors = Array<{\n\tmessage: string;\n\tlocations?: { line: number; column: number }[];\n\tpath?: (string | number)[];\n}>;\n\nexport interface SuiGraphQLClientOptions<Queries extends Record<string, GraphQLDocument>> {\n\turl: string;\n\tfetch?: typeof fetch;\n\theaders?: Record<string, string>;\n\tqueries?: Queries;\n\tnetwork?: Experimental_SuiClientTypes.Network;\n\tmvr?: Experimental_SuiClientTypes.MvrOptions;\n}\n\nexport class SuiGraphQLRequestError extends Error {}\n\nexport class SuiGraphQLClient<\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tQueries extends Record<string, GraphQLDocument> = {},\n> extends Experimental_BaseClient {\n\t#url: string;\n\t#queries: Queries;\n\t#headers: Record<string, string>;\n\t#fetch: typeof fetch;\n\tcore: GraphQLCoreClient;\n\n\tconstructor({\n\t\turl,\n\t\tfetch: fetchFn = fetch,\n\t\theaders = {},\n\t\tqueries = {} as Queries,\n\t\tnetwork = 'unknown',\n\t\tmvr,\n\t}: SuiGraphQLClientOptions<Queries>) {\n\t\tsuper({\n\t\t\tnetwork,\n\t\t});\n\t\tthis.#url = url;\n\t\tthis.#queries = queries;\n\t\tthis.#headers = headers;\n\t\tthis.#fetch = (...args) => fetchFn(...args);\n\t\tthis.core = new GraphQLCoreClient({\n\t\t\tgraphqlClient: this,\n\t\t\tmvr,\n\t\t});\n\t}\n\n\tasync query<Result = Record<string, unknown>, Variables = Record<string, unknown>>(\n\t\toptions: GraphQLQueryOptions<Result, Variables>,\n\t): Promise<GraphQLQueryResult<Result>> {\n\t\tconst res = await this.#fetch(this.#url, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...this.#headers,\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tquery:\n\t\t\t\t\ttypeof options.query === 'string' || options.query instanceof String\n\t\t\t\t\t\t? String(options.query)\n\t\t\t\t\t\t: print(options.query),\n\t\t\t\tvariables: options.variables,\n\t\t\t\textensions: options.extensions,\n\t\t\t\toperationName: options.operationName,\n\t\t\t}),\n\t\t\tsignal: options.signal,\n\t\t});\n\n\t\tif (!res.ok) {\n\t\t\tthrow new SuiGraphQLRequestError(`GraphQL request failed: ${res.statusText} (${res.status})`);\n\t\t}\n\n\t\treturn await res.json();\n\t}\n\n\tasync execute<\n\t\tconst Query extends Extract<keyof Queries, string>,\n\t\tResult = Queries[Query] extends GraphQLDocument<infer R, unknown> ? R : Record<string, unknown>,\n\t\tVariables = Queries[Query] extends GraphQLDocument<unknown, infer V>\n\t\t\t? V\n\t\t\t: Record<string, unknown>,\n\t>(\n\t\tquery: Query,\n\t\toptions: Omit<GraphQLQueryOptions<Result, Variables>, 'query'>,\n\t): Promise<GraphQLQueryResult<Result>> {\n\t\treturn this.query({\n\t\t\t...(options as { variables: Record<string, unknown> }),\n\t\t\tquery: this.#queries[query]!,\n\t\t}) as Promise<GraphQLQueryResult<Result>>;\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n// oxlint-disable check-tag-names\n\n/** Copied from https://github.com/auth0/jwt-decode/blob/3d372e9875ff673228a9f2d9df74e84690842a9c/lib/index.ts */\n\n/**\nThe MIT License (MIT)\n\nCopyright (c) 2015 Auth0, Inc. <support@auth0.com> (http://auth0.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n */\n\nexport interface JwtDecodeOptions {\n\theader?: boolean;\n}\n\nexport interface JwtHeader {\n\ttyp?: string;\n\talg?: string;\n\tkid?: string;\n}\n\nexport interface JwtPayload {\n\tiss?: string;\n\tsub?: string;\n\taud?: string[] | string;\n\texp?: number;\n\tnbf?: number;\n\tiat?: number;\n\tjti?: string;\n}\n\nexport class InvalidTokenError extends Error {}\n\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nfunction b64DecodeUnicode(str: string) {\n\treturn decodeURIComponent(\n\t\tatob(str).replace(/(.)/g, (_m, p) => {\n\t\t\tlet code = (p as string).charCodeAt(0).toString(16).toUpperCase();\n\t\t\tif (code.length < 2) {\n\t\t\t\tcode = '0' + code;\n\t\t\t}\n\t\t\treturn '%' + code;\n\t\t}),\n\t);\n}\n\nfunction base64UrlDecode(str: string) {\n\tlet output = str.replace(/-/g, '+').replace(/_/g, '/');\n\tswitch (output.length % 4) {\n\t\tcase 0:\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\toutput += '==';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\toutput += '=';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('base64 string is not of the correct length');\n\t}\n\n\ttry {\n\t\treturn b64DecodeUnicode(output);\n\t} catch {\n\t\treturn atob(output);\n\t}\n}\n\nexport function jwtDecode<T = JwtHeader>(\n\ttoken: string,\n\toptions: JwtDecodeOptions & { header: true },\n): T;\nexport function jwtDecode<T = JwtPayload>(token: string, options?: JwtDecodeOptions): T;\nexport function jwtDecode<T = JwtHeader | JwtPayload>(\n\ttoken: string,\n\toptions?: JwtDecodeOptions,\n): T {\n\tif (typeof token !== 'string') {\n\t\tthrow new InvalidTokenError('Invalid token specified: must be a string');\n\t}\n\n\toptions ||= {};\n\n\tconst pos = options.header === true ? 0 : 1;\n\tconst part = token.split('.')[pos];\n\n\tif (typeof part !== 'string') {\n\t\tthrow new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n\t}\n\n\tlet decoded: string;\n\ttry {\n\t\tdecoded = base64UrlDecode(part);\n\t} catch (e) {\n\t\tthrow new InvalidTokenError(\n\t\t\t`Invalid token specified: invalid base64 for part #${pos + 1} (${(e as Error).message})`,\n\t\t);\n\t}\n\n\ttry {\n\t\treturn JSON.parse(decoded) as T;\n\t} catch (e) {\n\t\tthrow new InvalidTokenError(\n\t\t\t`Invalid token specified: invalid json for part #${pos + 1} (${(e as Error).message})`,\n\t\t);\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n\tposeidon1,\n\tposeidon2,\n\tposeidon3,\n\tposeidon4,\n\tposeidon5,\n\tposeidon6,\n\tposeidon7,\n\tposeidon8,\n\tposeidon9,\n\tposeidon10,\n\tposeidon11,\n\tposeidon12,\n\tposeidon13,\n\tposeidon14,\n\tposeidon15,\n\tposeidon16,\n} from 'poseidon-lite';\n\nconst poseidonNumToHashFN = [\n\tposeidon1,\n\tposeidon2,\n\tposeidon3,\n\tposeidon4,\n\tposeidon5,\n\tposeidon6,\n\tposeidon7,\n\tposeidon8,\n\tposeidon9,\n\tposeidon10,\n\tposeidon11,\n\tposeidon12,\n\tposeidon13,\n\tposeidon14,\n\tposeidon15,\n\tposeidon16,\n];\n\nexport const BN254_FIELD_SIZE =\n\t21888242871839275222246405745257275088548364400416034343698204186575808495617n;\n\nexport function poseidonHash(inputs: (number | bigint | string)[]): bigint {\n\tinputs.forEach((x) => {\n\t\tconst b = BigInt(x);\n\t\tif (b < 0 || b >= BN254_FIELD_SIZE) {\n\t\t\tthrow new Error(`Element ${b} not in the BN254 field`);\n\t\t}\n\t});\n\n\tconst hashFN = poseidonNumToHashFN[inputs.length - 1];\n\n\tif (hashFN) {\n\t\treturn hashFN(inputs);\n\t} else if (inputs.length <= 32) {\n\t\tconst hash1 = poseidonHash(inputs.slice(0, 16));\n\t\tconst hash2 = poseidonHash(inputs.slice(16));\n\t\treturn poseidonHash([hash1, hash2]);\n\t} else {\n\t\tthrow new Error(`Yet to implement: Unable to hash a vector of length ${inputs.length}`);\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { hexToBytes } from '@noble/hashes/utils';\n\nimport type { PublicKey } from '../cryptography/publickey.js';\nimport { poseidonHash } from './poseidon.js';\n\nconst MAX_KEY_CLAIM_NAME_LENGTH = 32;\nconst MAX_KEY_CLAIM_VALUE_LENGTH = 115;\nconst MAX_AUD_VALUE_LENGTH = 145;\nconst PACK_WIDTH = 248;\n\nfunction findFirstNonZeroIndex(bytes: Uint8Array) {\n\tfor (let i = 0; i < bytes.length; i++) {\n\t\tif (bytes[i] !== 0) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\n// Derive bytearray from num where the bytearray is padded to the left with 0s to the specified width.\nexport function toPaddedBigEndianBytes(num: bigint, width: number): Uint8Array {\n\tconst hex = num.toString(16);\n\treturn hexToBytes(hex.padStart(width * 2, '0').slice(-width * 2));\n}\n\n// Derive bytearray from num where the bytearray is not padded with 0.\nexport function toBigEndianBytes(num: bigint, width: number): Uint8Array {\n\tconst bytes = toPaddedBigEndianBytes(num, width);\n\n\tconst firstNonZeroIndex = findFirstNonZeroIndex(bytes);\n\n\tif (firstNonZeroIndex === -1) {\n\t\treturn new Uint8Array([0]);\n\t}\n\n\treturn bytes.slice(firstNonZeroIndex);\n}\n\nexport function getExtendedEphemeralPublicKey(publicKey: PublicKey) {\n\treturn publicKey.toSuiPublicKey();\n}\n\n/**\n * Splits an array into chunks of size chunk_size. If the array is not evenly\n * divisible by chunk_size, the first chunk will be smaller than chunk_size.\n *\n * E.g., arrayChunk([1, 2, 3, 4, 5], 2) => [[1], [2, 3], [4, 5]]\n *\n * Note: Can be made more efficient by avoiding the reverse() calls.\n */\nexport function chunkArray<T>(array: T[], chunk_size: number): T[][] {\n\tconst chunks = Array(Math.ceil(array.length / chunk_size));\n\tconst revArray = array.reverse();\n\tfor (let i = 0; i < chunks.length; i++) {\n\t\tchunks[i] = revArray.slice(i * chunk_size, (i + 1) * chunk_size).reverse();\n\t}\n\treturn chunks.reverse();\n}\n\nfunction bytesBEToBigInt(bytes: number[]): bigint {\n\tconst hex = bytes.map((b) => b.toString(16).padStart(2, '0')).join('');\n\tif (hex.length === 0) {\n\t\treturn BigInt(0);\n\t}\n\treturn BigInt('0x' + hex);\n}\n\n// hashes an ASCII string to a field element\nexport function hashASCIIStrToField(str: string, maxSize: number) {\n\tif (str.length > maxSize) {\n\t\tthrow new Error(`String ${str} is longer than ${maxSize} chars`);\n\t}\n\n\t// Note: Padding with zeroes is safe because we are only using this function to map human-readable sequence of bytes.\n\t// So the ASCII values of those characters will never be zero (null character).\n\tconst strPadded = str\n\t\t.padEnd(maxSize, String.fromCharCode(0))\n\t\t.split('')\n\t\t.map((c) => c.charCodeAt(0));\n\n\tconst chunkSize = PACK_WIDTH / 8;\n\tconst packed = chunkArray(strPadded, chunkSize).map((chunk) => bytesBEToBigInt(chunk));\n\treturn poseidonHash(packed);\n}\n\nexport function genAddressSeed(\n\tsalt: string | bigint,\n\tname: string,\n\tvalue: string,\n\taud: string,\n\tmax_name_length = MAX_KEY_CLAIM_NAME_LENGTH,\n\tmax_value_length = MAX_KEY_CLAIM_VALUE_LENGTH,\n\tmax_aud_length = MAX_AUD_VALUE_LENGTH,\n): bigint {\n\treturn poseidonHash([\n\t\thashASCIIStrToField(name, max_name_length),\n\t\thashASCIIStrToField(value, max_value_length),\n\t\thashASCIIStrToField(aud, max_aud_length),\n\t\tposeidonHash([BigInt(salt)]),\n\t]);\n}\n\nexport function normalizeZkLoginIssuer(iss: string) {\n\tif (iss === 'accounts.google.com') {\n\t\treturn 'https://accounts.google.com';\n\t}\n\treturn iss;\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { InferBcsInput } from '@mysten/bcs';\nimport { bcs } from '@mysten/bcs';\n\nexport const zkLoginSignature = bcs.struct('ZkLoginSignature', {\n\tinputs: bcs.struct('ZkLoginSignatureInputs', {\n\t\tproofPoints: bcs.struct('ZkLoginSignatureInputsProofPoints', {\n\t\t\ta: bcs.vector(bcs.string()),\n\t\t\tb: bcs.vector(bcs.vector(bcs.string())),\n\t\t\tc: bcs.vector(bcs.string()),\n\t\t}),\n\t\tissBase64Details: bcs.struct('ZkLoginSignatureInputsClaim', {\n\t\t\tvalue: bcs.string(),\n\t\t\tindexMod4: bcs.u8(),\n\t\t}),\n\t\theaderBase64: bcs.string(),\n\t\taddressSeed: bcs.string(),\n\t}),\n\tmaxEpoch: bcs.u64(),\n\tuserSignature: bcs.byteVector(),\n});\n\nexport type ZkLoginSignature = InferBcsInput<typeof zkLoginSignature>;\nexport type ZkLoginSignatureInputs = ZkLoginSignature['inputs'];\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64, toBase64, toHex } from '@mysten/bcs';\nimport { blake2b } from '@noble/hashes/blake2b';\nimport { bytesToHex } from '@noble/hashes/utils';\n\nimport { PublicKey } from '../cryptography/publickey.js';\nimport type { PublicKeyInitData } from '../cryptography/publickey.js';\nimport { SIGNATURE_SCHEME_TO_FLAG } from '../cryptography/signature-scheme.js';\nimport { SuiGraphQLClient } from '../graphql/client.js';\nimport { normalizeSuiAddress, SUI_ADDRESS_LENGTH } from '../utils/sui-types.js';\nimport type { ZkLoginSignatureInputs } from './bcs.js';\nimport { extractClaimValue } from './jwt-utils.js';\nimport { parseZkLoginSignature } from './signature.js';\nimport { normalizeZkLoginIssuer, toBigEndianBytes, toPaddedBigEndianBytes } from './utils.js';\nimport type { ClientWithExtensions, Experimental_SuiClientTypes } from '../experimental/types.js';\n\nexport interface ZkLoginCompatibleClient\n\textends ClientWithExtensions<{\n\t\tcore: {\n\t\t\tverifyZkLoginSignature: Experimental_SuiClientTypes.TransportMethods['verifyZkLoginSignature'];\n\t\t};\n\t}> {}\n\n/**\n * A zkLogin public identifier\n */\nexport class ZkLoginPublicIdentifier extends PublicKey {\n\t#data: Uint8Array<ArrayBuffer>;\n\t#client?: ZkLoginCompatibleClient;\n\t#legacyAddress: boolean;\n\n\t/**\n\t * Create a new ZkLoginPublicIdentifier object\n\t * @param value zkLogin public identifier as buffer or base-64 encoded string\n\t */\n\tconstructor(value: PublicKeyInitData, { client }: { client?: ZkLoginCompatibleClient } = {}) {\n\t\tsuper();\n\n\t\tthis.#client = client;\n\n\t\tif (typeof value === 'string') {\n\t\t\tthis.#data = fromBase64(value);\n\t\t} else if (value instanceof Uint8Array) {\n\t\t\tthis.#data = value as Uint8Array<ArrayBuffer>;\n\t\t} else {\n\t\t\tthis.#data = Uint8Array.from(value);\n\t\t}\n\t\tthis.#legacyAddress = this.#data.length !== this.#data[0] + 1 + 32;\n\n\t\tif (this.#legacyAddress) {\n\t\t\tthis.#data = normalizeZkLoginPublicKeyBytes(this.#data);\n\t\t}\n\t}\n\n\tstatic fromBytes(\n\t\tbytes: Uint8Array,\n\t\t{\n\t\t\tclient,\n\t\t\taddress,\n\t\t\tlegacyAddress,\n\t\t}: { client?: ZkLoginCompatibleClient; address?: string; legacyAddress?: boolean } = {},\n\t) {\n\t\tlet publicKey: ZkLoginPublicIdentifier;\n\n\t\tif (legacyAddress === true) {\n\t\t\tpublicKey = new ZkLoginPublicIdentifier(normalizeZkLoginPublicKeyBytes(bytes, true), {\n\t\t\t\tclient,\n\t\t\t});\n\t\t} else if (legacyAddress === false) {\n\t\t\tpublicKey = new ZkLoginPublicIdentifier(normalizeZkLoginPublicKeyBytes(bytes, false), {\n\t\t\t\tclient,\n\t\t\t});\n\t\t} else if (address) {\n\t\t\tpublicKey = new ZkLoginPublicIdentifier(normalizeZkLoginPublicKeyBytes(bytes, false), {\n\t\t\t\tclient,\n\t\t\t});\n\n\t\t\tif (publicKey.toSuiAddress() !== address) {\n\t\t\t\tpublicKey = new ZkLoginPublicIdentifier(normalizeZkLoginPublicKeyBytes(bytes, true), {\n\t\t\t\t\tclient,\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tpublicKey = new ZkLoginPublicIdentifier(bytes, {\n\t\t\t\tclient,\n\t\t\t});\n\t\t}\n\n\t\tif (address && publicKey.toSuiAddress() !== address) {\n\t\t\tthrow new Error('Public key bytes do not match the provided address');\n\t\t}\n\n\t\treturn publicKey;\n\t}\n\n\tstatic fromProof(address: string, proof: ZkLoginSignatureInputs) {\n\t\tconst { issBase64Details, addressSeed } = proof;\n\t\tconst iss = extractClaimValue<string>(issBase64Details, 'iss');\n\n\t\tconst legacyPublicKey = toZkLoginPublicIdentifier(BigInt(addressSeed), iss, {\n\t\t\tlegacyAddress: true,\n\t\t});\n\n\t\tif (legacyPublicKey.toSuiAddress() === address) {\n\t\t\treturn legacyPublicKey;\n\t\t}\n\n\t\tconst publicKey = toZkLoginPublicIdentifier(BigInt(addressSeed), iss, {\n\t\t\tlegacyAddress: false,\n\t\t});\n\n\t\tif (publicKey.toSuiAddress() !== address) {\n\t\t\tthrow new Error('Proof does not match address');\n\t\t}\n\n\t\treturn publicKey;\n\t}\n\n\t/**\n\t * Checks if two zkLogin public identifiers are equal\n\t */\n\toverride equals(publicKey: ZkLoginPublicIdentifier): boolean {\n\t\treturn super.equals(publicKey);\n\t}\n\n\toverride toSuiAddress(): string {\n\t\tif (this.#legacyAddress) {\n\t\t\treturn this.#toLegacyAddress();\n\t\t}\n\n\t\treturn super.toSuiAddress();\n\t}\n\n\t#toLegacyAddress() {\n\t\tconst legacyBytes = normalizeZkLoginPublicKeyBytes(this.#data, true);\n\t\tconst addressBytes = new Uint8Array(legacyBytes.length + 1);\n\t\taddressBytes[0] = this.flag();\n\t\taddressBytes.set(legacyBytes, 1);\n\t\treturn normalizeSuiAddress(\n\t\t\tbytesToHex(blake2b(addressBytes, { dkLen: 32 })).slice(0, SUI_ADDRESS_LENGTH * 2),\n\t\t);\n\t}\n\n\t/**\n\t * Return the byte array representation of the zkLogin public identifier\n\t */\n\ttoRawBytes(): Uint8Array<ArrayBuffer> {\n\t\treturn this.#data;\n\t}\n\n\t/**\n\t * Return the Sui address associated with this ZkLogin public identifier\n\t */\n\tflag(): number {\n\t\treturn SIGNATURE_SCHEME_TO_FLAG['ZkLogin'];\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided message\n\t */\n\tasync verify(_message: Uint8Array, _signature: Uint8Array | string): Promise<boolean> {\n\t\tthrow Error('does not support');\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided PersonalMessage\n\t */\n\tverifyPersonalMessage(message: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\tconst parsedSignature = parseSerializedZkLoginSignature(signature);\n\t\tconst address = new ZkLoginPublicIdentifier(parsedSignature.publicKey).toSuiAddress();\n\n\t\treturn graphqlVerifyZkLoginSignature({\n\t\t\taddress: address,\n\t\t\tbytes: toBase64(message),\n\t\t\tsignature: parsedSignature.serializedSignature,\n\t\t\tintentScope: 'PersonalMessage',\n\t\t\tclient: this.#client,\n\t\t});\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided Transaction\n\t */\n\tverifyTransaction(transaction: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\tconst parsedSignature = parseSerializedZkLoginSignature(signature);\n\t\tconst address = new ZkLoginPublicIdentifier(parsedSignature.publicKey).toSuiAddress();\n\t\treturn graphqlVerifyZkLoginSignature({\n\t\t\taddress: address,\n\t\t\tbytes: toBase64(transaction),\n\t\t\tsignature: parsedSignature.serializedSignature,\n\t\t\tintentScope: 'TransactionData',\n\t\t\tclient: this.#client,\n\t\t});\n\t}\n\n\t/**\n\t * Verifies that the public key is associated with the provided address\n\t */\n\toverride verifyAddress(address: string): boolean {\n\t\treturn address === super.toSuiAddress() || address === this.#toLegacyAddress();\n\t}\n}\n\n// Derive the public identifier for zklogin based on address seed and iss.\nexport function toZkLoginPublicIdentifier(\n\taddressSeed: bigint,\n\tiss: string,\n\toptions?: { client?: ZkLoginCompatibleClient; legacyAddress?: boolean },\n): ZkLoginPublicIdentifier {\n\t// Consists of iss_bytes_len || iss_bytes || padded_32_byte_address_seed.\n\tconst addressSeedBytesBigEndian = options?.legacyAddress\n\t\t? toBigEndianBytes(addressSeed, 32)\n\t\t: toPaddedBigEndianBytes(addressSeed, 32);\n\n\tconst issBytes = new TextEncoder().encode(normalizeZkLoginIssuer(iss));\n\tconst tmp = new Uint8Array(1 + issBytes.length + addressSeedBytesBigEndian.length);\n\ttmp.set([issBytes.length], 0);\n\ttmp.set(issBytes, 1);\n\ttmp.set(addressSeedBytesBigEndian, 1 + issBytes.length);\n\treturn new ZkLoginPublicIdentifier(tmp, options);\n}\n\nfunction normalizeZkLoginPublicKeyBytes(bytes: Uint8Array, legacyAddress = false) {\n\tconst issByteLength = bytes[0] + 1;\n\tconst addressSeed = BigInt(`0x${toHex(bytes.slice(issByteLength))}`);\n\tconst seedBytes = legacyAddress\n\t\t? toBigEndianBytes(addressSeed, 32)\n\t\t: toPaddedBigEndianBytes(addressSeed, 32);\n\tconst data = new Uint8Array(issByteLength + seedBytes.length);\n\tdata.set(bytes.slice(0, issByteLength), 0);\n\tdata.set(seedBytes, issByteLength);\n\treturn data;\n}\n\nasync function graphqlVerifyZkLoginSignature({\n\taddress,\n\tbytes,\n\tsignature,\n\tintentScope,\n\tclient = new SuiGraphQLClient({\n\t\turl: 'https://graphql.mainnet.sui.io/graphql',\n\t}),\n}: {\n\taddress: string;\n\tbytes: string;\n\tsignature: string;\n\tintentScope: 'PersonalMessage' | 'TransactionData';\n\tclient?: ZkLoginCompatibleClient;\n}) {\n\tconst resp = await client.core.verifyZkLoginSignature({\n\t\tbytes,\n\t\tsignature,\n\t\tintentScope,\n\t\tauthor: address,\n\t});\n\n\treturn resp.success === true && resp.errors.length === 0;\n}\n\nexport function parseSerializedZkLoginSignature(signature: Uint8Array | string) {\n\tconst bytes = typeof signature === 'string' ? fromBase64(signature) : signature;\n\n\tif (bytes[0] !== SIGNATURE_SCHEME_TO_FLAG.ZkLogin) {\n\t\tthrow new Error('Invalid signature scheme');\n\t}\n\n\tconst signatureBytes = bytes.slice(1);\n\tconst { inputs, maxEpoch, userSignature } = parseZkLoginSignature(signatureBytes);\n\tconst { issBase64Details, addressSeed } = inputs;\n\tconst iss = extractClaimValue<string>(issBase64Details, 'iss');\n\tconst publicIdentifer = toZkLoginPublicIdentifier(BigInt(addressSeed), iss);\n\treturn {\n\t\tserializedSignature: toBase64(bytes),\n\t\tsignatureScheme: 'ZkLogin' as const,\n\t\tzkLogin: {\n\t\t\tinputs,\n\t\t\tmaxEpoch,\n\t\t\tuserSignature,\n\t\t\tiss,\n\t\t\taddressSeed: BigInt(addressSeed),\n\t\t},\n\t\tsignature: bytes,\n\t\tpublicKey: publicIdentifer.toRawBytes(),\n\t};\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64, toBase64 } from '@mysten/bcs';\n\nimport { bcs } from '../bcs/index.js';\nimport { parseSerializedPasskeySignature } from '../keypairs/passkey/publickey.js';\nimport type { MultiSigStruct } from '../multisig/publickey.js';\nimport { parseSerializedZkLoginSignature } from '../zklogin/publickey.js';\nimport { parseSerializedKeypairSignature } from './publickey.js';\nimport type { PublicKey } from './publickey.js';\nimport type { SignatureScheme } from './signature-scheme.js';\nimport { SIGNATURE_FLAG_TO_SCHEME, SIGNATURE_SCHEME_TO_FLAG } from './signature-scheme.js';\n\n/**\n * Pair of signature and corresponding public key\n */\nexport type SerializeSignatureInput = {\n\tsignatureScheme: SignatureScheme;\n\t/** Base64-encoded signature */\n\tsignature: Uint8Array;\n\t/** Base64-encoded public key */\n\tpublicKey?: PublicKey;\n};\n\n/**\n * Takes in a signature, its associated signing scheme and a public key, then serializes this data\n */\nexport function toSerializedSignature({\n\tsignature,\n\tsignatureScheme,\n\tpublicKey,\n}: SerializeSignatureInput): string {\n\tif (!publicKey) {\n\t\tthrow new Error('`publicKey` is required');\n\t}\n\n\tconst pubKeyBytes = publicKey.toRawBytes();\n\tconst serializedSignature = new Uint8Array(1 + signature.length + pubKeyBytes.length);\n\tserializedSignature.set([SIGNATURE_SCHEME_TO_FLAG[signatureScheme]]);\n\tserializedSignature.set(signature, 1);\n\tserializedSignature.set(pubKeyBytes, 1 + signature.length);\n\treturn toBase64(serializedSignature);\n}\n\n/**\n * Decodes a serialized signature into its constituent components: the signature scheme, the actual signature, and the public key\n */\nexport function parseSerializedSignature(serializedSignature: string) {\n\tconst bytes = fromBase64(serializedSignature);\n\n\tconst signatureScheme =\n\t\tSIGNATURE_FLAG_TO_SCHEME[bytes[0] as keyof typeof SIGNATURE_FLAG_TO_SCHEME];\n\n\tswitch (signatureScheme) {\n\t\tcase 'Passkey':\n\t\t\treturn parseSerializedPasskeySignature(serializedSignature);\n\t\tcase 'MultiSig':\n\t\t\tconst multisig: MultiSigStruct = bcs.MultiSig.parse(bytes.slice(1));\n\t\t\treturn {\n\t\t\t\tserializedSignature,\n\t\t\t\tsignatureScheme,\n\t\t\t\tmultisig,\n\t\t\t\tbytes,\n\t\t\t\tsignature: undefined,\n\t\t\t};\n\t\tcase 'ZkLogin':\n\t\t\treturn parseSerializedZkLoginSignature(serializedSignature);\n\t\tcase 'ED25519':\n\t\tcase 'Secp256k1':\n\t\tcase 'Secp256r1':\n\t\t\treturn parseSerializedKeypairSignature(serializedSignature);\n\t\tdefault:\n\t\t\tthrow new Error('Unsupported signature scheme');\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bcs, toBase64 } from '@mysten/bcs';\nimport { blake2b } from '@noble/hashes/blake2b';\nimport { bech32 } from '@scure/base';\n\nimport type { IntentScope } from './intent.js';\nimport { messageWithIntent } from './intent.js';\nimport type { PublicKey } from './publickey.js';\nimport { SIGNATURE_FLAG_TO_SCHEME, SIGNATURE_SCHEME_TO_FLAG } from './signature-scheme.js';\nimport type { SignatureScheme } from './signature-scheme.js';\nimport { toSerializedSignature } from './signature.js';\nimport type { Transaction } from '../transactions/Transaction.js';\nimport type { ClientWithCoreApi, Experimental_SuiClientTypes } from '../experimental/index.js';\n\nexport const PRIVATE_KEY_SIZE = 32;\nexport const LEGACY_PRIVATE_KEY_SIZE = 64;\nexport const SUI_PRIVATE_KEY_PREFIX = 'suiprivkey';\n\nexport type ParsedKeypair = {\n\tscheme: SignatureScheme;\n\t/** @deprecated use `scheme` instead */\n\tschema: SignatureScheme;\n\tsecretKey: Uint8Array;\n};\n\nexport interface SignatureWithBytes {\n\tbytes: string;\n\tsignature: string;\n}\n\nexport interface SignAndExecuteOptions {\n\ttransaction: Transaction;\n\tclient: ClientWithCoreApi;\n}\n\n/**\n * TODO: Document\n */\nexport abstract class Signer {\n\tabstract sign(bytes: Uint8Array): Promise<Uint8Array<ArrayBuffer>>;\n\t/**\n\t * Sign messages with a specific intent. By combining the message bytes with the intent before hashing and signing,\n\t * it ensures that a signed message is tied to a specific purpose and domain separator is provided\n\t */\n\tasync signWithIntent(bytes: Uint8Array, intent: IntentScope): Promise<SignatureWithBytes> {\n\t\tconst intentMessage = messageWithIntent(intent, bytes);\n\t\tconst digest = blake2b(intentMessage, { dkLen: 32 });\n\n\t\tconst signature = toSerializedSignature({\n\t\t\tsignature: await this.sign(digest),\n\t\t\tsignatureScheme: this.getKeyScheme(),\n\t\t\tpublicKey: this.getPublicKey(),\n\t\t});\n\n\t\treturn {\n\t\t\tsignature,\n\t\t\tbytes: toBase64(bytes),\n\t\t};\n\t}\n\t/**\n\t * Signs provided transaction by calling `signWithIntent()` with a `TransactionData` provided as intent scope\n\t */\n\tasync signTransaction(bytes: Uint8Array) {\n\t\treturn this.signWithIntent(bytes, 'TransactionData');\n\t}\n\t/**\n\t * Signs provided personal message by calling `signWithIntent()` with a `PersonalMessage` provided as intent scope\n\t */\n\tasync signPersonalMessage(bytes: Uint8Array) {\n\t\tconst { signature } = await this.signWithIntent(\n\t\t\tbcs.byteVector().serialize(bytes).toBytes(),\n\t\t\t'PersonalMessage',\n\t\t);\n\n\t\treturn {\n\t\t\tbytes: toBase64(bytes),\n\t\t\tsignature,\n\t\t};\n\t}\n\n\tasync signAndExecuteTransaction({\n\t\ttransaction,\n\t\tclient,\n\t}: SignAndExecuteOptions): Promise<\n\t\tOmit<Experimental_SuiClientTypes.TransactionResponse, 'balanceChanges'>\n\t> {\n\t\tconst bytes = await transaction.build({ client });\n\t\tconst { signature } = await this.signTransaction(bytes);\n\t\tconst response = await client.core.executeTransaction({\n\t\t\ttransaction: bytes,\n\t\t\tsignatures: [signature],\n\t\t});\n\n\t\treturn response.transaction;\n\t}\n\n\ttoSuiAddress(): string {\n\t\treturn this.getPublicKey().toSuiAddress();\n\t}\n\n\t/**\n\t * Get the key scheme of the keypair: Secp256k1 or ED25519\n\t */\n\tabstract getKeyScheme(): SignatureScheme;\n\n\t/**\n\t * The public key for this keypair\n\t */\n\tabstract getPublicKey(): PublicKey;\n}\n\nexport abstract class Keypair extends Signer {\n\t/**\n\t * This returns the Bech32 secret key string for this keypair.\n\t */\n\tabstract getSecretKey(): string;\n}\n\n/**\n * This returns an ParsedKeypair object based by validating the\n * 33-byte Bech32 encoded string starting with `suiprivkey`, and\n * parse out the signature scheme and the private key in bytes.\n */\nexport function decodeSuiPrivateKey(value: string): ParsedKeypair {\n\tconst { prefix, words } = bech32.decode(value as `${string}1${string}`);\n\tif (prefix !== SUI_PRIVATE_KEY_PREFIX) {\n\t\tthrow new Error('invalid private key prefix');\n\t}\n\tconst extendedSecretKey = new Uint8Array(bech32.fromWords(words));\n\tconst secretKey = extendedSecretKey.slice(1);\n\tconst signatureScheme =\n\t\tSIGNATURE_FLAG_TO_SCHEME[extendedSecretKey[0] as keyof typeof SIGNATURE_FLAG_TO_SCHEME];\n\n\treturn {\n\t\tscheme: signatureScheme,\n\t\tschema: signatureScheme,\n\t\tsecretKey: secretKey,\n\t};\n}\n\n/**\n * This returns a Bech32 encoded string starting with `suiprivkey`,\n * encoding 33-byte `flag || bytes` for the given the 32-byte private\n * key and its signature scheme.\n */\nexport function encodeSuiPrivateKey(bytes: Uint8Array, scheme: SignatureScheme): string {\n\tif (bytes.length !== PRIVATE_KEY_SIZE) {\n\t\tthrow new Error('Invalid bytes length');\n\t}\n\tconst flag = SIGNATURE_SCHEME_TO_FLAG[scheme];\n\tconst privKeyBytes = new Uint8Array(bytes.length + 1);\n\tprivKeyBytes.set([flag]);\n\tprivKeyBytes.set(bytes, 1);\n\treturn bech32.encode(SUI_PRIVATE_KEY_PREFIX, bech32.toWords(privKeyBytes));\n}\n", "/**\r\n * PBKDF (RFC 2898). Can be used to create a key from password and salt.\r\n * @module\r\n */\r\nimport { hmac } from './hmac.ts';\r\n// prettier-ignore\r\nimport {\r\n  ahash, anumber,\r\n  asyncLoop, checkOpts, clean, createView, Hash, kdfInputToBytes,\r\n  type CHash,\r\n  type KDFInput\r\n} from './utils.ts';\r\n\r\nexport type Pbkdf2Opt = {\r\n  c: number; // Iterations\r\n  dkLen?: number; // Desired key length in bytes (Intended output length in octets of the derived key\r\n  asyncTick?: number; // Maximum time in ms for which async function can block execution\r\n};\r\n// Common prologue and epilogue for sync/async functions\r\nfunction pbkdf2Init(hash: CHash, _password: KDFInput, _salt: KDFInput, _opts: Pbkdf2Opt) {\r\n  ahash(hash);\r\n  const opts = checkOpts({ dkLen: 32, asyncTick: 10 }, _opts);\r\n  const { c, dkLen, asyncTick } = opts;\r\n  anumber(c);\r\n  anumber(dkLen);\r\n  anumber(asyncTick);\r\n  if (c < 1) throw new Error('iterations (c) should be >= 1');\r\n  const password = kdfInputToBytes(_password);\r\n  const salt = kdfInputToBytes(_salt);\r\n  // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\r\n  const DK = new Uint8Array(dkLen);\r\n  // U1 = PRF(Password, Salt + INT_32_BE(i))\r\n  const PRF = hmac.create(hash, password);\r\n  const PRFSalt = PRF._cloneInto().update(salt);\r\n  return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\r\n}\r\n\r\nfunction pbkdf2Output<T extends Hash<T>>(\r\n  PRF: Hash<T>,\r\n  PRFSalt: Hash<T>,\r\n  DK: Uint8Array,\r\n  prfW: Hash<T>,\r\n  u: Uint8Array\r\n) {\r\n  PRF.destroy();\r\n  PRFSalt.destroy();\r\n  if (prfW) prfW.destroy();\r\n  clean(u);\r\n  return DK;\r\n}\r\n\r\n/**\r\n * PBKDF2-HMAC: RFC 2898 key derivation function\r\n * @param hash - hash function that would be used e.g. sha256\r\n * @param password - password from which a derived key is generated\r\n * @param salt - cryptographic salt\r\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\r\n * @example\r\n * const key = pbkdf2(sha256, 'password', 'salt', { dkLen: 32, c: Math.pow(2, 18) });\r\n */\r\nexport function pbkdf2(\r\n  hash: CHash,\r\n  password: KDFInput,\r\n  salt: KDFInput,\r\n  opts: Pbkdf2Opt\r\n): Uint8Array {\r\n  const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\r\n  let prfW: any; // Working copy\r\n  const arr = new Uint8Array(4);\r\n  const view = createView(arr);\r\n  const u = new Uint8Array(PRF.outputLen);\r\n  // DK = T1 + T2 + ⋯ + Tdklen/hlen\r\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\r\n    // Ti = F(Password, Salt, c, i)\r\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\r\n    view.setInt32(0, ti, false);\r\n    // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\r\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\r\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\r\n    Ti.set(u.subarray(0, Ti.length));\r\n    for (let ui = 1; ui < c; ui++) {\r\n      // Uc = PRF(Password, Uc−1)\r\n      PRF._cloneInto(prfW).update(u).digestInto(u);\r\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\r\n    }\r\n  }\r\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\r\n}\r\n\r\n/**\r\n * PBKDF2-HMAC: RFC 2898 key derivation function. Async version.\r\n * @example\r\n * await pbkdf2Async(sha256, 'password', 'salt', { dkLen: 32, c: 500_000 });\r\n */\r\nexport async function pbkdf2Async(\r\n  hash: CHash,\r\n  password: KDFInput,\r\n  salt: KDFInput,\r\n  opts: Pbkdf2Opt\r\n): Promise<Uint8Array> {\r\n  const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\r\n  let prfW: any; // Working copy\r\n  const arr = new Uint8Array(4);\r\n  const view = createView(arr);\r\n  const u = new Uint8Array(PRF.outputLen);\r\n  // DK = T1 + T2 + ⋯ + Tdklen/hlen\r\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\r\n    // Ti = F(Password, Salt, c, i)\r\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\r\n    view.setInt32(0, ti, false);\r\n    // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\r\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\r\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\r\n    Ti.set(u.subarray(0, Ti.length));\r\n    await asyncLoop(c - 1, asyncTick, () => {\r\n      // Uc = PRF(Password, Uc−1)\r\n      PRF._cloneInto(prfW).update(u).digestInto(u);\r\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\r\n    });\r\n  }\r\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\r\n}\r\n", "/**\r\n * Audited & minimal JS implementation of\r\n * [BIP39 mnemonic phrases](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki).\r\n * @module\r\n * @example\r\n```js\r\nimport * as bip39 from '@scure/bip39';\r\nimport { wordlist } from '@scure/bip39/wordlists/english';\r\nconst mn = bip39.generateMnemonic(wordlist);\r\nconsole.log(mn);\r\nconst ent = bip39.mnemonicToEntropy(mn, wordlist)\r\nbip39.entropyToMnemonic(ent, wordlist);\r\nbip39.validateMnemonic(mn, wordlist);\r\nawait bip39.mnemonicToSeed(mn, 'password');\r\nbip39.mnemonicToSeedSync(mn, 'password');\r\n\r\n// Wordlists\r\nimport { wordlist as czech } from '@scure/bip39/wordlists/czech';\r\nimport { wordlist as english } from '@scure/bip39/wordlists/english';\r\nimport { wordlist as french } from '@scure/bip39/wordlists/french';\r\nimport { wordlist as italian } from '@scure/bip39/wordlists/italian';\r\nimport { wordlist as japanese } from '@scure/bip39/wordlists/japanese';\r\nimport { wordlist as korean } from '@scure/bip39/wordlists/korean';\r\nimport { wordlist as portuguese } from '@scure/bip39/wordlists/portuguese';\r\nimport { wordlist as simplifiedChinese } from '@scure/bip39/wordlists/simplified-chinese';\r\nimport { wordlist as spanish } from '@scure/bip39/wordlists/spanish';\r\nimport { wordlist as traditionalChinese } from '@scure/bip39/wordlists/traditional-chinese';\r\n```\r\n */\r\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\r\nimport { pbkdf2, pbkdf2Async } from '@noble/hashes/pbkdf2';\r\nimport { sha256, sha512 } from '@noble/hashes/sha2';\r\nimport { abytes, anumber, randomBytes } from '@noble/hashes/utils';\r\nimport { utils as baseUtils } from '@scure/base';\r\n// Japanese wordlist\r\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\r\n// Normalization replaces equivalent sequences of characters\r\n// so that any two texts that are equivalent will be reduced\r\n// to the same sequence of code points, called the normal form of the original text.\r\n// https://tonsky.me/blog/unicode/#why-is-a----\r\nfunction nfkd(str) {\r\n    if (typeof str !== 'string')\r\n        throw new TypeError('invalid mnemonic type: ' + typeof str);\r\n    return str.normalize('NFKD');\r\n}\r\nfunction normalize(str) {\r\n    const norm = nfkd(str);\r\n    const words = norm.split(' ');\r\n    if (![12, 15, 18, 21, 24].includes(words.length))\r\n        throw new Error('Invalid mnemonic');\r\n    return { nfkd: norm, words };\r\n}\r\nfunction aentropy(ent) {\r\n    abytes(ent, 16, 20, 24, 28, 32);\r\n}\r\n/**\r\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\r\n * @param wordlist imported wordlist for specific language\r\n * @param strength mnemonic strength 128-256 bits\r\n * @example\r\n * generateMnemonic(wordlist, 128)\r\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\r\n */\r\nexport function generateMnemonic(wordlist, strength = 128) {\r\n    anumber(strength);\r\n    if (strength % 32 !== 0 || strength > 256)\r\n        throw new TypeError('Invalid entropy');\r\n    return entropyToMnemonic(randomBytes(strength / 8), wordlist);\r\n}\r\nconst calcChecksum = (entropy) => {\r\n    // Checksum is ent.length/4 bits long\r\n    const bitsLeft = 8 - entropy.length / 4;\r\n    // Zero rightmost \"bitsLeft\" bits in byte\r\n    // For example: bitsLeft=4 val=10111101 -> 10110000\r\n    return new Uint8Array([(sha256(entropy)[0] >> bitsLeft) << bitsLeft]);\r\n};\r\nfunction getCoder(wordlist) {\r\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\r\n        throw new Error('Wordlist: expected array of 2048 strings');\r\n    wordlist.forEach((i) => {\r\n        if (typeof i !== 'string')\r\n            throw new Error('wordlist: non-string element: ' + i);\r\n    });\r\n    return baseUtils.chain(baseUtils.checksum(1, calcChecksum), baseUtils.radix2(11, true), baseUtils.alphabet(wordlist));\r\n}\r\n/**\r\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\r\n * @param mnemonic 12-24 words\r\n * @param wordlist imported wordlist for specific language\r\n * @example\r\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\r\n * mnemonicToEntropy(mnem, wordlist)\r\n * // Produces\r\n * new Uint8Array([\r\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\r\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\r\n * ])\r\n */\r\nexport function mnemonicToEntropy(mnemonic, wordlist) {\r\n    const { words } = normalize(mnemonic);\r\n    const entropy = getCoder(wordlist).decode(words);\r\n    aentropy(entropy);\r\n    return entropy;\r\n}\r\n/**\r\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\r\n * @param entropy byte array\r\n * @param wordlist imported wordlist for specific language\r\n * @returns 12-24 words\r\n * @example\r\n * const ent = new Uint8Array([\r\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\r\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\r\n * ]);\r\n * entropyToMnemonic(ent, wordlist);\r\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\r\n */\r\nexport function entropyToMnemonic(entropy, wordlist) {\r\n    aentropy(entropy);\r\n    const words = getCoder(wordlist).encode(entropy);\r\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\r\n}\r\n/**\r\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\r\n */\r\nexport function validateMnemonic(mnemonic, wordlist) {\r\n    try {\r\n        mnemonicToEntropy(mnemonic, wordlist);\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nconst psalt = (passphrase) => nfkd('mnemonic' + passphrase);\r\n/**\r\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\r\n * @param mnemonic 12-24 words\r\n * @param passphrase string that will additionally protect the key\r\n * @returns 64 bytes of key data\r\n * @example\r\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\r\n * await mnemonicToSeed(mnem, 'password');\r\n * // new Uint8Array([...64 bytes])\r\n */\r\nexport function mnemonicToSeed(mnemonic, passphrase = '') {\r\n    return pbkdf2Async(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\r\n}\r\n/**\r\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\r\n * @param mnemonic 12-24 words\r\n * @param passphrase string that will additionally protect the key\r\n * @returns 64 bytes of key data\r\n * @example\r\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\r\n * mnemonicToSeedSync(mnem, 'password');\r\n * // new Uint8Array([...64 bytes])\r\n */\r\nexport function mnemonicToSeedSync(mnemonic, passphrase = '') {\r\n    return pbkdf2(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\r\n}\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\nimport { toHex } from '@mysten/bcs';\nimport { mnemonicToSeedSync as bip39MnemonicToSeedSync } from '@scure/bip39';\n\n/**\n * Parse and validate a path that is compliant to SLIP-0010 in form m/44'/784'/{account_index}'/{change_index}'/{address_index}'.\n *\n * @param path path string (e.g. `m/44'/784'/0'/0'/0'`).\n */\nexport function isValidHardenedPath(path: string): boolean {\n\tif (!new RegExp(\"^m\\\\/44'\\\\/784'\\\\/[0-9]+'\\\\/[0-9]+'\\\\/[0-9]+'+$\").test(path)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Parse and validate a path that is compliant to BIP-32 in form m/54'/784'/{account_index}'/{change_index}/{address_index}\n * for Secp256k1 and m/74'/784'/{account_index}'/{change_index}/{address_index} for Secp256r1.\n *\n * Note that the purpose for Secp256k1 is registered as 54, to differentiate from Ed25519 with purpose 44.\n *\n * @param path path string (e.g. `m/54'/784'/0'/0/0`).\n */\nexport function isValidBIP32Path(path: string): boolean {\n\tif (!new RegExp(\"^m\\\\/(54|74)'\\\\/784'\\\\/[0-9]+'\\\\/[0-9]+\\\\/[0-9]+$\").test(path)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Uses KDF to derive 64 bytes of key data from mnemonic with empty password.\n *\n * @param mnemonics 12 words string split by spaces.\n */\nexport function mnemonicToSeed(mnemonics: string): Uint8Array {\n\treturn bip39MnemonicToSeedSync(mnemonics, '');\n}\n\n/**\n * Derive the seed in hex format from a 12-word mnemonic string.\n *\n * @param mnemonics 12 words string split by spaces.\n */\nexport function mnemonicToSeedHex(mnemonics: string): string {\n\treturn toHex(mnemonicToSeed(mnemonics));\n}\n", "/**\r\n * SHA2-512 a.k.a. sha512 and sha384. It is slower than sha256 in js because u64 operations are slow.\r\n *\r\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\r\n * [the paper on truncated SHA512/256](https://eprint.iacr.org/2010/548.pdf).\r\n * @module\r\n * @deprecated\r\n */\r\nimport {\r\n  SHA384 as SHA384n,\r\n  sha384 as sha384n,\r\n  sha512_224 as sha512_224n,\r\n  SHA512_224 as SHA512_224n,\r\n  sha512_256 as sha512_256n,\r\n  SHA512_256 as SHA512_256n,\r\n  SHA512 as SHA512n,\r\n  sha512 as sha512n,\r\n} from './sha2.ts';\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA512: typeof SHA512n = SHA512n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha512: typeof sha512n = sha512n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA384: typeof SHA384n = SHA384n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha384: typeof sha384n = sha384n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA512_224: typeof SHA512_224n = SHA512_224n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha512_224: typeof sha512_224n = sha512_224n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const SHA512_256: typeof SHA512_256n = SHA512_256n;\r\n/** @deprecated Use import from `noble/hashes/sha2` module */\r\nexport const sha512_256: typeof sha512_256n = sha512_256n;\r\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n// This is adapted from https://github.com/alepop/ed25519-hd-key replacing create-hmac\n// with @noble/hashes to be browser compatible.\n\nimport { fromHex } from '@mysten/bcs';\nimport { hmac } from '@noble/hashes/hmac';\nimport { sha512 } from '@noble/hashes/sha512';\n\ntype Hex = string;\ntype Path = string;\n\ntype Keys = {\n\tkey: Uint8Array;\n\tchainCode: Uint8Array;\n};\n\nconst ED25519_CURVE = 'ed25519 seed';\nconst HARDENED_OFFSET = 0x80000000;\n\nconst pathRegex = new RegExp(\"^m(\\\\/[0-9]+')+$\");\n\nconst replaceDerive = (val: string): string => val.replace(\"'\", '');\n\nconst getMasterKeyFromSeed = (seed: Hex): Keys => {\n\tconst h = hmac.create(sha512, ED25519_CURVE);\n\tconst I = h.update(fromHex(seed)).digest();\n\tconst IL = I.slice(0, 32);\n\tconst IR = I.slice(32);\n\treturn {\n\t\tkey: IL,\n\t\tchainCode: IR,\n\t};\n};\n\nconst CKDPriv = ({ key, chainCode }: Keys, index: number): Keys => {\n\tconst indexBuffer = new ArrayBuffer(4);\n\tconst cv = new DataView(indexBuffer);\n\tcv.setUint32(0, index);\n\n\tconst data = new Uint8Array(1 + key.length + indexBuffer.byteLength);\n\tdata.set(new Uint8Array(1).fill(0));\n\tdata.set(key, 1);\n\tdata.set(new Uint8Array(indexBuffer, 0, indexBuffer.byteLength), key.length + 1);\n\n\tconst I = hmac.create(sha512, chainCode).update(data).digest();\n\tconst IL = I.slice(0, 32);\n\tconst IR = I.slice(32);\n\treturn {\n\t\tkey: IL,\n\t\tchainCode: IR,\n\t};\n};\n\nconst isValidPath = (path: string): boolean => {\n\tif (!pathRegex.test(path)) {\n\t\treturn false;\n\t}\n\treturn !path\n\t\t.split('/')\n\t\t.slice(1)\n\t\t.map(replaceDerive)\n\t\t.some(isNaN as any /* ts T_T*/);\n};\n\nexport const derivePath = (path: Path, seed: Hex, offset = HARDENED_OFFSET): Keys => {\n\tif (!isValidPath(path)) {\n\t\tthrow new Error('Invalid derivation path');\n\t}\n\n\tconst { key, chainCode } = getMasterKeyFromSeed(seed);\n\tconst segments = path\n\t\t.split('/')\n\t\t.slice(1)\n\t\t.map(replaceDerive)\n\t\t.map((el) => parseInt(el, 10));\n\n\treturn segments.reduce((parentKeys, segment) => CKDPriv(parentKeys, segment + offset), {\n\t\tkey,\n\t\tchainCode,\n\t});\n};\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { fromBase64 } from '@mysten/bcs';\nimport { ed25519 } from '@noble/curves/ed25519';\n\nimport {\n\tbytesEqual,\n\tparseSerializedKeypairSignature,\n\tPublicKey,\n} from '../../cryptography/publickey.js';\nimport type { PublicKeyInitData } from '../../cryptography/publickey.js';\nimport { SIGNATURE_SCHEME_TO_FLAG } from '../../cryptography/signature-scheme.js';\n\nconst PUBLIC_KEY_SIZE = 32;\n\n/**\n * An Ed25519 public key\n */\nexport class Ed25519PublicKey extends PublicKey {\n\tstatic SIZE = PUBLIC_KEY_SIZE;\n\tprivate data: Uint8Array<ArrayBuffer>;\n\n\t/**\n\t * Create a new Ed25519PublicKey object\n\t * @param value ed25519 public key as buffer or base-64 encoded string\n\t */\n\tconstructor(value: PublicKeyInitData) {\n\t\tsuper();\n\n\t\tif (typeof value === 'string') {\n\t\t\tthis.data = fromBase64(value);\n\t\t} else if (value instanceof Uint8Array) {\n\t\t\tthis.data = value as Uint8Array<ArrayBuffer>;\n\t\t} else {\n\t\t\tthis.data = Uint8Array.from(value);\n\t\t}\n\n\t\tif (this.data.length !== PUBLIC_KEY_SIZE) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid public key input. Expected ${PUBLIC_KEY_SIZE} bytes, got ${this.data.length}`,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if two Ed25519 public keys are equal\n\t */\n\toverride equals(publicKey: Ed25519PublicKey): boolean {\n\t\treturn super.equals(publicKey);\n\t}\n\n\t/**\n\t * Return the byte array representation of the Ed25519 public key\n\t */\n\ttoRawBytes(): Uint8Array<ArrayBuffer> {\n\t\treturn this.data;\n\t}\n\n\t/**\n\t * Return the Sui address associated with this Ed25519 public key\n\t */\n\tflag(): number {\n\t\treturn SIGNATURE_SCHEME_TO_FLAG['ED25519'];\n\t}\n\n\t/**\n\t * Verifies that the signature is valid for for the provided message\n\t */\n\tasync verify(message: Uint8Array, signature: Uint8Array | string): Promise<boolean> {\n\t\tlet bytes;\n\t\tif (typeof signature === 'string') {\n\t\t\tconst parsed = parseSerializedKeypairSignature(signature);\n\t\t\tif (parsed.signatureScheme !== 'ED25519') {\n\t\t\t\tthrow new Error('Invalid signature scheme');\n\t\t\t}\n\n\t\t\tif (!bytesEqual(this.toRawBytes(), parsed.publicKey)) {\n\t\t\t\tthrow new Error('Signature does not match public key');\n\t\t\t}\n\n\t\t\tbytes = parsed.signature;\n\t\t} else {\n\t\t\tbytes = signature;\n\t\t}\n\n\t\treturn ed25519.verify(bytes, message, this.toRawBytes());\n\t}\n}\n", "// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ed25519 } from '@noble/curves/ed25519';\n\nimport {\n\tdecodeSuiPrivateKey,\n\tencodeSuiPrivateKey,\n\tKeypair,\n\tPRIVATE_KEY_SIZE,\n} from '../../cryptography/keypair.js';\nimport { isValidHardenedPath, mnemonicToSeedHex } from '../../cryptography/mnemonics.js';\nimport type { SignatureScheme } from '../../cryptography/signature-scheme.js';\nimport { derivePath } from './ed25519-hd-key.js';\nimport { Ed25519PublicKey } from './publickey.js';\n\nexport const DEFAULT_ED25519_DERIVATION_PATH = \"m/44'/784'/0'/0'/0'\";\n\n/**\n * Ed25519 Keypair data. The publickey is the 32-byte public key and\n * the secretkey is 64-byte, where the first 32 bytes is the secret\n * key and the last 32 bytes is the public key.\n */\nexport interface Ed25519KeypairData {\n\tpublicKey: Uint8Array;\n\tsecretKey: Uint8Array;\n}\n\n/**\n * An Ed25519 Keypair used for signing transactions.\n */\nexport class Ed25519Keypair extends Keypair {\n\tprivate keypair: Ed25519KeypairData;\n\n\t/**\n\t * Create a new Ed25519 keypair instance.\n\t * Generate random keypair if no {@link Ed25519Keypair} is provided.\n\t *\n\t * @param keypair Ed25519 keypair\n\t */\n\tconstructor(keypair?: Ed25519KeypairData) {\n\t\tsuper();\n\t\tif (keypair) {\n\t\t\tthis.keypair = {\n\t\t\t\tpublicKey: keypair.publicKey,\n\t\t\t\tsecretKey: keypair.secretKey.slice(0, 32),\n\t\t\t};\n\t\t} else {\n\t\t\tconst privateKey = ed25519.utils.randomPrivateKey();\n\t\t\tthis.keypair = {\n\t\t\t\tpublicKey: ed25519.getPublicKey(privateKey),\n\t\t\t\tsecretKey: privateKey,\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Get the key scheme of the keypair ED25519\n\t */\n\tgetKeyScheme(): SignatureScheme {\n\t\treturn 'ED25519';\n\t}\n\n\t/**\n\t * Generate a new random Ed25519 keypair\n\t */\n\tstatic generate(): Ed25519Keypair {\n\t\tconst secretKey = ed25519.utils.randomPrivateKey();\n\t\treturn new Ed25519Keypair({\n\t\t\tpublicKey: ed25519.getPublicKey(secretKey),\n\t\t\tsecretKey,\n\t\t});\n\t}\n\n\t/**\n\t * Create a Ed25519 keypair from a raw secret key byte array, also known as seed.\n\t * This is NOT the private scalar which is result of hashing and bit clamping of\n\t * the raw secret key.\n\t *\n\t * @throws error if the provided secret key is invalid and validation is not skipped.\n\t *\n\t * @param secretKey secret key as a byte array or Bech32 secret key string\n\t * @param options: skip secret key validation\n\t */\n\tstatic fromSecretKey(\n\t\tsecretKey: Uint8Array | string,\n\t\toptions?: { skipValidation?: boolean },\n\t): Ed25519Keypair {\n\t\tif (typeof secretKey === 'string') {\n\t\t\tconst decoded = decodeSuiPrivateKey(secretKey);\n\n\t\t\tif (decoded.schema !== 'ED25519') {\n\t\t\t\tthrow new Error(`Expected a ED25519 keypair, got ${decoded.schema}`);\n\t\t\t}\n\n\t\t\treturn this.fromSecretKey(decoded.secretKey, options);\n\t\t}\n\n\t\tconst secretKeyLength = secretKey.length;\n\t\tif (secretKeyLength !== PRIVATE_KEY_SIZE) {\n\t\t\tthrow new Error(\n\t\t\t\t`Wrong secretKey size. Expected ${PRIVATE_KEY_SIZE} bytes, got ${secretKeyLength}.`,\n\t\t\t);\n\t\t}\n\t\tconst keypair = {\n\t\t\tpublicKey: ed25519.getPublicKey(secretKey),\n\t\t\tsecretKey,\n\t\t};\n\n\t\tif (!options || !options.skipValidation) {\n\t\t\tconst encoder = new TextEncoder();\n\t\t\tconst signData = encoder.encode('sui validation');\n\t\t\tconst signature = ed25519.sign(signData, secretKey);\n\t\t\tif (!ed25519.verify(signature, signData, keypair.publicKey)) {\n\t\t\t\tthrow new Error('provided secretKey is invalid');\n\t\t\t}\n\t\t}\n\t\treturn new Ed25519Keypair(keypair);\n\t}\n\n\t/**\n\t * The public key for this Ed25519 keypair\n\t */\n\tgetPublicKey(): Ed25519PublicKey {\n\t\treturn new Ed25519PublicKey(this.keypair.publicKey);\n\t}\n\n\t/**\n\t * The Bech32 secret key string for this Ed25519 keypair\n\t */\n\tgetSecretKey(): string {\n\t\treturn encodeSuiPrivateKey(\n\t\t\tthis.keypair.secretKey.slice(0, PRIVATE_KEY_SIZE),\n\t\t\tthis.getKeyScheme(),\n\t\t);\n\t}\n\n\t/**\n\t * Return the signature for the provided data using Ed25519.\n\t */\n\tasync sign(data: Uint8Array) {\n\t\treturn ed25519.sign(data, this.keypair.secretKey) as Uint8Array<ArrayBuffer>;\n\t}\n\n\t/**\n\t * Derive Ed25519 keypair from mnemonics and path. The mnemonics must be normalized\n\t * and validated against the english wordlist.\n\t *\n\t * If path is none, it will default to m/44'/784'/0'/0'/0', otherwise the path must\n\t * be compliant to SLIP-0010 in form m/44'/784'/{account_index}'/{change_index}'/{address_index}'.\n\t */\n\tstatic deriveKeypair(mnemonics: string, path?: string): Ed25519Keypair {\n\t\tif (path == null) {\n\t\t\tpath = DEFAULT_ED25519_DERIVATION_PATH;\n\t\t}\n\t\tif (!isValidHardenedPath(path)) {\n\t\t\tthrow new Error('Invalid derivation path');\n\t\t}\n\t\tconst { key } = derivePath(path, mnemonicToSeedHex(mnemonics));\n\n\t\treturn Ed25519Keypair.fromSecretKey(key);\n\t}\n\n\t/**\n\t * Derive Ed25519 keypair from mnemonicSeed and path.\n\t *\n\t * If path is none, it will default to m/44'/784'/0'/0'/0', otherwise the path must\n\t * be compliant to SLIP-0010 in form m/44'/784'/{account_index}'/{change_index}'/{address_index}'.\n\t */\n\tstatic deriveKeypairFromSeed(seedHex: string, path?: string): Ed25519Keypair {\n\t\tif (path == null) {\n\t\t\tpath = DEFAULT_ED25519_DERIVATION_PATH;\n\t\t}\n\t\tif (!isValidHardenedPath(path)) {\n\t\t\tthrow new Error('Invalid derivation path');\n\t\t}\n\t\tconst { key } = derivePath(path, seedHex);\n\n\t\treturn Ed25519Keypair.fromSecretKey(key);\n\t}\n}\n", "const reduxImpl = (reducer, initial) => (set, _get, api) => {\r\n  api.dispatch = (action) => {\r\n    set((state) => reducer(state, action), false, action);\r\n    return action;\r\n  };\r\n  api.dispatchFromDevtools = true;\r\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\r\n};\r\nconst redux = reduxImpl;\r\n\r\nconst trackedConnections = /* @__PURE__ */ new Map();\r\nconst getTrackedConnectionState = (name) => {\r\n  const api = trackedConnections.get(name);\r\n  if (!api) return {};\r\n  return Object.fromEntries(\r\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\r\n  );\r\n};\r\nconst extractConnectionInformation = (store, extensionConnector, options) => {\r\n  if (store === void 0) {\r\n    return {\r\n      type: \"untracked\",\r\n      connection: extensionConnector.connect(options)\r\n    };\r\n  }\r\n  const existingConnection = trackedConnections.get(options.name);\r\n  if (existingConnection) {\r\n    return { type: \"tracked\", store, ...existingConnection };\r\n  }\r\n  const newConnection = {\r\n    connection: extensionConnector.connect(options),\r\n    stores: {}\r\n  };\r\n  trackedConnections.set(options.name, newConnection);\r\n  return { type: \"tracked\", store, ...newConnection };\r\n};\r\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\r\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\r\n  let extensionConnector;\r\n  try {\r\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\r\n  } catch (_e) {\r\n  }\r\n  if (!extensionConnector) {\r\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\r\n      console.warn(\r\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\r\n      );\r\n    }\r\n    return fn(set, get, api);\r\n  }\r\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\r\n  let isRecording = true;\r\n  api.setState = (state, replace, nameOrAction) => {\r\n    const r = set(state, replace);\r\n    if (!isRecording) return r;\r\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\r\n    if (store === void 0) {\r\n      connection == null ? void 0 : connection.send(action, get());\r\n      return r;\r\n    }\r\n    connection == null ? void 0 : connection.send(\r\n      {\r\n        ...action,\r\n        type: `${store}/${action.type}`\r\n      },\r\n      {\r\n        ...getTrackedConnectionState(options.name),\r\n        [store]: api.getState()\r\n      }\r\n    );\r\n    return r;\r\n  };\r\n  const setStateFromDevtools = (...a) => {\r\n    const originalIsRecording = isRecording;\r\n    isRecording = false;\r\n    set(...a);\r\n    isRecording = originalIsRecording;\r\n  };\r\n  const initialState = fn(api.setState, get, api);\r\n  if (connectionInformation.type === \"untracked\") {\r\n    connection == null ? void 0 : connection.init(initialState);\r\n  } else {\r\n    connectionInformation.stores[connectionInformation.store] = api;\r\n    connection == null ? void 0 : connection.init(\r\n      Object.fromEntries(\r\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\r\n          key,\r\n          key === connectionInformation.store ? initialState : store2.getState()\r\n        ])\r\n      )\r\n    );\r\n  }\r\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\r\n    let didWarnAboutReservedActionType = false;\r\n    const originalDispatch = api.dispatch;\r\n    api.dispatch = (...a) => {\r\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\r\n        console.warn(\r\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\r\n        );\r\n        didWarnAboutReservedActionType = true;\r\n      }\r\n      originalDispatch(...a);\r\n    };\r\n  }\r\n  connection.subscribe((message) => {\r\n    var _a;\r\n    switch (message.type) {\r\n      case \"ACTION\":\r\n        if (typeof message.payload !== \"string\") {\r\n          console.error(\r\n            \"[zustand devtools middleware] Unsupported action format\"\r\n          );\r\n          return;\r\n        }\r\n        return parseJsonThen(\r\n          message.payload,\r\n          (action) => {\r\n            if (action.type === \"__setState\") {\r\n              if (store === void 0) {\r\n                setStateFromDevtools(action.state);\r\n                return;\r\n              }\r\n              if (Object.keys(action.state).length !== 1) {\r\n                console.error(\r\n                  `\r\n                    [zustand devtools middleware] Unsupported __setState action format. \r\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\r\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\r\n                    `\r\n                );\r\n              }\r\n              const stateFromDevtools = action.state[store];\r\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\r\n                return;\r\n              }\r\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\r\n                setStateFromDevtools(stateFromDevtools);\r\n              }\r\n              return;\r\n            }\r\n            if (!api.dispatchFromDevtools) return;\r\n            if (typeof api.dispatch !== \"function\") return;\r\n            api.dispatch(action);\r\n          }\r\n        );\r\n      case \"DISPATCH\":\r\n        switch (message.payload.type) {\r\n          case \"RESET\":\r\n            setStateFromDevtools(initialState);\r\n            if (store === void 0) {\r\n              return connection == null ? void 0 : connection.init(api.getState());\r\n            }\r\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\r\n          case \"COMMIT\":\r\n            if (store === void 0) {\r\n              connection == null ? void 0 : connection.init(api.getState());\r\n              return;\r\n            }\r\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\r\n          case \"ROLLBACK\":\r\n            return parseJsonThen(message.state, (state) => {\r\n              if (store === void 0) {\r\n                setStateFromDevtools(state);\r\n                connection == null ? void 0 : connection.init(api.getState());\r\n                return;\r\n              }\r\n              setStateFromDevtools(state[store]);\r\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\r\n            });\r\n          case \"JUMP_TO_STATE\":\r\n          case \"JUMP_TO_ACTION\":\r\n            return parseJsonThen(message.state, (state) => {\r\n              if (store === void 0) {\r\n                setStateFromDevtools(state);\r\n                return;\r\n              }\r\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\r\n                setStateFromDevtools(state[store]);\r\n              }\r\n            });\r\n          case \"IMPORT_STATE\": {\r\n            const { nextLiftedState } = message.payload;\r\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\r\n            if (!lastComputedState) return;\r\n            if (store === void 0) {\r\n              setStateFromDevtools(lastComputedState);\r\n            } else {\r\n              setStateFromDevtools(lastComputedState[store]);\r\n            }\r\n            connection == null ? void 0 : connection.send(\r\n              null,\r\n              // FIXME no-any\r\n              nextLiftedState\r\n            );\r\n            return;\r\n          }\r\n          case \"PAUSE_RECORDING\":\r\n            return isRecording = !isRecording;\r\n        }\r\n        return;\r\n    }\r\n  });\r\n  return initialState;\r\n};\r\nconst devtools = devtoolsImpl;\r\nconst parseJsonThen = (stringified, f) => {\r\n  let parsed;\r\n  try {\r\n    parsed = JSON.parse(stringified);\r\n  } catch (e) {\r\n    console.error(\r\n      \"[zustand devtools middleware] Could not parse the received json\",\r\n      e\r\n    );\r\n  }\r\n  if (parsed !== void 0) f(parsed);\r\n};\r\n\r\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\r\n  const origSubscribe = api.subscribe;\r\n  api.subscribe = (selector, optListener, options) => {\r\n    let listener = selector;\r\n    if (optListener) {\r\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\r\n      let currentSlice = selector(api.getState());\r\n      listener = (state) => {\r\n        const nextSlice = selector(state);\r\n        if (!equalityFn(currentSlice, nextSlice)) {\r\n          const previousSlice = currentSlice;\r\n          optListener(currentSlice = nextSlice, previousSlice);\r\n        }\r\n      };\r\n      if (options == null ? void 0 : options.fireImmediately) {\r\n        optListener(currentSlice, currentSlice);\r\n      }\r\n    }\r\n    return origSubscribe(listener);\r\n  };\r\n  const initialState = fn(set, get, api);\r\n  return initialState;\r\n};\r\nconst subscribeWithSelector = subscribeWithSelectorImpl;\r\n\r\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\r\n\r\nfunction createJSONStorage(getStorage, options) {\r\n  let storage;\r\n  try {\r\n    storage = getStorage();\r\n  } catch (_e) {\r\n    return;\r\n  }\r\n  const persistStorage = {\r\n    getItem: (name) => {\r\n      var _a;\r\n      const parse = (str2) => {\r\n        if (str2 === null) {\r\n          return null;\r\n        }\r\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\r\n      };\r\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\r\n      if (str instanceof Promise) {\r\n        return str.then(parse);\r\n      }\r\n      return parse(str);\r\n    },\r\n    setItem: (name, newValue) => storage.setItem(\r\n      name,\r\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\r\n    ),\r\n    removeItem: (name) => storage.removeItem(name)\r\n  };\r\n  return persistStorage;\r\n}\r\nconst toThenable = (fn) => (input) => {\r\n  try {\r\n    const result = fn(input);\r\n    if (result instanceof Promise) {\r\n      return result;\r\n    }\r\n    return {\r\n      then(onFulfilled) {\r\n        return toThenable(onFulfilled)(result);\r\n      },\r\n      catch(_onRejected) {\r\n        return this;\r\n      }\r\n    };\r\n  } catch (e) {\r\n    return {\r\n      then(_onFulfilled) {\r\n        return this;\r\n      },\r\n      catch(onRejected) {\r\n        return toThenable(onRejected)(e);\r\n      }\r\n    };\r\n  }\r\n};\r\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\r\n  let options = {\r\n    getStorage: () => localStorage,\r\n    serialize: JSON.stringify,\r\n    deserialize: JSON.parse,\r\n    partialize: (state) => state,\r\n    version: 0,\r\n    merge: (persistedState, currentState) => ({\r\n      ...currentState,\r\n      ...persistedState\r\n    }),\r\n    ...baseOptions\r\n  };\r\n  let hasHydrated = false;\r\n  const hydrationListeners = /* @__PURE__ */ new Set();\r\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\r\n  let storage;\r\n  try {\r\n    storage = options.getStorage();\r\n  } catch (_e) {\r\n  }\r\n  if (!storage) {\r\n    return config(\r\n      (...args) => {\r\n        console.warn(\r\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\r\n        );\r\n        set(...args);\r\n      },\r\n      get,\r\n      api\r\n    );\r\n  }\r\n  const thenableSerialize = toThenable(options.serialize);\r\n  const setItem = () => {\r\n    const state = options.partialize({ ...get() });\r\n    let errorInSync;\r\n    const thenable = thenableSerialize({ state, version: options.version }).then(\r\n      (serializedValue) => storage.setItem(options.name, serializedValue)\r\n    ).catch((e) => {\r\n      errorInSync = e;\r\n    });\r\n    if (errorInSync) {\r\n      throw errorInSync;\r\n    }\r\n    return thenable;\r\n  };\r\n  const savedSetState = api.setState;\r\n  api.setState = (state, replace) => {\r\n    savedSetState(state, replace);\r\n    void setItem();\r\n  };\r\n  const configResult = config(\r\n    (...args) => {\r\n      set(...args);\r\n      void setItem();\r\n    },\r\n    get,\r\n    api\r\n  );\r\n  let stateFromStorage;\r\n  const hydrate = () => {\r\n    var _a;\r\n    if (!storage) return;\r\n    hasHydrated = false;\r\n    hydrationListeners.forEach((cb) => cb(get()));\r\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\r\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\r\n      if (storageValue) {\r\n        return options.deserialize(storageValue);\r\n      }\r\n    }).then((deserializedStorageValue) => {\r\n      if (deserializedStorageValue) {\r\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\r\n          if (options.migrate) {\r\n            return options.migrate(\r\n              deserializedStorageValue.state,\r\n              deserializedStorageValue.version\r\n            );\r\n          }\r\n          console.error(\r\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\r\n          );\r\n        } else {\r\n          return deserializedStorageValue.state;\r\n        }\r\n      }\r\n    }).then((migratedState) => {\r\n      var _a2;\r\n      stateFromStorage = options.merge(\r\n        migratedState,\r\n        (_a2 = get()) != null ? _a2 : configResult\r\n      );\r\n      set(stateFromStorage, true);\r\n      return setItem();\r\n    }).then(() => {\r\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\r\n      hasHydrated = true;\r\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\r\n    }).catch((e) => {\r\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\r\n    });\r\n  };\r\n  api.persist = {\r\n    setOptions: (newOptions) => {\r\n      options = {\r\n        ...options,\r\n        ...newOptions\r\n      };\r\n      if (newOptions.getStorage) {\r\n        storage = newOptions.getStorage();\r\n      }\r\n    },\r\n    clearStorage: () => {\r\n      storage == null ? void 0 : storage.removeItem(options.name);\r\n    },\r\n    getOptions: () => options,\r\n    rehydrate: () => hydrate(),\r\n    hasHydrated: () => hasHydrated,\r\n    onHydrate: (cb) => {\r\n      hydrationListeners.add(cb);\r\n      return () => {\r\n        hydrationListeners.delete(cb);\r\n      };\r\n    },\r\n    onFinishHydration: (cb) => {\r\n      finishHydrationListeners.add(cb);\r\n      return () => {\r\n        finishHydrationListeners.delete(cb);\r\n      };\r\n    }\r\n  };\r\n  hydrate();\r\n  return stateFromStorage || configResult;\r\n};\r\nconst newImpl = (config, baseOptions) => (set, get, api) => {\r\n  let options = {\r\n    storage: createJSONStorage(() => localStorage),\r\n    partialize: (state) => state,\r\n    version: 0,\r\n    merge: (persistedState, currentState) => ({\r\n      ...currentState,\r\n      ...persistedState\r\n    }),\r\n    ...baseOptions\r\n  };\r\n  let hasHydrated = false;\r\n  const hydrationListeners = /* @__PURE__ */ new Set();\r\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\r\n  let storage = options.storage;\r\n  if (!storage) {\r\n    return config(\r\n      (...args) => {\r\n        console.warn(\r\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\r\n        );\r\n        set(...args);\r\n      },\r\n      get,\r\n      api\r\n    );\r\n  }\r\n  const setItem = () => {\r\n    const state = options.partialize({ ...get() });\r\n    return storage.setItem(options.name, {\r\n      state,\r\n      version: options.version\r\n    });\r\n  };\r\n  const savedSetState = api.setState;\r\n  api.setState = (state, replace) => {\r\n    savedSetState(state, replace);\r\n    void setItem();\r\n  };\r\n  const configResult = config(\r\n    (...args) => {\r\n      set(...args);\r\n      void setItem();\r\n    },\r\n    get,\r\n    api\r\n  );\r\n  api.getInitialState = () => configResult;\r\n  let stateFromStorage;\r\n  const hydrate = () => {\r\n    var _a, _b;\r\n    if (!storage) return;\r\n    hasHydrated = false;\r\n    hydrationListeners.forEach((cb) => {\r\n      var _a2;\r\n      return cb((_a2 = get()) != null ? _a2 : configResult);\r\n    });\r\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\r\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\r\n      if (deserializedStorageValue) {\r\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\r\n          if (options.migrate) {\r\n            return [\r\n              true,\r\n              options.migrate(\r\n                deserializedStorageValue.state,\r\n                deserializedStorageValue.version\r\n              )\r\n            ];\r\n          }\r\n          console.error(\r\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\r\n          );\r\n        } else {\r\n          return [false, deserializedStorageValue.state];\r\n        }\r\n      }\r\n      return [false, void 0];\r\n    }).then((migrationResult) => {\r\n      var _a2;\r\n      const [migrated, migratedState] = migrationResult;\r\n      stateFromStorage = options.merge(\r\n        migratedState,\r\n        (_a2 = get()) != null ? _a2 : configResult\r\n      );\r\n      set(stateFromStorage, true);\r\n      if (migrated) {\r\n        return setItem();\r\n      }\r\n    }).then(() => {\r\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\r\n      stateFromStorage = get();\r\n      hasHydrated = true;\r\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\r\n    }).catch((e) => {\r\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\r\n    });\r\n  };\r\n  api.persist = {\r\n    setOptions: (newOptions) => {\r\n      options = {\r\n        ...options,\r\n        ...newOptions\r\n      };\r\n      if (newOptions.storage) {\r\n        storage = newOptions.storage;\r\n      }\r\n    },\r\n    clearStorage: () => {\r\n      storage == null ? void 0 : storage.removeItem(options.name);\r\n    },\r\n    getOptions: () => options,\r\n    rehydrate: () => hydrate(),\r\n    hasHydrated: () => hasHydrated,\r\n    onHydrate: (cb) => {\r\n      hydrationListeners.add(cb);\r\n      return () => {\r\n        hydrationListeners.delete(cb);\r\n      };\r\n    },\r\n    onFinishHydration: (cb) => {\r\n      finishHydrationListeners.add(cb);\r\n      return () => {\r\n        finishHydrationListeners.delete(cb);\r\n      };\r\n    }\r\n  };\r\n  if (!options.skipHydration) {\r\n    hydrate();\r\n  }\r\n  return stateFromStorage || configResult;\r\n};\r\nconst persistImpl = (config, baseOptions) => {\r\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\r\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\r\n      console.warn(\r\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\r\n      );\r\n    }\r\n    return oldImpl(config, baseOptions);\r\n  }\r\n  return newImpl(config, baseOptions);\r\n};\r\nconst persist = persistImpl;\r\n\r\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\r\n", "function getVarName(variable) {\r\n  var matches = variable.match(/^var\\((.*)\\)$/);\r\n  if (matches) {\r\n    return matches[1];\r\n  }\r\n  return variable;\r\n}\r\n\r\nfunction get(obj, path) {\r\n  var result = obj;\r\n  for (var key of path) {\r\n    if (!(key in result)) {\r\n      throw new Error(\"Path \".concat(path.join(' -> '), \" does not exist in object\"));\r\n    }\r\n    result = result[key];\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction walkObject(obj, fn) {\r\n  var path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n  var clone = {};\r\n  for (var key in obj) {\r\n    var _value = obj[key];\r\n    var currentPath = [...path, key];\r\n    if (typeof _value === 'string' || typeof _value === 'number' || _value == null) {\r\n      clone[key] = fn(_value, currentPath);\r\n    } else if (typeof _value === 'object' && !Array.isArray(_value)) {\r\n      clone[key] = walkObject(_value, fn, currentPath);\r\n    } else {\r\n      console.warn(\"Skipping invalid key \\\"\".concat(currentPath.join('.'), \"\\\". Should be a string, number, null or object. Received: \\\"\").concat(Array.isArray(_value) ? 'Array' : typeof _value, \"\\\"\"));\r\n    }\r\n  }\r\n  return clone;\r\n}\r\n\r\nexport { get, getVarName, walkObject };\r\n", "import { walkObject, get, getVarName } from '@vanilla-extract/private';\r\n\r\nfunction assignInlineVars(varsOrContract, tokens) {\r\n  var styles = {};\r\n  if (typeof tokens === 'object') {\r\n    var _contract = varsOrContract;\r\n    walkObject(tokens, (value, path) => {\r\n      if (value == null) {\r\n        return;\r\n      }\r\n      var varName = get(_contract, path);\r\n      styles[getVarName(varName)] = String(value);\r\n    });\r\n  } else {\r\n    var _vars = varsOrContract;\r\n    for (var varName in _vars) {\r\n      var value = _vars[varName];\r\n      if (value == null) {\r\n        continue;\r\n      }\r\n      styles[getVarName(varName)] = value;\r\n    }\r\n  }\r\n  Object.defineProperty(styles, 'toString', {\r\n    value: function value() {\r\n      return Object.keys(this).map(key => \"\".concat(key, \":\").concat(this[key])).join(';');\r\n    },\r\n    writable: false\r\n  });\r\n  return styles;\r\n}\r\n\r\nfunction setVar(element, variable, value) {\r\n  element.style.setProperty(getVarName(variable), value);\r\n}\r\nfunction setElementVars(element, varsOrContract, tokens) {\r\n  if (typeof tokens === 'object') {\r\n    var _contract = varsOrContract;\r\n    walkObject(tokens, (value, path) => {\r\n      if (value == null) {\r\n        return;\r\n      }\r\n      setVar(element, get(_contract, path), String(value));\r\n    });\r\n  } else {\r\n    var _vars = varsOrContract;\r\n    for (var varName in _vars) {\r\n      var value = _vars[varName];\r\n      if (value == null) {\r\n        continue;\r\n      }\r\n      setVar(element, varName, _vars[varName]);\r\n    }\r\n  }\r\n}\r\n\r\nexport { assignInlineVars, setElementVars };\r\n", "var stylesheets = {};\r\nvar injectStyles = _ref => {\r\n  var {\r\n    fileScope,\r\n    css\r\n  } = _ref;\r\n  var fileScopeId = fileScope.packageName ? [fileScope.packageName, fileScope.filePath].join('/') : fileScope.filePath;\r\n  var stylesheet = stylesheets[fileScopeId];\r\n  if (!stylesheet) {\r\n    var styleEl = document.createElement('style');\r\n    if (fileScope.packageName) {\r\n      styleEl.setAttribute('data-package', fileScope.packageName);\r\n    }\r\n    styleEl.setAttribute('data-file', fileScope.filePath);\r\n    styleEl.setAttribute('type', 'text/css');\r\n    stylesheet = stylesheets[fileScopeId] = styleEl;\r\n    document.head.appendChild(styleEl);\r\n  }\r\n  stylesheet.innerHTML = css;\r\n};\r\n\r\nexport { injectStyles };\r\n", "import { getVarName } from '@vanilla-extract/private';\r\nimport cssesc from 'cssesc';\r\nimport AhoCorasick from 'modern-ahocorasick';\r\nimport { markCompositionUsed } from '../adapter/dist/vanilla-extract-css-adapter.browser.esm.js';\r\nimport { _ as _taggedTemplateLiteral } from './taggedTemplateLiteral-8e47dbd7.browser.esm.js';\r\nimport { parse } from 'css-what';\r\nimport dedent from 'dedent';\r\nimport { toAST } from 'media-query-parser';\r\n\r\nfunction toPrimitive(t, r) {\r\n  if (\"object\" != typeof t || !t) return t;\r\n  var e = t[Symbol.toPrimitive];\r\n  if (void 0 !== e) {\r\n    var i = e.call(t, r || \"default\");\r\n    if (\"object\" != typeof i) return i;\r\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n  }\r\n  return (\"string\" === r ? String : Number)(t);\r\n}\r\n\r\nfunction toPropertyKey(t) {\r\n  var i = toPrimitive(t, \"string\");\r\n  return \"symbol\" == typeof i ? i : String(i);\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n  key = toPropertyKey(key);\r\n  if (key in obj) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n  } else {\r\n    obj[key] = value;\r\n  }\r\n  return obj;\r\n}\r\n\r\nfunction ownKeys(e, r) {\r\n  var t = Object.keys(e);\r\n  if (Object.getOwnPropertySymbols) {\r\n    var o = Object.getOwnPropertySymbols(e);\r\n    r && (o = o.filter(function (r) {\r\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\r\n    })), t.push.apply(t, o);\r\n  }\r\n  return t;\r\n}\r\nfunction _objectSpread2(e) {\r\n  for (var r = 1; r < arguments.length; r++) {\r\n    var t = null != arguments[r] ? arguments[r] : {};\r\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\r\n      _defineProperty(e, r, t[r]);\r\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\r\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\r\n    });\r\n  }\r\n  return e;\r\n}\r\n\r\nfunction _objectWithoutPropertiesLoose(source, excluded) {\r\n  if (source == null) return {};\r\n  var target = {};\r\n  var sourceKeys = Object.keys(source);\r\n  var key, i;\r\n  for (i = 0; i < sourceKeys.length; i++) {\r\n    key = sourceKeys[i];\r\n    if (excluded.indexOf(key) >= 0) continue;\r\n    target[key] = source[key];\r\n  }\r\n  return target;\r\n}\r\n\r\nfunction _objectWithoutProperties(source, excluded) {\r\n  if (source == null) return {};\r\n  var target = _objectWithoutPropertiesLoose(source, excluded);\r\n  var key, i;\r\n  if (Object.getOwnPropertySymbols) {\r\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\r\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\r\n      key = sourceSymbolKeys[i];\r\n      if (excluded.indexOf(key) >= 0) continue;\r\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\r\n      target[key] = source[key];\r\n    }\r\n  }\r\n  return target;\r\n}\r\n\r\nfunction forEach(obj, fn) {\r\n  for (var _key in obj) {\r\n    fn(obj[_key], _key);\r\n  }\r\n}\r\nfunction omit(obj, omitKeys) {\r\n  var result = {};\r\n  for (var _key2 in obj) {\r\n    if (omitKeys.indexOf(_key2) === -1) {\r\n      result[_key2] = obj[_key2];\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction mapKeys(obj, fn) {\r\n  var result = {};\r\n  for (var _key3 in obj) {\r\n    result[fn(obj[_key3], _key3)] = obj[_key3];\r\n  }\r\n  return result;\r\n}\r\nfunction composeStylesIntoSet(set) {\r\n  for (var _len = arguments.length, classNames = new Array(_len > 1 ? _len - 1 : 0), _key5 = 1; _key5 < _len; _key5++) {\r\n    classNames[_key5 - 1] = arguments[_key5];\r\n  }\r\n  for (var className of classNames) {\r\n    if (className.length === 0) {\r\n      continue;\r\n    }\r\n    if (typeof className === 'string') {\r\n      if (className.includes(' ')) {\r\n        composeStylesIntoSet(set, ...className.trim().split(' '));\r\n      } else {\r\n        set.add(className);\r\n      }\r\n    } else if (Array.isArray(className)) {\r\n      composeStylesIntoSet(set, ...className);\r\n    }\r\n  }\r\n}\r\nfunction dudupeAndJoinClassList(classNames) {\r\n  var set = new Set();\r\n  composeStylesIntoSet(set, ...classNames);\r\n  return Array.from(set).join(' ');\r\n}\r\n\r\nvar _templateObject$1;\r\n\r\n// https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\nfunction escapeRegex(string) {\r\n  return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n}\r\nvar validateSelector = (selector, targetClassName) => {\r\n  var replaceTarget = () => {\r\n    var targetRegex = new RegExp(\".\".concat(escapeRegex(cssesc(targetClassName, {\r\n      isIdentifier: true\r\n    }))), 'g');\r\n    return selector.replace(targetRegex, '&');\r\n  };\r\n  var selectorParts;\r\n  try {\r\n    selectorParts = parse(selector);\r\n  } catch (err) {\r\n    throw new Error(\"Invalid selector: \".concat(replaceTarget()));\r\n  }\r\n  selectorParts.forEach(tokens => {\r\n    try {\r\n      for (var i = tokens.length - 1; i >= -1; i--) {\r\n        if (!tokens[i]) {\r\n          throw new Error();\r\n        }\r\n        var token = tokens[i];\r\n        if (token.type === 'child' || token.type === 'parent' || token.type === 'sibling' || token.type === 'adjacent' || token.type === 'descendant') {\r\n          throw new Error();\r\n        }\r\n        if (token.type === 'attribute' && token.name === 'class' && token.value === targetClassName) {\r\n          return; // Found it\r\n        }\r\n      }\r\n    } catch (err) {\r\n      throw new Error(dedent(_templateObject$1 || (_templateObject$1 = _taggedTemplateLiteral([\"\\n        Invalid selector: \", \"\\n    \\n        Style selectors must target the '&' character (along with any modifiers), e.g. \", \" or \", \".\\n        \\n        This is to ensure that each style block only affects the styling of a single class.\\n        \\n        If your selector is targeting another class, you should move it to the style definition for that class, e.g. given we have styles for 'parent' and 'child' elements, instead of adding a selector of \", \") to 'parent', you should add \", \" to 'child').\\n        \\n        If your selector is targeting something global, use the 'globalStyle' function instead, e.g. if you wanted to write \", \", you should instead write 'globalStyle(\", \", { ... })'\\n      \"])), replaceTarget(), '`${parent} &`', '`${parent} &:hover`', '`& ${child}`', '`${parent} &`', '`& h1`', '`${parent} h1`'));\r\n    }\r\n  });\r\n};\r\n\r\n/** e.g. @media screen and (min-width: 500px) */\r\n\r\nclass ConditionalRuleset {\r\n  /**\r\n   * Stores information about where conditions must be in relation to other conditions\r\n   *\r\n   * e.g. mobile -> tablet, desktop\r\n   */\r\n\r\n  constructor() {\r\n    this.ruleset = new Map();\r\n    this.precedenceLookup = new Map();\r\n  }\r\n  findOrCreateCondition(conditionQuery) {\r\n    var targetCondition = this.ruleset.get(conditionQuery);\r\n    if (!targetCondition) {\r\n      // No target condition so create one\r\n      targetCondition = {\r\n        query: conditionQuery,\r\n        rules: [],\r\n        children: new ConditionalRuleset()\r\n      };\r\n      this.ruleset.set(conditionQuery, targetCondition);\r\n    }\r\n    return targetCondition;\r\n  }\r\n  getConditionalRulesetByPath(conditionPath) {\r\n    var currRuleset = this;\r\n    for (var query of conditionPath) {\r\n      var condition = currRuleset.findOrCreateCondition(query);\r\n      currRuleset = condition.children;\r\n    }\r\n    return currRuleset;\r\n  }\r\n  addRule(rule, conditionQuery, conditionPath) {\r\n    var ruleset = this.getConditionalRulesetByPath(conditionPath);\r\n    var targetCondition = ruleset.findOrCreateCondition(conditionQuery);\r\n    if (!targetCondition) {\r\n      throw new Error('Failed to add conditional rule');\r\n    }\r\n    targetCondition.rules.push(rule);\r\n  }\r\n  addConditionPrecedence(conditionPath, conditionOrder) {\r\n    var ruleset = this.getConditionalRulesetByPath(conditionPath);\r\n    for (var i = 0; i < conditionOrder.length; i++) {\r\n      var _ruleset$precedenceLo;\r\n      var query = conditionOrder[i];\r\n      var conditionPrecedence = (_ruleset$precedenceLo = ruleset.precedenceLookup.get(query)) !== null && _ruleset$precedenceLo !== void 0 ? _ruleset$precedenceLo : new Set();\r\n      for (var lowerPrecedenceCondition of conditionOrder.slice(i + 1)) {\r\n        conditionPrecedence.add(lowerPrecedenceCondition);\r\n      }\r\n      ruleset.precedenceLookup.set(query, conditionPrecedence);\r\n    }\r\n  }\r\n  isCompatible(incomingRuleset) {\r\n    for (var [condition, orderPrecedence] of this.precedenceLookup.entries()) {\r\n      for (var lowerPrecedenceCondition of orderPrecedence) {\r\n        var _incomingRuleset$prec;\r\n        if ((_incomingRuleset$prec = incomingRuleset.precedenceLookup.get(lowerPrecedenceCondition)) !== null && _incomingRuleset$prec !== void 0 && _incomingRuleset$prec.has(condition)) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check that children are compatible\r\n    for (var {\r\n      query,\r\n      children\r\n    } of incomingRuleset.ruleset.values()) {\r\n      var matchingCondition = this.ruleset.get(query);\r\n      if (matchingCondition && !matchingCondition.children.isCompatible(children)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  merge(incomingRuleset) {\r\n    // Merge rulesets into one array\r\n    for (var {\r\n      query,\r\n      rules,\r\n      children\r\n    } of incomingRuleset.ruleset.values()) {\r\n      var matchingCondition = this.ruleset.get(query);\r\n      if (matchingCondition) {\r\n        matchingCondition.rules.push(...rules);\r\n        matchingCondition.children.merge(children);\r\n      } else {\r\n        this.ruleset.set(query, {\r\n          query,\r\n          rules,\r\n          children\r\n        });\r\n      }\r\n    }\r\n\r\n    // Merge order precedences\r\n    for (var [condition, incomingOrderPrecedence] of incomingRuleset.precedenceLookup.entries()) {\r\n      var _this$precedenceLooku;\r\n      var orderPrecedence = (_this$precedenceLooku = this.precedenceLookup.get(condition)) !== null && _this$precedenceLooku !== void 0 ? _this$precedenceLooku : new Set();\r\n      this.precedenceLookup.set(condition, new Set([...orderPrecedence, ...incomingOrderPrecedence]));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Merge another ConditionalRuleset into this one if they are compatible\r\n   *\r\n   * @returns true if successful, false if the ruleset is incompatible\r\n   */\r\n  mergeIfCompatible(incomingRuleset) {\r\n    if (!this.isCompatible(incomingRuleset)) {\r\n      return false;\r\n    }\r\n    this.merge(incomingRuleset);\r\n    return true;\r\n  }\r\n  getSortedRuleset() {\r\n    var _this = this;\r\n    var sortedRuleset = [];\r\n\r\n    // Loop through all queries and add them to the sorted ruleset\r\n    var _loop = function _loop(dependents) {\r\n      var conditionForQuery = _this.ruleset.get(query);\r\n      if (!conditionForQuery) {\r\n        throw new Error(\"Can't find condition for \".concat(query));\r\n      }\r\n\r\n      // Find the location of the first dependent condition in the sortedRuleset\r\n      // A dependent condition is a condition that must be placed *after* the current one\r\n      var firstMatchingDependent = sortedRuleset.findIndex(condition => dependents.has(condition.query));\r\n      if (firstMatchingDependent > -1) {\r\n        // Insert the condition before the dependent one\r\n        sortedRuleset.splice(firstMatchingDependent, 0, conditionForQuery);\r\n      } else {\r\n        // No match, just insert at the end\r\n        sortedRuleset.push(conditionForQuery);\r\n      }\r\n    };\r\n    for (var [query, dependents] of this.precedenceLookup.entries()) {\r\n      _loop(dependents);\r\n    }\r\n    return sortedRuleset;\r\n  }\r\n  renderToArray() {\r\n    var arr = [];\r\n    for (var {\r\n      query,\r\n      rules,\r\n      children\r\n    } of this.getSortedRuleset()) {\r\n      var selectors = {};\r\n      for (var rule of rules) {\r\n        selectors[rule.selector] = _objectSpread2(_objectSpread2({}, selectors[rule.selector]), rule.rule);\r\n      }\r\n      Object.assign(selectors, ...children.renderToArray());\r\n      arr.push({\r\n        [query]: selectors\r\n      });\r\n    }\r\n    return arr;\r\n  }\r\n}\r\n\r\nvar simplePseudoMap = {\r\n  ':-moz-any-link': true,\r\n  ':-moz-full-screen': true,\r\n  ':-moz-placeholder': true,\r\n  ':-moz-read-only': true,\r\n  ':-moz-read-write': true,\r\n  ':-ms-fullscreen': true,\r\n  ':-ms-input-placeholder': true,\r\n  ':-webkit-any-link': true,\r\n  ':-webkit-full-screen': true,\r\n  '::-moz-color-swatch': true,\r\n  '::-moz-list-bullet': true,\r\n  '::-moz-list-number': true,\r\n  '::-moz-page-sequence': true,\r\n  '::-moz-page': true,\r\n  '::-moz-placeholder': true,\r\n  '::-moz-progress-bar': true,\r\n  '::-moz-range-progress': true,\r\n  '::-moz-range-thumb': true,\r\n  '::-moz-range-track': true,\r\n  '::-moz-scrolled-page-sequence': true,\r\n  '::-moz-selection': true,\r\n  '::-ms-backdrop': true,\r\n  '::-ms-browse': true,\r\n  '::-ms-check': true,\r\n  '::-ms-clear': true,\r\n  '::-ms-fill-lower': true,\r\n  '::-ms-fill-upper': true,\r\n  '::-ms-fill': true,\r\n  '::-ms-reveal': true,\r\n  '::-ms-thumb': true,\r\n  '::-ms-ticks-after': true,\r\n  '::-ms-ticks-before': true,\r\n  '::-ms-tooltip': true,\r\n  '::-ms-track': true,\r\n  '::-ms-value': true,\r\n  '::-webkit-backdrop': true,\r\n  '::-webkit-calendar-picker-indicator': true,\r\n  '::-webkit-inner-spin-button': true,\r\n  '::-webkit-input-placeholder': true,\r\n  '::-webkit-meter-bar': true,\r\n  '::-webkit-meter-even-less-good-value': true,\r\n  '::-webkit-meter-inner-element': true,\r\n  '::-webkit-meter-optimum-value': true,\r\n  '::-webkit-meter-suboptimum-value': true,\r\n  '::-webkit-outer-spin-button': true,\r\n  '::-webkit-progress-bar': true,\r\n  '::-webkit-progress-inner-element': true,\r\n  '::-webkit-progress-inner-value': true,\r\n  '::-webkit-progress-value': true,\r\n  '::-webkit-resizer': true,\r\n  '::-webkit-scrollbar-button': true,\r\n  '::-webkit-scrollbar-corner': true,\r\n  '::-webkit-scrollbar-thumb': true,\r\n  '::-webkit-scrollbar-track-piece': true,\r\n  '::-webkit-scrollbar-track': true,\r\n  '::-webkit-scrollbar': true,\r\n  '::-webkit-search-cancel-button': true,\r\n  '::-webkit-search-results-button': true,\r\n  '::-webkit-slider-runnable-track': true,\r\n  '::-webkit-slider-thumb': true,\r\n  '::after': true,\r\n  '::backdrop': true,\r\n  '::before': true,\r\n  '::cue': true,\r\n  '::file-selector-button': true,\r\n  '::first-letter': true,\r\n  '::first-line': true,\r\n  '::grammar-error': true,\r\n  '::marker': true,\r\n  '::placeholder': true,\r\n  '::selection': true,\r\n  '::spelling-error': true,\r\n  '::target-text': true,\r\n  '::view-transition-group': true,\r\n  '::view-transition-image-pair': true,\r\n  '::view-transition-new': true,\r\n  '::view-transition-old': true,\r\n  '::view-transition': true,\r\n  ':active': true,\r\n  ':after': true,\r\n  ':any-link': true,\r\n  ':before': true,\r\n  ':blank': true,\r\n  ':checked': true,\r\n  ':default': true,\r\n  ':defined': true,\r\n  ':disabled': true,\r\n  ':empty': true,\r\n  ':enabled': true,\r\n  ':first-child': true,\r\n  ':first-letter': true,\r\n  ':first-line': true,\r\n  ':first-of-type': true,\r\n  ':first': true,\r\n  ':focus-visible': true,\r\n  ':focus-within': true,\r\n  ':focus': true,\r\n  ':fullscreen': true,\r\n  ':hover': true,\r\n  ':in-range': true,\r\n  ':indeterminate': true,\r\n  ':invalid': true,\r\n  ':last-child': true,\r\n  ':last-of-type': true,\r\n  ':left': true,\r\n  ':link': true,\r\n  ':only-child': true,\r\n  ':only-of-type': true,\r\n  ':optional': true,\r\n  ':out-of-range': true,\r\n  ':placeholder-shown': true,\r\n  ':read-only': true,\r\n  ':read-write': true,\r\n  ':required': true,\r\n  ':right': true,\r\n  ':root': true,\r\n  ':scope': true,\r\n  ':target': true,\r\n  ':valid': true,\r\n  ':visited': true\r\n};\r\nvar simplePseudos = Object.keys(simplePseudoMap);\r\nvar simplePseudoLookup = simplePseudoMap;\r\n\r\nvar _templateObject;\r\nvar createMediaQueryError = (mediaQuery, msg) => new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    Invalid media query: \\\"\", \"\\\"\\n\\n    \", \"\\n\\n    Read more on MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries\\n  \"])), mediaQuery, msg));\r\nvar validateMediaQuery = mediaQuery => {\r\n  // Empty queries will start with '@media '\r\n  if (mediaQuery === '@media ') {\r\n    throw createMediaQueryError(mediaQuery, 'Query is empty');\r\n  }\r\n  try {\r\n    toAST(mediaQuery);\r\n  } catch (e) {\r\n    throw createMediaQueryError(mediaQuery, e.message);\r\n  }\r\n};\r\n\r\nvar _excluded = [\"vars\"],\r\n  _excluded2 = [\"content\"];\r\nvar DECLARATION = '__DECLARATION';\r\nvar UNITLESS = {\r\n  animationIterationCount: true,\r\n  borderImage: true,\r\n  borderImageOutset: true,\r\n  borderImageSlice: true,\r\n  borderImageWidth: true,\r\n  boxFlex: true,\r\n  boxFlexGroup: true,\r\n  columnCount: true,\r\n  columns: true,\r\n  flex: true,\r\n  flexGrow: true,\r\n  flexShrink: true,\r\n  fontWeight: true,\r\n  gridArea: true,\r\n  gridColumn: true,\r\n  gridColumnEnd: true,\r\n  gridColumnStart: true,\r\n  gridRow: true,\r\n  gridRowEnd: true,\r\n  gridRowStart: true,\r\n  initialLetter: true,\r\n  lineClamp: true,\r\n  lineHeight: true,\r\n  maxLines: true,\r\n  opacity: true,\r\n  order: true,\r\n  orphans: true,\r\n  scale: true,\r\n  tabSize: true,\r\n  WebkitLineClamp: true,\r\n  widows: true,\r\n  zIndex: true,\r\n  zoom: true,\r\n  // svg properties\r\n  fillOpacity: true,\r\n  floodOpacity: true,\r\n  maskBorder: true,\r\n  maskBorderOutset: true,\r\n  maskBorderSlice: true,\r\n  maskBorderWidth: true,\r\n  shapeImageThreshold: true,\r\n  stopOpacity: true,\r\n  strokeDashoffset: true,\r\n  strokeMiterlimit: true,\r\n  strokeOpacity: true,\r\n  strokeWidth: true\r\n};\r\nfunction dashify(str) {\r\n  return str.replace(/([A-Z])/g, '-$1').replace(/^ms-/, '-ms-').toLowerCase();\r\n}\r\nfunction replaceBetweenIndexes(target, startIndex, endIndex, replacement) {\r\n  var start = target.slice(0, startIndex);\r\n  var end = target.slice(endIndex);\r\n  return \"\".concat(start).concat(replacement).concat(end);\r\n}\r\nvar DOUBLE_SPACE = '  ';\r\nvar specialKeys = [...simplePseudos, '@layer', '@media', '@supports', '@container', 'selectors'];\r\nclass Stylesheet {\r\n  constructor(localClassNames, composedClassLists) {\r\n    this.rules = [];\r\n    this.conditionalRulesets = [new ConditionalRuleset()];\r\n    this.fontFaceRules = [];\r\n    this.keyframesRules = [];\r\n    this.propertyRules = [];\r\n    this.localClassNamesMap = new Map(localClassNames.map(localClassName => [localClassName, localClassName]));\r\n    this.localClassNamesSearch = new AhoCorasick(localClassNames);\r\n    this.layers = new Map();\r\n\r\n    // Class list compositions should be priortized by Newer > Older\r\n    // Therefore we reverse the array as they are added in sequence\r\n    this.composedClassLists = composedClassLists.map(_ref => {\r\n      var {\r\n        identifier,\r\n        classList\r\n      } = _ref;\r\n      return {\r\n        identifier,\r\n        regex: RegExp(\"(\".concat(classList, \")\"), 'g')\r\n      };\r\n    }).reverse();\r\n  }\r\n  processCssObj(root) {\r\n    if (root.type === 'fontFace') {\r\n      this.fontFaceRules.push(root.rule);\r\n      return;\r\n    }\r\n    if (root.type === 'property') {\r\n      this.propertyRules.push(root);\r\n      return;\r\n    }\r\n    if (root.type === 'keyframes') {\r\n      root.rule = Object.fromEntries(Object.entries(root.rule).map(_ref2 => {\r\n        var [keyframe, rule] = _ref2;\r\n        return [keyframe, this.transformVars(this.transformProperties(rule))];\r\n      }));\r\n      this.keyframesRules.push(root);\r\n      return;\r\n    }\r\n    this.currConditionalRuleset = new ConditionalRuleset();\r\n    if (root.type === 'layer') {\r\n      var layerDefinition = \"@layer \".concat(root.name);\r\n      this.addLayer([layerDefinition]);\r\n    } else {\r\n      // Add main styles\r\n      var mainRule = omit(root.rule, specialKeys);\r\n      this.addRule({\r\n        selector: root.selector,\r\n        rule: mainRule\r\n      });\r\n      this.transformLayer(root, root.rule['@layer']);\r\n      this.transformMedia(root, root.rule['@media']);\r\n      this.transformSupports(root, root.rule['@supports']);\r\n      this.transformContainer(root, root.rule['@container']);\r\n      this.transformSimplePseudos(root, root.rule);\r\n      this.transformSelectors(root, root.rule);\r\n    }\r\n    var activeConditionalRuleset = this.conditionalRulesets[this.conditionalRulesets.length - 1];\r\n    if (!activeConditionalRuleset.mergeIfCompatible(this.currConditionalRuleset)) {\r\n      // Ruleset merge failed due to incompatibility. We now deopt by starting a fresh ConditionalRuleset\r\n      this.conditionalRulesets.push(this.currConditionalRuleset);\r\n    }\r\n  }\r\n  addConditionalRule(cssRule, conditions) {\r\n    // Run `transformProperties` before `transformVars` as we don't want to pixelify CSS Vars\r\n    var rule = this.transformVars(this.transformProperties(cssRule.rule));\r\n    var selector = this.transformSelector(cssRule.selector);\r\n    if (!this.currConditionalRuleset) {\r\n      throw new Error(\"Couldn't add conditional rule\");\r\n    }\r\n    var conditionQuery = conditions[conditions.length - 1];\r\n    var parentConditions = conditions.slice(0, conditions.length - 1);\r\n    this.currConditionalRuleset.addRule({\r\n      selector,\r\n      rule\r\n    }, conditionQuery, parentConditions);\r\n  }\r\n  addRule(cssRule) {\r\n    // Run `transformProperties` before `transformVars` as we don't want to pixelify CSS Vars\r\n    var rule = this.transformVars(this.transformProperties(cssRule.rule));\r\n    var selector = this.transformSelector(cssRule.selector);\r\n    this.rules.push({\r\n      selector,\r\n      rule\r\n    });\r\n  }\r\n  addLayer(layer) {\r\n    var uniqueLayerKey = layer.join(' - ');\r\n    this.layers.set(uniqueLayerKey, layer);\r\n  }\r\n  transformProperties(cssRule) {\r\n    return this.transformContent(this.pixelifyProperties(cssRule));\r\n  }\r\n  pixelifyProperties(cssRule) {\r\n    forEach(cssRule, (value, key) => {\r\n      if (typeof value === 'number' && value !== 0 && !UNITLESS[key]) {\r\n        // @ts-expect-error Any ideas?\r\n        cssRule[key] = \"\".concat(value, \"px\");\r\n      }\r\n    });\r\n    return cssRule;\r\n  }\r\n  transformVars(_ref3) {\r\n    var {\r\n        vars\r\n      } = _ref3,\r\n      rest = _objectWithoutProperties(_ref3, _excluded);\r\n    if (!vars) {\r\n      return rest;\r\n    }\r\n    return _objectSpread2(_objectSpread2({}, mapKeys(vars, (_value, key) => getVarName(key))), rest);\r\n  }\r\n  transformContent(_ref4) {\r\n    var {\r\n        content\r\n      } = _ref4,\r\n      rest = _objectWithoutProperties(_ref4, _excluded2);\r\n    if (typeof content === 'undefined') {\r\n      return rest;\r\n    }\r\n\r\n    // Handle fallback arrays:\r\n    var contentArray = Array.isArray(content) ? content : [content];\r\n    return _objectSpread2({\r\n      content: contentArray.map(value =>\r\n      // This logic was adapted from Stitches :)\r\n      value && (value.includes('\"') || value.includes(\"'\") || /^([A-Za-z\\-]+\\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)(\\s|$)/.test(value)) ? value : \"\\\"\".concat(value, \"\\\"\"))\r\n    }, rest);\r\n  }\r\n  transformClassname(identifier) {\r\n    return \".\".concat(cssesc(identifier, {\r\n      isIdentifier: true\r\n    }));\r\n  }\r\n  transformSelector(selector) {\r\n    // Map class list compositions to single identifiers\r\n    var transformedSelector = selector;\r\n    var _loop = function _loop(identifier) {\r\n      transformedSelector = transformedSelector.replace(regex, () => {\r\n        markCompositionUsed(identifier);\r\n        return identifier;\r\n      });\r\n    };\r\n    for (var {\r\n      identifier,\r\n      regex\r\n    } of this.composedClassLists) {\r\n      _loop(identifier);\r\n    }\r\n    if (this.localClassNamesMap.has(transformedSelector)) {\r\n      return this.transformClassname(transformedSelector);\r\n    }\r\n    var results = this.localClassNamesSearch.search(transformedSelector);\r\n    var lastReplaceIndex = transformedSelector.length;\r\n\r\n    // Perform replacements backwards to simplify index handling\r\n    for (var i = results.length - 1; i >= 0; i--) {\r\n      var [endIndex, [firstMatch]] = results[i];\r\n      var startIndex = endIndex - firstMatch.length + 1;\r\n\r\n      // Class names can be substrings of other class names\r\n      // e.g. '_1g1ptzo1' and '_1g1ptzo10'\r\n      //\r\n      // Additionally, concatenated classnames can contain substrings equal to other classnames\r\n      // e.g. '&&' where '&' is 'debugName_hash1' and 'debugName_hash1d' is also a local classname\r\n      // Before transforming the selector, this would look like `debugName_hash1debugName_hash1`\r\n      // which contains the substring `debugName_hash1d`’.\r\n      //\r\n      // In either of these cases, the last replace index will occur either before or within the\r\n      // current replacement range (from `startIndex` to `endIndex`).\r\n      // If this occurs, we skip the replacement to avoid transforming the selector incorrectly.\r\n      var skipReplacement = lastReplaceIndex <= endIndex;\r\n      if (skipReplacement) {\r\n        continue;\r\n      }\r\n      lastReplaceIndex = startIndex;\r\n\r\n      // If class names already starts with a '.' then skip\r\n      if (transformedSelector[startIndex - 1] !== '.') {\r\n        transformedSelector = replaceBetweenIndexes(transformedSelector, startIndex, endIndex + 1, this.transformClassname(firstMatch));\r\n      }\r\n    }\r\n    return transformedSelector;\r\n  }\r\n  transformSelectors(root, rule, conditions) {\r\n    forEach(rule.selectors, (selectorRule, selector) => {\r\n      if (root.type !== 'local') {\r\n        throw new Error(\"Selectors are not allowed within \".concat(root.type === 'global' ? '\"globalStyle\"' : '\"selectors\"'));\r\n      }\r\n      var transformedSelector = this.transformSelector(selector.replace(RegExp('&', 'g'), root.selector));\r\n      validateSelector(transformedSelector, root.selector);\r\n      var rule = {\r\n        selector: transformedSelector,\r\n        rule: omit(selectorRule, specialKeys)\r\n      };\r\n      if (conditions) {\r\n        this.addConditionalRule(rule, conditions);\r\n      } else {\r\n        this.addRule(rule);\r\n      }\r\n      var selectorRoot = {\r\n        type: 'selector',\r\n        selector: transformedSelector,\r\n        rule: selectorRule\r\n      };\r\n      this.transformLayer(selectorRoot, selectorRule['@layer'], conditions);\r\n      this.transformSupports(selectorRoot, selectorRule['@supports'], conditions);\r\n      this.transformMedia(selectorRoot, selectorRule['@media'], conditions);\r\n      this.transformContainer(selectorRoot, selectorRule['@container'], conditions);\r\n    });\r\n  }\r\n  transformMedia(root, rules) {\r\n    var parentConditions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n    if (rules) {\r\n      var _this$currConditional;\r\n      (_this$currConditional = this.currConditionalRuleset) === null || _this$currConditional === void 0 || _this$currConditional.addConditionPrecedence(parentConditions, Object.keys(rules).map(query => \"@media \".concat(query)));\r\n      for (var [query, mediaRule] of Object.entries(rules)) {\r\n        var mediaQuery = \"@media \".concat(query);\r\n        validateMediaQuery(mediaQuery);\r\n        var conditions = [...parentConditions, mediaQuery];\r\n        this.addConditionalRule({\r\n          selector: root.selector,\r\n          rule: omit(mediaRule, specialKeys)\r\n        }, conditions);\r\n        if (root.type === 'local') {\r\n          this.transformSimplePseudos(root, mediaRule, conditions);\r\n          this.transformSelectors(root, mediaRule, conditions);\r\n        }\r\n        this.transformLayer(root, mediaRule['@layer'], conditions);\r\n        this.transformSupports(root, mediaRule['@supports'], conditions);\r\n        this.transformContainer(root, mediaRule['@container'], conditions);\r\n      }\r\n    }\r\n  }\r\n  transformContainer(root, rules) {\r\n    var parentConditions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n    if (rules) {\r\n      var _this$currConditional2;\r\n      (_this$currConditional2 = this.currConditionalRuleset) === null || _this$currConditional2 === void 0 || _this$currConditional2.addConditionPrecedence(parentConditions, Object.keys(rules).map(query => \"@container \".concat(query)));\r\n      forEach(rules, (containerRule, query) => {\r\n        var containerQuery = \"@container \".concat(query);\r\n        var conditions = [...parentConditions, containerQuery];\r\n        this.addConditionalRule({\r\n          selector: root.selector,\r\n          rule: omit(containerRule, specialKeys)\r\n        }, conditions);\r\n        if (root.type === 'local') {\r\n          this.transformSimplePseudos(root, containerRule, conditions);\r\n          this.transformSelectors(root, containerRule, conditions);\r\n        }\r\n        this.transformLayer(root, containerRule['@layer'], conditions);\r\n        this.transformSupports(root, containerRule['@supports'], conditions);\r\n        this.transformMedia(root, containerRule['@media'], conditions);\r\n      });\r\n    }\r\n  }\r\n  transformLayer(root, rules) {\r\n    var parentConditions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n    if (rules) {\r\n      var _this$currConditional3;\r\n      (_this$currConditional3 = this.currConditionalRuleset) === null || _this$currConditional3 === void 0 || _this$currConditional3.addConditionPrecedence(parentConditions, Object.keys(rules).map(name => \"@layer \".concat(name)));\r\n      forEach(rules, (layerRule, name) => {\r\n        var conditions = [...parentConditions, \"@layer \".concat(name)];\r\n        this.addLayer(conditions);\r\n        this.addConditionalRule({\r\n          selector: root.selector,\r\n          rule: omit(layerRule, specialKeys)\r\n        }, conditions);\r\n        if (root.type === 'local') {\r\n          this.transformSimplePseudos(root, layerRule, conditions);\r\n          this.transformSelectors(root, layerRule, conditions);\r\n        }\r\n        this.transformMedia(root, layerRule['@media'], conditions);\r\n        this.transformSupports(root, layerRule['@supports'], conditions);\r\n        this.transformContainer(root, layerRule['@container'], conditions);\r\n      });\r\n    }\r\n  }\r\n  transformSupports(root, rules) {\r\n    var parentConditions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n    if (rules) {\r\n      var _this$currConditional4;\r\n      (_this$currConditional4 = this.currConditionalRuleset) === null || _this$currConditional4 === void 0 || _this$currConditional4.addConditionPrecedence(parentConditions, Object.keys(rules).map(query => \"@supports \".concat(query)));\r\n      forEach(rules, (supportsRule, query) => {\r\n        var conditions = [...parentConditions, \"@supports \".concat(query)];\r\n        this.addConditionalRule({\r\n          selector: root.selector,\r\n          rule: omit(supportsRule, specialKeys)\r\n        }, conditions);\r\n        if (root.type === 'local') {\r\n          this.transformSimplePseudos(root, supportsRule, conditions);\r\n          this.transformSelectors(root, supportsRule, conditions);\r\n        }\r\n        this.transformLayer(root, supportsRule['@layer'], conditions);\r\n        this.transformMedia(root, supportsRule['@media'], conditions);\r\n        this.transformContainer(root, supportsRule['@container'], conditions);\r\n      });\r\n    }\r\n  }\r\n  transformSimplePseudos(root, rule, conditions) {\r\n    for (var key of Object.keys(rule)) {\r\n      // Process simple pseudos\r\n      if (simplePseudoLookup[key]) {\r\n        if (root.type !== 'local') {\r\n          throw new Error(\"Simple pseudos are not valid in \".concat(root.type === 'global' ? '\"globalStyle\"' : '\"selectors\"'));\r\n        }\r\n        if (conditions) {\r\n          this.addConditionalRule({\r\n            selector: \"\".concat(root.selector).concat(key),\r\n            rule: rule[key]\r\n          }, conditions);\r\n        } else {\r\n          this.addRule({\r\n            conditions,\r\n            selector: \"\".concat(root.selector).concat(key),\r\n            rule: rule[key]\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  toCss() {\r\n    var css = [];\r\n\r\n    // Render font-face rules\r\n    for (var fontFaceRule of this.fontFaceRules) {\r\n      css.push(renderCss({\r\n        '@font-face': fontFaceRule\r\n      }));\r\n    }\r\n\r\n    // Render property rules\r\n    for (var property of this.propertyRules) {\r\n      css.push(renderCss({\r\n        [\"@property \".concat(property.name)]: property.rule\r\n      }));\r\n    }\r\n\r\n    // Render keyframes\r\n    for (var keyframe of this.keyframesRules) {\r\n      css.push(renderCss({\r\n        [\"@keyframes \".concat(keyframe.name)]: keyframe.rule\r\n      }));\r\n    }\r\n\r\n    // Render layer definitions\r\n    for (var layer of this.layers.values()) {\r\n      var [definition, ...nesting] = layer.reverse();\r\n      var cssObj = {\r\n        [definition]: DECLARATION\r\n      };\r\n      for (var part of nesting) {\r\n        cssObj = {\r\n          [part]: cssObj\r\n        };\r\n      }\r\n      css.push(renderCss(cssObj));\r\n    }\r\n\r\n    // Render unconditional rules\r\n    for (var rule of this.rules) {\r\n      css.push(renderCss({\r\n        [rule.selector]: rule.rule\r\n      }));\r\n    }\r\n\r\n    // Render conditional rules\r\n    for (var conditionalRuleset of this.conditionalRulesets) {\r\n      for (var conditionalRule of conditionalRuleset.renderToArray()) {\r\n        css.push(renderCss(conditionalRule));\r\n      }\r\n    }\r\n    return css.filter(Boolean);\r\n  }\r\n}\r\nfunction renderCss(v) {\r\n  var indent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\r\n  var rules = [];\r\n  var _loop2 = function _loop2(key) {\r\n    var value = v[key];\r\n    if (value && Array.isArray(value)) {\r\n      rules.push(...value.map(v => renderCss({\r\n        [key]: v\r\n      }, indent)));\r\n    } else if (value && typeof value === 'object') {\r\n      var isEmpty = Object.keys(value).length === 0;\r\n      if (!isEmpty) {\r\n        rules.push(\"\".concat(indent).concat(key, \" {\\n\").concat(renderCss(value, indent + DOUBLE_SPACE), \"\\n\").concat(indent, \"}\"));\r\n      }\r\n    } else if (value === DECLARATION) {\r\n      rules.push(\"\".concat(indent).concat(key, \";\"));\r\n    } else {\r\n      rules.push(\"\".concat(indent).concat(key.startsWith('--') ? key : dashify(key), \": \").concat(value, \";\"));\r\n    }\r\n  };\r\n  for (var key of Object.keys(v)) {\r\n    _loop2(key);\r\n  }\r\n  return rules.join('\\n');\r\n}\r\nfunction transformCss(_ref5) {\r\n  var {\r\n    localClassNames,\r\n    cssObjs,\r\n    composedClassLists\r\n  } = _ref5;\r\n  var stylesheet = new Stylesheet(localClassNames, composedClassLists);\r\n  for (var root of cssObjs) {\r\n    stylesheet.processCssObj(root);\r\n  }\r\n  return stylesheet.toCss();\r\n}\r\n\r\nexport { _objectSpread2 as _, _objectWithoutProperties as a, dudupeAndJoinClassList as d, transformCss as t };\r\n", "// src/index.ts\r\nvar AhoCorasick = class {\r\n  constructor(keywords) {\r\n    const { failure, gotoFn, output } = this._buildTables(keywords);\r\n    this.gotoFn = gotoFn;\r\n    this.output = output;\r\n    this.failure = failure;\r\n  }\r\n  _buildTables(keywords) {\r\n    const gotoFn = {\r\n      0: {}\r\n    };\r\n    const output = {};\r\n    let state = 0;\r\n    for (const word of keywords) {\r\n      let curr = 0;\r\n      for (const l of word) {\r\n        if (gotoFn[curr] && l in gotoFn[curr]) {\r\n          curr = gotoFn[curr][l];\r\n        } else {\r\n          state++;\r\n          gotoFn[curr][l] = state;\r\n          gotoFn[state] = {};\r\n          curr = state;\r\n          output[state] = [];\r\n        }\r\n      }\r\n      output[curr].push(word);\r\n    }\r\n    const failure = {};\r\n    const xs = [];\r\n    for (const l in gotoFn[0]) {\r\n      const state2 = gotoFn[0][l];\r\n      failure[state2] = 0;\r\n      xs.push(state2);\r\n    }\r\n    while (xs.length > 0) {\r\n      const r = xs.shift();\r\n      if (r !== void 0) {\r\n        for (const l in gotoFn[r]) {\r\n          const s = gotoFn[r][l];\r\n          xs.push(s);\r\n          let state2 = failure[r];\r\n          while (state2 > 0 && !(l in gotoFn[state2])) {\r\n            state2 = failure[state2];\r\n          }\r\n          if (l in gotoFn[state2]) {\r\n            const fs = gotoFn[state2][l];\r\n            failure[s] = fs;\r\n            output[s] = [...output[s], ...output[fs]];\r\n          } else {\r\n            failure[s] = 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      gotoFn,\r\n      output,\r\n      failure\r\n    };\r\n  }\r\n  search(str) {\r\n    let state = 0;\r\n    const results = [];\r\n    for (let i = 0; i < str.length; i++) {\r\n      const l = str[i];\r\n      while (state > 0 && !(l in this.gotoFn[state])) {\r\n        state = this.failure[state];\r\n      }\r\n      if (!(l in this.gotoFn[state])) {\r\n        continue;\r\n      }\r\n      state = this.gotoFn[state][l];\r\n      if (this.output[state].length > 0) {\r\n        const foundStrs = this.output[state];\r\n        results.push([i, foundStrs]);\r\n      }\r\n    }\r\n    return results;\r\n  }\r\n  match(str) {\r\n    let state = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      const l = str[i];\r\n      while (state > 0 && !(l in this.gotoFn[state])) {\r\n        state = this.failure[state];\r\n      }\r\n      if (!(l in this.gotoFn[state])) {\r\n        continue;\r\n      }\r\n      state = this.gotoFn[state][l];\r\n      if (this.output[state].length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n};\r\nexport {\r\n  AhoCorasick as default\r\n};\r\n", "var mockAdapter = {\r\n  appendCss: () => {},\r\n  registerClassName: () => {},\r\n  onEndFileScope: () => {},\r\n  registerComposition: () => {},\r\n  markCompositionUsed: () => {},\r\n  getIdentOption: () => process.env.NODE_ENV === 'production' ? 'short' : 'debug'\r\n};\r\nvar adapterStack = [mockAdapter];\r\nvar currentAdapter = () => {\r\n  if (adapterStack.length < 1) {\r\n    throw new Error('No adapter configured');\r\n  }\r\n  return adapterStack[adapterStack.length - 1];\r\n};\r\nvar hasConfiguredAdapter = false;\r\nvar setAdapterIfNotSet = newAdapter => {\r\n  if (!hasConfiguredAdapter) {\r\n    setAdapter(newAdapter);\r\n  }\r\n};\r\nvar setAdapter = newAdapter => {\r\n  if (!newAdapter) {\r\n    throw new Error('No adapter provided when calling \"setAdapter\"');\r\n  }\r\n  hasConfiguredAdapter = true;\r\n  adapterStack.push(newAdapter);\r\n};\r\nvar removeAdapter = () => {\r\n  adapterStack.pop();\r\n};\r\nvar appendCss = function appendCss() {\r\n  return currentAdapter().appendCss(...arguments);\r\n};\r\nvar registerClassName = function registerClassName() {\r\n  return currentAdapter().registerClassName(...arguments);\r\n};\r\nvar registerComposition = function registerComposition() {\r\n  return currentAdapter().registerComposition(...arguments);\r\n};\r\nvar markCompositionUsed = function markCompositionUsed() {\r\n  return currentAdapter().markCompositionUsed(...arguments);\r\n};\r\nvar onBeginFileScope = function onBeginFileScope() {\r\n  var _currentAdapter$onBeg, _currentAdapter;\r\n  for (var _len = arguments.length, props = new Array(_len), _key = 0; _key < _len; _key++) {\r\n    props[_key] = arguments[_key];\r\n  }\r\n  return (_currentAdapter$onBeg = (_currentAdapter = currentAdapter()).onBeginFileScope) === null || _currentAdapter$onBeg === void 0 ? void 0 : _currentAdapter$onBeg.call(_currentAdapter, ...props);\r\n};\r\nvar onEndFileScope = function onEndFileScope() {\r\n  return currentAdapter().onEndFileScope(...arguments);\r\n};\r\nvar getIdentOption = function getIdentOption() {\r\n  var adapter = currentAdapter();\r\n\r\n  // Backwards compatibility with old versions of the integration package\r\n  if (!('getIdentOption' in adapter)) {\r\n    return process.env.NODE_ENV === 'production' ? 'short' : 'debug';\r\n  }\r\n  return adapter.getIdentOption(...arguments);\r\n};\r\n\r\nexport { appendCss, getIdentOption, markCompositionUsed, mockAdapter, onBeginFileScope, onEndFileScope, registerClassName, registerComposition, removeAdapter, setAdapter, setAdapterIfNotSet };\r\n", "function _taggedTemplateLiteral(strings, raw) {\r\n  if (!raw) {\r\n    raw = strings.slice(0);\r\n  }\r\n  return Object.freeze(Object.defineProperties(strings, {\r\n    raw: {\r\n      value: Object.freeze(raw)\r\n    }\r\n  }));\r\n}\r\n\r\nexport { _taggedTemplateLiteral as _ };\r\n", "export var SelectorType;\r\n(function (SelectorType) {\r\n    SelectorType[\"Attribute\"] = \"attribute\";\r\n    SelectorType[\"Pseudo\"] = \"pseudo\";\r\n    SelectorType[\"PseudoElement\"] = \"pseudo-element\";\r\n    SelectorType[\"Tag\"] = \"tag\";\r\n    SelectorType[\"Universal\"] = \"universal\";\r\n    // Traversals\r\n    SelectorType[\"Adjacent\"] = \"adjacent\";\r\n    SelectorType[\"Child\"] = \"child\";\r\n    SelectorType[\"Descendant\"] = \"descendant\";\r\n    SelectorType[\"Parent\"] = \"parent\";\r\n    SelectorType[\"Sibling\"] = \"sibling\";\r\n    SelectorType[\"ColumnCombinator\"] = \"column-combinator\";\r\n})(SelectorType || (SelectorType = {}));\r\n/**\r\n * Modes for ignore case.\r\n *\r\n * This could be updated to an enum, and the object is\r\n * the current stand-in that will allow code to be updated\r\n * without big changes.\r\n */\r\nexport const IgnoreCaseMode = {\r\n    Unknown: null,\r\n    QuirksMode: \"quirks\",\r\n    IgnoreCase: true,\r\n    CaseSensitive: false,\r\n};\r\nexport var AttributeAction;\r\n(function (AttributeAction) {\r\n    AttributeAction[\"Any\"] = \"any\";\r\n    AttributeAction[\"Element\"] = \"element\";\r\n    AttributeAction[\"End\"] = \"end\";\r\n    AttributeAction[\"Equals\"] = \"equals\";\r\n    AttributeAction[\"Exists\"] = \"exists\";\r\n    AttributeAction[\"Hyphen\"] = \"hyphen\";\r\n    AttributeAction[\"Not\"] = \"not\";\r\n    AttributeAction[\"Start\"] = \"start\";\r\n})(AttributeAction || (AttributeAction = {}));\r\n", "import { SelectorType, AttributeAction, } from \"./types\";\r\nconst reName = /^[^\\\\#]?(?:\\\\(?:[\\da-f]{1,6}\\s?|.)|[\\w\\-\\u00b0-\\uFFFF])+/;\r\nconst reEscape = /\\\\([\\da-f]{1,6}\\s?|(\\s)|.)/gi;\r\nconst actionTypes = new Map([\r\n    [126 /* Tilde */, AttributeAction.Element],\r\n    [94 /* Circumflex */, AttributeAction.Start],\r\n    [36 /* Dollar */, AttributeAction.End],\r\n    [42 /* Asterisk */, AttributeAction.Any],\r\n    [33 /* ExclamationMark */, AttributeAction.Not],\r\n    [124 /* Pipe */, AttributeAction.Hyphen],\r\n]);\r\n// Pseudos, whose data property is parsed as well.\r\nconst unpackPseudos = new Set([\r\n    \"has\",\r\n    \"not\",\r\n    \"matches\",\r\n    \"is\",\r\n    \"where\",\r\n    \"host\",\r\n    \"host-context\",\r\n]);\r\n/**\r\n * Checks whether a specific selector is a traversal.\r\n * This is useful eg. in swapping the order of elements that\r\n * are not traversals.\r\n *\r\n * @param selector Selector to check.\r\n */\r\nexport function isTraversal(selector) {\r\n    switch (selector.type) {\r\n        case SelectorType.Adjacent:\r\n        case SelectorType.Child:\r\n        case SelectorType.Descendant:\r\n        case SelectorType.Parent:\r\n        case SelectorType.Sibling:\r\n        case SelectorType.ColumnCombinator:\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nconst stripQuotesFromPseudos = new Set([\"contains\", \"icontains\"]);\r\n// Unescape function taken from https://github.com/jquery/sizzle/blob/master/src/sizzle.js#L152\r\nfunction funescape(_, escaped, escapedWhitespace) {\r\n    const high = parseInt(escaped, 16) - 0x10000;\r\n    // NaN means non-codepoint\r\n    return high !== high || escapedWhitespace\r\n        ? escaped\r\n        : high < 0\r\n            ? // BMP codepoint\r\n                String.fromCharCode(high + 0x10000)\r\n            : // Supplemental Plane codepoint (surrogate pair)\r\n                String.fromCharCode((high >> 10) | 0xd800, (high & 0x3ff) | 0xdc00);\r\n}\r\nfunction unescapeCSS(str) {\r\n    return str.replace(reEscape, funescape);\r\n}\r\nfunction isQuote(c) {\r\n    return c === 39 /* SingleQuote */ || c === 34 /* DoubleQuote */;\r\n}\r\nfunction isWhitespace(c) {\r\n    return (c === 32 /* Space */ ||\r\n        c === 9 /* Tab */ ||\r\n        c === 10 /* NewLine */ ||\r\n        c === 12 /* FormFeed */ ||\r\n        c === 13 /* CarriageReturn */);\r\n}\r\n/**\r\n * Parses `selector`, optionally with the passed `options`.\r\n *\r\n * @param selector Selector to parse.\r\n * @param options Options for parsing.\r\n * @returns Returns a two-dimensional array.\r\n * The first dimension represents selectors separated by commas (eg. `sub1, sub2`),\r\n * the second contains the relevant tokens for that selector.\r\n */\r\nexport function parse(selector) {\r\n    const subselects = [];\r\n    const endIndex = parseSelector(subselects, `${selector}`, 0);\r\n    if (endIndex < selector.length) {\r\n        throw new Error(`Unmatched selector: ${selector.slice(endIndex)}`);\r\n    }\r\n    return subselects;\r\n}\r\nfunction parseSelector(subselects, selector, selectorIndex) {\r\n    let tokens = [];\r\n    function getName(offset) {\r\n        const match = selector.slice(selectorIndex + offset).match(reName);\r\n        if (!match) {\r\n            throw new Error(`Expected name, found ${selector.slice(selectorIndex)}`);\r\n        }\r\n        const [name] = match;\r\n        selectorIndex += offset + name.length;\r\n        return unescapeCSS(name);\r\n    }\r\n    function stripWhitespace(offset) {\r\n        selectorIndex += offset;\r\n        while (selectorIndex < selector.length &&\r\n            isWhitespace(selector.charCodeAt(selectorIndex))) {\r\n            selectorIndex++;\r\n        }\r\n    }\r\n    function readValueWithParenthesis() {\r\n        selectorIndex += 1;\r\n        const start = selectorIndex;\r\n        let counter = 1;\r\n        for (; counter > 0 && selectorIndex < selector.length; selectorIndex++) {\r\n            if (selector.charCodeAt(selectorIndex) ===\r\n                40 /* LeftParenthesis */ &&\r\n                !isEscaped(selectorIndex)) {\r\n                counter++;\r\n            }\r\n            else if (selector.charCodeAt(selectorIndex) ===\r\n                41 /* RightParenthesis */ &&\r\n                !isEscaped(selectorIndex)) {\r\n                counter--;\r\n            }\r\n        }\r\n        if (counter) {\r\n            throw new Error(\"Parenthesis not matched\");\r\n        }\r\n        return unescapeCSS(selector.slice(start, selectorIndex - 1));\r\n    }\r\n    function isEscaped(pos) {\r\n        let slashCount = 0;\r\n        while (selector.charCodeAt(--pos) === 92 /* BackSlash */)\r\n            slashCount++;\r\n        return (slashCount & 1) === 1;\r\n    }\r\n    function ensureNotTraversal() {\r\n        if (tokens.length > 0 && isTraversal(tokens[tokens.length - 1])) {\r\n            throw new Error(\"Did not expect successive traversals.\");\r\n        }\r\n    }\r\n    function addTraversal(type) {\r\n        if (tokens.length > 0 &&\r\n            tokens[tokens.length - 1].type === SelectorType.Descendant) {\r\n            tokens[tokens.length - 1].type = type;\r\n            return;\r\n        }\r\n        ensureNotTraversal();\r\n        tokens.push({ type });\r\n    }\r\n    function addSpecialAttribute(name, action) {\r\n        tokens.push({\r\n            type: SelectorType.Attribute,\r\n            name,\r\n            action,\r\n            value: getName(1),\r\n            namespace: null,\r\n            ignoreCase: \"quirks\",\r\n        });\r\n    }\r\n    /**\r\n     * We have finished parsing the current part of the selector.\r\n     *\r\n     * Remove descendant tokens at the end if they exist,\r\n     * and return the last index, so that parsing can be\r\n     * picked up from here.\r\n     */\r\n    function finalizeSubselector() {\r\n        if (tokens.length &&\r\n            tokens[tokens.length - 1].type === SelectorType.Descendant) {\r\n            tokens.pop();\r\n        }\r\n        if (tokens.length === 0) {\r\n            throw new Error(\"Empty sub-selector\");\r\n        }\r\n        subselects.push(tokens);\r\n    }\r\n    stripWhitespace(0);\r\n    if (selector.length === selectorIndex) {\r\n        return selectorIndex;\r\n    }\r\n    loop: while (selectorIndex < selector.length) {\r\n        const firstChar = selector.charCodeAt(selectorIndex);\r\n        switch (firstChar) {\r\n            // Whitespace\r\n            case 32 /* Space */:\r\n            case 9 /* Tab */:\r\n            case 10 /* NewLine */:\r\n            case 12 /* FormFeed */:\r\n            case 13 /* CarriageReturn */: {\r\n                if (tokens.length === 0 ||\r\n                    tokens[0].type !== SelectorType.Descendant) {\r\n                    ensureNotTraversal();\r\n                    tokens.push({ type: SelectorType.Descendant });\r\n                }\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            // Traversals\r\n            case 62 /* GreaterThan */: {\r\n                addTraversal(SelectorType.Child);\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            case 60 /* LessThan */: {\r\n                addTraversal(SelectorType.Parent);\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            case 126 /* Tilde */: {\r\n                addTraversal(SelectorType.Sibling);\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            case 43 /* Plus */: {\r\n                addTraversal(SelectorType.Adjacent);\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            // Special attribute selectors: .class, #id\r\n            case 46 /* Period */: {\r\n                addSpecialAttribute(\"class\", AttributeAction.Element);\r\n                break;\r\n            }\r\n            case 35 /* Hash */: {\r\n                addSpecialAttribute(\"id\", AttributeAction.Equals);\r\n                break;\r\n            }\r\n            case 91 /* LeftSquareBracket */: {\r\n                stripWhitespace(1);\r\n                // Determine attribute name and namespace\r\n                let name;\r\n                let namespace = null;\r\n                if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */) {\r\n                    // Equivalent to no namespace\r\n                    name = getName(1);\r\n                }\r\n                else if (selector.startsWith(\"*|\", selectorIndex)) {\r\n                    namespace = \"*\";\r\n                    name = getName(2);\r\n                }\r\n                else {\r\n                    name = getName(0);\r\n                    if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */ &&\r\n                        selector.charCodeAt(selectorIndex + 1) !==\r\n                            61 /* Equal */) {\r\n                        namespace = name;\r\n                        name = getName(1);\r\n                    }\r\n                }\r\n                stripWhitespace(0);\r\n                // Determine comparison operation\r\n                let action = AttributeAction.Exists;\r\n                const possibleAction = actionTypes.get(selector.charCodeAt(selectorIndex));\r\n                if (possibleAction) {\r\n                    action = possibleAction;\r\n                    if (selector.charCodeAt(selectorIndex + 1) !==\r\n                        61 /* Equal */) {\r\n                        throw new Error(\"Expected `=`\");\r\n                    }\r\n                    stripWhitespace(2);\r\n                }\r\n                else if (selector.charCodeAt(selectorIndex) === 61 /* Equal */) {\r\n                    action = AttributeAction.Equals;\r\n                    stripWhitespace(1);\r\n                }\r\n                // Determine value\r\n                let value = \"\";\r\n                let ignoreCase = null;\r\n                if (action !== \"exists\") {\r\n                    if (isQuote(selector.charCodeAt(selectorIndex))) {\r\n                        const quote = selector.charCodeAt(selectorIndex);\r\n                        let sectionEnd = selectorIndex + 1;\r\n                        while (sectionEnd < selector.length &&\r\n                            (selector.charCodeAt(sectionEnd) !== quote ||\r\n                                isEscaped(sectionEnd))) {\r\n                            sectionEnd += 1;\r\n                        }\r\n                        if (selector.charCodeAt(sectionEnd) !== quote) {\r\n                            throw new Error(\"Attribute value didn't end\");\r\n                        }\r\n                        value = unescapeCSS(selector.slice(selectorIndex + 1, sectionEnd));\r\n                        selectorIndex = sectionEnd + 1;\r\n                    }\r\n                    else {\r\n                        const valueStart = selectorIndex;\r\n                        while (selectorIndex < selector.length &&\r\n                            ((!isWhitespace(selector.charCodeAt(selectorIndex)) &&\r\n                                selector.charCodeAt(selectorIndex) !==\r\n                                    93 /* RightSquareBracket */) ||\r\n                                isEscaped(selectorIndex))) {\r\n                            selectorIndex += 1;\r\n                        }\r\n                        value = unescapeCSS(selector.slice(valueStart, selectorIndex));\r\n                    }\r\n                    stripWhitespace(0);\r\n                    // See if we have a force ignore flag\r\n                    const forceIgnore = selector.charCodeAt(selectorIndex) | 0x20;\r\n                    // If the forceIgnore flag is set (either `i` or `s`), use that value\r\n                    if (forceIgnore === 115 /* LowerS */) {\r\n                        ignoreCase = false;\r\n                        stripWhitespace(1);\r\n                    }\r\n                    else if (forceIgnore === 105 /* LowerI */) {\r\n                        ignoreCase = true;\r\n                        stripWhitespace(1);\r\n                    }\r\n                }\r\n                if (selector.charCodeAt(selectorIndex) !==\r\n                    93 /* RightSquareBracket */) {\r\n                    throw new Error(\"Attribute selector didn't terminate\");\r\n                }\r\n                selectorIndex += 1;\r\n                const attributeSelector = {\r\n                    type: SelectorType.Attribute,\r\n                    name,\r\n                    action,\r\n                    value,\r\n                    namespace,\r\n                    ignoreCase,\r\n                };\r\n                tokens.push(attributeSelector);\r\n                break;\r\n            }\r\n            case 58 /* Colon */: {\r\n                if (selector.charCodeAt(selectorIndex + 1) === 58 /* Colon */) {\r\n                    tokens.push({\r\n                        type: SelectorType.PseudoElement,\r\n                        name: getName(2).toLowerCase(),\r\n                        data: selector.charCodeAt(selectorIndex) ===\r\n                            40 /* LeftParenthesis */\r\n                            ? readValueWithParenthesis()\r\n                            : null,\r\n                    });\r\n                    continue;\r\n                }\r\n                const name = getName(1).toLowerCase();\r\n                let data = null;\r\n                if (selector.charCodeAt(selectorIndex) ===\r\n                    40 /* LeftParenthesis */) {\r\n                    if (unpackPseudos.has(name)) {\r\n                        if (isQuote(selector.charCodeAt(selectorIndex + 1))) {\r\n                            throw new Error(`Pseudo-selector ${name} cannot be quoted`);\r\n                        }\r\n                        data = [];\r\n                        selectorIndex = parseSelector(data, selector, selectorIndex + 1);\r\n                        if (selector.charCodeAt(selectorIndex) !==\r\n                            41 /* RightParenthesis */) {\r\n                            throw new Error(`Missing closing parenthesis in :${name} (${selector})`);\r\n                        }\r\n                        selectorIndex += 1;\r\n                    }\r\n                    else {\r\n                        data = readValueWithParenthesis();\r\n                        if (stripQuotesFromPseudos.has(name)) {\r\n                            const quot = data.charCodeAt(0);\r\n                            if (quot === data.charCodeAt(data.length - 1) &&\r\n                                isQuote(quot)) {\r\n                                data = data.slice(1, -1);\r\n                            }\r\n                        }\r\n                        data = unescapeCSS(data);\r\n                    }\r\n                }\r\n                tokens.push({ type: SelectorType.Pseudo, name, data });\r\n                break;\r\n            }\r\n            case 44 /* Comma */: {\r\n                finalizeSubselector();\r\n                tokens = [];\r\n                stripWhitespace(1);\r\n                break;\r\n            }\r\n            default: {\r\n                if (selector.startsWith(\"/*\", selectorIndex)) {\r\n                    const endIndex = selector.indexOf(\"*/\", selectorIndex + 2);\r\n                    if (endIndex < 0) {\r\n                        throw new Error(\"Comment was not terminated\");\r\n                    }\r\n                    selectorIndex = endIndex + 2;\r\n                    // Remove leading whitespace\r\n                    if (tokens.length === 0) {\r\n                        stripWhitespace(0);\r\n                    }\r\n                    break;\r\n                }\r\n                let namespace = null;\r\n                let name;\r\n                if (firstChar === 42 /* Asterisk */) {\r\n                    selectorIndex += 1;\r\n                    name = \"*\";\r\n                }\r\n                else if (firstChar === 124 /* Pipe */) {\r\n                    name = \"\";\r\n                    if (selector.charCodeAt(selectorIndex + 1) === 124 /* Pipe */) {\r\n                        addTraversal(SelectorType.ColumnCombinator);\r\n                        stripWhitespace(2);\r\n                        break;\r\n                    }\r\n                }\r\n                else if (reName.test(selector.slice(selectorIndex))) {\r\n                    name = getName(0);\r\n                }\r\n                else {\r\n                    break loop;\r\n                }\r\n                if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */ &&\r\n                    selector.charCodeAt(selectorIndex + 1) !== 124 /* Pipe */) {\r\n                    namespace = name;\r\n                    if (selector.charCodeAt(selectorIndex + 1) ===\r\n                        42 /* Asterisk */) {\r\n                        name = \"*\";\r\n                        selectorIndex += 2;\r\n                    }\r\n                    else {\r\n                        name = getName(1);\r\n                    }\r\n                }\r\n                tokens.push(name === \"*\"\r\n                    ? { type: SelectorType.Universal, namespace }\r\n                    : { type: SelectorType.Tag, name, namespace });\r\n            }\r\n        }\r\n    }\r\n    finalizeSubselector();\r\n    return selectorIndex;\r\n}\r\n", "import { SelectorType, AttributeAction } from \"./types\";\r\nconst attribValChars = [\"\\\\\", '\"'];\r\nconst pseudoValChars = [...attribValChars, \"(\", \")\"];\r\nconst charsToEscapeInAttributeValue = new Set(attribValChars.map((c) => c.charCodeAt(0)));\r\nconst charsToEscapeInPseudoValue = new Set(pseudoValChars.map((c) => c.charCodeAt(0)));\r\nconst charsToEscapeInName = new Set([\r\n    ...pseudoValChars,\r\n    \"~\",\r\n    \"^\",\r\n    \"$\",\r\n    \"*\",\r\n    \"+\",\r\n    \"!\",\r\n    \"|\",\r\n    \":\",\r\n    \"[\",\r\n    \"]\",\r\n    \" \",\r\n    \".\",\r\n].map((c) => c.charCodeAt(0)));\r\n/**\r\n * Turns `selector` back into a string.\r\n *\r\n * @param selector Selector to stringify.\r\n */\r\nexport function stringify(selector) {\r\n    return selector\r\n        .map((token) => token.map(stringifyToken).join(\"\"))\r\n        .join(\", \");\r\n}\r\nfunction stringifyToken(token, index, arr) {\r\n    switch (token.type) {\r\n        // Simple types\r\n        case SelectorType.Child:\r\n            return index === 0 ? \"> \" : \" > \";\r\n        case SelectorType.Parent:\r\n            return index === 0 ? \"< \" : \" < \";\r\n        case SelectorType.Sibling:\r\n            return index === 0 ? \"~ \" : \" ~ \";\r\n        case SelectorType.Adjacent:\r\n            return index === 0 ? \"+ \" : \" + \";\r\n        case SelectorType.Descendant:\r\n            return \" \";\r\n        case SelectorType.ColumnCombinator:\r\n            return index === 0 ? \"|| \" : \" || \";\r\n        case SelectorType.Universal:\r\n            // Return an empty string if the selector isn't needed.\r\n            return token.namespace === \"*\" &&\r\n                index + 1 < arr.length &&\r\n                \"name\" in arr[index + 1]\r\n                ? \"\"\r\n                : `${getNamespace(token.namespace)}*`;\r\n        case SelectorType.Tag:\r\n            return getNamespacedName(token);\r\n        case SelectorType.PseudoElement:\r\n            return `::${escapeName(token.name, charsToEscapeInName)}${token.data === null\r\n                ? \"\"\r\n                : `(${escapeName(token.data, charsToEscapeInPseudoValue)})`}`;\r\n        case SelectorType.Pseudo:\r\n            return `:${escapeName(token.name, charsToEscapeInName)}${token.data === null\r\n                ? \"\"\r\n                : `(${typeof token.data === \"string\"\r\n                    ? escapeName(token.data, charsToEscapeInPseudoValue)\r\n                    : stringify(token.data)})`}`;\r\n        case SelectorType.Attribute: {\r\n            if (token.name === \"id\" &&\r\n                token.action === AttributeAction.Equals &&\r\n                token.ignoreCase === \"quirks\" &&\r\n                !token.namespace) {\r\n                return `#${escapeName(token.value, charsToEscapeInName)}`;\r\n            }\r\n            if (token.name === \"class\" &&\r\n                token.action === AttributeAction.Element &&\r\n                token.ignoreCase === \"quirks\" &&\r\n                !token.namespace) {\r\n                return `.${escapeName(token.value, charsToEscapeInName)}`;\r\n            }\r\n            const name = getNamespacedName(token);\r\n            if (token.action === AttributeAction.Exists) {\r\n                return `[${name}]`;\r\n            }\r\n            return `[${name}${getActionValue(token.action)}=\"${escapeName(token.value, charsToEscapeInAttributeValue)}\"${token.ignoreCase === null ? \"\" : token.ignoreCase ? \" i\" : \" s\"}]`;\r\n        }\r\n    }\r\n}\r\nfunction getActionValue(action) {\r\n    switch (action) {\r\n        case AttributeAction.Equals:\r\n            return \"\";\r\n        case AttributeAction.Element:\r\n            return \"~\";\r\n        case AttributeAction.Start:\r\n            return \"^\";\r\n        case AttributeAction.End:\r\n            return \"$\";\r\n        case AttributeAction.Any:\r\n            return \"*\";\r\n        case AttributeAction.Not:\r\n            return \"!\";\r\n        case AttributeAction.Hyphen:\r\n            return \"|\";\r\n        case AttributeAction.Exists:\r\n            throw new Error(\"Shouldn't be here\");\r\n    }\r\n}\r\nfunction getNamespacedName(token) {\r\n    return `${getNamespace(token.namespace)}${escapeName(token.name, charsToEscapeInName)}`;\r\n}\r\nfunction getNamespace(namespace) {\r\n    return namespace !== null\r\n        ? `${namespace === \"*\"\r\n            ? \"*\"\r\n            : escapeName(namespace, charsToEscapeInName)}|`\r\n        : \"\";\r\n}\r\nfunction escapeName(str, charsToEscape) {\r\n    let lastIdx = 0;\r\n    let ret = \"\";\r\n    for (let i = 0; i < str.length; i++) {\r\n        if (charsToEscape.has(str.charCodeAt(i))) {\r\n            ret += `${str.slice(lastIdx, i)}\\\\${str.charAt(i)}`;\r\n            lastIdx = i + 1;\r\n        }\r\n    }\r\n    return ret.length > 0 ? ret + str.slice(lastIdx) : str;\r\n}\r\n", "function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\r\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\r\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\r\nconst dedent = createDedent({});\r\nexport default dedent;\r\nfunction createDedent(options) {\r\n  dedent.withOptions = newOptions => createDedent(_objectSpread(_objectSpread({}, options), newOptions));\r\n  return dedent;\r\n  function dedent(strings, ...values) {\r\n    const raw = typeof strings === \"string\" ? [strings] : strings.raw;\r\n    const {\r\n      alignValues = false,\r\n      escapeSpecialCharacters = Array.isArray(strings),\r\n      trimWhitespace = true\r\n    } = options;\r\n\r\n    // first, perform interpolation\r\n    let result = \"\";\r\n    for (let i = 0; i < raw.length; i++) {\r\n      let next = raw[i];\r\n      if (escapeSpecialCharacters) {\r\n        // handle escaped newlines, backticks, and interpolation characters\r\n        next = next.replace(/\\\\\\n[ \\t]*/g, \"\").replace(/\\\\`/g, \"`\").replace(/\\\\\\$/g, \"$\").replace(/\\\\\\{/g, \"{\");\r\n      }\r\n      result += next;\r\n      if (i < values.length) {\r\n        const value = alignValues ? alignValue(values[i], result) : values[i];\r\n\r\n        // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\r\n        result += value;\r\n      }\r\n    }\r\n\r\n    // now strip indentation\r\n    const lines = result.split(\"\\n\");\r\n    let mindent = null;\r\n    for (const l of lines) {\r\n      const m = l.match(/^(\\s+)\\S+/);\r\n      if (m) {\r\n        const indent = m[1].length;\r\n        if (!mindent) {\r\n          // this is the first indented line\r\n          mindent = indent;\r\n        } else {\r\n          mindent = Math.min(mindent, indent);\r\n        }\r\n      }\r\n    }\r\n    if (mindent !== null) {\r\n      const m = mindent; // appease TypeScript\r\n      result = lines\r\n      // https://github.com/typescript-eslint/typescript-eslint/issues/7140\r\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\r\n      .map(l => l[0] === \" \" || l[0] === \"\\t\" ? l.slice(m) : l).join(\"\\n\");\r\n    }\r\n\r\n    // dedent eats leading and trailing whitespace too\r\n    if (trimWhitespace) {\r\n      result = result.trim();\r\n    }\r\n\r\n    // handle escaped newlines at the end to ensure they don't get stripped too\r\n    if (escapeSpecialCharacters) {\r\n      result = result.replace(/\\\\n/g, \"\\n\");\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\n/**\r\n * Adjusts the indentation of a multi-line interpolated value to match the current line.\r\n */\r\nfunction alignValue(value, precedingText) {\r\n  if (typeof value !== \"string\" || !value.includes(\"\\n\")) {\r\n    return value;\r\n  }\r\n  const currentLine = precedingText.slice(precedingText.lastIndexOf(\"\\n\") + 1);\r\n  const indentMatch = currentLine.match(/^(\\s+)/);\r\n  if (indentMatch) {\r\n    const indent = indentMatch[1];\r\n    return value.replace(/\\n/g, `\\n${indent}`);\r\n  }\r\n  return value;\r\n}\r\n", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n", "import { __read } from \"tslib\";\nvar weirdNewlines = /(\\u000D|\\u000C|\\u000D\\u000A)/g;\nvar nullOrSurrogates = /[\\u0000\\uD800-\\uDFFF]/g;\nvar commentRegex = /(\\/\\*)[\\s\\S]*?(\\*\\/)/g;\nexport var lexicalAnalysis = function (str, index) {\n    if (index === void 0) { index = 0; }\n    str = str.replace(weirdNewlines, '\\n').replace(nullOrSurrogates, '\\uFFFD');\n    str = str.replace(commentRegex, '');\n    var tokens = [];\n    for (; index < str.length; index += 1) {\n        var code = str.charCodeAt(index);\n        if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n            var code_1 = str.charCodeAt(++index);\n            while (code_1 === 0x0009 || code_1 === 0x0020 || code_1 === 0x000a) {\n                code_1 = str.charCodeAt(++index);\n            }\n            index -= 1;\n            tokens.push({\n                type: '<whitespace-token>'\n            });\n        }\n        else if (code === 0x0022) {\n            var result = consumeString(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n            tokens.push({\n                type: '<string-token>',\n                value: value\n            });\n            index = lastIndex;\n        }\n        else if (code === 0x0023) {\n            if (index + 1 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                if (nextCode === 0x005f ||\n                    (nextCode >= 0x0041 && nextCode <= 0x005a) ||\n                    (nextCode >= 0x0061 && nextCode <= 0x007a) ||\n                    nextCode >= 0x0080 ||\n                    (nextCode >= 0x0030 && nextCode <= 0x0039) ||\n                    (nextCode === 0x005c &&\n                        index + 2 < str.length &&\n                        str.charCodeAt(index + 2) !== 0x000a)) {\n                    var flag = wouldStartIdentifier(str, index + 1)\n                        ? 'id'\n                        : 'unrestricted';\n                    var result = consumeIdentUnsafe(str, index + 1);\n                    if (result !== null) {\n                        var _b = __read(result, 2), lastIndex = _b[0], value = _b[1];\n                        tokens.push({\n                            type: '<hash-token>',\n                            value: value.toLowerCase(),\n                            flag: flag\n                        });\n                        index = lastIndex;\n                        continue;\n                    }\n                }\n            }\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n        else if (code === 0x0027) {\n            var result = consumeString(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _c = __read(result, 2), lastIndex = _c[0], value = _c[1];\n            tokens.push({\n                type: '<string-token>',\n                value: value\n            });\n            index = lastIndex;\n        }\n        else if (code === 0x0028) {\n            tokens.push({ type: '<(-token>' });\n        }\n        else if (code === 0x0029) {\n            tokens.push({ type: '<)-token>' });\n        }\n        else if (code === 0x002b) {\n            var plusNumeric = consumeNumeric(str, index);\n            if (plusNumeric === null) {\n                tokens.push({\n                    type: '<delim-token>',\n                    value: code\n                });\n            }\n            else {\n                var _d = __read(plusNumeric, 2), lastIndex = _d[0], tokenTuple = _d[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n            }\n        }\n        else if (code === 0x002c) {\n            tokens.push({ type: '<comma-token>' });\n        }\n        else if (code === 0x002d) {\n            var minusNumeric = consumeNumeric(str, index);\n            if (minusNumeric !== null) {\n                var _e = __read(minusNumeric, 2), lastIndex = _e[0], tokenTuple = _e[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n                continue;\n            }\n            if (index + 2 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                var nextNextCode = str.charCodeAt(index + 2);\n                if (nextCode === 0x002d && nextNextCode === 0x003e) {\n                    tokens.push({\n                        type: '<CDC-token>'\n                    });\n                    index += 2;\n                    continue;\n                }\n            }\n            var result = consumeIdentLike(str, index);\n            if (result !== null) {\n                var _f = __read(result, 3), lastIndex = _f[0], value = _f[1], type = _f[2];\n                tokens.push({\n                    type: type,\n                    value: value\n                });\n                index = lastIndex;\n                continue;\n            }\n            tokens.push({\n                type: '<delim-token>',\n                value: code\n            });\n        }\n        else if (code === 0x002e) {\n            var minusNumeric = consumeNumeric(str, index);\n            if (minusNumeric === null) {\n                tokens.push({\n                    type: '<delim-token>',\n                    value: code\n                });\n            }\n            else {\n                var _g = __read(minusNumeric, 2), lastIndex = _g[0], tokenTuple = _g[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n                continue;\n            }\n        }\n        else if (code === 0x003a) {\n            tokens.push({ type: '<colon-token>' });\n        }\n        else if (code === 0x003b) {\n            tokens.push({ type: '<semicolon-token>' });\n        }\n        else if (code === 0x003c) {\n            if (index + 3 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                var nextNextCode = str.charCodeAt(index + 2);\n                var nextNextNextCode = str.charCodeAt(index + 3);\n                if (nextCode === 0x0021 &&\n                    nextNextCode === 0x002d &&\n                    nextNextNextCode === 0x002d) {\n                    tokens.push({\n                        type: '<CDO-token>'\n                    });\n                    index += 3;\n                    continue;\n                }\n            }\n            tokens.push({\n                type: '<delim-token>',\n                value: code\n            });\n        }\n        else if (code === 0x0040) {\n            var result = consumeIdent(str, index + 1);\n            if (result !== null) {\n                var _h = __read(result, 2), lastIndex = _h[0], value = _h[1];\n                tokens.push({\n                    type: '<at-keyword-token>',\n                    value: value.toLowerCase()\n                });\n                index = lastIndex;\n                continue;\n            }\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n        else if (code === 0x005b) {\n            tokens.push({ type: '<[-token>' });\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _j = __read(result, 2), lastIndex = _j[0], value = _j[1];\n            str = str.slice(0, index) + value + str.slice(lastIndex + 1);\n            index -= 1;\n        }\n        else if (code === 0x005d) {\n            tokens.push({ type: '<]-token>' });\n        }\n        else if (code === 0x007b) {\n            tokens.push({ type: '<{-token>' });\n        }\n        else if (code === 0x007d) {\n            tokens.push({ type: '<}-token>' });\n        }\n        else if (code >= 0x0030 && code <= 0x0039) {\n            var result = consumeNumeric(str, index);\n            var _k = __read(result, 2), lastIndex = _k[0], tokenTuple = _k[1];\n            if (tokenTuple[0] === '<dimension-token>') {\n                tokens.push({\n                    type: '<dimension-token>',\n                    value: tokenTuple[1],\n                    unit: tokenTuple[2].toLowerCase(),\n                    flag: 'number'\n                });\n            }\n            else if (tokenTuple[0] === '<number-token>') {\n                tokens.push({\n                    type: tokenTuple[0],\n                    value: tokenTuple[1],\n                    flag: tokenTuple[2]\n                });\n            }\n            else {\n                tokens.push({\n                    type: tokenTuple[0],\n                    value: tokenTuple[1],\n                    flag: 'number'\n                });\n            }\n            index = lastIndex;\n        }\n        else if (code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080) {\n            var result = consumeIdentLike(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _l = __read(result, 3), lastIndex = _l[0], value = _l[1], type = _l[2];\n            tokens.push({\n                type: type,\n                value: value\n            });\n            index = lastIndex;\n        }\n        else {\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n    }\n    tokens.push({ type: '<EOF-token>' });\n    return tokens;\n};\nexport var consumeString = function (str, index) {\n    if (str.length <= index + 1)\n        return null;\n    var firstCode = str.charCodeAt(index);\n    var charCodes = [];\n    for (var i = index + 1; i < str.length; i += 1) {\n        var code = str.charCodeAt(i);\n        if (code === firstCode) {\n            return [i, String.fromCharCode.apply(null, charCodes)];\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, i);\n            if (result === null)\n                return null;\n            var _a = __read(result, 2), lastIndex = _a[0], charCode = _a[1];\n            charCodes.push(charCode);\n            i = lastIndex;\n        }\n        else if (code === 0x000a) {\n            return null;\n        }\n        else {\n            charCodes.push(code);\n        }\n    }\n    return null;\n};\nexport var wouldStartIdentifier = function (str, index) {\n    if (str.length <= index)\n        return false;\n    var code = str.charCodeAt(index);\n    if (code === 0x002d) {\n        if (str.length <= index + 1)\n            return false;\n        var nextCode = str.charCodeAt(index + 1);\n        if (nextCode === 0x002d ||\n            nextCode === 0x005f ||\n            (nextCode >= 0x0041 && nextCode <= 0x005a) ||\n            (nextCode >= 0x0061 && nextCode <= 0x007a) ||\n            nextCode >= 0x0080) {\n            return true;\n        }\n        else if (nextCode === 0x005c) {\n            if (str.length <= index + 2)\n                return false;\n            var nextNextCode = str.charCodeAt(index + 2);\n            return nextNextCode !== 0x000a;\n        }\n        else {\n            return false;\n        }\n    }\n    else if (code === 0x005f ||\n        (code >= 0x0041 && code <= 0x005a) ||\n        (code >= 0x0061 && code <= 0x007a) ||\n        code >= 0x0080) {\n        return true;\n    }\n    else if (code === 0x005c) {\n        if (str.length <= index + 1)\n            return false;\n        var nextCode = str.charCodeAt(index + 1);\n        return nextCode !== 0x000a;\n    }\n    else {\n        return false;\n    }\n};\nexport var consumeEscape = function (str, index) {\n    if (str.length <= index + 1)\n        return null;\n    if (str.charCodeAt(index) !== 0x005c)\n        return null;\n    var code = str.charCodeAt(index + 1);\n    if (code === 0x000a) {\n        return null;\n    }\n    else if ((code >= 0x0030 && code <= 0x0039) ||\n        (code >= 0x0041 && code <= 0x0046) ||\n        (code >= 0x0061 && code <= 0x0066)) {\n        var hexCharCodes = [code];\n        var min = Math.min(index + 7, str.length);\n        var i = index + 2;\n        for (; i < min; i += 1) {\n            var code_2 = str.charCodeAt(i);\n            if ((code_2 >= 0x0030 && code_2 <= 0x0039) ||\n                (code_2 >= 0x0041 && code_2 <= 0x0046) ||\n                (code_2 >= 0x0061 && code_2 <= 0x0066)) {\n                hexCharCodes.push(code_2);\n            }\n            else {\n                break;\n            }\n        }\n        if (i < str.length) {\n            var code_3 = str.charCodeAt(i);\n            if (code_3 === 0x0009 || code_3 === 0x0020 || code_3 === 0x000a) {\n                i += 1;\n            }\n        }\n        return [i - 1, parseInt(String.fromCharCode.apply(null, hexCharCodes), 16)];\n    }\n    else {\n        return [index + 1, code];\n    }\n};\nexport var consumeNumeric = function (str, index) {\n    var numberResult = consumeNumber(str, index);\n    if (numberResult === null)\n        return null;\n    var _a = __read(numberResult, 3), numberEndIndex = _a[0], numberValue = _a[1], numberFlag = _a[2];\n    var identResult = consumeIdent(str, numberEndIndex + 1);\n    if (identResult !== null) {\n        var _b = __read(identResult, 2), identEndIndex = _b[0], identValue = _b[1];\n        return [identEndIndex, ['<dimension-token>', numberValue, identValue]];\n    }\n    if (numberEndIndex + 1 < str.length &&\n        str.charCodeAt(numberEndIndex + 1) === 0x0025) {\n        return [numberEndIndex + 1, ['<percentage-token>', numberValue]];\n    }\n    return [numberEndIndex, ['<number-token>', numberValue, numberFlag]];\n};\nexport var consumeNumber = function (str, index) {\n    if (str.length <= index)\n        return null;\n    var flag = 'integer';\n    var numberChars = [];\n    var firstCode = str.charCodeAt(index);\n    if (firstCode === 0x002b || firstCode === 0x002d) {\n        index += 1;\n        if (firstCode === 0x002d)\n            numberChars.push(0x002d);\n    }\n    while (index < str.length) {\n        var code = str.charCodeAt(index);\n        if (code >= 0x0030 && code <= 0x0039) {\n            numberChars.push(code);\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    if (index + 1 < str.length) {\n        var nextCode = str.charCodeAt(index);\n        var nextNextCode = str.charCodeAt(index + 1);\n        if (nextCode === 0x002e &&\n            nextNextCode >= 0x0030 &&\n            nextNextCode <= 0x0039) {\n            numberChars.push(nextCode, nextNextCode);\n            flag = 'number';\n            index += 2;\n            while (index < str.length) {\n                var code = str.charCodeAt(index);\n                if (code >= 0x0030 && code <= 0x0039) {\n                    numberChars.push(code);\n                    index += 1;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n    }\n    if (index + 1 < str.length) {\n        var nextCode = str.charCodeAt(index);\n        var nextNextCode = str.charCodeAt(index + 1);\n        var nextNextNextCode = str.charCodeAt(index + 2);\n        if (nextCode === 0x0045 || nextCode === 0x0065) {\n            var nextNextIsDigit = nextNextCode >= 0x0030 && nextNextCode <= 0x0039;\n            if (nextNextIsDigit ||\n                ((nextNextCode === 0x002b || nextNextCode === 0x002d) &&\n                    nextNextNextCode >= 0x0030 &&\n                    nextNextNextCode <= 0x0039)) {\n                flag = 'number';\n                if (nextNextIsDigit) {\n                    numberChars.push(0x0045, nextNextCode);\n                    index += 2;\n                }\n                else if (nextNextCode === 0x002d) {\n                    numberChars.push(0x0045, 0x002d, nextNextNextCode);\n                    index += 3;\n                }\n                else {\n                    numberChars.push(0x0045, nextNextNextCode);\n                    index += 3;\n                }\n                while (index < str.length) {\n                    var code = str.charCodeAt(index);\n                    if (code >= 0x0030 && code <= 0x0039) {\n                        numberChars.push(code);\n                        index += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    var numberString = String.fromCharCode.apply(null, numberChars);\n    var value = flag === 'number' ? parseFloat(numberString) : parseInt(numberString);\n    if (value === -0)\n        value = 0;\n    return Number.isNaN(value) ? null : [index - 1, value, flag];\n};\nexport var consumeIdentUnsafe = function (str, index) {\n    if (str.length <= index) {\n        return null;\n    }\n    var identChars = [];\n    for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n        if (code === 0x002d ||\n            code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080 ||\n            (code >= 0x0030 && code <= 0x0039)) {\n            identChars.push(code);\n            continue;\n        }\n        else {\n            var result = consumeEscape(str, index);\n            if (result !== null) {\n                var _a = __read(result, 2), lastIndex = _a[0], code_4 = _a[1];\n                identChars.push(code_4);\n                index = lastIndex;\n                continue;\n            }\n        }\n        break;\n    }\n    return index === 0\n        ? null\n        : [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nexport var consumeIdent = function (str, index) {\n    if (str.length <= index || !wouldStartIdentifier(str, index)) {\n        return null;\n    }\n    var identChars = [];\n    for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n        if (code === 0x002d ||\n            code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080 ||\n            (code >= 0x0030 && code <= 0x0039)) {\n            identChars.push(code);\n            continue;\n        }\n        else {\n            var result = consumeEscape(str, index);\n            if (result !== null) {\n                var _a = __read(result, 2), lastIndex = _a[0], code_5 = _a[1];\n                identChars.push(code_5);\n                index = lastIndex;\n                continue;\n            }\n        }\n        break;\n    }\n    return [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nexport var consumeUrl = function (str, index) {\n    var code = str.charCodeAt(index);\n    while (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n        code = str.charCodeAt(++index);\n    }\n    var urlChars = [];\n    var hasFinishedWord = false;\n    while (index < str.length) {\n        if (code === 0x0029) {\n            return [index, String.fromCharCode.apply(null, urlChars)];\n        }\n        else if (code === 0x0022 || code === 0x0027 || code === 0x0028) {\n            return null;\n        }\n        else if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n            if (!hasFinishedWord && urlChars.length !== 0)\n                hasFinishedWord = true;\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, index);\n            if (result === null || hasFinishedWord)\n                return null;\n            var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n            urlChars.push(value);\n            index = lastIndex;\n        }\n        else {\n            if (hasFinishedWord)\n                return null;\n            urlChars.push(code);\n        }\n        code = str.charCodeAt(++index);\n    }\n    return null;\n};\nexport var consumeIdentLike = function (str, index) {\n    var result = consumeIdent(str, index);\n    if (result === null)\n        return null;\n    var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n    if (value.toLowerCase() === 'url') {\n        if (str.length > lastIndex + 1) {\n            var nextCode = str.charCodeAt(lastIndex + 1);\n            if (nextCode === 0x0028) {\n                for (var offset = 2; lastIndex + offset < str.length; offset += 1) {\n                    var nextNextCode = str.charCodeAt(lastIndex + offset);\n                    if (nextNextCode === 0x0022 || nextNextCode === 0x0027) {\n                        return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n                    }\n                    else if (nextNextCode !== 0x0009 &&\n                        nextNextCode !== 0x0020 &&\n                        nextNextCode !== 0x000a) {\n                        var result_1 = consumeUrl(str, lastIndex + offset);\n                        if (result_1 === null)\n                            return null;\n                        var _b = __read(result_1, 2), lastUrlIndex = _b[0], value_1 = _b[1];\n                        return [lastUrlIndex, value_1, '<url-token>'];\n                    }\n                }\n                return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n            }\n        }\n    }\n    else if (str.length > lastIndex + 1) {\n        var nextCode = str.charCodeAt(lastIndex + 1);\n        if (nextCode === 0x0028) {\n            return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n        }\n    }\n    return [lastIndex, value.toLowerCase(), '<ident-token>'];\n};\n//# sourceMappingURL=lexicalAnalysis.js.map", "export var simplifyAST = function (ast) {\n    for (var i = ast.length - 1; i >= 0; i--) {\n        ast[i] = simplifyMediaQuery(ast[i]);\n    }\n    return ast;\n};\nvar simplifyMediaQuery = function (mediaQuery) {\n    if (mediaQuery.mediaCondition === null)\n        return mediaQuery;\n    var mediaCondition = simplifyMediaCondition(mediaQuery.mediaCondition);\n    if (mediaCondition.operator === null &&\n        mediaCondition.children.length === 1 &&\n        'children' in mediaCondition.children[0]) {\n        mediaCondition = mediaCondition.children[0];\n    }\n    return {\n        mediaPrefix: mediaQuery.mediaPrefix,\n        mediaType: mediaQuery.mediaType,\n        mediaCondition: mediaCondition\n    };\n};\nvar simplifyMediaCondition = function (mediaCondition) {\n    for (var i = mediaCondition.children.length - 1; i >= 0; i--) {\n        var unsimplifiedChild = mediaCondition.children[i];\n        if (!('context' in unsimplifiedChild)) {\n            var child = simplifyMediaCondition(unsimplifiedChild);\n            if (child.operator === null && child.children.length === 1) {\n                mediaCondition.children[i] = child.children[0];\n            }\n            else if (child.operator === mediaCondition.operator &&\n                (child.operator === 'and' || child.operator === 'or')) {\n                var spliceArgs = [i, 1];\n                for (var i_1 = 0; i_1 < child.children.length; i_1++) {\n                    spliceArgs.push(child.children[i_1]);\n                }\n                mediaCondition.children.splice.apply(mediaCondition.children, spliceArgs);\n            }\n        }\n    }\n    return mediaCondition;\n};\n//# sourceMappingURL=simplifyAST.js.map", "import { __assign, __rest, __values } from \"tslib\";\nimport { lexicalAnalysis } from './lexicalAnalysis';\nimport { simplifyAST } from './simplifyAST';\nvar createError = function (message, err) {\n    if (err instanceof Error) {\n        return new Error(\"\".concat(err.message.trim(), \"\\n\").concat(message.trim()));\n    }\n    else {\n        return new Error(message.trim());\n    }\n};\nexport var toAST = function (str) {\n    return simplifyAST(toUnflattenedAST(str));\n};\nexport var toUnflattenedAST = function (str) {\n    var tokenList = lexicalAnalysis(str.trim());\n    if (tokenList === null) {\n        throw createError('Failed tokenizing');\n    }\n    var startIndex = 0;\n    var endIndex = tokenList.length - 1;\n    if (tokenList[0].type === '<at-keyword-token>' &&\n        tokenList[0].value === 'media') {\n        if (tokenList[1].type !== '<whitespace-token>') {\n            throw createError('Expected whitespace after media');\n        }\n        startIndex = 2;\n        for (var i = 2; i < tokenList.length - 1; i++) {\n            var token = tokenList[i];\n            if (token.type === '<{-token>') {\n                endIndex = i;\n                break;\n            }\n            else if (token.type === '<semicolon-token>') {\n                throw createError(\"Expected '{' in media query but found ';'\");\n            }\n        }\n    }\n    tokenList = tokenList.slice(startIndex, endIndex);\n    return syntacticAnalysis(tokenList);\n};\nexport var removeWhitespace = function (tokenList) {\n    var newTokenList = [];\n    var before = false;\n    for (var i = 0; i < tokenList.length; i++) {\n        if (tokenList[i].type === '<whitespace-token>') {\n            before = true;\n            if (newTokenList.length > 0) {\n                newTokenList[newTokenList.length - 1].wsAfter = true;\n            }\n        }\n        else {\n            newTokenList.push(__assign(__assign({}, tokenList[i]), { wsBefore: before, wsAfter: false }));\n            before = false;\n        }\n    }\n    return newTokenList;\n};\nexport var syntacticAnalysis = function (tokenList) {\n    var e_1, _a;\n    var mediaQueryList = [[]];\n    for (var i = 0; i < tokenList.length; i++) {\n        var token = tokenList[i];\n        if (token.type === '<comma-token>') {\n            mediaQueryList.push([]);\n        }\n        else {\n            mediaQueryList[mediaQueryList.length - 1].push(token);\n        }\n    }\n    var mediaQueries = mediaQueryList.map(removeWhitespace);\n    if (mediaQueries.length === 1 && mediaQueries[0].length === 0) {\n        return [{ mediaCondition: null, mediaPrefix: null, mediaType: 'all' }];\n    }\n    else {\n        var mediaQueryTokens = mediaQueries.map(function (mediaQueryTokens) {\n            if (mediaQueryTokens.length === 0) {\n                return null;\n            }\n            else {\n                return tokenizeMediaQuery(mediaQueryTokens);\n            }\n        });\n        var nonNullMediaQueryTokens = [];\n        try {\n            for (var mediaQueryTokens_1 = __values(mediaQueryTokens), mediaQueryTokens_1_1 = mediaQueryTokens_1.next(); !mediaQueryTokens_1_1.done; mediaQueryTokens_1_1 = mediaQueryTokens_1.next()) {\n                var mediaQueryToken = mediaQueryTokens_1_1.value;\n                if (mediaQueryToken !== null) {\n                    nonNullMediaQueryTokens.push(mediaQueryToken);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (mediaQueryTokens_1_1 && !mediaQueryTokens_1_1.done && (_a = mediaQueryTokens_1.return)) _a.call(mediaQueryTokens_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (nonNullMediaQueryTokens.length === 0) {\n            throw createError('No valid media queries');\n        }\n        return nonNullMediaQueryTokens;\n    }\n};\nexport var tokenizeMediaQuery = function (tokens) {\n    var firstToken = tokens[0];\n    if (firstToken.type === '<(-token>') {\n        try {\n            return {\n                mediaPrefix: null,\n                mediaType: 'all',\n                mediaCondition: tokenizeMediaCondition(tokens, true)\n            };\n        }\n        catch (err) {\n            throw createError(\"Expected media condition after '('\", err);\n        }\n    }\n    else if (firstToken.type === '<ident-token>') {\n        var mediaPrefix = null;\n        var mediaType = void 0;\n        var value = firstToken.value;\n        if (value === 'only' || value === 'not') {\n            mediaPrefix = value;\n        }\n        var firstIndex = mediaPrefix === null ? 0 : 1;\n        if (tokens.length <= firstIndex) {\n            throw createError(\"Expected extra token in media query\");\n        }\n        var firstNonUnaryToken = tokens[firstIndex];\n        if (firstNonUnaryToken.type === '<ident-token>') {\n            var value_1 = firstNonUnaryToken.value;\n            if (value_1 === 'all') {\n                mediaType = 'all';\n            }\n            else if (value_1 === 'print' || value_1 === 'screen') {\n                mediaType = value_1;\n            }\n            else if (value_1 === 'tty' ||\n                value_1 === 'tv' ||\n                value_1 === 'projection' ||\n                value_1 === 'handheld' ||\n                value_1 === 'braille' ||\n                value_1 === 'embossed' ||\n                value_1 === 'aural' ||\n                value_1 === 'speech') {\n                mediaPrefix = mediaPrefix === 'not' ? null : 'not';\n                mediaType = 'all';\n            }\n            else {\n                throw createError(\"Unknown ident '\".concat(value_1, \"' in media query\"));\n            }\n        }\n        else if (mediaPrefix === 'not' &&\n            firstNonUnaryToken.type === '<(-token>') {\n            var tokensWithParens = [\n                { type: '<(-token>', wsBefore: false, wsAfter: false }\n            ];\n            tokensWithParens.push.apply(tokensWithParens, tokens);\n            tokensWithParens.push({\n                type: '<)-token>',\n                wsBefore: false,\n                wsAfter: false\n            });\n            try {\n                return {\n                    mediaPrefix: null,\n                    mediaType: 'all',\n                    mediaCondition: tokenizeMediaCondition(tokensWithParens, true)\n                };\n            }\n            catch (err) {\n                throw createError(\"Expected media condition after '('\", err);\n            }\n        }\n        else {\n            throw createError('Invalid media query');\n        }\n        if (firstIndex + 1 === tokens.length) {\n            return {\n                mediaPrefix: mediaPrefix,\n                mediaType: mediaType,\n                mediaCondition: null\n            };\n        }\n        else if (firstIndex + 4 < tokens.length) {\n            var secondNonUnaryToken = tokens[firstIndex + 1];\n            if (secondNonUnaryToken.type === '<ident-token>' &&\n                secondNonUnaryToken.value === 'and') {\n                try {\n                    return {\n                        mediaPrefix: mediaPrefix,\n                        mediaType: mediaType,\n                        mediaCondition: tokenizeMediaCondition(tokens.slice(firstIndex + 2), false)\n                    };\n                }\n                catch (err) {\n                    throw createError(\"Expected media condition after 'and'\", err);\n                }\n            }\n            else {\n                throw createError(\"Expected 'and' after media prefix\");\n            }\n        }\n        else {\n            throw createError('Expected media condition after media prefix');\n        }\n    }\n    else {\n        throw createError('Expected media condition or media prefix');\n    }\n};\nexport var tokenizeMediaCondition = function (tokens, mayContainOr, previousOperator) {\n    if (previousOperator === void 0) { previousOperator = null; }\n    if (tokens.length < 3 ||\n        tokens[0].type !== '<(-token>' ||\n        tokens[tokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid media condition');\n    }\n    var endIndexOfFirstFeature = tokens.length - 1;\n    var maxDepth = 0;\n    var count = 0;\n    for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n        if (token.type === '<(-token>') {\n            count += 1;\n            maxDepth = Math.max(maxDepth, count);\n        }\n        else if (token.type === '<)-token>') {\n            count -= 1;\n        }\n        if (count === 0) {\n            endIndexOfFirstFeature = i;\n            break;\n        }\n    }\n    if (count !== 0) {\n        throw new Error('Mismatched parens\\nInvalid media condition');\n    }\n    var child;\n    var featureTokens = tokens.slice(0, endIndexOfFirstFeature + 1);\n    if (maxDepth === 1) {\n        child = tokenizeMediaFeature(featureTokens);\n    }\n    else {\n        if (featureTokens[1].type === '<ident-token>' &&\n            featureTokens[1].value === 'not') {\n            child = tokenizeMediaCondition(featureTokens.slice(2, -1), true, 'not');\n        }\n        else {\n            child = tokenizeMediaCondition(featureTokens.slice(1, -1), true);\n        }\n    }\n    if (endIndexOfFirstFeature === tokens.length - 1) {\n        return {\n            operator: previousOperator,\n            children: [child]\n        };\n    }\n    else {\n        var nextToken = tokens[endIndexOfFirstFeature + 1];\n        if (nextToken.type !== '<ident-token>') {\n            throw new Error('Invalid operator\\nInvalid media condition');\n        }\n        else if (previousOperator !== null &&\n            previousOperator !== nextToken.value) {\n            throw new Error(\"'\".concat(nextToken.value, \"' and '\").concat(previousOperator, \"' must not be at same level\\nInvalid media condition\"));\n        }\n        else if (nextToken.value === 'or' && !mayContainOr) {\n            throw new Error(\"Cannot use 'or' at top level of a media query\\nInvalid media condition\");\n        }\n        else if (nextToken.value !== 'and' && nextToken.value !== 'or') {\n            throw new Error(\"Invalid operator: '\".concat(nextToken.value, \"'\\nInvalid media condition\"));\n        }\n        var siblings = tokenizeMediaCondition(tokens.slice(endIndexOfFirstFeature + 2), mayContainOr, nextToken.value);\n        return {\n            operator: nextToken.value,\n            children: [child].concat(siblings.children)\n        };\n    }\n};\nexport var tokenizeMediaFeature = function (rawTokens) {\n    if (rawTokens.length < 3 ||\n        rawTokens[0].type !== '<(-token>' ||\n        rawTokens[rawTokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid media feature');\n    }\n    var tokens = [rawTokens[0]];\n    for (var i = 1; i < rawTokens.length; i++) {\n        if (i < rawTokens.length - 2) {\n            var a = rawTokens[i];\n            var b = rawTokens[i + 1];\n            var c = rawTokens[i + 2];\n            if (a.type === '<number-token>' &&\n                a.value > 0 &&\n                b.type === '<delim-token>' &&\n                b.value === 0x002f &&\n                c.type === '<number-token>' &&\n                c.value > 0) {\n                tokens.push({\n                    type: '<ratio-token>',\n                    numerator: a.value,\n                    denominator: c.value,\n                    wsBefore: a.wsBefore,\n                    wsAfter: c.wsAfter\n                });\n                i += 2;\n                continue;\n            }\n        }\n        tokens.push(rawTokens[i]);\n    }\n    var nextToken = tokens[1];\n    if (nextToken.type === '<ident-token>' && tokens.length === 3) {\n        return {\n            context: 'boolean',\n            feature: nextToken.value\n        };\n    }\n    else if (tokens.length === 5 &&\n        tokens[1].type === '<ident-token>' &&\n        tokens[2].type === '<colon-token>') {\n        var valueToken = tokens[3];\n        if (valueToken.type === '<number-token>' ||\n            valueToken.type === '<dimension-token>' ||\n            valueToken.type === '<ratio-token>' ||\n            valueToken.type === '<ident-token>') {\n            var feature = tokens[1].value;\n            var prefix = null;\n            var slice = feature.slice(0, 4);\n            if (slice === 'min-') {\n                prefix = 'min';\n                feature = feature.slice(4);\n            }\n            else if (slice === 'max-') {\n                prefix = 'max';\n                feature = feature.slice(4);\n            }\n            var _0 = valueToken.wsBefore, _1 = valueToken.wsAfter, value = __rest(valueToken, [\"wsBefore\", \"wsAfter\"]);\n            return {\n                context: 'value',\n                prefix: prefix,\n                feature: feature,\n                value: value\n            };\n        }\n    }\n    else if (tokens.length >= 5) {\n        try {\n            var range = tokenizeRange(tokens);\n            return {\n                context: 'range',\n                feature: range.featureName,\n                range: range\n            };\n        }\n        catch (err) {\n            throw createError('Invalid media feature', err);\n        }\n    }\n    throw new Error('Invalid media feature');\n};\nexport var tokenizeRange = function (tokens) {\n    var _a, _b, _c, _d;\n    if (tokens.length < 5 ||\n        tokens[0].type !== '<(-token>' ||\n        tokens[tokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid range');\n    }\n    var range = {\n        leftToken: null,\n        leftOp: null,\n        featureName: '',\n        rightOp: null,\n        rightToken: null\n    };\n    var hasLeft = tokens[1].type === '<number-token>' ||\n        tokens[1].type === '<dimension-token>' ||\n        tokens[1].type === '<ratio-token>' ||\n        (tokens[1].type === '<ident-token>' && tokens[1].value === 'infinite');\n    if (tokens[2].type === '<delim-token>') {\n        if (tokens[2].value === 0x003c) {\n            if (tokens[3].type === '<delim-token>' &&\n                tokens[3].value === 0x003d &&\n                !tokens[3].wsBefore) {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '<=';\n            }\n            else {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '<';\n            }\n        }\n        else if (tokens[2].value === 0x003e) {\n            if (tokens[3].type === '<delim-token>' &&\n                tokens[3].value === 0x003d &&\n                !tokens[3].wsBefore) {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '>=';\n            }\n            else {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '>';\n            }\n        }\n        else if (tokens[2].value === 0x003d) {\n            range[hasLeft ? 'leftOp' : 'rightOp'] = '=';\n        }\n        else {\n            throw new Error('Invalid range');\n        }\n        if (hasLeft) {\n            range.leftToken = tokens[1];\n        }\n        else if (tokens[1].type === '<ident-token>') {\n            range.featureName = tokens[1].value;\n        }\n        else {\n            throw new Error('Invalid range');\n        }\n        var tokenIndexAfterFirstOp = 2 + ((_b = (_a = range[hasLeft ? 'leftOp' : 'rightOp']) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        var tokenAfterFirstOp = tokens[tokenIndexAfterFirstOp];\n        if (hasLeft) {\n            if (tokenAfterFirstOp.type === '<ident-token>') {\n                range.featureName = tokenAfterFirstOp.value;\n                if (tokens.length >= 7) {\n                    var secondOpToken = tokens[tokenIndexAfterFirstOp + 1];\n                    var followingToken = tokens[tokenIndexAfterFirstOp + 2];\n                    if (secondOpToken.type === '<delim-token>') {\n                        var charCode = secondOpToken.value;\n                        if (charCode === 0x003c) {\n                            if (followingToken.type === '<delim-token>' &&\n                                followingToken.value === 0x003d &&\n                                !followingToken.wsBefore) {\n                                range.rightOp = '<=';\n                            }\n                            else {\n                                range.rightOp = '<';\n                            }\n                        }\n                        else if (charCode === 0x003e) {\n                            if (followingToken.type === '<delim-token>' &&\n                                followingToken.value === 0x003d &&\n                                !followingToken.wsBefore) {\n                                range.rightOp = '>=';\n                            }\n                            else {\n                                range.rightOp = '>';\n                            }\n                        }\n                        else {\n                            throw new Error('Invalid range');\n                        }\n                        var tokenAfterSecondOp = tokens[tokenIndexAfterFirstOp + 1 + ((_d = (_c = range.rightOp) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0)];\n                        range.rightToken = tokenAfterSecondOp;\n                    }\n                    else {\n                        throw new Error('Invalid range');\n                    }\n                }\n                else if (tokenIndexAfterFirstOp + 2 !== tokens.length) {\n                    throw new Error('Invalid range');\n                }\n            }\n            else {\n                throw new Error('Invalid range');\n            }\n        }\n        else {\n            range.rightToken = tokenAfterFirstOp;\n        }\n        var validRange = null;\n        var lt = range.leftToken, leftOp = range.leftOp, featureName = range.featureName, rightOp = range.rightOp, rt = range.rightToken;\n        var leftToken = null;\n        if (lt !== null) {\n            if (lt.type === '<ident-token>') {\n                var type = lt.type, value = lt.value;\n                if (value === 'infinite') {\n                    leftToken = { type: type, value: value };\n                }\n            }\n            else if (lt.type === '<number-token>' ||\n                lt.type === '<dimension-token>' ||\n                lt.type === '<ratio-token>') {\n                var _0 = lt.wsBefore, _1 = lt.wsAfter, ltNoWS = __rest(lt, [\"wsBefore\", \"wsAfter\"]);\n                leftToken = ltNoWS;\n            }\n        }\n        var rightToken = null;\n        if (rt !== null) {\n            if (rt.type === '<ident-token>') {\n                var type = rt.type, value = rt.value;\n                if (value === 'infinite') {\n                    rightToken = { type: type, value: value };\n                }\n            }\n            else if (rt.type === '<number-token>' ||\n                rt.type === '<dimension-token>' ||\n                rt.type === '<ratio-token>') {\n                var _0 = rt.wsBefore, _1 = rt.wsAfter, rtNoWS = __rest(rt, [\"wsBefore\", \"wsAfter\"]);\n                rightToken = rtNoWS;\n            }\n        }\n        if (leftToken !== null && rightToken !== null) {\n            if ((leftOp === '<' || leftOp === '<=') &&\n                (rightOp === '<' || rightOp === '<=')) {\n                validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n            }\n            else if ((leftOp === '>' || leftOp === '>=') &&\n                (rightOp === '>' || rightOp === '>=')) {\n                validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n            }\n            else {\n                throw new Error('Invalid range');\n            }\n        }\n        else if (leftToken === null &&\n            leftOp === null &&\n            rightOp !== null &&\n            rightToken !== null) {\n            validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n        }\n        else if (leftToken !== null &&\n            leftOp !== null &&\n            rightOp === null &&\n            rightToken === null) {\n            validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n        }\n        return validRange;\n    }\n    else {\n        throw new Error('Invalid range');\n    }\n};\n//# sourceMappingURL=syntacticAnalysis.js.map", "/**\n * @module LRUCache\n */\n\n// module-private names and types\ntype Perf = { now: () => number }\nconst perf: Perf =\n  typeof performance === 'object' &&\n  performance &&\n  typeof performance.now === 'function'\n    ? performance\n    : Date\n\nconst warned = new Set<string>()\n\n// either a function or a class\ntype ForC = ((...a: any[]) => any) | { new (...a: any[]): any }\n\n/* c8 ignore start */\nconst PROCESS = (\n  typeof process === 'object' && !!process ? process : {}\n) as { [k: string]: any }\n/* c8 ignore start */\n\nconst emitWarning = (\n  msg: string,\n  type: string,\n  code: string,\n  fn: ForC\n) => {\n  typeof PROCESS.emitWarning === 'function'\n    ? PROCESS.emitWarning(msg, type, code, fn)\n    : console.error(`[${code}] ${type}: ${msg}`)\n}\n\nlet AC = globalThis.AbortController\nlet AS = globalThis.AbortSignal\n\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n  //@ts-ignore\n  AS = class AbortSignal {\n    onabort?: (...a: any[]) => any\n    _onabort: ((...a: any[]) => any)[] = []\n    reason?: any\n    aborted: boolean = false\n    addEventListener(_: string, fn: (...a: any[]) => any) {\n      this._onabort.push(fn)\n    }\n  }\n  //@ts-ignore\n  AC = class AbortController {\n    constructor() {\n      warnACPolyfill()\n    }\n    signal = new AS()\n    abort(reason: any) {\n      if (this.signal.aborted) return\n      //@ts-ignore\n      this.signal.reason = reason\n      //@ts-ignore\n      this.signal.aborted = true\n      //@ts-ignore\n      for (const fn of this.signal._onabort) {\n        fn(reason)\n      }\n      this.signal.onabort?.(reason)\n    }\n  }\n  let printACPolyfillWarning =\n    PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1'\n  const warnACPolyfill = () => {\n    if (!printACPolyfillWarning) return\n    printACPolyfillWarning = false\n    emitWarning(\n      'AbortController is not defined. If using lru-cache in ' +\n        'node 14, load an AbortController polyfill from the ' +\n        '`node-abort-controller` package. A minimal polyfill is ' +\n        'provided for use by LRUCache.fetch(), but it should not be ' +\n        'relied upon in other contexts (eg, passing it to other APIs that ' +\n        'use AbortController/AbortSignal might have undesirable effects). ' +\n        'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.',\n      'NO_ABORT_CONTROLLER',\n      'ENOTSUP',\n      warnACPolyfill\n    )\n  }\n}\n/* c8 ignore stop */\n\nconst shouldWarn = (code: string) => !warned.has(code)\n\nconst TYPE = Symbol('type')\nexport type PosInt = number & { [TYPE]: 'Positive Integer' }\nexport type Index = number & { [TYPE]: 'LRUCache Index' }\n\nconst isPosInt = (n: any): n is PosInt =>\n  n && n === Math.floor(n) && n > 0 && isFinite(n)\n\nexport type UintArray = Uint8Array | Uint16Array | Uint32Array\nexport type NumberArray = UintArray | number[]\n\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max: number) =>\n  !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n    ? Uint8Array\n    : max <= Math.pow(2, 16)\n    ? Uint16Array\n    : max <= Math.pow(2, 32)\n    ? Uint32Array\n    : max <= Number.MAX_SAFE_INTEGER\n    ? ZeroArray\n    : null\n/* c8 ignore stop */\n\nclass ZeroArray extends Array<number> {\n  constructor(size: number) {\n    super(size)\n    this.fill(0)\n  }\n}\nexport type { ZeroArray }\nexport type { Stack }\n\nexport type StackLike = Stack | Index[]\nclass Stack {\n  heap: NumberArray\n  length: number\n  // private constructor\n  static #constructing: boolean = false\n  static create(max: number): StackLike {\n    const HeapCls = getUintArray(max)\n    if (!HeapCls) return []\n    Stack.#constructing = true\n    const s = new Stack(max, HeapCls)\n    Stack.#constructing = false\n    return s\n  }\n  constructor(\n    max: number,\n    HeapCls: { new (n: number): NumberArray }\n  ) {\n    /* c8 ignore start */\n    if (!Stack.#constructing) {\n      throw new TypeError('instantiate Stack using Stack.create(n)')\n    }\n    /* c8 ignore stop */\n    this.heap = new HeapCls(max)\n    this.length = 0\n  }\n  push(n: Index) {\n    this.heap[this.length++] = n\n  }\n  pop(): Index {\n    return this.heap[--this.length] as Index\n  }\n}\n\n/**\n * Promise representing an in-progress {@link LRUCache#fetch} call\n */\nexport type BackgroundFetch<V> = Promise<V | undefined> & {\n  __returned: BackgroundFetch<V> | undefined\n  __abortController: AbortController\n  __staleWhileFetching: V | undefined\n}\n\nexport type DisposeTask<K, V> = [\n  value: V,\n  key: K,\n  reason: LRUCache.DisposeReason\n]\n\nexport namespace LRUCache {\n  /**\n   * An integer greater than 0, reflecting the calculated size of items\n   */\n  export type Size = number\n\n  /**\n   * Integer greater than 0, representing some number of milliseconds, or the\n   * time at which a TTL started counting from.\n   */\n  export type Milliseconds = number\n\n  /**\n   * An integer greater than 0, reflecting a number of items\n   */\n  export type Count = number\n\n  /**\n   * The reason why an item was removed from the cache, passed\n   * to the {@link Disposer} methods.\n   *\n   * - `evict`: The item was evicted because it is the least recently used,\n   *   and the cache is full.\n   * - `set`: A new value was set, overwriting the old value being disposed.\n   * - `delete`: The item was explicitly deleted, either by calling\n   *   {@link LRUCache#delete}, {@link LRUCache#clear}, or\n   *   {@link LRUCache#set} with an undefined value.\n   * - `expire`: The item was removed due to exceeding its TTL.\n   * - `fetch`: A {@link OptionsBase#fetchMethod} operation returned\n   *   `undefined` or was aborted, causing the item to be deleted.\n   */\n  export type DisposeReason =\n    | 'evict'\n    | 'set'\n    | 'delete'\n    | 'expire'\n    | 'fetch'\n  /**\n   * A method called upon item removal, passed as the\n   * {@link OptionsBase.dispose} and/or\n   * {@link OptionsBase.disposeAfter} options.\n   */\n  export type Disposer<K, V> = (\n    value: V,\n    key: K,\n    reason: DisposeReason\n  ) => void\n\n  /**\n   * A function that returns the effective calculated size\n   * of an entry in the cache.\n   */\n  export type SizeCalculator<K, V> = (value: V, key: K) => Size\n\n  /**\n   * Options provided to the\n   * {@link OptionsBase.fetchMethod} function.\n   */\n  export interface FetcherOptions<K, V, FC = unknown> {\n    signal: AbortSignal\n    options: FetcherFetchOptions<K, V, FC>\n    /**\n     * Object provided in the {@link FetchOptions.context} option to\n     * {@link LRUCache#fetch}\n     */\n    context: FC\n  }\n\n  /**\n   * Occasionally, it may be useful to track the internal behavior of the\n   * cache, particularly for logging, debugging, or for behavior within the\n   * `fetchMethod`. To do this, you can pass a `status` object to the\n   * {@link LRUCache#fetch}, {@link LRUCache#get}, {@link LRUCache#set},\n   * {@link LRUCache#memo}, and {@link LRUCache#has} methods.\n   *\n   * The `status` option should be a plain JavaScript object. The following\n   * fields will be set on it appropriately, depending on the situation.\n   */\n  export interface Status<V> {\n    /**\n     * The status of a set() operation.\n     *\n     * - add: the item was not found in the cache, and was added\n     * - update: the item was in the cache, with the same value provided\n     * - replace: the item was in the cache, and replaced\n     * - miss: the item was not added to the cache for some reason\n     */\n    set?: 'add' | 'update' | 'replace' | 'miss'\n\n    /**\n     * the ttl stored for the item, or undefined if ttls are not used.\n     */\n    ttl?: Milliseconds\n\n    /**\n     * the start time for the item, or undefined if ttls are not used.\n     */\n    start?: Milliseconds\n\n    /**\n     * The timestamp used for TTL calculation\n     */\n    now?: Milliseconds\n\n    /**\n     * the remaining ttl for the item, or undefined if ttls are not used.\n     */\n    remainingTTL?: Milliseconds\n\n    /**\n     * The calculated size for the item, if sizes are used.\n     */\n    entrySize?: Size\n\n    /**\n     * The total calculated size of the cache, if sizes are used.\n     */\n    totalCalculatedSize?: Size\n\n    /**\n     * A flag indicating that the item was not stored, due to exceeding the\n     * {@link OptionsBase.maxEntrySize}\n     */\n    maxEntrySizeExceeded?: true\n\n    /**\n     * The old value, specified in the case of `set:'update'` or\n     * `set:'replace'`\n     */\n    oldValue?: V\n\n    /**\n     * The results of a {@link LRUCache#has} operation\n     *\n     * - hit: the item was found in the cache\n     * - stale: the item was found in the cache, but is stale\n     * - miss: the item was not found in the cache\n     */\n    has?: 'hit' | 'stale' | 'miss'\n\n    /**\n     * The status of a {@link LRUCache#fetch} operation.\n     * Note that this can change as the underlying fetch() moves through\n     * various states.\n     *\n     * - inflight: there is another fetch() for this key which is in process\n     * - get: there is no {@link OptionsBase.fetchMethod}, so\n     *   {@link LRUCache#get} was called.\n     * - miss: the item is not in cache, and will be fetched.\n     * - hit: the item is in the cache, and was resolved immediately.\n     * - stale: the item is in the cache, but stale.\n     * - refresh: the item is in the cache, and not stale, but\n     *   {@link FetchOptions.forceRefresh} was specified.\n     */\n    fetch?: 'get' | 'inflight' | 'miss' | 'hit' | 'stale' | 'refresh'\n\n    /**\n     * The {@link OptionsBase.fetchMethod} was called\n     */\n    fetchDispatched?: true\n\n    /**\n     * The cached value was updated after a successful call to\n     * {@link OptionsBase.fetchMethod}\n     */\n    fetchUpdated?: true\n\n    /**\n     * The reason for a fetch() rejection.  Either the error raised by the\n     * {@link OptionsBase.fetchMethod}, or the reason for an\n     * AbortSignal.\n     */\n    fetchError?: Error\n\n    /**\n     * The fetch received an abort signal\n     */\n    fetchAborted?: true\n\n    /**\n     * The abort signal received was ignored, and the fetch was allowed to\n     * continue.\n     */\n    fetchAbortIgnored?: true\n\n    /**\n     * The fetchMethod promise resolved successfully\n     */\n    fetchResolved?: true\n\n    /**\n     * The fetchMethod promise was rejected\n     */\n    fetchRejected?: true\n\n    /**\n     * The status of a {@link LRUCache#get} operation.\n     *\n     * - fetching: The item is currently being fetched.  If a previous value\n     *   is present and allowed, that will be returned.\n     * - stale: The item is in the cache, and is stale.\n     * - hit: the item is in the cache\n     * - miss: the item is not in the cache\n     */\n    get?: 'stale' | 'hit' | 'miss'\n\n    /**\n     * A fetch or get operation returned a stale value.\n     */\n    returnedStale?: true\n  }\n\n  /**\n   * options which override the options set in the LRUCache constructor\n   * when calling {@link LRUCache#fetch}.\n   *\n   * This is the union of {@link GetOptions} and {@link SetOptions}, plus\n   * {@link OptionsBase.noDeleteOnFetchRejection},\n   * {@link OptionsBase.allowStaleOnFetchRejection},\n   * {@link FetchOptions.forceRefresh}, and\n   * {@link FetcherOptions.context}\n   *\n   * Any of these may be modified in the {@link OptionsBase.fetchMethod}\n   * function, but the {@link GetOptions} fields will of course have no\n   * effect, as the {@link LRUCache#get} call already happened by the time\n   * the fetchMethod is called.\n   */\n  export interface FetcherFetchOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n      | 'noDeleteOnFetchRejection'\n      | 'allowStaleOnFetchRejection'\n      | 'ignoreFetchAbort'\n      | 'allowStaleOnFetchAbort'\n    > {\n    status?: Status<V>\n    size?: Size\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#fetch} method.\n   */\n  export interface FetchOptions<K, V, FC>\n    extends FetcherFetchOptions<K, V, FC> {\n    /**\n     * Set to true to force a re-load of the existing data, even if it\n     * is not yet stale.\n     */\n    forceRefresh?: boolean\n    /**\n     * Context provided to the {@link OptionsBase.fetchMethod} as\n     * the {@link FetcherOptions.context} param.\n     *\n     * If the FC type is specified as unknown (the default),\n     * undefined or void, then this is optional.  Otherwise, it will\n     * be required.\n     */\n    context?: FC\n    signal?: AbortSignal\n    status?: Status<V>\n  }\n  /**\n   * Options provided to {@link LRUCache#fetch} when the FC type is something\n   * other than `unknown`, `undefined`, or `void`\n   */\n  export interface FetchOptionsWithContext<K, V, FC>\n    extends FetchOptions<K, V, FC> {\n    context: FC\n  }\n  /**\n   * Options provided to {@link LRUCache#fetch} when the FC type is\n   * `undefined` or `void`\n   */\n  export interface FetchOptionsNoContext<K, V>\n    extends FetchOptions<K, V, undefined> {\n    context?: undefined\n  }\n\n  export interface MemoOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n      | 'noDeleteOnFetchRejection'\n      | 'allowStaleOnFetchRejection'\n      | 'ignoreFetchAbort'\n      | 'allowStaleOnFetchAbort'\n    > {\n    /**\n     * Set to true to force a re-load of the existing data, even if it\n     * is not yet stale.\n     */\n    forceRefresh?: boolean\n    /**\n     * Context provided to the {@link OptionsBase.memoMethod} as\n     * the {@link MemoizerOptions.context} param.\n     *\n     * If the FC type is specified as unknown (the default),\n     * undefined or void, then this is optional.  Otherwise, it will\n     * be required.\n     */\n    context?: FC\n    status?: Status<V>\n  }\n  /**\n   * Options provided to {@link LRUCache#memo} when the FC type is something\n   * other than `unknown`, `undefined`, or `void`\n   */\n  export interface MemoOptionsWithContext<K, V, FC>\n    extends MemoOptions<K, V, FC> {\n    context: FC\n  }\n  /**\n   * Options provided to {@link LRUCache#memo} when the FC type is\n   * `undefined` or `void`\n   */\n  export interface MemoOptionsNoContext<K, V>\n    extends MemoOptions<K, V, undefined> {\n    context?: undefined\n  }\n\n  /**\n   * Options provided to the\n   * {@link OptionsBase.memoMethod} function.\n   */\n  export interface MemoizerOptions<K, V, FC = unknown> {\n    options: MemoizerMemoOptions<K, V, FC>\n    /**\n     * Object provided in the {@link MemoOptions.context} option to\n     * {@link LRUCache#memo}\n     */\n    context: FC\n  }\n\n  /**\n   * options which override the options set in the LRUCache constructor\n   * when calling {@link LRUCache#memo}.\n   *\n   * This is the union of {@link GetOptions} and {@link SetOptions}, plus\n   * {@link MemoOptions.forceRefresh}, and\n   * {@link MemoerOptions.context}\n   *\n   * Any of these may be modified in the {@link OptionsBase.memoMethod}\n   * function, but the {@link GetOptions} fields will of course have no\n   * effect, as the {@link LRUCache#get} call already happened by the time\n   * the memoMethod is called.\n   */\n  export interface MemoizerMemoOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n    > {\n    status?: Status<V>\n    size?: Size\n    start?: Milliseconds\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#has} method.\n   */\n  export interface HasOptions<K, V, FC>\n    extends Pick<OptionsBase<K, V, FC>, 'updateAgeOnHas'> {\n    status?: Status<V>\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#get} method.\n   */\n  export interface GetOptions<K, V, FC>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      'allowStale' | 'updateAgeOnGet' | 'noDeleteOnStaleGet'\n    > {\n    status?: Status<V>\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#peek} method.\n   */\n  export interface PeekOptions<K, V, FC>\n    extends Pick<OptionsBase<K, V, FC>, 'allowStale'> {}\n\n  /**\n   * Options that may be passed to the {@link LRUCache#set} method.\n   */\n  export interface SetOptions<K, V, FC>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      'sizeCalculation' | 'ttl' | 'noDisposeOnSet' | 'noUpdateTTL'\n    > {\n    /**\n     * If size tracking is enabled, then setting an explicit size\n     * in the {@link LRUCache#set} call will prevent calling the\n     * {@link OptionsBase.sizeCalculation} function.\n     */\n    size?: Size\n    /**\n     * If TTL tracking is enabled, then setting an explicit start\n     * time in the {@link LRUCache#set} call will override the\n     * default time from `performance.now()` or `Date.now()`.\n     *\n     * Note that it must be a valid value for whichever time-tracking\n     * method is in use.\n     */\n    start?: Milliseconds\n    status?: Status<V>\n  }\n\n  /**\n   * The type signature for the {@link OptionsBase.fetchMethod} option.\n   */\n  export type Fetcher<K, V, FC = unknown> = (\n    key: K,\n    staleValue: V | undefined,\n    options: FetcherOptions<K, V, FC>\n  ) => Promise<V | undefined | void> | V | undefined | void\n\n  /**\n   * the type signature for the {@link OptionsBase.memoMethod} option.\n   */\n  export type Memoizer<K, V, FC = unknown> = (\n    key: K,\n    staleValue: V | undefined,\n    options: MemoizerOptions<K, V, FC>\n  ) => V\n\n  /**\n   * Options which may be passed to the {@link LRUCache} constructor.\n   *\n   * Most of these may be overridden in the various options that use\n   * them.\n   *\n   * Despite all being technically optional, the constructor requires that\n   * a cache is at minimum limited by one or more of {@link OptionsBase.max},\n   * {@link OptionsBase.ttl}, or {@link OptionsBase.maxSize}.\n   *\n   * If {@link OptionsBase.ttl} is used alone, then it is strongly advised\n   * (and in fact required by the type definitions here) that the cache\n   * also set {@link OptionsBase.ttlAutopurge}, to prevent potentially\n   * unbounded storage.\n   *\n   * All options are also available on the {@link LRUCache} instance, making\n   * it safe to pass an LRUCache instance as the options argumemnt to\n   * make another empty cache of the same type.\n   *\n   * Some options are marked as read-only, because changing them after\n   * instantiation is not safe. Changing any of the other options will of\n   * course only have an effect on subsequent method calls.\n   */\n  export interface OptionsBase<K, V, FC> {\n    /**\n     * The maximum number of items to store in the cache before evicting\n     * old entries. This is read-only on the {@link LRUCache} instance,\n     * and may not be overridden.\n     *\n     * If set, then storage space will be pre-allocated at construction\n     * time, and the cache will perform significantly faster.\n     *\n     * Note that significantly fewer items may be stored, if\n     * {@link OptionsBase.maxSize} and/or {@link OptionsBase.ttl} are also\n     * set.\n     *\n     * **It is strongly recommended to set a `max` to prevent unbounded growth\n     * of the cache.**\n     */\n    max?: Count\n\n    /**\n     * Max time in milliseconds for items to live in cache before they are\n     * considered stale.  Note that stale items are NOT preemptively removed by\n     * default, and MAY live in the cache, contributing to its LRU max, long\n     * after they have expired, unless {@link OptionsBase.ttlAutopurge} is\n     * set.\n     *\n     * If set to `0` (the default value), then that means \"do not track\n     * TTL\", not \"expire immediately\".\n     *\n     * Also, as this cache is optimized for LRU/MRU operations, some of\n     * the staleness/TTL checks will reduce performance, as they will incur\n     * overhead by deleting items.\n     *\n     * This is not primarily a TTL cache, and does not make strong TTL\n     * guarantees. There is no pre-emptive pruning of expired items, but you\n     * _may_ set a TTL on the cache, and it will treat expired items as missing\n     * when they are fetched, and delete them.\n     *\n     * Optional, but must be a non-negative integer in ms if specified.\n     *\n     * This may be overridden by passing an options object to `cache.set()`.\n     *\n     * At least one of `max`, `maxSize`, or `TTL` is required. This must be a\n     * positive integer if set.\n     *\n     * Even if ttl tracking is enabled, **it is strongly recommended to set a\n     * `max` to prevent unbounded growth of the cache.**\n     *\n     * If ttl tracking is enabled, and `max` and `maxSize` are not set,\n     * and `ttlAutopurge` is not set, then a warning will be emitted\n     * cautioning about the potential for unbounded memory consumption.\n     * (The TypeScript definitions will also discourage this.)\n     */\n    ttl?: Milliseconds\n\n    /**\n     * Minimum amount of time in ms in which to check for staleness.\n     * Defaults to 1, which means that the current time is checked\n     * at most once per millisecond.\n     *\n     * Set to 0 to check the current time every time staleness is tested.\n     * (This reduces performance, and is theoretically unnecessary.)\n     *\n     * Setting this to a higher value will improve performance somewhat\n     * while using ttl tracking, albeit at the expense of keeping stale\n     * items around a bit longer than their TTLs would indicate.\n     *\n     * @default 1\n     */\n    ttlResolution?: Milliseconds\n\n    /**\n     * Preemptively remove stale items from the cache.\n     *\n     * Note that this may *significantly* degrade performance, especially if\n     * the cache is storing a large number of items. It is almost always best\n     * to just leave the stale items in the cache, and let them fall out as new\n     * items are added.\n     *\n     * Note that this means that {@link OptionsBase.allowStale} is a bit\n     * pointless, as stale items will be deleted almost as soon as they\n     * expire.\n     *\n     * Use with caution!\n     */\n    ttlAutopurge?: boolean\n\n    /**\n     * When using time-expiring entries with `ttl`, setting this to `true` will\n     * make each item's age reset to 0 whenever it is retrieved from cache with\n     * {@link LRUCache#get}, causing it to not expire. (It can still fall out\n     * of cache based on recency of use, of course.)\n     *\n     * Has no effect if {@link OptionsBase.ttl} is not set.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     */\n    updateAgeOnGet?: boolean\n\n    /**\n     * When using time-expiring entries with `ttl`, setting this to `true` will\n     * make each item's age reset to 0 whenever its presence in the cache is\n     * checked with {@link LRUCache#has}, causing it to not expire. (It can\n     * still fall out of cache based on recency of use, of course.)\n     *\n     * Has no effect if {@link OptionsBase.ttl} is not set.\n     */\n    updateAgeOnHas?: boolean\n\n    /**\n     * Allow {@link LRUCache#get} and {@link LRUCache#fetch} calls to return\n     * stale data, if available.\n     *\n     * By default, if you set `ttl`, stale items will only be deleted from the\n     * cache when you `get(key)`. That is, it's not preemptively pruning items,\n     * unless {@link OptionsBase.ttlAutopurge} is set.\n     *\n     * If you set `allowStale:true`, it'll return the stale value *as well as*\n     * deleting it. If you don't set this, then it'll return `undefined` when\n     * you try to get a stale entry.\n     *\n     * Note that when a stale entry is fetched, _even if it is returned due to\n     * `allowStale` being set_, it is removed from the cache immediately. You\n     * can suppress this behavior by setting\n     * {@link OptionsBase.noDeleteOnStaleGet}, either in the constructor, or in\n     * the options provided to {@link LRUCache#get}.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     * The `cache.has()` method will always return `false` for stale items.\n     *\n     * Only relevant if a ttl is set.\n     */\n    allowStale?: boolean\n\n    /**\n     * Function that is called on items when they are dropped from the\n     * cache, as `dispose(value, key, reason)`.\n     *\n     * This can be handy if you want to close file descriptors or do\n     * other cleanup tasks when items are no longer stored in the cache.\n     *\n     * **NOTE**: It is called _before_ the item has been fully removed\n     * from the cache, so if you want to put it right back in, you need\n     * to wait until the next tick. If you try to add it back in during\n     * the `dispose()` function call, it will break things in subtle and\n     * weird ways.\n     *\n     * Unlike several other options, this may _not_ be overridden by\n     * passing an option to `set()`, for performance reasons.\n     *\n     * The `reason` will be one of the following strings, corresponding\n     * to the reason for the item's deletion:\n     *\n     * - `evict` Item was evicted to make space for a new addition\n     * - `set` Item was overwritten by a new value\n     * - `expire` Item expired its TTL\n     * - `fetch` Item was deleted due to a failed or aborted fetch, or a\n     *   fetchMethod returning `undefined.\n     * - `delete` Item was removed by explicit `cache.delete(key)`,\n     *   `cache.clear()`, or `cache.set(key, undefined)`.\n     */\n    dispose?: Disposer<K, V>\n\n    /**\n     * The same as {@link OptionsBase.dispose}, but called *after* the entry\n     * is completely removed and the cache is once again in a clean state.\n     *\n     * It is safe to add an item right back into the cache at this point.\n     * However, note that it is *very* easy to inadvertently create infinite\n     * recursion this way.\n     */\n    disposeAfter?: Disposer<K, V>\n\n    /**\n     * Set to true to suppress calling the\n     * {@link OptionsBase.dispose} function if the entry key is\n     * still accessible within the cache.\n     *\n     * This may be overridden by passing an options object to\n     * {@link LRUCache#set}.\n     *\n     * Only relevant if `dispose` or `disposeAfter` are set.\n     */\n    noDisposeOnSet?: boolean\n\n    /**\n     * Boolean flag to tell the cache to not update the TTL when setting a new\n     * value for an existing key (ie, when updating a value rather than\n     * inserting a new value).  Note that the TTL value is _always_ set (if\n     * provided) when adding a new entry into the cache.\n     *\n     * Has no effect if a {@link OptionsBase.ttl} is not set.\n     *\n     * May be passed as an option to {@link LRUCache#set}.\n     */\n    noUpdateTTL?: boolean\n\n    /**\n     * Set to a positive integer to track the sizes of items added to the\n     * cache, and automatically evict items in order to stay below this size.\n     * Note that this may result in fewer than `max` items being stored.\n     *\n     * Attempting to add an item to the cache whose calculated size is greater\n     * that this amount will be a no-op. The item will not be cached, and no\n     * other items will be evicted.\n     *\n     * Optional, must be a positive integer if provided.\n     *\n     * Sets `maxEntrySize` to the same value, unless a different value is\n     * provided for `maxEntrySize`.\n     *\n     * At least one of `max`, `maxSize`, or `TTL` is required. This must be a\n     * positive integer if set.\n     *\n     * Even if size tracking is enabled, **it is strongly recommended to set a\n     * `max` to prevent unbounded growth of the cache.**\n     *\n     * Note also that size tracking can negatively impact performance,\n     * though for most cases, only minimally.\n     */\n    maxSize?: Size\n\n    /**\n     * The maximum allowed size for any single item in the cache.\n     *\n     * If a larger item is passed to {@link LRUCache#set} or returned by a\n     * {@link OptionsBase.fetchMethod} or {@link OptionsBase.memoMethod}, then\n     * it will not be stored in the cache.\n     *\n     * Attempting to add an item whose calculated size is greater than\n     * this amount will not cache the item or evict any old items, but\n     * WILL delete an existing value if one is already present.\n     *\n     * Optional, must be a positive integer if provided. Defaults to\n     * the value of `maxSize` if provided.\n     */\n    maxEntrySize?: Size\n\n    /**\n     * A function that returns a number indicating the item's size.\n     *\n     * Requires {@link OptionsBase.maxSize} to be set.\n     *\n     * If not provided, and {@link OptionsBase.maxSize} or\n     * {@link OptionsBase.maxEntrySize} are set, then all\n     * {@link LRUCache#set} calls **must** provide an explicit\n     * {@link SetOptions.size} or sizeCalculation param.\n     */\n    sizeCalculation?: SizeCalculator<K, V>\n\n    /**\n     * Method that provides the implementation for {@link LRUCache#fetch}\n     *\n     * ```ts\n     * fetchMethod(key, staleValue, { signal, options, context })\n     * ```\n     *\n     * If `fetchMethod` is not provided, then `cache.fetch(key)` is equivalent\n     * to `Promise.resolve(cache.get(key))`.\n     *\n     * If at any time, `signal.aborted` is set to `true`, or if the\n     * `signal.onabort` method is called, or if it emits an `'abort'` event\n     * which you can listen to with `addEventListener`, then that means that\n     * the fetch should be abandoned. This may be passed along to async\n     * functions aware of AbortController/AbortSignal behavior.\n     *\n     * The `fetchMethod` should **only** return `undefined` or a Promise\n     * resolving to `undefined` if the AbortController signaled an `abort`\n     * event. In all other cases, it should return or resolve to a value\n     * suitable for adding to the cache.\n     *\n     * The `options` object is a union of the options that may be provided to\n     * `set()` and `get()`. If they are modified, then that will result in\n     * modifying the settings to `cache.set()` when the value is resolved, and\n     * in the case of\n     * {@link OptionsBase.noDeleteOnFetchRejection} and\n     * {@link OptionsBase.allowStaleOnFetchRejection}, the handling of\n     * `fetchMethod` failures.\n     *\n     * For example, a DNS cache may update the TTL based on the value returned\n     * from a remote DNS server by changing `options.ttl` in the `fetchMethod`.\n     */\n    fetchMethod?: Fetcher<K, V, FC>\n\n    /**\n     * Method that provides the implementation for {@link LRUCache#memo}\n     */\n    memoMethod?: Memoizer<K, V, FC>\n\n    /**\n     * Set to true to suppress the deletion of stale data when a\n     * {@link OptionsBase.fetchMethod} returns a rejected promise.\n     */\n    noDeleteOnFetchRejection?: boolean\n\n    /**\n     * Do not delete stale items when they are retrieved with\n     * {@link LRUCache#get}.\n     *\n     * Note that the `get` return value will still be `undefined`\n     * unless {@link OptionsBase.allowStale} is true.\n     *\n     * When using time-expiring entries with `ttl`, by default stale\n     * items will be removed from the cache when the key is accessed\n     * with `cache.get()`.\n     *\n     * Setting this option will cause stale items to remain in the cache, until\n     * they are explicitly deleted with `cache.delete(key)`, or retrieved with\n     * `noDeleteOnStaleGet` set to `false`.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     *\n     * Only relevant if a ttl is used.\n     */\n    noDeleteOnStaleGet?: boolean\n\n    /**\n     * Set to true to allow returning stale data when a\n     * {@link OptionsBase.fetchMethod} throws an error or returns a rejected\n     * promise.\n     *\n     * This differs from using {@link OptionsBase.allowStale} in that stale\n     * data will ONLY be returned in the case that the {@link LRUCache#fetch}\n     * fails, not any other times.\n     *\n     * If a `fetchMethod` fails, and there is no stale value available, the\n     * `fetch()` will resolve to `undefined`. Ie, all `fetchMethod` errors are\n     * suppressed.\n     *\n     * Implies `noDeleteOnFetchRejection`.\n     *\n     * This may be set in calls to `fetch()`, or defaulted on the constructor,\n     * or overridden by modifying the options object in the `fetchMethod`.\n     */\n    allowStaleOnFetchRejection?: boolean\n\n    /**\n     * Set to true to return a stale value from the cache when the\n     * `AbortSignal` passed to the {@link OptionsBase.fetchMethod} dispatches\n     * an `'abort'` event, whether user-triggered, or due to internal cache\n     * behavior.\n     *\n     * Unless {@link OptionsBase.ignoreFetchAbort} is also set, the underlying\n     * {@link OptionsBase.fetchMethod} will still be considered canceled, and\n     * any value it returns will be ignored and not cached.\n     *\n     * Caveat: since fetches are aborted when a new value is explicitly\n     * set in the cache, this can lead to fetch returning a stale value,\n     * since that was the fallback value _at the moment the `fetch()` was\n     * initiated_, even though the new updated value is now present in\n     * the cache.\n     *\n     * For example:\n     *\n     * ```ts\n     * const cache = new LRUCache<string, any>({\n     *   ttl: 100,\n     *   fetchMethod: async (url, oldValue, { signal }) =>  {\n     *     const res = await fetch(url, { signal })\n     *     return await res.json()\n     *   }\n     * })\n     * cache.set('https://example.com/', { some: 'data' })\n     * // 100ms go by...\n     * const result = cache.fetch('https://example.com/')\n     * cache.set('https://example.com/', { other: 'thing' })\n     * console.log(await result) // { some: 'data' }\n     * console.log(cache.get('https://example.com/')) // { other: 'thing' }\n     * ```\n     */\n    allowStaleOnFetchAbort?: boolean\n\n    /**\n     * Set to true to ignore the `abort` event emitted by the `AbortSignal`\n     * object passed to {@link OptionsBase.fetchMethod}, and still cache the\n     * resulting resolution value, as long as it is not `undefined`.\n     *\n     * When used on its own, this means aborted {@link LRUCache#fetch} calls\n     * are not immediately resolved or rejected when they are aborted, and\n     * instead take the full time to await.\n     *\n     * When used with {@link OptionsBase.allowStaleOnFetchAbort}, aborted\n     * {@link LRUCache#fetch} calls will resolve immediately to their stale\n     * cached value or `undefined`, and will continue to process and eventually\n     * update the cache when they resolve, as long as the resulting value is\n     * not `undefined`, thus supporting a \"return stale on timeout while\n     * refreshing\" mechanism by passing `AbortSignal.timeout(n)` as the signal.\n     *\n     * For example:\n     *\n     * ```ts\n     * const c = new LRUCache({\n     *   ttl: 100,\n     *   ignoreFetchAbort: true,\n     *   allowStaleOnFetchAbort: true,\n     *   fetchMethod: async (key, oldValue, { signal }) => {\n     *     // note: do NOT pass the signal to fetch()!\n     *     // let's say this fetch can take a long time.\n     *     const res = await fetch(`https://slow-backend-server/${key}`)\n     *     return await res.json()\n     *   },\n     * })\n     *\n     * // this will return the stale value after 100ms, while still\n     * // updating in the background for next time.\n     * const val = await c.fetch('key', { signal: AbortSignal.timeout(100) })\n     * ```\n     *\n     * **Note**: regardless of this setting, an `abort` event _is still\n     * emitted on the `AbortSignal` object_, so may result in invalid results\n     * when passed to other underlying APIs that use AbortSignals.\n     *\n     * This may be overridden in the {@link OptionsBase.fetchMethod} or the\n     * call to {@link LRUCache#fetch}.\n     */\n    ignoreFetchAbort?: boolean\n  }\n\n  export interface OptionsMaxLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    max: Count\n  }\n  export interface OptionsTTLLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    ttl: Milliseconds\n    ttlAutopurge: boolean\n  }\n  export interface OptionsSizeLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    maxSize: Size\n  }\n\n  /**\n   * The valid safe options for the {@link LRUCache} constructor\n   */\n  export type Options<K, V, FC> =\n    | OptionsMaxLimit<K, V, FC>\n    | OptionsSizeLimit<K, V, FC>\n    | OptionsTTLLimit<K, V, FC>\n\n  /**\n   * Entry objects used by {@link LRUCache#load} and {@link LRUCache#dump},\n   * and returned by {@link LRUCache#info}.\n   */\n  export interface Entry<V> {\n    value: V\n    ttl?: Milliseconds\n    size?: Size\n    start?: Milliseconds\n  }\n}\n\n/**\n * Default export, the thing you're using this module to get.\n *\n * The `K` and `V` types define the key and value types, respectively. The\n * optional `FC` type defines the type of the `context` object passed to\n * `cache.fetch()` and `cache.memo()`.\n *\n * Keys and values **must not** be `null` or `undefined`.\n *\n * All properties from the options object (with the exception of `max`,\n * `maxSize`, `fetchMethod`, `memoMethod`, `dispose` and `disposeAfter`) are\n * added as normal public members. (The listed options are read-only getters.)\n *\n * Changing any of these will alter the defaults for subsequent method calls.\n */\nexport class LRUCache<K extends {}, V extends {}, FC = unknown>\n  implements Map<K, V>\n{\n  // options that cannot be changed without disaster\n  readonly #max: LRUCache.Count\n  readonly #maxSize: LRUCache.Size\n  readonly #dispose?: LRUCache.Disposer<K, V>\n  readonly #disposeAfter?: LRUCache.Disposer<K, V>\n  readonly #fetchMethod?: LRUCache.Fetcher<K, V, FC>\n  readonly #memoMethod?: LRUCache.Memoizer<K, V, FC>\n\n  /**\n   * {@link LRUCache.OptionsBase.ttl}\n   */\n  ttl: LRUCache.Milliseconds\n\n  /**\n   * {@link LRUCache.OptionsBase.ttlResolution}\n   */\n  ttlResolution: LRUCache.Milliseconds\n  /**\n   * {@link LRUCache.OptionsBase.ttlAutopurge}\n   */\n  ttlAutopurge: boolean\n  /**\n   * {@link LRUCache.OptionsBase.updateAgeOnGet}\n   */\n  updateAgeOnGet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.updateAgeOnHas}\n   */\n  updateAgeOnHas: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStale}\n   */\n  allowStale: boolean\n\n  /**\n   * {@link LRUCache.OptionsBase.noDisposeOnSet}\n   */\n  noDisposeOnSet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.noUpdateTTL}\n   */\n  noUpdateTTL: boolean\n  /**\n   * {@link LRUCache.OptionsBase.maxEntrySize}\n   */\n  maxEntrySize: LRUCache.Size\n  /**\n   * {@link LRUCache.OptionsBase.sizeCalculation}\n   */\n  sizeCalculation?: LRUCache.SizeCalculator<K, V>\n  /**\n   * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n   */\n  noDeleteOnFetchRejection: boolean\n  /**\n   * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n   */\n  noDeleteOnStaleGet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n   */\n  allowStaleOnFetchAbort: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n   */\n  allowStaleOnFetchRejection: boolean\n  /**\n   * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n   */\n  ignoreFetchAbort: boolean\n\n  // computed properties\n  #size: LRUCache.Count\n  #calculatedSize: LRUCache.Size\n  #keyMap: Map<K, Index>\n  #keyList: (K | undefined)[]\n  #valList: (V | BackgroundFetch<V> | undefined)[]\n  #next: NumberArray\n  #prev: NumberArray\n  #head: Index\n  #tail: Index\n  #free: StackLike\n  #disposed?: DisposeTask<K, V>[]\n  #sizes?: ZeroArray\n  #starts?: ZeroArray\n  #ttls?: ZeroArray\n\n  #hasDispose: boolean\n  #hasFetchMethod: boolean\n  #hasDisposeAfter: boolean\n\n  /**\n   * Do not call this method unless you need to inspect the\n   * inner workings of the cache.  If anything returned by this\n   * object is modified in any way, strange breakage may occur.\n   *\n   * These fields are private for a reason!\n   *\n   * @internal\n   */\n  static unsafeExposeInternals<\n    K extends {},\n    V extends {},\n    FC extends unknown = unknown\n  >(c: LRUCache<K, V, FC>) {\n    return {\n      // properties\n      starts: c.#starts,\n      ttls: c.#ttls,\n      sizes: c.#sizes,\n      keyMap: c.#keyMap as Map<K, number>,\n      keyList: c.#keyList,\n      valList: c.#valList,\n      next: c.#next,\n      prev: c.#prev,\n      get head() {\n        return c.#head\n      },\n      get tail() {\n        return c.#tail\n      },\n      free: c.#free,\n      // methods\n      isBackgroundFetch: (p: any) => c.#isBackgroundFetch(p),\n      backgroundFetch: (\n        k: K,\n        index: number | undefined,\n        options: LRUCache.FetchOptions<K, V, FC>,\n        context: any\n      ): BackgroundFetch<V> =>\n        c.#backgroundFetch(\n          k,\n          index as Index | undefined,\n          options,\n          context\n        ),\n      moveToTail: (index: number): void =>\n        c.#moveToTail(index as Index),\n      indexes: (options?: { allowStale: boolean }) =>\n        c.#indexes(options),\n      rindexes: (options?: { allowStale: boolean }) =>\n        c.#rindexes(options),\n      isStale: (index: number | undefined) =>\n        c.#isStale(index as Index),\n    }\n  }\n\n  // Protected read-only members\n\n  /**\n   * {@link LRUCache.OptionsBase.max} (read-only)\n   */\n  get max(): LRUCache.Count {\n    return this.#max\n  }\n  /**\n   * {@link LRUCache.OptionsBase.maxSize} (read-only)\n   */\n  get maxSize(): LRUCache.Count {\n    return this.#maxSize\n  }\n  /**\n   * The total computed size of items in the cache (read-only)\n   */\n  get calculatedSize(): LRUCache.Size {\n    return this.#calculatedSize\n  }\n  /**\n   * The number of items stored in the cache (read-only)\n   */\n  get size(): LRUCache.Count {\n    return this.#size\n  }\n  /**\n   * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n   */\n  get fetchMethod(): LRUCache.Fetcher<K, V, FC> | undefined {\n    return this.#fetchMethod\n  }\n  get memoMethod(): LRUCache.Memoizer<K, V, FC> | undefined {\n    return this.#memoMethod\n  }\n  /**\n   * {@link LRUCache.OptionsBase.dispose} (read-only)\n   */\n  get dispose() {\n    return this.#dispose\n  }\n  /**\n   * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n   */\n  get disposeAfter() {\n    return this.#disposeAfter\n  }\n\n  constructor(\n    options: LRUCache.Options<K, V, FC> | LRUCache<K, V, FC>\n  ) {\n    const {\n      max = 0,\n      ttl,\n      ttlResolution = 1,\n      ttlAutopurge,\n      updateAgeOnGet,\n      updateAgeOnHas,\n      allowStale,\n      dispose,\n      disposeAfter,\n      noDisposeOnSet,\n      noUpdateTTL,\n      maxSize = 0,\n      maxEntrySize = 0,\n      sizeCalculation,\n      fetchMethod,\n      memoMethod,\n      noDeleteOnFetchRejection,\n      noDeleteOnStaleGet,\n      allowStaleOnFetchRejection,\n      allowStaleOnFetchAbort,\n      ignoreFetchAbort,\n    } = options\n\n    if (max !== 0 && !isPosInt(max)) {\n      throw new TypeError('max option must be a nonnegative integer')\n    }\n\n    const UintArray = max ? getUintArray(max) : Array\n    if (!UintArray) {\n      throw new Error('invalid max value: ' + max)\n    }\n\n    this.#max = max\n    this.#maxSize = maxSize\n    this.maxEntrySize = maxEntrySize || this.#maxSize\n    this.sizeCalculation = sizeCalculation\n    if (this.sizeCalculation) {\n      if (!this.#maxSize && !this.maxEntrySize) {\n        throw new TypeError(\n          'cannot set sizeCalculation without setting maxSize or maxEntrySize'\n        )\n      }\n      if (typeof this.sizeCalculation !== 'function') {\n        throw new TypeError('sizeCalculation set to non-function')\n      }\n    }\n\n    if (\n      memoMethod !== undefined &&\n      typeof memoMethod !== 'function'\n    ) {\n      throw new TypeError('memoMethod must be a function if defined')\n    }\n    this.#memoMethod = memoMethod\n\n    if (\n      fetchMethod !== undefined &&\n      typeof fetchMethod !== 'function'\n    ) {\n      throw new TypeError(\n        'fetchMethod must be a function if specified'\n      )\n    }\n    this.#fetchMethod = fetchMethod\n    this.#hasFetchMethod = !!fetchMethod\n\n    this.#keyMap = new Map()\n    this.#keyList = new Array(max).fill(undefined)\n    this.#valList = new Array(max).fill(undefined)\n    this.#next = new UintArray(max)\n    this.#prev = new UintArray(max)\n    this.#head = 0 as Index\n    this.#tail = 0 as Index\n    this.#free = Stack.create(max)\n    this.#size = 0\n    this.#calculatedSize = 0\n\n    if (typeof dispose === 'function') {\n      this.#dispose = dispose\n    }\n    if (typeof disposeAfter === 'function') {\n      this.#disposeAfter = disposeAfter\n      this.#disposed = []\n    } else {\n      this.#disposeAfter = undefined\n      this.#disposed = undefined\n    }\n    this.#hasDispose = !!this.#dispose\n    this.#hasDisposeAfter = !!this.#disposeAfter\n\n    this.noDisposeOnSet = !!noDisposeOnSet\n    this.noUpdateTTL = !!noUpdateTTL\n    this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection\n    this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection\n    this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort\n    this.ignoreFetchAbort = !!ignoreFetchAbort\n\n    // NB: maxEntrySize is set to maxSize if it's set\n    if (this.maxEntrySize !== 0) {\n      if (this.#maxSize !== 0) {\n        if (!isPosInt(this.#maxSize)) {\n          throw new TypeError(\n            'maxSize must be a positive integer if specified'\n          )\n        }\n      }\n      if (!isPosInt(this.maxEntrySize)) {\n        throw new TypeError(\n          'maxEntrySize must be a positive integer if specified'\n        )\n      }\n      this.#initializeSizeTracking()\n    }\n\n    this.allowStale = !!allowStale\n    this.noDeleteOnStaleGet = !!noDeleteOnStaleGet\n    this.updateAgeOnGet = !!updateAgeOnGet\n    this.updateAgeOnHas = !!updateAgeOnHas\n    this.ttlResolution =\n      isPosInt(ttlResolution) || ttlResolution === 0\n        ? ttlResolution\n        : 1\n    this.ttlAutopurge = !!ttlAutopurge\n    this.ttl = ttl || 0\n    if (this.ttl) {\n      if (!isPosInt(this.ttl)) {\n        throw new TypeError(\n          'ttl must be a positive integer if specified'\n        )\n      }\n      this.#initializeTTLTracking()\n    }\n\n    // do not allow completely unbounded caches\n    if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n      throw new TypeError(\n        'At least one of max, maxSize, or ttl is required'\n      )\n    }\n    if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n      const code = 'LRU_CACHE_UNBOUNDED'\n      if (shouldWarn(code)) {\n        warned.add(code)\n        const msg =\n          'TTL caching without ttlAutopurge, max, or maxSize can ' +\n          'result in unbounded memory consumption.'\n        emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache)\n      }\n    }\n  }\n\n  /**\n   * Return the number of ms left in the item's TTL. If item is not in cache,\n   * returns `0`. Returns `Infinity` if item is in cache without a defined TTL.\n   */\n  getRemainingTTL(key: K) {\n    return this.#keyMap.has(key) ? Infinity : 0\n  }\n\n  #initializeTTLTracking() {\n    const ttls = new ZeroArray(this.#max)\n    const starts = new ZeroArray(this.#max)\n    this.#ttls = ttls\n    this.#starts = starts\n\n    this.#setItemTTL = (index, ttl, start = perf.now()) => {\n      starts[index] = ttl !== 0 ? start : 0\n      ttls[index] = ttl\n      if (ttl !== 0 && this.ttlAutopurge) {\n        const t = setTimeout(() => {\n          if (this.#isStale(index)) {\n            this.#delete(this.#keyList[index] as K, 'expire')\n          }\n        }, ttl + 1)\n        // unref() not supported on all platforms\n        /* c8 ignore start */\n        if (t.unref) {\n          t.unref()\n        }\n        /* c8 ignore stop */\n      }\n    }\n\n    this.#updateItemAge = index => {\n      starts[index] = ttls[index] !== 0 ? perf.now() : 0\n    }\n\n    this.#statusTTL = (status, index) => {\n      if (ttls[index]) {\n        const ttl = ttls[index]\n        const start = starts[index]\n        /* c8 ignore next */\n        if (!ttl || !start) return\n        status.ttl = ttl\n        status.start = start\n        status.now = cachedNow || getNow()\n        const age = status.now - start\n        status.remainingTTL = ttl - age\n      }\n    }\n\n    // debounce calls to perf.now() to 1s so we're not hitting\n    // that costly call repeatedly.\n    let cachedNow = 0\n    const getNow = () => {\n      const n = perf.now()\n      if (this.ttlResolution > 0) {\n        cachedNow = n\n        const t = setTimeout(\n          () => (cachedNow = 0),\n          this.ttlResolution\n        )\n        // not available on all platforms\n        /* c8 ignore start */\n        if (t.unref) {\n          t.unref()\n        }\n        /* c8 ignore stop */\n      }\n      return n\n    }\n\n    this.getRemainingTTL = key => {\n      const index = this.#keyMap.get(key)\n      if (index === undefined) {\n        return 0\n      }\n      const ttl = ttls[index]\n      const start = starts[index]\n      if (!ttl || !start) {\n        return Infinity\n      }\n      const age = (cachedNow || getNow()) - start\n      return ttl - age\n    }\n\n    this.#isStale = index => {\n      const s = starts[index]\n      const t = ttls[index]\n      return !!t && !!s && (cachedNow || getNow()) - s > t\n    }\n  }\n\n  // conditionally set private methods related to TTL\n  #updateItemAge: (index: Index) => void = () => {}\n  #statusTTL: (status: LRUCache.Status<V>, index: Index) => void =\n    () => {}\n  #setItemTTL: (\n    index: Index,\n    ttl: LRUCache.Milliseconds,\n    start?: LRUCache.Milliseconds\n    // ignore because we never call this if we're not already in TTL mode\n    /* c8 ignore start */\n  ) => void = () => {}\n  /* c8 ignore stop */\n\n  #isStale: (index: Index) => boolean = () => false\n\n  #initializeSizeTracking() {\n    const sizes = new ZeroArray(this.#max)\n    this.#calculatedSize = 0\n    this.#sizes = sizes\n    this.#removeItemSize = index => {\n      this.#calculatedSize -= sizes[index] as number\n      sizes[index] = 0\n    }\n    this.#requireSize = (k, v, size, sizeCalculation) => {\n      // provisionally accept background fetches.\n      // actual value size will be checked when they return.\n      if (this.#isBackgroundFetch(v)) {\n        return 0\n      }\n      if (!isPosInt(size)) {\n        if (sizeCalculation) {\n          if (typeof sizeCalculation !== 'function') {\n            throw new TypeError('sizeCalculation must be a function')\n          }\n          size = sizeCalculation(v, k)\n          if (!isPosInt(size)) {\n            throw new TypeError(\n              'sizeCalculation return invalid (expect positive integer)'\n            )\n          }\n        } else {\n          throw new TypeError(\n            'invalid size value (must be positive integer). ' +\n              'When maxSize or maxEntrySize is used, sizeCalculation ' +\n              'or size must be set.'\n          )\n        }\n      }\n      return size\n    }\n    this.#addItemSize = (\n      index: Index,\n      size: LRUCache.Size,\n      status?: LRUCache.Status<V>\n    ) => {\n      sizes[index] = size\n      if (this.#maxSize) {\n        const maxSize = this.#maxSize - (sizes[index] as number)\n        while (this.#calculatedSize > maxSize) {\n          this.#evict(true)\n        }\n      }\n      this.#calculatedSize += sizes[index] as number\n      if (status) {\n        status.entrySize = size\n        status.totalCalculatedSize = this.#calculatedSize\n      }\n    }\n  }\n\n  #removeItemSize: (index: Index) => void = _i => {}\n  #addItemSize: (\n    index: Index,\n    size: LRUCache.Size,\n    status?: LRUCache.Status<V>\n  ) => void = (_i, _s, _st) => {}\n  #requireSize: (\n    k: K,\n    v: V | BackgroundFetch<V>,\n    size?: LRUCache.Size,\n    sizeCalculation?: LRUCache.SizeCalculator<K, V>\n  ) => LRUCache.Size = (\n    _k: K,\n    _v: V | BackgroundFetch<V>,\n    size?: LRUCache.Size,\n    sizeCalculation?: LRUCache.SizeCalculator<K, V>\n  ) => {\n    if (size || sizeCalculation) {\n      throw new TypeError(\n        'cannot set size without setting maxSize or maxEntrySize on cache'\n      )\n    }\n    return 0\n  };\n\n  *#indexes({ allowStale = this.allowStale } = {}) {\n    if (this.#size) {\n      for (let i = this.#tail; true; ) {\n        if (!this.#isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.#isStale(i)) {\n          yield i\n        }\n        if (i === this.#head) {\n          break\n        } else {\n          i = this.#prev[i] as Index\n        }\n      }\n    }\n  }\n\n  *#rindexes({ allowStale = this.allowStale } = {}) {\n    if (this.#size) {\n      for (let i = this.#head; true; ) {\n        if (!this.#isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.#isStale(i)) {\n          yield i\n        }\n        if (i === this.#tail) {\n          break\n        } else {\n          i = this.#next[i] as Index\n        }\n      }\n    }\n  }\n\n  #isValidIndex(index: Index) {\n    return (\n      index !== undefined &&\n      this.#keyMap.get(this.#keyList[index] as K) === index\n    )\n  }\n\n  /**\n   * Return a generator yielding `[key, value]` pairs,\n   * in order from most recently used to least recently used.\n   */\n  *entries() {\n    for (const i of this.#indexes()) {\n      if (\n        this.#valList[i] !== undefined &&\n        this.#keyList[i] !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield [this.#keyList[i], this.#valList[i]] as [K, V]\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.entries}\n   *\n   * Return a generator yielding `[key, value]` pairs,\n   * in order from least recently used to most recently used.\n   */\n  *rentries() {\n    for (const i of this.#rindexes()) {\n      if (\n        this.#valList[i] !== undefined &&\n        this.#keyList[i] !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield [this.#keyList[i], this.#valList[i]]\n      }\n    }\n  }\n\n  /**\n   * Return a generator yielding the keys in the cache,\n   * in order from most recently used to least recently used.\n   */\n  *keys() {\n    for (const i of this.#indexes()) {\n      const k = this.#keyList[i]\n      if (\n        k !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield k\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.keys}\n   *\n   * Return a generator yielding the keys in the cache,\n   * in order from least recently used to most recently used.\n   */\n  *rkeys() {\n    for (const i of this.#rindexes()) {\n      const k = this.#keyList[i]\n      if (\n        k !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield k\n      }\n    }\n  }\n\n  /**\n   * Return a generator yielding the values in the cache,\n   * in order from most recently used to least recently used.\n   */\n  *values() {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      if (\n        v !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield this.#valList[i] as V\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.values}\n   *\n   * Return a generator yielding the values in the cache,\n   * in order from least recently used to most recently used.\n   */\n  *rvalues() {\n    for (const i of this.#rindexes()) {\n      const v = this.#valList[i]\n      if (\n        v !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield this.#valList[i]\n      }\n    }\n  }\n\n  /**\n   * Iterating over the cache itself yields the same results as\n   * {@link LRUCache.entries}\n   */\n  [Symbol.iterator]() {\n    return this.entries()\n  }\n\n  /**\n   * A String value that is used in the creation of the default string\n   * description of an object. Called by the built-in method\n   * `Object.prototype.toString`.\n   */\n  [Symbol.toStringTag] = 'LRUCache'\n\n  /**\n   * Find a value for which the supplied fn method returns a truthy value,\n   * similar to `Array.find()`. fn is called as `fn(value, key, cache)`.\n   */\n  find(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => boolean,\n    getOptions: LRUCache.GetOptions<K, V, FC> = {}\n  ) {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v)\n        ? v.__staleWhileFetching\n        : v\n      if (value === undefined) continue\n      if (fn(value, this.#keyList[i] as K, this)) {\n        return this.get(this.#keyList[i] as K, getOptions)\n      }\n    }\n  }\n\n  /**\n   * Call the supplied function on each item in the cache, in order from most\n   * recently used to least recently used.\n   *\n   * `fn` is called as `fn(value, key, cache)`.\n   *\n   * If `thisp` is provided, function will be called in the `this`-context of\n   * the provided object, or the cache if no `thisp` object is provided.\n   *\n   * Does not update age or recenty of use, or iterate over stale values.\n   */\n  forEach(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => any,\n    thisp: any = this\n  ) {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v)\n        ? v.__staleWhileFetching\n        : v\n      if (value === undefined) continue\n      fn.call(thisp, value, this.#keyList[i] as K, this)\n    }\n  }\n\n  /**\n   * The same as {@link LRUCache.forEach} but items are iterated over in\n   * reverse order.  (ie, less recently used items are iterated over first.)\n   */\n  rforEach(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => any,\n    thisp: any = this\n  ) {\n    for (const i of this.#rindexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v)\n        ? v.__staleWhileFetching\n        : v\n      if (value === undefined) continue\n      fn.call(thisp, value, this.#keyList[i] as K, this)\n    }\n  }\n\n  /**\n   * Delete any stale entries. Returns true if anything was removed,\n   * false otherwise.\n   */\n  purgeStale() {\n    let deleted = false\n    for (const i of this.#rindexes({ allowStale: true })) {\n      if (this.#isStale(i)) {\n        this.#delete(this.#keyList[i] as K, 'expire')\n        deleted = true\n      }\n    }\n    return deleted\n  }\n\n  /**\n   * Get the extended info about a given entry, to get its value, size, and\n   * TTL info simultaneously. Returns `undefined` if the key is not present.\n   *\n   * Unlike {@link LRUCache#dump}, which is designed to be portable and survive\n   * serialization, the `start` value is always the current timestamp, and the\n   * `ttl` is a calculated remaining time to live (negative if expired).\n   *\n   * Always returns stale values, if their info is found in the cache, so be\n   * sure to check for expirations (ie, a negative {@link LRUCache.Entry#ttl})\n   * if relevant.\n   */\n  info(key: K): LRUCache.Entry<V> | undefined {\n    const i = this.#keyMap.get(key)\n    if (i === undefined) return undefined\n    const v = this.#valList[i]\n    const value: V | undefined = this.#isBackgroundFetch(v)\n      ? v.__staleWhileFetching\n      : v\n    if (value === undefined) return undefined\n    const entry: LRUCache.Entry<V> = { value }\n    if (this.#ttls && this.#starts) {\n      const ttl = this.#ttls[i]\n      const start = this.#starts[i]\n      if (ttl && start) {\n        const remain = ttl - (perf.now() - start)\n        entry.ttl = remain\n        entry.start = Date.now()\n      }\n    }\n    if (this.#sizes) {\n      entry.size = this.#sizes[i]\n    }\n    return entry\n  }\n\n  /**\n   * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n   * passed to {@link LRLUCache#load}.\n   *\n   * The `start` fields are calculated relative to a portable `Date.now()`\n   * timestamp, even if `performance.now()` is available.\n   *\n   * Stale entries are always included in the `dump`, even if\n   * {@link LRUCache.OptionsBase.allowStale} is false.\n   *\n   * Note: this returns an actual array, not a generator, so it can be more\n   * easily passed around.\n   */\n  dump() {\n    const arr: [K, LRUCache.Entry<V>][] = []\n    for (const i of this.#indexes({ allowStale: true })) {\n      const key = this.#keyList[i]\n      const v = this.#valList[i]\n      const value: V | undefined = this.#isBackgroundFetch(v)\n        ? v.__staleWhileFetching\n        : v\n      if (value === undefined || key === undefined) continue\n      const entry: LRUCache.Entry<V> = { value }\n      if (this.#ttls && this.#starts) {\n        entry.ttl = this.#ttls[i]\n        // always dump the start relative to a portable timestamp\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = perf.now() - (this.#starts[i] as number)\n        entry.start = Math.floor(Date.now() - age)\n      }\n      if (this.#sizes) {\n        entry.size = this.#sizes[i]\n      }\n      arr.unshift([key, entry])\n    }\n    return arr\n  }\n\n  /**\n   * Reset the cache and load in the items in entries in the order listed.\n   *\n   * The shape of the resulting cache may be different if the same options are\n   * not used in both caches.\n   *\n   * The `start` fields are assumed to be calculated relative to a portable\n   * `Date.now()` timestamp, even if `performance.now()` is available.\n   */\n  load(arr: [K, LRUCache.Entry<V>][]) {\n    this.clear()\n    for (const [key, entry] of arr) {\n      if (entry.start) {\n        // entry.start is a portable timestamp, but we may be using\n        // node's performance.now(), so calculate the offset, so that\n        // we get the intended remaining TTL, no matter how long it's\n        // been on ice.\n        //\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = Date.now() - entry.start\n        entry.start = perf.now() - age\n      }\n      this.set(key, entry.value, entry)\n    }\n  }\n\n  /**\n   * Add a value to the cache.\n   *\n   * Note: if `undefined` is specified as a value, this is an alias for\n   * {@link LRUCache#delete}\n   *\n   * Fields on the {@link LRUCache.SetOptions} options param will override\n   * their corresponding values in the constructor options for the scope\n   * of this single `set()` operation.\n   *\n   * If `start` is provided, then that will set the effective start\n   * time for the TTL calculation. Note that this must be a previous\n   * value of `performance.now()` if supported, or a previous value of\n   * `Date.now()` if not.\n   *\n   * Options object may also include `size`, which will prevent\n   * calling the `sizeCalculation` function and just use the specified\n   * number if it is a positive integer, and `noDisposeOnSet` which\n   * will prevent calling a `dispose` function in the case of\n   * overwrites.\n   *\n   * If the `size` (or return value of `sizeCalculation`) for a given\n   * entry is greater than `maxEntrySize`, then the item will not be\n   * added to the cache.\n   *\n   * Will update the recency of the entry.\n   *\n   * If the value is `undefined`, then this is an alias for\n   * `cache.delete(key)`. `undefined` is never stored in the cache.\n   */\n  set(\n    k: K,\n    v: V | BackgroundFetch<V> | undefined,\n    setOptions: LRUCache.SetOptions<K, V, FC> = {}\n  ) {\n    if (v === undefined) {\n      this.delete(k)\n      return this\n    }\n    const {\n      ttl = this.ttl,\n      start,\n      noDisposeOnSet = this.noDisposeOnSet,\n      sizeCalculation = this.sizeCalculation,\n      status,\n    } = setOptions\n    let { noUpdateTTL = this.noUpdateTTL } = setOptions\n\n    const size = this.#requireSize(\n      k,\n      v,\n      setOptions.size || 0,\n      sizeCalculation\n    )\n    // if the item doesn't fit, don't do anything\n    // NB: maxEntrySize set to maxSize by default\n    if (this.maxEntrySize && size > this.maxEntrySize) {\n      if (status) {\n        status.set = 'miss'\n        status.maxEntrySizeExceeded = true\n      }\n      // have to delete, in case something is there already.\n      this.#delete(k, 'set')\n      return this\n    }\n    let index = this.#size === 0 ? undefined : this.#keyMap.get(k)\n    if (index === undefined) {\n      // addition\n      index = (\n        this.#size === 0\n          ? this.#tail\n          : this.#free.length !== 0\n          ? this.#free.pop()\n          : this.#size === this.#max\n          ? this.#evict(false)\n          : this.#size\n      ) as Index\n      this.#keyList[index] = k\n      this.#valList[index] = v\n      this.#keyMap.set(k, index)\n      this.#next[this.#tail] = index\n      this.#prev[index] = this.#tail\n      this.#tail = index\n      this.#size++\n      this.#addItemSize(index, size, status)\n      if (status) status.set = 'add'\n      noUpdateTTL = false\n    } else {\n      // update\n      this.#moveToTail(index)\n      const oldVal = this.#valList[index] as V | BackgroundFetch<V>\n      if (v !== oldVal) {\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n          oldVal.__abortController.abort(new Error('replaced'))\n          const { __staleWhileFetching: s } = oldVal\n          if (s !== undefined && !noDisposeOnSet) {\n            if (this.#hasDispose) {\n              this.#dispose?.(s as V, k, 'set')\n            }\n            if (this.#hasDisposeAfter) {\n              this.#disposed?.push([s as V, k, 'set'])\n            }\n          }\n        } else if (!noDisposeOnSet) {\n          if (this.#hasDispose) {\n            this.#dispose?.(oldVal as V, k, 'set')\n          }\n          if (this.#hasDisposeAfter) {\n            this.#disposed?.push([oldVal as V, k, 'set'])\n          }\n        }\n        this.#removeItemSize(index)\n        this.#addItemSize(index, size, status)\n        this.#valList[index] = v\n        if (status) {\n          status.set = 'replace'\n          const oldValue =\n            oldVal && this.#isBackgroundFetch(oldVal)\n              ? oldVal.__staleWhileFetching\n              : oldVal\n          if (oldValue !== undefined) status.oldValue = oldValue\n        }\n      } else if (status) {\n        status.set = 'update'\n      }\n    }\n    if (ttl !== 0 && !this.#ttls) {\n      this.#initializeTTLTracking()\n    }\n    if (this.#ttls) {\n      if (!noUpdateTTL) {\n        this.#setItemTTL(index, ttl, start)\n      }\n      if (status) this.#statusTTL(status, index)\n    }\n    if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n    return this\n  }\n\n  /**\n   * Evict the least recently used item, returning its value or\n   * `undefined` if cache is empty.\n   */\n  pop(): V | undefined {\n    try {\n      while (this.#size) {\n        const val = this.#valList[this.#head]\n        this.#evict(true)\n        if (this.#isBackgroundFetch(val)) {\n          if (val.__staleWhileFetching) {\n            return val.__staleWhileFetching\n          }\n        } else if (val !== undefined) {\n          return val\n        }\n      }\n    } finally {\n      if (this.#hasDisposeAfter && this.#disposed) {\n        const dt = this.#disposed\n        let task: DisposeTask<K, V> | undefined\n        while ((task = dt?.shift())) {\n          this.#disposeAfter?.(...task)\n        }\n      }\n    }\n  }\n\n  #evict(free: boolean) {\n    const head = this.#head\n    const k = this.#keyList[head] as K\n    const v = this.#valList[head] as V\n    if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n      v.__abortController.abort(new Error('evicted'))\n    } else if (this.#hasDispose || this.#hasDisposeAfter) {\n      if (this.#hasDispose) {\n        this.#dispose?.(v, k, 'evict')\n      }\n      if (this.#hasDisposeAfter) {\n        this.#disposed?.push([v, k, 'evict'])\n      }\n    }\n    this.#removeItemSize(head)\n    // if we aren't about to use the index, then null these out\n    if (free) {\n      this.#keyList[head] = undefined\n      this.#valList[head] = undefined\n      this.#free.push(head)\n    }\n    if (this.#size === 1) {\n      this.#head = this.#tail = 0 as Index\n      this.#free.length = 0\n    } else {\n      this.#head = this.#next[head] as Index\n    }\n    this.#keyMap.delete(k)\n    this.#size--\n    return head\n  }\n\n  /**\n   * Check if a key is in the cache, without updating the recency of use.\n   * Will return false if the item is stale, even though it is technically\n   * in the cache.\n   *\n   * Check if a key is in the cache, without updating the recency of\n   * use. Age is updated if {@link LRUCache.OptionsBase.updateAgeOnHas} is set\n   * to `true` in either the options or the constructor.\n   *\n   * Will return `false` if the item is stale, even though it is technically in\n   * the cache. The difference can be determined (if it matters) by using a\n   * `status` argument, and inspecting the `has` field.\n   *\n   * Will not update item age unless\n   * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n   */\n  has(k: K, hasOptions: LRUCache.HasOptions<K, V, FC> = {}) {\n    const { updateAgeOnHas = this.updateAgeOnHas, status } =\n      hasOptions\n    const index = this.#keyMap.get(k)\n    if (index !== undefined) {\n      const v = this.#valList[index]\n      if (\n        this.#isBackgroundFetch(v) &&\n        v.__staleWhileFetching === undefined\n      ) {\n        return false\n      }\n      if (!this.#isStale(index)) {\n        if (updateAgeOnHas) {\n          this.#updateItemAge(index)\n        }\n        if (status) {\n          status.has = 'hit'\n          this.#statusTTL(status, index)\n        }\n        return true\n      } else if (status) {\n        status.has = 'stale'\n        this.#statusTTL(status, index)\n      }\n    } else if (status) {\n      status.has = 'miss'\n    }\n    return false\n  }\n\n  /**\n   * Like {@link LRUCache#get} but doesn't update recency or delete stale\n   * items.\n   *\n   * Returns `undefined` if the item is stale, unless\n   * {@link LRUCache.OptionsBase.allowStale} is set.\n   */\n  peek(k: K, peekOptions: LRUCache.PeekOptions<K, V, FC> = {}) {\n    const { allowStale = this.allowStale } = peekOptions\n    const index = this.#keyMap.get(k)\n    if (\n      index === undefined ||\n      (!allowStale && this.#isStale(index))\n    ) {\n      return\n    }\n    const v = this.#valList[index]\n    // either stale and allowed, or forcing a refresh of non-stale value\n    return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n  }\n\n  #backgroundFetch(\n    k: K,\n    index: Index | undefined,\n    options: LRUCache.FetchOptions<K, V, FC>,\n    context: any\n  ): BackgroundFetch<V> {\n    const v = index === undefined ? undefined : this.#valList[index]\n    if (this.#isBackgroundFetch(v)) {\n      return v\n    }\n\n    const ac = new AC()\n    const { signal } = options\n    // when/if our AC signals, then stop listening to theirs.\n    signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n      signal: ac.signal,\n    })\n\n    const fetchOpts = {\n      signal: ac.signal,\n      options,\n      context,\n    }\n\n    const cb = (\n      v: V | undefined,\n      updateCache = false\n    ): V | undefined => {\n      const { aborted } = ac.signal\n      const ignoreAbort = options.ignoreFetchAbort && v !== undefined\n      if (options.status) {\n        if (aborted && !updateCache) {\n          options.status.fetchAborted = true\n          options.status.fetchError = ac.signal.reason\n          if (ignoreAbort) options.status.fetchAbortIgnored = true\n        } else {\n          options.status.fetchResolved = true\n        }\n      }\n      if (aborted && !ignoreAbort && !updateCache) {\n        return fetchFail(ac.signal.reason)\n      }\n      // either we didn't abort, and are still here, or we did, and ignored\n      const bf = p as BackgroundFetch<V>\n      if (this.#valList[index as Index] === p) {\n        if (v === undefined) {\n          if (bf.__staleWhileFetching) {\n            this.#valList[index as Index] = bf.__staleWhileFetching\n          } else {\n            this.#delete(k, 'fetch')\n          }\n        } else {\n          if (options.status) options.status.fetchUpdated = true\n          this.set(k, v, fetchOpts.options)\n        }\n      }\n      return v\n    }\n\n    const eb = (er: any) => {\n      if (options.status) {\n        options.status.fetchRejected = true\n        options.status.fetchError = er\n      }\n      return fetchFail(er)\n    }\n\n    const fetchFail = (er: any): V | undefined => {\n      const { aborted } = ac.signal\n      const allowStaleAborted =\n        aborted && options.allowStaleOnFetchAbort\n      const allowStale =\n        allowStaleAborted || options.allowStaleOnFetchRejection\n      const noDelete = allowStale || options.noDeleteOnFetchRejection\n      const bf = p as BackgroundFetch<V>\n      if (this.#valList[index as Index] === p) {\n        // if we allow stale on fetch rejections, then we need to ensure that\n        // the stale value is not removed from the cache when the fetch fails.\n        const del = !noDelete || bf.__staleWhileFetching === undefined\n        if (del) {\n          this.#delete(k, 'fetch')\n        } else if (!allowStaleAborted) {\n          // still replace the *promise* with the stale value,\n          // since we are done with the promise at this point.\n          // leave it untouched if we're still waiting for an\n          // aborted background fetch that hasn't yet returned.\n          this.#valList[index as Index] = bf.__staleWhileFetching\n        }\n      }\n      if (allowStale) {\n        if (options.status && bf.__staleWhileFetching !== undefined) {\n          options.status.returnedStale = true\n        }\n        return bf.__staleWhileFetching\n      } else if (bf.__returned === bf) {\n        throw er\n      }\n    }\n\n    const pcall = (\n      res: (v: V | undefined) => void,\n      rej: (e: any) => void\n    ) => {\n      const fmp = this.#fetchMethod?.(k, v, fetchOpts)\n      if (fmp && fmp instanceof Promise) {\n        fmp.then(v => res(v === undefined ? undefined : v), rej)\n      }\n      // ignored, we go until we finish, regardless.\n      // defer check until we are actually aborting,\n      // so fetchMethod can override.\n      ac.signal.addEventListener('abort', () => {\n        if (\n          !options.ignoreFetchAbort ||\n          options.allowStaleOnFetchAbort\n        ) {\n          res(undefined)\n          // when it eventually resolves, update the cache.\n          if (options.allowStaleOnFetchAbort) {\n            res = v => cb(v, true)\n          }\n        }\n      })\n    }\n\n    if (options.status) options.status.fetchDispatched = true\n    const p = new Promise(pcall).then(cb, eb)\n    const bf: BackgroundFetch<V> = Object.assign(p, {\n      __abortController: ac,\n      __staleWhileFetching: v,\n      __returned: undefined,\n    })\n\n    if (index === undefined) {\n      // internal, don't expose status.\n      this.set(k, bf, { ...fetchOpts.options, status: undefined })\n      index = this.#keyMap.get(k)\n    } else {\n      this.#valList[index] = bf\n    }\n    return bf\n  }\n\n  #isBackgroundFetch(p: any): p is BackgroundFetch<V> {\n    if (!this.#hasFetchMethod) return false\n    const b = p as BackgroundFetch<V>\n    return (\n      !!b &&\n      b instanceof Promise &&\n      b.hasOwnProperty('__staleWhileFetching') &&\n      b.__abortController instanceof AC\n    )\n  }\n\n  /**\n   * Make an asynchronous cached fetch using the\n   * {@link LRUCache.OptionsBase.fetchMethod} function.\n   *\n   * If the value is in the cache and not stale, then the returned\n   * Promise resolves to the value.\n   *\n   * If not in the cache, or beyond its TTL staleness, then\n   * `fetchMethod(key, staleValue, { options, signal, context })` is\n   * called, and the value returned will be added to the cache once\n   * resolved.\n   *\n   * If called with `allowStale`, and an asynchronous fetch is\n   * currently in progress to reload a stale value, then the former\n   * stale value will be returned.\n   *\n   * If called with `forceRefresh`, then the cached item will be\n   * re-fetched, even if it is not stale. However, if `allowStale` is also\n   * set, then the old value will still be returned. This is useful\n   * in cases where you want to force a reload of a cached value. If\n   * a background fetch is already in progress, then `forceRefresh`\n   * has no effect.\n   *\n   * If multiple fetches for the same key are issued, then they will all be\n   * coalesced into a single call to fetchMethod.\n   *\n   * Note that this means that handling options such as\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort},\n   * {@link LRUCache.FetchOptions.signal},\n   * and {@link LRUCache.OptionsBase.allowStaleOnFetchRejection} will be\n   * determined by the FIRST fetch() call for a given key.\n   *\n   * This is a known (fixable) shortcoming which will be addresed on when\n   * someone complains about it, as the fix would involve added complexity and\n   * may not be worth the costs for this edge case.\n   *\n   * If {@link LRUCache.OptionsBase.fetchMethod} is not specified, then this is\n   * effectively an alias for `Promise.resolve(cache.get(key))`.\n   *\n   * When the fetch method resolves to a value, if the fetch has not\n   * been aborted due to deletion, eviction, or being overwritten,\n   * then it is added to the cache using the options provided.\n   *\n   * If the key is evicted or deleted before the `fetchMethod`\n   * resolves, then the AbortSignal passed to the `fetchMethod` will\n   * receive an `abort` event, and the promise returned by `fetch()`\n   * will reject with the reason for the abort.\n   *\n   * If a `signal` is passed to the `fetch()` call, then aborting the\n   * signal will abort the fetch and cause the `fetch()` promise to\n   * reject with the reason provided.\n   *\n   * **Setting `context`**\n   *\n   * If an `FC` type is set to a type other than `unknown`, `void`, or\n   * `undefined` in the {@link LRUCache} constructor, then all\n   * calls to `cache.fetch()` _must_ provide a `context` option. If\n   * set to `undefined` or `void`, then calls to fetch _must not_\n   * provide a `context` option.\n   *\n   * The `context` param allows you to provide arbitrary data that\n   * might be relevant in the course of fetching the data. It is only\n   * relevant for the course of a single `fetch()` operation, and\n   * discarded afterwards.\n   *\n   * **Note: `fetch()` calls are inflight-unique**\n   *\n   * If you call `fetch()` multiple times with the same key value,\n   * then every call after the first will resolve on the same\n   * promise<sup>1</sup>,\n   * _even if they have different settings that would otherwise change\n   * the behavior of the fetch_, such as `noDeleteOnFetchRejection`\n   * or `ignoreFetchAbort`.\n   *\n   * In most cases, this is not a problem (in fact, only fetching\n   * something once is what you probably want, if you're caching in\n   * the first place). If you are changing the fetch() options\n   * dramatically between runs, there's a good chance that you might\n   * be trying to fit divergent semantics into a single object, and\n   * would be better off with multiple cache instances.\n   *\n   * **1**: Ie, they're not the \"same Promise\", but they resolve at\n   * the same time, because they're both waiting on the same\n   * underlying fetchMethod response.\n   */\n\n  fetch(\n    k: K,\n    fetchOptions: unknown extends FC\n      ? LRUCache.FetchOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.FetchOptionsNoContext<K, V>\n      : LRUCache.FetchOptionsWithContext<K, V, FC>\n  ): Promise<undefined | V>\n\n  // this overload not allowed if context is required\n  fetch(\n    k: unknown extends FC\n      ? K\n      : FC extends undefined | void\n      ? K\n      : never,\n    fetchOptions?: unknown extends FC\n      ? LRUCache.FetchOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.FetchOptionsNoContext<K, V>\n      : never\n  ): Promise<undefined | V>\n\n  async fetch(\n    k: K,\n    fetchOptions: LRUCache.FetchOptions<K, V, FC> = {}\n  ): Promise<undefined | V> {\n    const {\n      // get options\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n      // set options\n      ttl = this.ttl,\n      noDisposeOnSet = this.noDisposeOnSet,\n      size = 0,\n      sizeCalculation = this.sizeCalculation,\n      noUpdateTTL = this.noUpdateTTL,\n      // fetch exclusive options\n      noDeleteOnFetchRejection = this.noDeleteOnFetchRejection,\n      allowStaleOnFetchRejection = this.allowStaleOnFetchRejection,\n      ignoreFetchAbort = this.ignoreFetchAbort,\n      allowStaleOnFetchAbort = this.allowStaleOnFetchAbort,\n      context,\n      forceRefresh = false,\n      status,\n      signal,\n    } = fetchOptions\n\n    if (!this.#hasFetchMethod) {\n      if (status) status.fetch = 'get'\n      return this.get(k, {\n        allowStale,\n        updateAgeOnGet,\n        noDeleteOnStaleGet,\n        status,\n      })\n    }\n\n    const options = {\n      allowStale,\n      updateAgeOnGet,\n      noDeleteOnStaleGet,\n      ttl,\n      noDisposeOnSet,\n      size,\n      sizeCalculation,\n      noUpdateTTL,\n      noDeleteOnFetchRejection,\n      allowStaleOnFetchRejection,\n      allowStaleOnFetchAbort,\n      ignoreFetchAbort,\n      status,\n      signal,\n    }\n\n    let index = this.#keyMap.get(k)\n    if (index === undefined) {\n      if (status) status.fetch = 'miss'\n      const p = this.#backgroundFetch(k, index, options, context)\n      return (p.__returned = p)\n    } else {\n      // in cache, maybe already fetching\n      const v = this.#valList[index]\n      if (this.#isBackgroundFetch(v)) {\n        const stale =\n          allowStale && v.__staleWhileFetching !== undefined\n        if (status) {\n          status.fetch = 'inflight'\n          if (stale) status.returnedStale = true\n        }\n        return stale ? v.__staleWhileFetching : (v.__returned = v)\n      }\n\n      // if we force a refresh, that means do NOT serve the cached value,\n      // unless we are already in the process of refreshing the cache.\n      const isStale = this.#isStale(index)\n      if (!forceRefresh && !isStale) {\n        if (status) status.fetch = 'hit'\n        this.#moveToTail(index)\n        if (updateAgeOnGet) {\n          this.#updateItemAge(index)\n        }\n        if (status) this.#statusTTL(status, index)\n        return v\n      }\n\n      // ok, it is stale or a forced refresh, and not already fetching.\n      // refresh the cache.\n      const p = this.#backgroundFetch(k, index, options, context)\n      const hasStale = p.__staleWhileFetching !== undefined\n      const staleVal = hasStale && allowStale\n      if (status) {\n        status.fetch = isStale ? 'stale' : 'refresh'\n        if (staleVal && isStale) status.returnedStale = true\n      }\n      return staleVal ? p.__staleWhileFetching : (p.__returned = p)\n    }\n  }\n\n  /**\n   * In some cases, `cache.fetch()` may resolve to `undefined`, either because\n   * a {@link LRUCache.OptionsBase#fetchMethod} was not provided (turning\n   * `cache.fetch(k)` into just an async wrapper around `cache.get(k)`) or\n   * because `ignoreFetchAbort` was specified (either to the constructor or\n   * in the {@link LRUCache.FetchOptions}). Also, the\n   * {@link OptionsBase.fetchMethod} may return `undefined` or `void`, making\n   * the test even more complicated.\n   *\n   * Because inferring the cases where `undefined` might be returned are so\n   * cumbersome, but testing for `undefined` can also be annoying, this method\n   * can be used, which will reject if `this.fetch()` resolves to undefined.\n   */\n  forceFetch(\n    k: K,\n    fetchOptions: unknown extends FC\n      ? LRUCache.FetchOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.FetchOptionsNoContext<K, V>\n      : LRUCache.FetchOptionsWithContext<K, V, FC>\n  ): Promise<V>\n  // this overload not allowed if context is required\n  forceFetch(\n    k: unknown extends FC\n      ? K\n      : FC extends undefined | void\n      ? K\n      : never,\n    fetchOptions?: unknown extends FC\n      ? LRUCache.FetchOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.FetchOptionsNoContext<K, V>\n      : never\n  ): Promise<V>\n  async forceFetch(\n    k: K,\n    fetchOptions: LRUCache.FetchOptions<K, V, FC> = {}\n  ): Promise<V> {\n    const v = await this.fetch(\n      k,\n      fetchOptions as unknown extends FC\n        ? LRUCache.FetchOptions<K, V, FC>\n        : FC extends undefined | void\n        ? LRUCache.FetchOptionsNoContext<K, V>\n        : LRUCache.FetchOptionsWithContext<K, V, FC>\n    )\n    if (v === undefined) throw new Error('fetch() returned undefined')\n    return v\n  }\n\n  /**\n   * If the key is found in the cache, then this is equivalent to\n   * {@link LRUCache#get}. If not, in the cache, then calculate the value using\n   * the {@link LRUCache.OptionsBase.memoMethod}, and add it to the cache.\n   *\n   * If an `FC` type is set to a type other than `unknown`, `void`, or\n   * `undefined` in the LRUCache constructor, then all calls to `cache.memo()`\n   * _must_ provide a `context` option. If set to `undefined` or `void`, then\n   * calls to memo _must not_ provide a `context` option.\n   *\n   * The `context` param allows you to provide arbitrary data that might be\n   * relevant in the course of fetching the data. It is only relevant for the\n   * course of a single `memo()` operation, and discarded afterwards.\n   */\n  memo(\n    k: K,\n    memoOptions: unknown extends FC\n      ? LRUCache.MemoOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.MemoOptionsNoContext<K, V>\n      : LRUCache.MemoOptionsWithContext<K, V, FC>\n  ): V\n  // this overload not allowed if context is required\n  memo(\n    k: unknown extends FC\n      ? K\n      : FC extends undefined | void\n      ? K\n      : never,\n    memoOptions?: unknown extends FC\n      ? LRUCache.MemoOptions<K, V, FC>\n      : FC extends undefined | void\n      ? LRUCache.MemoOptionsNoContext<K, V>\n      : never\n  ): V\n  memo(k: K, memoOptions: LRUCache.MemoOptions<K, V, FC> = {}) {\n    const memoMethod = this.#memoMethod\n    if (!memoMethod) {\n      throw new Error('no memoMethod provided to constructor')\n    }\n    const { context, forceRefresh, ...options } = memoOptions\n    const v = this.get(k, options)\n    if (!forceRefresh && v !== undefined) return v\n    const vv = memoMethod(k, v, {\n      options,\n      context,\n    } as LRUCache.MemoizerOptions<K, V, FC>)\n    this.set(k, vv, options)\n    return vv\n  }\n\n  /**\n   * Return a value from the cache. Will update the recency of the cache\n   * entry found.\n   *\n   * If the key is not found, get() will return `undefined`.\n   */\n  get(k: K, getOptions: LRUCache.GetOptions<K, V, FC> = {}) {\n    const {\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n      status,\n    } = getOptions\n    const index = this.#keyMap.get(k)\n    if (index !== undefined) {\n      const value = this.#valList[index]\n      const fetching = this.#isBackgroundFetch(value)\n      if (status) this.#statusTTL(status, index)\n      if (this.#isStale(index)) {\n        if (status) status.get = 'stale'\n        // delete only if not an in-flight background fetch\n        if (!fetching) {\n          if (!noDeleteOnStaleGet) {\n            this.#delete(k, 'expire')\n          }\n          if (status && allowStale) status.returnedStale = true\n          return allowStale ? value : undefined\n        } else {\n          if (\n            status &&\n            allowStale &&\n            value.__staleWhileFetching !== undefined\n          ) {\n            status.returnedStale = true\n          }\n          return allowStale ? value.__staleWhileFetching : undefined\n        }\n      } else {\n        if (status) status.get = 'hit'\n        // if we're currently fetching it, we don't actually have it yet\n        // it's not stale, which means this isn't a staleWhileRefetching.\n        // If it's not stale, and fetching, AND has a __staleWhileFetching\n        // value, then that means the user fetched with {forceRefresh:true},\n        // so it's safe to return that value.\n        if (fetching) {\n          return value.__staleWhileFetching\n        }\n        this.#moveToTail(index)\n        if (updateAgeOnGet) {\n          this.#updateItemAge(index)\n        }\n        return value\n      }\n    } else if (status) {\n      status.get = 'miss'\n    }\n  }\n\n  #connect(p: Index, n: Index) {\n    this.#prev[n] = p\n    this.#next[p] = n\n  }\n\n  #moveToTail(index: Index): void {\n    // if tail already, nothing to do\n    // if head, move head to next[index]\n    // else\n    //   move next[prev[index]] to next[index] (head has no prev)\n    //   move prev[next[index]] to prev[index]\n    // prev[index] = tail\n    // next[tail] = index\n    // tail = index\n    if (index !== this.#tail) {\n      if (index === this.#head) {\n        this.#head = this.#next[index] as Index\n      } else {\n        this.#connect(\n          this.#prev[index] as Index,\n          this.#next[index] as Index\n        )\n      }\n      this.#connect(this.#tail, index)\n      this.#tail = index\n    }\n  }\n\n  /**\n   * Deletes a key out of the cache.\n   *\n   * Returns true if the key was deleted, false otherwise.\n   */\n  delete(k: K) {\n    return this.#delete(k, 'delete')\n  }\n\n  #delete(k: K, reason: LRUCache.DisposeReason) {\n    let deleted = false\n    if (this.#size !== 0) {\n      const index = this.#keyMap.get(k)\n      if (index !== undefined) {\n        deleted = true\n        if (this.#size === 1) {\n          this.#clear(reason)\n        } else {\n          this.#removeItemSize(index)\n          const v = this.#valList[index]\n          if (this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('deleted'))\n          } else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n              this.#dispose?.(v as V, k, reason)\n            }\n            if (this.#hasDisposeAfter) {\n              this.#disposed?.push([v as V, k, reason])\n            }\n          }\n          this.#keyMap.delete(k)\n          this.#keyList[index] = undefined\n          this.#valList[index] = undefined\n          if (index === this.#tail) {\n            this.#tail = this.#prev[index] as Index\n          } else if (index === this.#head) {\n            this.#head = this.#next[index] as Index\n          } else {\n            const pi = this.#prev[index] as number\n            this.#next[pi] = this.#next[index] as number\n            const ni = this.#next[index] as number\n            this.#prev[ni] = this.#prev[index] as number\n          }\n          this.#size--\n          this.#free.push(index)\n        }\n      }\n    }\n    if (this.#hasDisposeAfter && this.#disposed?.length) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n    return deleted\n  }\n\n  /**\n   * Clear the cache entirely, throwing away all values.\n   */\n  clear() {\n    return this.#clear('delete')\n  }\n  #clear(reason: LRUCache.DisposeReason) {\n    for (const index of this.#rindexes({ allowStale: true })) {\n      const v = this.#valList[index]\n      if (this.#isBackgroundFetch(v)) {\n        v.__abortController.abort(new Error('deleted'))\n      } else {\n        const k = this.#keyList[index]\n        if (this.#hasDispose) {\n          this.#dispose?.(v as V, k as K, reason)\n        }\n        if (this.#hasDisposeAfter) {\n          this.#disposed?.push([v as V, k as K, reason])\n        }\n      }\n    }\n\n    this.#keyMap.clear()\n    this.#valList.fill(undefined)\n    this.#keyList.fill(undefined)\n    if (this.#ttls && this.#starts) {\n      this.#ttls.fill(0)\n      this.#starts.fill(0)\n    }\n    if (this.#sizes) {\n      this.#sizes.fill(0)\n    }\n    this.#head = 0 as Index\n    this.#tail = 0 as Index\n    this.#free.length = 0\n    this.#calculatedSize = 0\n    this.#size = 0\n    if (this.#hasDisposeAfter && this.#disposed) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n  }\n}\n", "import { injectStyles } from '../injectStyles/dist/vanilla-extract-css-injectStyles.browser.esm.js';\r\nimport { t as transformCss, _ as _objectSpread2, a as _objectWithoutProperties, d as dudupeAndJoinClassList } from './transformCss-830a230d.browser.esm.js';\r\nimport { setAdapterIfNotSet, getIdentOption, appendCss, registerClassName, registerComposition, markCompositionUsed } from '../adapter/dist/vanilla-extract-css-adapter.browser.esm.js';\r\nimport hash from '@emotion/hash';\r\nimport { getAndIncrementRefCounter, getFileScope, hasFileScope } from '../fileScope/dist/vanilla-extract-css-fileScope.browser.esm.js';\r\nimport { LRUCache } from 'lru-cache';\r\nimport { walkObject, get } from '@vanilla-extract/private';\r\nimport cssesc from 'cssesc';\r\nimport { diff } from 'deep-object-diff';\r\nimport pc from 'picocolors';\r\nimport { _ as _taggedTemplateLiteral } from './taggedTemplateLiteral-8e47dbd7.browser.esm.js';\r\nimport dedent from 'dedent';\r\nimport deepmerge from 'deepmerge';\r\nimport 'modern-ahocorasick';\r\nimport 'css-what';\r\nimport 'media-query-parser';\r\n\r\nvar localClassNames = new Set();\r\nvar composedClassLists = [];\r\nvar bufferedCSSObjs = [];\r\nvar browserRuntimeAdapter = {\r\n  appendCss: cssObj => {\r\n    bufferedCSSObjs.push(cssObj);\r\n  },\r\n  registerClassName: className => {\r\n    localClassNames.add(className);\r\n  },\r\n  registerComposition: composition => {\r\n    composedClassLists.push(composition);\r\n  },\r\n  markCompositionUsed: () => {},\r\n  onEndFileScope: fileScope => {\r\n    var css = transformCss({\r\n      localClassNames: Array.from(localClassNames),\r\n      composedClassLists,\r\n      cssObjs: bufferedCSSObjs\r\n    }).join('\\n');\r\n    injectStyles({\r\n      fileScope,\r\n      css\r\n    });\r\n    bufferedCSSObjs = [];\r\n  },\r\n  getIdentOption: () => process.env.NODE_ENV === 'production' ? 'short' : 'debug'\r\n};\r\n{\r\n  setAdapterIfNotSet(browserRuntimeAdapter);\r\n}\r\n\r\nvar getLastSlashBeforeIndex = (path, index) => {\r\n  var pathIndex = index - 1;\r\n  while (pathIndex >= 0) {\r\n    if (path[pathIndex] === '/') {\r\n      return pathIndex;\r\n    }\r\n    pathIndex--;\r\n  }\r\n  return -1;\r\n};\r\n\r\n/**\r\n * Assumptions:\r\n * - The path is always normalized to use posix file separators (/) (see `addFileScope`)\r\n * - The path is always relative to the project root, i.e. there will never be a leading slash (see `addFileScope`)\r\n * - As long as `.css` is there, we have a valid `.css.*` file path, because otherwise there wouldn't\r\n *   be a file scope to begin with\r\n *\r\n * The LRU cache we use can't cache undefined/null values, so we opt to return an empty string,\r\n * rather than using a custom Symbol or something similar.\r\n */\r\nvar _getDebugFileName = path => {\r\n  var file;\r\n  var lastIndexOfDotCss = path.lastIndexOf('.css');\r\n  if (lastIndexOfDotCss === -1) {\r\n    return '';\r\n  }\r\n  var lastSlashIndex = getLastSlashBeforeIndex(path, lastIndexOfDotCss);\r\n  file = path.slice(lastSlashIndex + 1, lastIndexOfDotCss);\r\n\r\n  // There are no slashes, therefore theres no directory to extract\r\n  if (lastSlashIndex === -1) {\r\n    return file;\r\n  }\r\n  var secondLastSlashIndex = getLastSlashBeforeIndex(path, lastSlashIndex - 1);\r\n  // If secondLastSlashIndex is -1, it means that the path looks like `directory/file.css.ts`,\r\n  // in which case dir will still be sliced starting at 0, which is what we want\r\n  var dir = path.slice(secondLastSlashIndex + 1, lastSlashIndex);\r\n  var debugFileName = file !== 'index' ? file : dir;\r\n  return debugFileName;\r\n};\r\nvar memoizedGetDebugFileName = () => {\r\n  var cache = new LRUCache({\r\n    max: 500\r\n  });\r\n  return path => {\r\n    var cachedResult = cache.get(path);\r\n    if (cachedResult) {\r\n      return cachedResult;\r\n    }\r\n    var result = _getDebugFileName(path);\r\n    cache.set(path, result);\r\n    return result;\r\n  };\r\n};\r\nvar getDebugFileName = memoizedGetDebugFileName();\r\n\r\nfunction getDevPrefix(_ref) {\r\n  var {\r\n    debugId,\r\n    debugFileName\r\n  } = _ref;\r\n  var parts = debugId ? [debugId.replace(/\\s/g, '_')] : [];\r\n  if (debugFileName) {\r\n    var {\r\n      filePath\r\n    } = getFileScope();\r\n    var _debugFileName = getDebugFileName(filePath);\r\n\r\n    // debugFileName could be an empty string\r\n    if (_debugFileName) {\r\n      parts.unshift(_debugFileName);\r\n    }\r\n  }\r\n  return parts.join('_');\r\n}\r\nfunction normalizeIdentifier(identifier) {\r\n  return identifier.match(/^[0-9]/) ? \"_\".concat(identifier) : identifier;\r\n}\r\nfunction generateIdentifier(arg) {\r\n  var identOption = getIdentOption();\r\n  var {\r\n    debugId,\r\n    debugFileName = true\r\n  } = _objectSpread2(_objectSpread2({}, typeof arg === 'string' ? {\r\n    debugId: arg\r\n  } : null), typeof arg === 'object' ? arg : null);\r\n\r\n  // Convert ref count to base 36 for optimal hash lengths\r\n  var refCount = getAndIncrementRefCounter().toString(36);\r\n  var {\r\n    filePath,\r\n    packageName\r\n  } = getFileScope();\r\n  var fileScopeHash = hash(packageName ? \"\".concat(packageName).concat(filePath) : filePath);\r\n  var identifier = \"\".concat(fileScopeHash).concat(refCount);\r\n  if (identOption === 'debug') {\r\n    var devPrefix = getDevPrefix({\r\n      debugId,\r\n      debugFileName\r\n    });\r\n    if (devPrefix) {\r\n      identifier = \"\".concat(devPrefix, \"__\").concat(identifier);\r\n    }\r\n    return normalizeIdentifier(identifier);\r\n  }\r\n  if (typeof identOption === 'function') {\r\n    identifier = identOption({\r\n      hash: identifier,\r\n      debugId,\r\n      filePath,\r\n      packageName\r\n    });\r\n    if (!identifier.match(/^[A-Z_][0-9A-Z_-]+$/i)) {\r\n      throw new Error(\"Identifier function returned invalid indentifier: \\\"\".concat(identifier, \"\\\"\"));\r\n    }\r\n    return identifier;\r\n  }\r\n  return normalizeIdentifier(identifier);\r\n}\r\n\r\nvar normaliseObject = obj => walkObject(obj, () => '');\r\nfunction validateContract(contract, tokens) {\r\n  var theDiff = diff(normaliseObject(contract), normaliseObject(tokens));\r\n  var valid = Object.keys(theDiff).length === 0;\r\n  return {\r\n    valid,\r\n    diffString: valid ? '' : renderDiff(contract, theDiff)\r\n  };\r\n}\r\nfunction diffLine(value, nesting, type) {\r\n  var whitespace = [...Array(nesting).keys()].map(() => '  ').join('');\r\n  var line = \"\".concat(type ? type : ' ').concat(whitespace).concat(value);\r\n  if (process.env.NODE_ENV !== 'test') {\r\n    if (type === '-') {\r\n      return pc.red(line);\r\n    }\r\n    if (type === '+') {\r\n      return pc.green(line);\r\n    }\r\n  }\r\n  return line;\r\n}\r\nfunction renderDiff(orig, diff) {\r\n  var nesting = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n  var lines = [];\r\n  if (nesting === 0) {\r\n    lines.push(diffLine('{', 0));\r\n  }\r\n  var innerNesting = nesting + 1;\r\n  var keys = Object.keys(diff).sort();\r\n  for (var key of keys) {\r\n    var value = diff[key];\r\n    if (!(key in orig)) {\r\n      lines.push(diffLine(\"\".concat(key, \": ...,\"), innerNesting, '+'));\r\n    } else if (typeof value === 'object') {\r\n      lines.push(diffLine(\"\".concat(key, \": {\"), innerNesting));\r\n      lines.push(renderDiff(orig[key], diff[key], innerNesting));\r\n      lines.push(diffLine('}', innerNesting));\r\n    } else {\r\n      lines.push(diffLine(\"\".concat(key, \": ...,\"), innerNesting, '-'));\r\n    }\r\n  }\r\n  if (nesting === 0) {\r\n    lines.push(diffLine('}', 0));\r\n  }\r\n  return lines.join('\\n');\r\n}\r\n\r\nvar buildPropertyRule = _ref => {\r\n  var {\r\n    syntax,\r\n    inherits,\r\n    initialValue\r\n  } = _ref;\r\n  return _objectSpread2({\r\n    syntax: \"\\\"\".concat(Array.isArray(syntax) ? syntax.join(' | ') : syntax, \"\\\"\"),\r\n    inherits: inherits ? 'true' : 'false'\r\n  }, initialValue != null ? {\r\n    initialValue\r\n  } : {});\r\n};\r\nfunction createVar(debugIdOrDeclaration, debugId) {\r\n  var cssVarName = cssesc(generateIdentifier({\r\n    debugId: typeof debugIdOrDeclaration === 'string' ? debugIdOrDeclaration : debugId,\r\n    debugFileName: false\r\n  }), {\r\n    isIdentifier: true\r\n  });\r\n  if (debugIdOrDeclaration && typeof debugIdOrDeclaration === 'object') {\r\n    appendCss({\r\n      type: 'property',\r\n      name: \"--\".concat(cssVarName),\r\n      rule: buildPropertyRule(debugIdOrDeclaration)\r\n    }, getFileScope());\r\n  }\r\n  return \"var(--\".concat(cssVarName, \")\");\r\n}\r\nfunction createGlobalVar(name, declaration) {\r\n  if (declaration && typeof declaration === 'object') {\r\n    appendCss({\r\n      type: 'property',\r\n      name: \"--\".concat(name),\r\n      rule: buildPropertyRule(declaration)\r\n    }, getFileScope());\r\n  }\r\n  return \"var(--\".concat(name, \")\");\r\n}\r\nfunction assertVarName(value) {\r\n  if (typeof value !== 'string' || !/^var\\(--.*\\)$/.test(value)) {\r\n    throw new Error(\"Invalid variable name: \".concat(value));\r\n  }\r\n}\r\nfunction fallbackVar() {\r\n  var finalValue = '';\r\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\r\n    values[_key] = arguments[_key];\r\n  }\r\n  values.reverse().forEach(value => {\r\n    if (finalValue === '') {\r\n      finalValue = String(value);\r\n    } else {\r\n      assertVarName(value);\r\n      finalValue = value.replace(/\\)$/, \", \".concat(finalValue, \")\"));\r\n    }\r\n  });\r\n  return finalValue;\r\n}\r\nfunction assignVars(varContract, tokens) {\r\n  var varSetters = {};\r\n  var {\r\n    valid,\r\n    diffString\r\n  } = validateContract(varContract, tokens);\r\n  if (!valid) {\r\n    throw new Error(\"Tokens don't match contract.\\n\".concat(diffString));\r\n  }\r\n  walkObject(tokens, (value, path) => {\r\n    varSetters[get(varContract, path)] = String(value);\r\n  });\r\n  return varSetters;\r\n}\r\nfunction createThemeContract(tokens) {\r\n  return walkObject(tokens, (_value, path) => {\r\n    return createVar(path.join('-'));\r\n  });\r\n}\r\nfunction createGlobalThemeContract(tokens, mapFn) {\r\n  return walkObject(tokens, (value, path) => {\r\n    var rawVarName = typeof mapFn === 'function' ? mapFn(value, path) : value;\r\n    var varName = typeof rawVarName === 'string' ? rawVarName.replace(/^\\-\\-/, '') : null;\r\n    if (typeof varName !== 'string' || varName !== cssesc(varName, {\r\n      isIdentifier: true\r\n    })) {\r\n      throw new Error(\"Invalid variable name for \\\"\".concat(path.join('.'), \"\\\": \").concat(varName));\r\n    }\r\n    return \"var(--\".concat(varName, \")\");\r\n  });\r\n}\r\n\r\nvar _excluded = [\"@layer\"];\r\nfunction createGlobalTheme(selector, arg2, arg3) {\r\n  var themeContractProvided = Boolean(arg3);\r\n  var tokenArg = themeContractProvided ? arg3 : arg2;\r\n  var {\r\n    layerName,\r\n    tokens\r\n  } = extractLayerFromTokens(tokenArg);\r\n  var themeContract = themeContractProvided ? arg2 : createThemeContract(tokens);\r\n  var rule = {\r\n    vars: assignVars(themeContract, tokens)\r\n  };\r\n  if (layerName) {\r\n    rule = {\r\n      '@layer': {\r\n        [layerName]: rule\r\n      }\r\n    };\r\n  }\r\n  appendCss({\r\n    type: 'global',\r\n    selector: selector,\r\n    rule\r\n  }, getFileScope());\r\n  if (!themeContractProvided) {\r\n    return themeContract;\r\n  }\r\n}\r\nfunction createTheme(arg1, arg2, arg3) {\r\n  var themeClassName = generateIdentifier(typeof arg2 === 'object' ? arg3 : arg2);\r\n  registerClassName(themeClassName, getFileScope());\r\n  var vars = typeof arg2 === 'object' ? createGlobalTheme(themeClassName, arg1, arg2) : createGlobalTheme(themeClassName, arg1);\r\n  return vars ? [themeClassName, vars] : themeClassName;\r\n}\r\nfunction extractLayerFromTokens(tokens) {\r\n  if ('@layer' in tokens) {\r\n    var {\r\n        '@layer': layerName\r\n      } = tokens,\r\n      rest = _objectWithoutProperties(tokens, _excluded);\r\n    return {\r\n      layerName,\r\n      tokens: rest\r\n    };\r\n  }\r\n  return {\r\n    tokens\r\n  };\r\n}\r\n\r\nvar _templateObject;\r\nfunction composedStyle(rules, debugId) {\r\n  var className = generateIdentifier(debugId);\r\n  registerClassName(className, getFileScope());\r\n  var classList = [];\r\n  var styleRules = [];\r\n  for (var rule of rules) {\r\n    if (typeof rule === 'string') {\r\n      classList.push(rule);\r\n    } else {\r\n      styleRules.push(rule);\r\n    }\r\n  }\r\n  var result = className;\r\n  if (classList.length > 0) {\r\n    result = \"\".concat(className, \" \").concat(dudupeAndJoinClassList(classList));\r\n    registerComposition({\r\n      identifier: className,\r\n      classList: result\r\n    }, getFileScope());\r\n    if (styleRules.length > 0) {\r\n      // If there are styles attached to this composition then it is\r\n      // always used and should never be removed\r\n      markCompositionUsed(className);\r\n    }\r\n  }\r\n  if (styleRules.length > 0) {\r\n    var _rule = deepmerge.all(styleRules, {\r\n      // Replace arrays rather than merging\r\n      arrayMerge: (_, sourceArray) => sourceArray\r\n    });\r\n    appendCss({\r\n      type: 'local',\r\n      selector: className,\r\n      rule: _rule\r\n    }, getFileScope());\r\n  }\r\n  return result;\r\n}\r\nfunction style(rule, debugId) {\r\n  if (Array.isArray(rule)) {\r\n    return composedStyle(rule, debugId);\r\n  }\r\n  var className = generateIdentifier(debugId);\r\n  registerClassName(className, getFileScope());\r\n  appendCss({\r\n    type: 'local',\r\n    selector: className,\r\n    rule\r\n  }, getFileScope());\r\n  return className;\r\n}\r\n\r\n/**\r\n * @deprecated The same functionality is now provided by the 'style' function when you pass it an array\r\n */\r\nfunction composeStyles() {\r\n  var compose = hasFileScope() ? composedStyle : dudupeAndJoinClassList;\r\n  for (var _len = arguments.length, classNames = new Array(_len), _key = 0; _key < _len; _key++) {\r\n    classNames[_key] = arguments[_key];\r\n  }\r\n  return compose(classNames);\r\n}\r\nfunction globalStyle(selector, rule) {\r\n  appendCss({\r\n    type: 'global',\r\n    selector,\r\n    rule\r\n  }, getFileScope());\r\n}\r\nfunction fontFace(rule, debugId) {\r\n  var fontFamily = \"\\\"\".concat(cssesc(generateIdentifier(debugId), {\r\n    quotes: 'double'\r\n  }), \"\\\"\");\r\n  var rules = Array.isArray(rule) ? rule : [rule];\r\n  for (var singleRule of rules) {\r\n    if ('fontFamily' in singleRule) {\r\n      throw new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      This function creates and returns a hashed font-family name, so the \\\"fontFamily\\\" property should not be provided.\\n    \\n      If you'd like to define a globally scoped custom font, you can use the \\\"globalFontFace\\\" function instead.\\n    \"]))));\r\n    }\r\n    appendCss({\r\n      type: 'fontFace',\r\n      rule: _objectSpread2(_objectSpread2({}, singleRule), {}, {\r\n        fontFamily\r\n      })\r\n    }, getFileScope());\r\n  }\r\n  return fontFamily;\r\n}\r\nfunction globalFontFace(fontFamily, rule) {\r\n  var rules = Array.isArray(rule) ? rule : [rule];\r\n  for (var singleRule of rules) {\r\n    appendCss({\r\n      type: 'fontFace',\r\n      rule: _objectSpread2(_objectSpread2({}, singleRule), {}, {\r\n        fontFamily\r\n      })\r\n    }, getFileScope());\r\n  }\r\n}\r\nfunction keyframes(rule, debugId) {\r\n  var name = cssesc(generateIdentifier(debugId), {\r\n    isIdentifier: true\r\n  });\r\n  appendCss({\r\n    type: 'keyframes',\r\n    name,\r\n    rule\r\n  }, getFileScope());\r\n  return name;\r\n}\r\nfunction globalKeyframes(name, rule) {\r\n  appendCss({\r\n    type: 'keyframes',\r\n    name,\r\n    rule\r\n  }, getFileScope());\r\n}\r\nfunction styleVariants() {\r\n  if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'function') {\r\n    var _data = arguments.length <= 0 ? undefined : arguments[0];\r\n    var _mapData = arguments.length <= 1 ? undefined : arguments[1];\r\n    var _debugId = arguments.length <= 2 ? undefined : arguments[2];\r\n    var _classMap = {};\r\n    for (var _key2 in _data) {\r\n      _classMap[_key2] = style(_mapData(_data[_key2], _key2), _debugId ? \"\".concat(_debugId, \"_\").concat(_key2) : _key2);\r\n    }\r\n    return _classMap;\r\n  }\r\n  var styleMap = arguments.length <= 0 ? undefined : arguments[0];\r\n  var debugId = arguments.length <= 1 ? undefined : arguments[1];\r\n  var classMap = {};\r\n  for (var _key3 in styleMap) {\r\n    classMap[_key3] = style(styleMap[_key3], debugId ? \"\".concat(debugId, \"_\").concat(_key3) : _key3);\r\n  }\r\n  return classMap;\r\n}\r\n\r\n// createContainer is used for local scoping of CSS containers\r\n// For now it is mostly just an alias of generateIdentifier\r\nvar createContainer = debugId => generateIdentifier(debugId);\r\n\r\n// createViewTransition is used for locally scoping CSS view transitions\r\n// For now it is mostly just an alias of generateIdentifier\r\nvar createViewTransition = debugId => generateIdentifier(debugId);\r\n\r\nvar defaultLayerOptions = {};\r\nvar merge = (obj1, obj2) => _objectSpread2(_objectSpread2({}, obj1), obj2);\r\nvar getLayerArgs = function getLayerArgs() {\r\n  var options = defaultLayerOptions;\r\n  var debugId = arguments.length <= 0 ? undefined : arguments[0];\r\n  if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'object') {\r\n    options = merge(defaultLayerOptions, arguments.length <= 0 ? undefined : arguments[0]);\r\n    debugId = arguments.length <= 1 ? undefined : arguments[1];\r\n  }\r\n  return [options, debugId];\r\n};\r\nfunction layer() {\r\n  var [options, debugId] = getLayerArgs(...arguments);\r\n  var name = generateIdentifier(debugId);\r\n  if (options.parent) {\r\n    name = \"\".concat(options.parent, \".\").concat(name);\r\n  }\r\n  appendCss({\r\n    type: 'layer',\r\n    name\r\n  }, getFileScope());\r\n  return name;\r\n}\r\nfunction globalLayer() {\r\n  var [options, name] = getLayerArgs(...arguments);\r\n  if (options.parent) {\r\n    name = \"\".concat(options.parent, \".\").concat(name);\r\n  }\r\n  appendCss({\r\n    type: 'layer',\r\n    name\r\n  }, getFileScope());\r\n  return name;\r\n}\r\n\r\nexport { assertVarName, assignVars, composeStyles, createContainer, createGlobalTheme, createGlobalThemeContract, createGlobalVar, createTheme, createThemeContract, createVar, createViewTransition, fallbackVar, fontFace, generateIdentifier, globalFontFace, globalKeyframes, globalLayer, globalStyle, keyframes, layer, style, styleVariants };\r\n"],
  "mappings": "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",
  "names": ["React", "useRef", "useEffect", "useMemo", "useDebugValue", "object", "hasOwnProperty", "merge", "cssesc", "string", "isMergeableObject", "deepmerge", "object", "array", "import_react", "wallets", "StateType", "__classPrivateFieldGet", "__classPrivateFieldSet", "all", "Map", "on", "type", "handler", "handlers", "get", "push", "set", "off", "splice", "indexOf", "emit", "evt", "slice", "map", "_isSendCalled", "_id", "__privateAdd", "__privateMethod", "__privateGet", "__privateSet", "wallets", "import_react", "listeners", "ReactExports", "useSyncExternalStoreExports", "import_react", "import_jsx_runtime", "Slot", "props", "Slottable", "Fragment", "import_react", "import_jsx_runtime", "import_react", "r", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_jsx_runtime", "import_react", "import_react", "import_jsx_runtime", "import_jsx_runtime", "import_react", "import_react", "import_react", "title", "title", "object", "_0n", "_1n", "_0n", "number", "_1n", "r", "Fp", "Fp", "_1n", "_0n", "_1n", "Fp", "bitLength", "_1n", "_0n", "_1n", "window", "wbits", "_0n", "Fp", "Fn", "_0n", "_1n", "_2n", "_8n", "Fp", "Fn", "uvRatio", "title", "p", "adjustScalarBytes", "sign", "r", "verify", "utils", "eddsa", "createHasher", "_0n", "_1n", "_2n", "adjustScalarBytes", "utils", "_0n", "_1n", "_2n", "_3n", "_5n", "_8n", "_3n", "_8n", "_2n", "_5n", "_1n", "createHasher", "number", "mod", "r", "_0n", "_2n", "_0n", "_1n", "_3n", "_4n", "Fp", "Fn", "toBytes", "title", "endo", "Fp", "_0n", "_1n", "_2n", "tv5", "_4n", "_3n", "c1", "c2", "Fn", "number", "title", "r", "utils", "sign", "verify", "ecdsa", "createHasher", "hashToCurve", "encodeToCurve", "sha256", "digest", "sha256", "AddressTransactionRelationship", "ConsensusObjectCancellationReason", "ExecutionStatus", "MoveAbility", "MoveVisibility", "OwnerKind", "RegulatedState", "SupplyState", "TransactionKindInput", "ZkLoginIntentScope", "__privateGet", "__privateGet", "digest", "sha512", "sha512", "encoder", "import_react", "import_react", "parse", "get", "get", "value", "varName", "get", "r", "markCompositionUsed", "SelectorType", "AttributeAction", "parse", "ownKeys", "object", "_defineProperty", "dedent", "__assign", "r", "weirdNewlines", "nullOrSurrogates", "commentRegex", "lexicalAnalysis", "str", "index", "replace", "tokens", "length", "code", "charCodeAt", "code_1", "push", "type", "result", "consumeString", "lastIndex", "value", "nextCode", "flag", "wouldStartIdentifier", "consumeIdentUnsafe", "toLowerCase", "plusNumeric", "consumeNumeric", "tokenTuple", "unit", "minusNumeric", "nextNextCode", "consumeIdentLike", "nextNextNextCode", "consumeIdent", "consumeEscape", "slice", "firstCode", "charCodes", "i", "String", "fromCharCode", "apply", "charCode", "hexCharCodes", "min", "Math", "code_2", "code_3", "parseInt", "numberResult", "consumeNumber", "numberEndIndex", "numberValue", "numberFlag", "identResult", "identEndIndex", "identValue", "numberChars", "nextNextIsDigit", "numberString", "parseFloat", "Number", "isNaN", "identChars", "code_4", "code_5", "consumeUrl", "urlChars", "hasFinishedWord", "offset", "result_1", "lastUrlIndex", "value_1", "simplifyAST", "ast", "simplifyMediaQuery", "mediaQuery", "mediaCondition", "simplifyMediaCondition", "operator", "children", "mediaPrefix", "mediaType", "unsimplifiedChild", "child", "spliceArgs", "i_1", "splice", "createError", "message", "err", "Error", "trim", "concat", "toAST", "toUnflattenedAST", "tokenList", "startIndex", "endIndex", "token", "syntacticAnalysis", "removeWhitespace", "newTokenList", "before", "wsAfter", "wsBefore", "mediaQueryList", "mediaQueries", "map", "mediaQueryTokens", "tokenizeMediaQuery", "nonNullMediaQueryTokens", "mediaQueryTokens_1_1", "mediaQueryToken", "firstToken", "tokenizeMediaCondition", "firstIndex", "firstNonUnaryToken", "tokensWithParens", "secondNonUnaryToken", "mayContainOr", "previousOperator", "endIndexOfFirstFeature", "maxDepth", "count", "max", "featureTokens", "tokenizeMediaFeature", "nextToken", "siblings", "rawTokens", "a", "b", "c", "numerator", "denominator", "context", "feature", "valueToken", "prefix", "range", "tokenizeRange", "featureName", "leftToken", "leftOp", "rightOp", "rightToken", "hasLeft", "tokenIndexAfterFirstOp", "_a", "_b", "tokenAfterFirstOp", "secondOpToken", "followingToken", "tokenAfterSecondOp", "_c", "_d", "validRange", "lt", "rt", "ltNoWS", "rtNoWS", "toPrimitive", "r", "toPropertyKey", "_defineProperty", "ownKeys", "_objectSpread2", "string", "cssesc", "parse", "_loop", "dependents", "_objectSpread2", "localClassNames", "composedClassLists", "content", "identifier", "rule", "query", "_loop2", "key", "v", "isEmpty", "v", "bf", "import_cssesc", "cssesc", "import_jsx_runtime", "__commonJS", "wallets", "jsx", "__toESM", "forwardRef", "Slot", "clsx", "_7a468", "variant", "container", "title", "jsxs", "content", "walletIcon", "open", "createContext", "_name", "createClient", "useState", "useContext", "useMemo", "connectionStatus", "useMutation", "Trigger", "useQuery", "wallet", "useLayoutEffect", "_on", "_connect", "_signPersonalMessage", "_signTransactionBlock", "_signTransaction", "_signAndExecuteTransaction", "getWallets", "__privateAdd", "digest", "__privateGet", "useEffect", "get", "toBase64", "signTransaction"]
}
